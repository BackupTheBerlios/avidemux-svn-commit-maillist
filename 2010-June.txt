From mean at mail.berlios.de  Tue Jun  1 20:15:10 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Jun 2010 20:15:10 +0200
Subject: [Avidemux-svn-commit] r6279 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py
Message-ID: <201006011815.o51IFAca009823@sheep.berlios.de>

Author: mean
Date: 2010-06-01 20:15:09 +0200 (Tue, 01 Jun 2010)
New Revision: 6279

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
Log:
[pyClass] Add help

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-05-31 20:14:23 UTC (rev 6278)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:09 UTC (rev 6279)
@@ -129,6 +129,26 @@
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
 }
+static tp_obj zzpy_pyAdm_help(tp_vm *vm)
+{
+jsLog("loadVideo");
+jsLog("clearSegments");
+jsLog("appendVideo");
+jsLog("addSegment");
+jsLog("setPostProc");
+jsLog("getWidth");
+jsLog("getHeight");
+jsLog("getFps1000");
+jsLog("getVideoCodec");
+jsLog("audioReset");
+jsLog("audioMixer");
+jsLog("clearVideoFilters");
+jsLog("videoCodec");
+jsLog("audioCodec");
+jsLog("setContainer");
+jsLog("addVideoFilter");
+return tp_None;
+}
 tp_obj initClasspyAdm(tp_vm *vm)
 {
  tp_obj myClass=tp_class(vm);
@@ -149,5 +169,6 @@
  tp_set(vm,myClass,tp_string("audioCodec"),tp_fnc(vm,zzpy_audioCodec));
  tp_set(vm,myClass,tp_string("setContainer"),tp_fnc(vm,zzpy_setContainer));
  tp_set(vm,myClass,tp_string("addVideoFilter"),tp_fnc(vm,zzpy_addVideoFilter));
+ tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy_pyAdm_help));
  return myClass;
 }



From mean at mail.berlios.de  Tue Jun  1 20:15:12 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Jun 2010 20:15:12 +0200
Subject: [Avidemux-svn-commit] r6280 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2/py cmake
Message-ID: <201006011815.o51IFBa4009833@sheep.berlios.de>

Author: mean
Date: 2010-06-01 20:15:11 +0200 (Tue, 01 Jun 2010)
New Revision: 6280

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[pyClass] Simplify

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:09 UTC (rev 6279)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:11 UTC (rev 6280)
@@ -1,8 +1,8 @@
 #              cname:pyname
 /* CLASS */ pyAdm : void
-/* FUNC */ int scriptLoadVideo:loadVideo          (const char * ) 
+/* FUNC */ int scriptLoadVideo:loadVideo          (str ) 
 /* FUNC */ int scriptClearSegments:clearSegments  (void) 
-/* FUNC */ int scriptAppendVideo:appendVideo      (const char * ) 
+/* FUNC */ int scriptAppendVideo:appendVideo      (str ) 
 /* FUNC */ int scriptAddSegment:addSegment        (int ,float , float ) 
 /* FUNC */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
 /* FUNC */ int scriptGetWidth:getWidth            (void) 
@@ -10,12 +10,12 @@
 /* FUNC */ int scriptGetFps1000:getFps1000        (void) 
 /* FUNC */ str scriptGetVideoCodec:getVideoCodec(void) 
 /* FUNC */ int scriptAudioReset:audioReset        (void) 
-/* FUNC */ int scriptAudioMixer:audioMixer        (const char * ) 
+/* FUNC */ int scriptAudioMixer:audioMixer        (str ) 
 /* FUNC */ int scriptClearVideoFilters:clearVideoFilters   (void) 
 #
 #
 #              cname:pyname
-/* FUNC */ int scriptSetVideoCodec:videoCodec(const char *,couples) 
-/* FUNC */ int scriptSetAudioCodec:audioCodec(const char *,int,couples) 
-/* FUNC */ int scriptSetContainer:setContainer(const char *,couples) 
-/* FUNC */ int scriptAddVideoFilter:addVideoFilter(const char *,couples) 
+/* FUNC */ int scriptSetVideoCodec:videoCodec(str,couples) 
+/* FUNC */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
+/* FUNC */ int scriptSetContainer:setContainer(str,couples) 
+/* FUNC */ int scriptAddVideoFilter:addVideoFilter(str,couples) 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:09 UTC (rev 6279)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:11 UTC (rev 6280)
@@ -1,174 +1,173 @@
 // Generated by admPyClass.pl do not edit !
-//int  scriptLoadVideo <const char * >
-tp_obj zzpy_loadVideo(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-int r=scriptLoadVideo(p0); 
-return tp_number(r);
+// audioCodec -> int scriptSetAudioCodec (str int couples ) 
+static tp_obj zzpy_audioCodec(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  int p1= pm.asDouble();
+  CONFcouple *p2=NULL;
+  pm.makeCouples(&p2);
+  int r=  scriptSetAudioCodec(p0,p1,p2); 
+  return tp_number(r);
 }
-//int  scriptClearSegments <void>
-tp_obj zzpy_clearSegments(TP)
-{
-int r=scriptClearSegments(); 
-return tp_number(r);
+// addVideoFilter -> int scriptAddVideoFilter (str couples ) 
+static tp_obj zzpy_addVideoFilter(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  CONFcouple *p1=NULL;
+  pm.makeCouples(&p1);
+  int r=  scriptAddVideoFilter(p0,p1); 
+  return tp_number(r);
 }
-//int  scriptAppendVideo <const char * >
-tp_obj zzpy_appendVideo(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-int r=scriptAppendVideo(p0); 
-return tp_number(r);
+// loadVideo -> int scriptLoadVideo (str  ) 
+static tp_obj zzpy_loadVideo(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  int r=  scriptLoadVideo(p0); 
+  return tp_number(r);
 }
-//int  scriptAddSegment <int  float   float >
-tp_obj zzpy_addSegment(TP)
-{
-tinyParams pm(tp);
-int p0=pm.asDouble();
-float p1=pm.asFloat();
-float p2=pm.asFloat();
-int r=scriptAddSegment(p0,p1,p2); 
-return tp_number(r);
+// clearSegments -> int scriptClearSegments (void ) 
+static tp_obj zzpy_clearSegments(TP)
+ {
+  int r=  scriptClearSegments(); 
+  return tp_number(r);
 }
-//int  scriptSetPostProc <int  int   int >
-tp_obj zzpy_setPostProc(TP)
-{
-tinyParams pm(tp);
-int p0=pm.asDouble();
-int p1=pm.asDouble();
-int p2=pm.asDouble();
-int r=scriptSetPostProc(p0,p1,p2); 
-return tp_number(r);
+// getHeight -> int scriptGetHeight (void ) 
+static tp_obj zzpy_getHeight(TP)
+ {
+  int r=  scriptGetHeight(); 
+  return tp_number(r);
 }
-//int  scriptGetWidth <void>
-tp_obj zzpy_getWidth(TP)
-{
-int r=scriptGetWidth(); 
-return tp_number(r);
+// setPostProc -> int scriptSetPostProc (int  int   int  ) 
+static tp_obj zzpy_setPostProc(TP)
+ {
+  tinyParams pm(tp);
+  int p0= pm.asDouble();
+  int p1= pm.asDouble();
+  int p2= pm.asDouble();
+  int r=  scriptSetPostProc(p0,p1,p2); 
+  return tp_number(r);
 }
-//int  scriptGetHeight <void>
-tp_obj zzpy_getHeight(TP)
-{
-int r=scriptGetHeight(); 
-return tp_number(r);
+// appendVideo -> int scriptAppendVideo (str  ) 
+static tp_obj zzpy_appendVideo(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  int r=  scriptAppendVideo(p0); 
+  return tp_number(r);
 }
-//int  scriptGetFps1000 <void>
-tp_obj zzpy_getFps1000(TP)
-{
-int r=scriptGetFps1000(); 
-return tp_number(r);
+// audioMixer -> int scriptAudioMixer (str  ) 
+static tp_obj zzpy_audioMixer(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  int r=  scriptAudioMixer(p0); 
+  return tp_number(r);
 }
-//str  scriptGetVideoCodec <void>
-tp_obj zzpy_getVideoCodec(TP)
-{
-char *r=scriptGetVideoCodec(); 
-return tp_string(r);
+// getFps1000 -> int scriptGetFps1000 (void ) 
+static tp_obj zzpy_getFps1000(TP)
+ {
+  int r=  scriptGetFps1000(); 
+  return tp_number(r);
 }
-//int  scriptAudioReset <void>
-tp_obj zzpy_audioReset(TP)
-{
-int r=scriptAudioReset(); 
-return tp_number(r);
+// videoCodec -> int scriptSetVideoCodec (str couples ) 
+static tp_obj zzpy_videoCodec(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  CONFcouple *p1=NULL;
+  pm.makeCouples(&p1);
+  int r=  scriptSetVideoCodec(p0,p1); 
+  return tp_number(r);
 }
-//int  scriptAudioMixer <const char * >
-tp_obj zzpy_audioMixer(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-int r=scriptAudioMixer(p0); 
-return tp_number(r);
+// getWidth -> int scriptGetWidth (void ) 
+static tp_obj zzpy_getWidth(TP)
+ {
+  int r=  scriptGetWidth(); 
+  return tp_number(r);
 }
-//int  scriptClearVideoFilters <void>
-tp_obj zzpy_clearVideoFilters(TP)
-{
-int r=scriptClearVideoFilters(); 
-return tp_number(r);
+// addSegment -> int scriptAddSegment (int  float   float  ) 
+static tp_obj zzpy_addSegment(TP)
+ {
+  tinyParams pm(tp);
+  int p0= pm.asDouble();
+  float p1= pm.asFloat();
+  float p2= pm.asFloat();
+  int r=  scriptAddSegment(p0,p1,p2); 
+  return tp_number(r);
 }
-//int  scriptSetVideoCodec <const char * couples>
-tp_obj zzpy_videoCodec(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-CONFcouple *p1=NULL;
-pm.makeCouples(&p1);
-int r=scriptSetVideoCodec(p0,p1); 
-return tp_number(r);
+// clearVideoFilters -> int scriptClearVideoFilters (void ) 
+static tp_obj zzpy_clearVideoFilters(TP)
+ {
+  int r=  scriptClearVideoFilters(); 
+  return tp_number(r);
 }
-//int  scriptSetAudioCodec <const char * int couples>
-tp_obj zzpy_audioCodec(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-int p1=pm.asDouble();
-CONFcouple *p2=NULL;
-pm.makeCouples(&p2);
-int r=scriptSetAudioCodec(p0,p1,p2); 
-return tp_number(r);
+// setContainer -> int scriptSetContainer (str couples ) 
+static tp_obj zzpy_setContainer(TP)
+ {
+  tinyParams pm(tp);
+  const char *p0= pm.asString();
+  CONFcouple *p1=NULL;
+  pm.makeCouples(&p1);
+  int r=  scriptSetContainer(p0,p1); 
+  return tp_number(r);
 }
-//int  scriptSetContainer <const char * couples>
-tp_obj zzpy_setContainer(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-CONFcouple *p1=NULL;
-pm.makeCouples(&p1);
-int r=scriptSetContainer(p0,p1); 
-return tp_number(r);
+// audioReset -> int scriptAudioReset (void ) 
+static tp_obj zzpy_audioReset(TP)
+ {
+  int r=  scriptAudioReset(); 
+  return tp_number(r);
 }
-//int  scriptAddVideoFilter <const char * couples>
-tp_obj zzpy_addVideoFilter(TP)
-{
-tinyParams pm(tp);
-const char * p0=pm.asString();
-CONFcouple *p1=NULL;
-pm.makeCouples(&p1);
-int r=scriptAddVideoFilter(p0,p1); 
-return tp_number(r);
+// getVideoCodec -> str scriptGetVideoCodec (void ) 
+static tp_obj zzpy_getVideoCodec(TP)
+ {
+  char *r=  scriptGetVideoCodec(); 
+  return tp_string(r);
 }
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
 }
-static tp_obj zzpy_pyAdm_help(tp_vm *vm)
-{
-jsLog("loadVideo");
-jsLog("clearSegments");
-jsLog("appendVideo");
-jsLog("addSegment");
-jsLog("setPostProc");
-jsLog("getWidth");
-jsLog("getHeight");
-jsLog("getFps1000");
-jsLog("getVideoCodec");
-jsLog("audioReset");
-jsLog("audioMixer");
-jsLog("clearVideoFilters");
-jsLog("videoCodec");
-jsLog("audioCodec");
-jsLog("setContainer");
-jsLog("addVideoFilter");
-return tp_None;
-}
+static tp_obj zzpy__pyAdm_help(TP)
+ {
+  jsLog("audioCodec");
+  jsLog("addVideoFilter");
+  jsLog("loadVideo");
+  jsLog("clearSegments");
+  jsLog("getHeight");
+  jsLog("setPostProc");
+  jsLog("appendVideo");
+  jsLog("audioMixer");
+  jsLog("getFps1000");
+  jsLog("videoCodec");
+  jsLog("getWidth");
+  jsLog("addSegment");
+  jsLog("clearVideoFilters");
+  jsLog("setContainer");
+  jsLog("audioReset");
+  jsLog("getVideoCodec");
+};
 tp_obj initClasspyAdm(tp_vm *vm)
 {
- tp_obj myClass=tp_class(vm);
- tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyAdm));
- tp_set(vm,myClass,tp_string("loadVideo"),tp_fnc(vm,zzpy_loadVideo));
- tp_set(vm,myClass,tp_string("clearSegments"),tp_fnc(vm,zzpy_clearSegments));
- tp_set(vm,myClass,tp_string("appendVideo"),tp_fnc(vm,zzpy_appendVideo));
- tp_set(vm,myClass,tp_string("addSegment"),tp_fnc(vm,zzpy_addSegment));
- tp_set(vm,myClass,tp_string("setPostProc"),tp_fnc(vm,zzpy_setPostProc));
- tp_set(vm,myClass,tp_string("getWidth"),tp_fnc(vm,zzpy_getWidth));
- tp_set(vm,myClass,tp_string("getHeight"),tp_fnc(vm,zzpy_getHeight));
- tp_set(vm,myClass,tp_string("getFps1000"),tp_fnc(vm,zzpy_getFps1000));
- tp_set(vm,myClass,tp_string("getVideoCodec"),tp_fnc(vm,zzpy_getVideoCodec));
- tp_set(vm,myClass,tp_string("audioReset"),tp_fnc(vm,zzpy_audioReset));
- tp_set(vm,myClass,tp_string("audioMixer"),tp_fnc(vm,zzpy_audioMixer));
- tp_set(vm,myClass,tp_string("clearVideoFilters"),tp_fnc(vm,zzpy_clearVideoFilters));
- tp_set(vm,myClass,tp_string("videoCodec"),tp_fnc(vm,zzpy_videoCodec));
- tp_set(vm,myClass,tp_string("audioCodec"),tp_fnc(vm,zzpy_audioCodec));
- tp_set(vm,myClass,tp_string("setContainer"),tp_fnc(vm,zzpy_setContainer));
- tp_set(vm,myClass,tp_string("addVideoFilter"),tp_fnc(vm,zzpy_addVideoFilter));
- tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy_pyAdm_help));
- return myClass;
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyAdm));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyAdm_help));
+  tp_set(vm,myClass,tp_string("audioCodec"),tp_fnc(vm,zzpy_audioCodec));
+  tp_set(vm,myClass,tp_string("addVideoFilter"),tp_fnc(vm,zzpy_addVideoFilter));
+  tp_set(vm,myClass,tp_string("loadVideo"),tp_fnc(vm,zzpy_loadVideo));
+  tp_set(vm,myClass,tp_string("clearSegments"),tp_fnc(vm,zzpy_clearSegments));
+  tp_set(vm,myClass,tp_string("getHeight"),tp_fnc(vm,zzpy_getHeight));
+  tp_set(vm,myClass,tp_string("setPostProc"),tp_fnc(vm,zzpy_setPostProc));
+  tp_set(vm,myClass,tp_string("appendVideo"),tp_fnc(vm,zzpy_appendVideo));
+  tp_set(vm,myClass,tp_string("audioMixer"),tp_fnc(vm,zzpy_audioMixer));
+  tp_set(vm,myClass,tp_string("getFps1000"),tp_fnc(vm,zzpy_getFps1000));
+  tp_set(vm,myClass,tp_string("videoCodec"),tp_fnc(vm,zzpy_videoCodec));
+  tp_set(vm,myClass,tp_string("getWidth"),tp_fnc(vm,zzpy_getWidth));
+  tp_set(vm,myClass,tp_string("addSegment"),tp_fnc(vm,zzpy_addSegment));
+  tp_set(vm,myClass,tp_string("clearVideoFilters"),tp_fnc(vm,zzpy_clearVideoFilters));
+  tp_set(vm,myClass,tp_string("setContainer"),tp_fnc(vm,zzpy_setContainer));
+  tp_set(vm,myClass,tp_string("audioReset"),tp_fnc(vm,zzpy_audioReset));
+  tp_set(vm,myClass,tp_string("getVideoCodec"),tp_fnc(vm,zzpy_getVideoCodec));
+  return myClass;
 }

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:09 UTC (rev 6279)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:11 UTC (rev 6280)
@@ -5,6 +5,12 @@
 #                        str = const char *
 #                        couples =  confCouple *c
 #
+#  %funcss{funcName}
+#  %proto{funcName}
+#  %retType{funcName}
+#  %params{funcname}
+#
+#
 
 
 use strict;
@@ -14,24 +20,109 @@
 my $line;
 my $glueprefix="zzpy_";
 my $functionPrefix="";
-my @allFuncs;
 my $className;
 my $cookieName;
 my $staticClass=0;
-my $nbCouples=0;
 #
+my %cFuncs;
+my %rType;
+my %funcParams;
 #
+# processClass
 #
+sub processClass
+{
+        my $proto=shift;
+        
+        $proto=~s%.*\*/%%g;
+        $proto=~s/ //g;
+        #print "**$proto**\n";
+        ($className,$cookieName)=split ":",$proto; 
+        print "Processing class $className (with cookie=$cookieName)\n"; 
+        if($cookieName=~m/void/)
+        {
+                $staticClass=1;
+        }
+        else
+        {
+                $staticClass=0;
+        }
+
+}
+#
+# Process a function declaration and write the glue code to do tinypy<->function call
+#
+sub processFunc
+{
+        my $proto=shift;
+        my $args=$proto;
+        my @params;
+        my $retType=$proto;;
+        my $pyfunc=$proto;;
+        my $cfunc;
+        $args=~s/^.*\(//g;
+        $args=~s/\).*$//g;
+        #print "args => $args\n";
+        @params=split ",",$args;
+        #print "params -> @params\n";
+        # Get return type...
+        $retType=~s/^ *//g;
+        $retType=~s/ .*$//g;
+        # get functioName
+        $pyfunc=~s/ *\(.*$//g;
+        $pyfunc=~s/^.* //g;
+        ($cfunc,$pyfunc)=split ":",$pyfunc;
+        $cFuncs{$pyfunc}=$cfunc;
+        $rType{$pyfunc}=$retType;
+        push @{$funcParams{$pyfunc}}, @params ; 
+        #print " $pyfunc -> @params \n";
+}
+
+#
+# parsefile
+#
+sub parseFile
+{
+my $file=shift;
+open(INPUT,$file) or die("Cannot open $file");
+while($line=<INPUT>)
+{
+        chomp($line);
+        if($line=~m/^#/)
+        {
+        }
+        else
+        {
+            if($line=~m/\* FUNC \*/)
+            {
+                my $proto=$line;
+                # Remove header...
+                # Remove tail
+                $line=~s/^.*\*\///g;
+                $line=~s/\/\/.*$//g;
+                processFunc($line);
+
+            } elsif($line =~m/\/* CLASS \*/)
+                {
+                        processClass($line);
+                }
+        }
+}
+close(INPUT);
+}
+#
+#
+#
 sub genReturn
 {
         my $retType=shift;
         if($retType=~m/int/)
         {
-                return "return tp_number(r);";
+                return "  return tp_number(r);";
         }
         if($retType=~m/float/)
         {
-                return "return tp_number(r);";
+                return "  return tp_number(r);";
         }
         if($retType=~m/void/)
         {
@@ -39,7 +130,7 @@
         }
          if($retType=~m/str/)
         {
-                return "return tp_string(r);";
+                return "  return tp_string(r);";
         }
 return "???? $retType";
 }
@@ -49,7 +140,7 @@
 sub castFrom
 {
         my $type=shift;
-        if($type=~m/^const char/)
+        if($type=~m/^str/)
         {
                 return "pm.asString()";
         }
@@ -73,124 +164,139 @@
         my $num=shift;
         my $type=shift;
         my $r=1;
+        $type=~s/ *$//g;
+        $type=~s/^ *//g;
         if($type=~m/couples/)
         {
-                print OUTPUT "CONFcouple *p".$num."=NULL;\n";
-                print OUTPUT "pm.makeCouples(&p".$num.");\n";
+                print OUTPUT "  CONFcouple *p".$num."=NULL;\n";
+                print OUTPUT "  pm.makeCouples(&p".$num.");\n";
                 $r=0;
         }else
         {
-                print OUTPUT "$type p".$num."=";
-                print OUTPUT castFrom($type);
+                if($type=~m/str/)
+                {
+                        print OUTPUT "  const char *p".$num."=";
+                }else
+                {
+                        print OUTPUT "  $type p".$num."=";
+                }
+                print OUTPUT " ".castFrom($type);
                 print OUTPUT ";\n"; 
         } 
         return $r;
 }
-sub processClass
+#
+# Gen glue
+#
+sub genGlue
 {
-        my $proto=shift;
-        
-        $proto=~s%.*\*/%%g;
-        $proto=~s/ //g;
-        #print "**$proto**\n";
-        ($className,$cookieName)=split ":",$proto; 
-        print "Processing class $className (with cookie=$cookieName)\n"; 
-        if($cookieName=~m/void/)
+        my $i; 
+        my $f;
+        foreach $f(  keys %cFuncs)
         {
-                $staticClass=1;
+                my @params=@{$funcParams{$f}};
+                my $pyFunc=$f;
+                my $cfunc=$cFuncs{$f};
+                my $ret=$rType{$f};
+                my $nb=scalar(@params);
+                
+                print "Generating $pyFunc -> $ret $cfunc (@params ) \n";
+                print OUTPUT "// $pyFunc -> $ret $cfunc (@params ) \n";
+                # start our function
+                print OUTPUT "static tp_obj ".$glueprefix.$f."(TP)\n {\n";
+
+
+                if($params[0]=~m/^void$/)
+                {
+                        $nb=0;
+                }
+                # unmarshall params...
+                if($nb)
+                {
+                         print OUTPUT "  tinyParams pm(tp);\n";
+                         for($i=0;$i<$nb;$i++)
+                         {
+                                 genParam($i,$params[$i]);
+                         }
+                }
+                # call function
+                if(!($ret=~m/^void$/))
+                {
+                        if($ret=~m/str/)
+                        {
+                                print OUTPUT "  char *r=";
+                        }else
+                        {
+                                print OUTPUT "  ".$ret." r=";
+                        }
+                }
+                print OUTPUT "  ".$functionPrefix.$cfunc."(";
+                for($i=0;$i<$nb;$i++)
+                {
+                        if($i)
+                        {
+                                print OUTPUT ",";
+                        }
+                        print OUTPUT "p".$i;
+                } 
+                print OUTPUT "); \n";
+                # return value (if any)
+                print OUTPUT genReturn($ret);
+                print OUTPUT "\n}\n";
+
         }
-        else
-        {
-                $staticClass=0;
-        }
 
 }
 #
-# Process a function declaration and write the glue code to do tinypy<->function call
 #
-sub processFunc
+#
+sub genTables
 {
-        my $proto=shift;
-        my $args=$proto;
-        my @params;
-        my $retType=$proto;;
-        my $func=$proto;;
-        my $cfunc;
-        $args=~s/^.*\(//g;
-        $args=~s/\).*$//g;
-        #print "args => $args\n";
-        @params=split ",",$args;
-        #print "params -> @params\n";
-        # Get return type...
-        $retType=~s/^ *//g;
-        $retType=~s/ .*$//g;
-        # get functioName
-        $func=~s/ *\(.*$//g;
-        $func=~s/^.* //g;
-        ($cfunc,$func)=split ":",$func;
-        print OUTPUT "//$retType  $cfunc <@params>\n";
-        # Write glue code
-        print OUTPUT "tp_obj ".$glueprefix.$func."(TP)\n";
-        push(@allFuncs,$func);
+        # ctor
+        print OUTPUT "static tp_obj myCtor".$className."(tp_vm *vm)\n";
         print OUTPUT "{\n";
-        my $nb=scalar(@params);
-        my $i;
-
-
-        for($i=0;$i<$nb;$i++)
+        if($staticClass==0)
         {
-                $params[$i]=~s/^ *//g; # Remove " " at the beginning if any
-                $params[$i]=~s/ *$//g; # Remove " " at the end if any
+                #todo allocate cookie
         }
-        if($params[0]=~m/^void$/)
-        {
-                $nb=0;
-        }
-        print " New function : $retType,$func,<@params>\n";
-        print HEADER "$retType  $functionPrefix".$func." ($args);\n";
+        print OUTPUT "}\n";
+        # end
+#
+#  Generate help table
+#
+my $helpName=$glueprefix."_".$className."_help";
+my $f;
+my $cfunk;
+my $pyFunc;
+                print OUTPUT "static tp_obj ".$helpName."(TP)\n {\n";
+                foreach $f(  keys %cFuncs)
+                {
+                        print OUTPUT "  jsLog(\"$f\");\n";
+                }
+                print OUTPUT "};\n";
+#
+#  Create the init function that will register our class
+#
+        print OUTPUT "tp_obj initClass".$className."(tp_vm *vm)\n";
+        print OUTPUT "{\n";
+        print OUTPUT "  tp_obj myClass=tp_class(vm);\n";
+        print OUTPUT "  tp_set(vm,myClass,tp_string(\"__init__\"),tp_fnc(vm,myCtor".$className."));\n";
+        print OUTPUT "  tp_set(vm,myClass,tp_string(\"help\"),tp_fnc(vm,$helpName));\n";
         #
-        if($nb)
+        foreach $f(  keys %cFuncs)
         {
-                print OUTPUT "tinyParams pm(tp);\n";
-                #print OUTPUT "if(pm.getNbParams()!=$nb) pm.raise(\"".$func."Bad number of parameters, wanted ".$nb." and got %d\",pm.getNbParams());\n";
-        }
+                my $pyFunc=$f;
+                $cfunk=$glueprefix.$f;
 
-        for($i=0;$i<$nb;$i++)
-        {
-                if(!genParam($i,$params[$i]))  # all params consumed
-                {
-                        #$i=$nb;
-                }
+                print OUTPUT "  tp_set(vm,myClass,tp_string(\"$pyFunc\"),tp_fnc(vm,$cfunk));\n";
         }
-        # Call real function
-        if(!($retType=~m/^void$/))
-        {
-                if($retType=~m/str/)
-                {
-                print OUTPUT "char *r=";
-                }else
-                {
-                print OUTPUT $retType." r=";
-                }
-        }
-        print OUTPUT $functionPrefix.$cfunc."(";
-        for($i=0;$i<$nb;$i++)
-        {
-                if($i)
-                {
-                        print OUTPUT ",";
-                }
-                print OUTPUT "p".$i;
-        } 
-        print OUTPUT "); \n";
-        # Cast r to pyobj
-        print OUTPUT genReturn($retType);
-        print OUTPUT "\n}\n";
-
-
+        print OUTPUT "  return myClass;\n";
+        print OUTPUT "}\n";
 }
 
-
+##################################
+#  Main
+##################################
 if(scalar(@ARGV)!=1)
 {
         die("admPy inputfile\n");
@@ -202,77 +308,21 @@
 $thisfile=~s/^.*\///g;
 $headerFile=$output."_gen.h";
 $output=$output."_gen.cpp";
-print "Processing $input=>$output\n";
-open(OUTPUT,">$output") or die("Cannot open $output");
-print OUTPUT "// Generated by admPyClass.pl do not edit !\n";
 ##
 ## Main Loop
 ##
 # 1 grab all functions
-open(INPUT,$input) or die("Cannot open $input");
-close(INPUT);
-# Process them
-open(INPUT,$input) or die("Cannot open $input");
-open(HEADER,">$headerFile") or die("Cannot open $headerFile");
-while($line=<INPUT>)
-{
-        chomp($line);
-        if($line=~m/^#/)
-        {
-        }
-        else
-        {
-            if($line=~m/\* FUNC \*/)
-            {
-                my $proto=$line;
-                # Remove header...
-                # Remove tail
-                $line=~s/^.*\*\///g;
-                $line=~s/\/\/.*$//g;
-                processFunc($line);
+parseFile($input);
+# 2 gen glue
+open(OUTPUT,">$output") or die("Cannot open $output");
+print OUTPUT "// Generated by admPyClass.pl do not edit !\n";
+genGlue();
+#
+# 3 gen tables (ctor, help, register)
+#
+genTables();
+close(OUTPUT);
 
-            } elsif($line =~m/\/* CLASS \*/)
-                {
-                        processClass($line);
-                }
-        }
-}
-# gen class array
-
-
-# gen class xctor
-        print OUTPUT "static tp_obj myCtor".$className."(tp_vm *vm)\n";
-        print OUTPUT "{\n";
-        if($staticClass==0)
-        {
-                #todo allocate cookie
-        }
-        print OUTPUT "}\n";
-  
+      
 #
-my $nbFunc=scalar(@allFuncs);
-my $i;
-        print OUTPUT "tp_obj initClass".$className."(tp_vm *vm)\n";
-        print OUTPUT "{\n";
-        print OUTPUT " tp_obj myClass=tp_class(vm);\n";
-        print OUTPUT " tp_set(vm,myClass,tp_string(\"__init__\"),tp_fnc(vm,myCtor".$className."));\n";
-        for($i=0;$i<$nbFunc;$i++)
-        {
-                my $line=$allFuncs[$i];
-                #print "Function : $line\n";
-                my $funcName;
-                my $funcProto;
-                $funcName="\"".$line."\"";
-                $funcProto=$glueprefix.$line;
-
-                print OUTPUT " tp_set(vm,myClass,tp_string($funcName),tp_fnc(vm,$funcProto));\n";
-        }
-        print OUTPUT " return myClass;\n";
-        print OUTPUT "}\n";
-        #print OUTPUT "{$funcName,$funcProto},\n";
-
-
-close(INPUT);
-close(OUTPUT);
-close(HEADER);
 print "done\n.";



From mean at mail.berlios.de  Tue Jun  1 20:15:13 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Jun 2010 20:15:13 +0200
Subject: [Avidemux-svn-commit] r6281 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2/py cmake
Message-ID: <201006011815.o51IFDUZ009843@sheep.berlios.de>

Author: mean
Date: 2010-06-01 20:15:13 +0200 (Tue, 01 Jun 2010)
New Revision: 6281

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[py] Better auto-help in generated py glue

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:11 UTC (rev 6280)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:13 UTC (rev 6281)
@@ -131,22 +131,22 @@
 }
 static tp_obj zzpy__pyAdm_help(TP)
  {
-  jsLog("audioCodec");
-  jsLog("addVideoFilter");
-  jsLog("loadVideo");
-  jsLog("clearSegments");
-  jsLog("getHeight");
-  jsLog("setPostProc");
-  jsLog("appendVideo");
-  jsLog("audioMixer");
-  jsLog("getFps1000");
-  jsLog("videoCodec");
-  jsLog("getWidth");
-  jsLog("addSegment");
-  jsLog("clearVideoFilters");
-  jsLog("setContainer");
-  jsLog("audioReset");
-  jsLog("getVideoCodec");
+  jsLog("audioCodec(str,int,couples)");
+  jsLog("addVideoFilter(str,couples)");
+  jsLog("loadVideo(str )");
+  jsLog("clearSegments(void)");
+  jsLog("getHeight(void)");
+  jsLog("setPostProc(int ,int , int )");
+  jsLog("appendVideo(str )");
+  jsLog("audioMixer(str )");
+  jsLog("getFps1000(void)");
+  jsLog("videoCodec(str,couples)");
+  jsLog("getWidth(void)");
+  jsLog("addSegment(int ,float , float )");
+  jsLog("clearVideoFilters(void)");
+  jsLog("setContainer(str,couples)");
+  jsLog("audioReset(void)");
+  jsLog("getVideoCodec(void)");
 };
 tp_obj initClasspyAdm(tp_vm *vm)
 {

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:11 UTC (rev 6280)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:13 UTC (rev 6281)
@@ -271,7 +271,8 @@
                 print OUTPUT "static tp_obj ".$helpName."(TP)\n {\n";
                 foreach $f(  keys %cFuncs)
                 {
-                        print OUTPUT "  jsLog(\"$f\");\n";
+                        my @params=@{$funcParams{$f}};
+                        print OUTPUT "  jsLog(\"$f(".join(",", at params) .")\");\n";
                 }
                 print OUTPUT "};\n";
 #



From mean at mail.berlios.de  Tue Jun  1 20:15:16 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Jun 2010 20:15:16 +0200
Subject: [Avidemux-svn-commit] r6282 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2/py avidemux_core/ADM_coreTinyPy/include
	avidemux_core/ADM_coreTinyPy/src cmake
Message-ID: <201006011815.o51IFGTv009853@sheep.berlios.de>

Author: mean
Date: 2010-06-01 20:15:15 +0200 (Tue, 01 Jun 2010)
New Revision: 6282

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[tinyPy] Variables (does not work), prepare for real class

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:13 UTC (rev 6281)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:15 UTC (rev 6282)
@@ -1,21 +1,27 @@
 #              cname:pyname
 /* CLASS */ pyAdm : void
-/* FUNC */ int scriptLoadVideo:loadVideo          (str ) 
-/* FUNC */ int scriptClearSegments:clearSegments  (void) 
-/* FUNC */ int scriptAppendVideo:appendVideo      (str ) 
-/* FUNC */ int scriptAddSegment:addSegment        (int ,float , float ) 
-/* FUNC */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
-/* FUNC */ int scriptGetWidth:getWidth            (void) 
-/* FUNC */ int scriptGetHeight:getHeight          (void) 
-/* FUNC */ int scriptGetFps1000:getFps1000        (void) 
-/* FUNC */ str scriptGetVideoCodec:getVideoCodec(void) 
-/* FUNC */ int scriptAudioReset:audioReset        (void) 
-/* FUNC */ int scriptAudioMixer:audioMixer        (str ) 
-/* FUNC */ int scriptClearVideoFilters:clearVideoFilters   (void) 
+/* STATICFUNC */ int scriptLoadVideo:loadVideo          (str ) 
+/* STATICFUNC */ int scriptClearSegments:clearSegments  (void) 
+/* STATICFUNC */ int scriptAppendVideo:appendVideo      (str ) 
+/* STATICFUNC */ int scriptAddSegment:addSegment        (int ,float , float ) 
+/* STATICFUNC */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
+/* STATICFUNC */ int scriptGetWidth:getWidth            (void) 
+/* STATICFUNC */ int scriptGetHeight:getHeight          (void) 
+/* STATICFUNC */ int scriptGetFps1000:getFps1000        (void) 
+/* STATICFUNC */ str scriptGetVideoCodec:getVideoCodec(void) 
+/* STATICFUNC */ int scriptAudioReset:audioReset        (void) 
+/* STATICFUNC */ int scriptAudioMixer:audioMixer        (str ) 
+/* STATICFUNC */ int scriptClearVideoFilters:clearVideoFilters   (void) 
 #
 #
 #              cname:pyname
-/* FUNC */ int scriptSetVideoCodec:videoCodec(str,couples) 
-/* FUNC */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
-/* FUNC */ int scriptSetContainer:setContainer(str,couples) 
-/* FUNC */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
+/* STATICFUNC */ int scriptSetVideoCodec:videoCodec(str,couples) 
+/* STATICFUNC */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
+/* STATICFUNC */ int scriptSetContainer:setContainer(str,couples) 
+/* STATICFUNC */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
+#
+#       Variables
+#
+/* STATICVAR */ double markerA:scriptSetMarkerA,scriptGetMarkerA
+/* STATICVAR */ double markerB:scriptSetMarkerB,scriptGetMarkerB
+/* STATICVAR */ int    audioResample:scriptSetResample,scriptGetResample

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:13 UTC (rev 6281)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:15 UTC (rev 6282)
@@ -126,6 +126,52 @@
   char *r=  scriptGetVideoCodec(); 
   return tp_string(r);
 }
+tp_obj zzpy__pyAdm_get(tp_vm *vm)
+{
+  tinyParams pm(vm);
+  void *me=pm.asThis(0);
+  char const *key = pm.asString();
+  if (!strcmp(key, "audioResample"))
+  {
+     return tp_number(scriptGetResample());
+  }
+  if (!strcmp(key, "markerA"))
+  {
+     return tp_number(scriptGetMarkerA());
+  }
+  if (!strcmp(key, "markerB"))
+  {
+     return tp_number(scriptGetMarkerB());
+  }
+  pm.raise("No such attribute %s",key);
+  return tp_None;
+}
+tp_obj zzpy__pyAdm_set(tp_vm *vm)
+{
+  tinyParams pm(vm);
+  void *me=pm.asThis(0);
+  char const *key = pm.asString();
+  if (!strcmp(key, "audioResample"))
+  {
+     int val=pm.asDouble();
+     scriptSetResample(val);
+     return tp_None;
+  }
+  if (!strcmp(key, "markerA"))
+  {
+     double val=pm.asDouble();
+     scriptSetMarkerA(val);
+     return tp_None;
+  }
+  if (!strcmp(key, "markerB"))
+  {
+     double val=pm.asDouble();
+     scriptSetMarkerB(val);
+     return tp_None;
+  }
+  pm.raise("No such attribute %s",key);
+  return tp_None;
+}
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
 }
@@ -152,6 +198,8 @@
 {
   tp_obj myClass=tp_class(vm);
   tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyAdm));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyAdm_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyAdm_get));
   tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyAdm_help));
   tp_set(vm,myClass,tp_string("audioCodec"),tp_fnc(vm,zzpy_audioCodec));
   tp_set(vm,myClass,tp_string("addVideoFilter"),tp_fnc(vm,zzpy_addVideoFilter));

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h	2010-06-01 18:15:13 UTC (rev 6281)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h	2010-06-01 18:15:15 UTC (rev 6282)
@@ -66,6 +66,7 @@
         float  asFloat(void);
         double asDouble(void);
 const   char  *asString(void);
+        void  *asThis(int id);
         int    nbParam(void);
         void   raise(const char *fmt,...);
         const char *typeAsString(int type);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2010-06-01 18:15:13 UTC (rev 6281)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2010-06-01 18:15:15 UTC (rev 6282)
@@ -237,6 +237,21 @@
     return obj.string.val;
 }
 /**
+   \fn  asThis
+*/
+
+void  *tinyParams::asThis(int id)
+{
+    tp_obj self = tp_getraw(tp);
+    tp_obj cdata = tp_get(tp, self, tp_string("cdata"));
+    if(cdata.data.magic!=id) 
+    { 
+        raise("Bad class : Expected %d, got %d\n",id,cdata.data.magic); \
+    }
+    return cdata.data.val;
+}
+
+/**
    \fn  typeAsString
     \brief return the type given as a string
 */

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:13 UTC (rev 6281)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:15 UTC (rev 6282)
@@ -28,6 +28,12 @@
 my %rType;
 my %funcParams;
 #
+# Variables
+my %getVar;
+my %setVar;
+my %typeVars;
+
+#
 # processClass
 #
 sub processClass
@@ -52,7 +58,7 @@
 #
 # Process a function declaration and write the glue code to do tinypy<->function call
 #
-sub processFunc
+sub processStaticFunc
 {
         my $proto=shift;
         my $args=$proto;
@@ -79,6 +85,37 @@
 }
 
 #
+# Process a  STATICVAR :/* STATICVAR */ int    audioResample:scriptSetResample,scriptGetResample
+#
+sub processStaticVar
+{
+        my $proto=shift;
+        my $args=$proto;
+        my $type;
+        my $varname;
+        my @left;
+        my @funcs;
+
+        
+        $args=~s/^.*\*\///g; # Remove comment
+
+        @left=split(":",$args);
+        @funcs=split(",",$left[1]);
+        #print " >> ".$left[0]."<<\n";
+        ($type,$varname)=split(" ",$left[0]);
+
+        $type=~s/ //g;
+        $varname=~s/ //g;
+
+        #print "<$type> * <$varname> * <@funcs> *\n";
+        $typeVars{$varname}=$type;
+        $setVar{$varname}=$funcs[0];
+        $getVar{$varname}=$funcs[1];
+        print "Processing variable $varname of type $type\n";
+}
+
+
+#
 # parsefile
 #
 sub parseFile
@@ -93,21 +130,25 @@
         }
         else
         {
-            if($line=~m/\* FUNC \*/)
+            if($line=~m/\* STATICFUNC \*/)
             {
                 my $proto=$line;
                 # Remove header...
                 # Remove tail
                 $line=~s/^.*\*\///g;
                 $line=~s/\/\/.*$//g;
-                processFunc($line);
+                processStaticFunc($line);
 
             } elsif($line =~m/\/* CLASS \*/)
                 {
                         processClass($line);
                 }
-        }
+                elsif($line =~m/\/* STATICVAR \*/)
+                {
+                        processStaticVar($line);
+                }
 }
+}
 close(INPUT);
 }
 #
@@ -152,6 +193,10 @@
         {
                 return "pm.asFloat()";
         }
+        if($type=~m/^double/)
+        {
+                return "pm.asDouble()";
+        }
         print ">>>>>>>>>> <$type> unknown\n";
         return "????";
 
@@ -190,6 +235,9 @@
 #
 sub genGlue
 {
+#
+#  Generate function call glue
+#
         my $i; 
         my $f;
         foreach $f(  keys %cFuncs)
@@ -214,6 +262,7 @@
                 if($nb)
                 {
                          print OUTPUT "  tinyParams pm(tp);\n";
+                         #print OUTPUT "  void *me=pm.asThis(0);\n";
                          for($i=0;$i<$nb;$i++)
                          {
                                  genParam($i,$params[$i]);
@@ -245,7 +294,52 @@
                 print OUTPUT "\n}\n";
 
         }
+#
+# Generate get/set
+#
+        my $setName=$glueprefix."_".$className."_set";
+        my $getName=$glueprefix."_".$className."_get";
+# Get
+        print OUTPUT "tp_obj ".$getName."(tp_vm *vm)\n";
+        print OUTPUT "{\n";
+        print OUTPUT "  tinyParams pm(vm);\n";
+        print OUTPUT "  void *me=pm.asThis(0);\n";
+        print OUTPUT "  char const *key = pm.asString();\n";
+        my @k=keys %typeVars;
+        my $v;
+        foreach $v (@k)
+        {
+          print OUTPUT "  if (!strcmp(key, \"$v\"))\n";
+          print OUTPUT "  {\n";
+          print OUTPUT "     return tp_number(".$getVar{$v}."());\n";
+          print OUTPUT "  }\n";
+        }
+        print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        print OUTPUT "  return tp_None;\n";
+        print OUTPUT "}\n";
 
+# Set
+        print OUTPUT "tp_obj ".$setName."(tp_vm *vm)\n";
+        print OUTPUT "{\n";
+        print OUTPUT "  tinyParams pm(vm);\n";
+        print OUTPUT "  void *me=pm.asThis(0);\n";
+        print OUTPUT "  char const *key = pm.asString();\n";
+        my @k=keys %typeVars;
+        my $v;
+        foreach $v (@k)
+        {
+          print OUTPUT "  if (!strcmp(key, \"$v\"))\n";
+          print OUTPUT "  {\n";
+          print OUTPUT "     ".$typeVars{$v}." val=".castFrom($typeVars{$v}).";\n";
+          print OUTPUT "     ".$setVar{$v}."(val);\n"; 
+          print OUTPUT "     return tp_None;\n";
+          print OUTPUT "  }\n";
+        }
+    #if (!strcmp(key, "prize")) return tp_number(fruit->prize);
+        print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        print OUTPUT "  return tp_None;\n";
+        print OUTPUT "}\n";
+
 }
 #
 #
@@ -278,10 +372,15 @@
 #
 #  Create the init function that will register our class
 #
+        my $setName=$glueprefix."_".$className."_set";
+        my $getName=$glueprefix."_".$className."_get";
+
         print OUTPUT "tp_obj initClass".$className."(tp_vm *vm)\n";
         print OUTPUT "{\n";
         print OUTPUT "  tp_obj myClass=tp_class(vm);\n";
         print OUTPUT "  tp_set(vm,myClass,tp_string(\"__init__\"),tp_fnc(vm,myCtor".$className."));\n";
+        print OUTPUT "  tp_set(vm,myClass,tp_string(\"__set__\"),tp_fnc(vm,".$setName."));\n";
+        print OUTPUT "  tp_set(vm,myClass,tp_string(\"__get__\"),tp_fnc(vm,".$getName."));\n";
         print OUTPUT "  tp_set(vm,myClass,tp_string(\"help\"),tp_fnc(vm,$helpName));\n";
         #
         foreach $f(  keys %cFuncs)
@@ -294,7 +393,6 @@
         print OUTPUT "  return myClass;\n";
         print OUTPUT "}\n";
 }
-
 ##################################
 #  Main
 ##################################



From mean at mail.berlios.de  Tue Jun  1 20:15:18 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Jun 2010 20:15:18 +0200
Subject: [Avidemux-svn-commit] r6283 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2/py avidemux_core/ADM_coreTinyPy/include
	avidemux_core/ADM_coreTinyPy/src cmake
Message-ID: <201006011815.o51IFIdn009863@sheep.berlios.de>

Author: mean
Date: 2010-06-01 20:15:17 +0200 (Tue, 01 Jun 2010)
New Revision: 6283

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[py] Commit before class change

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-01 18:15:15 UTC (rev 6282)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-01 18:15:17 UTC (rev 6283)
@@ -26,8 +26,11 @@
 #include "ADM_scriptEditor.h"
 #include "ADM_scriptUtils.h"
 
+#undef free
+
 #include "adm_gen.cpp"
 #include "editor_gen.cpp"
+
 extern pyRegisterClass initClasspyAdm;
 extern pyRegisterClass initClasspyEditor;
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:15 UTC (rev 6282)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:17 UTC (rev 6283)
@@ -1,5 +1,6 @@
+#           name    cookie id
+/* CLASS */ pyAdm : void : 100
 #              cname:pyname
-/* CLASS */ pyAdm : void
 /* STATICFUNC */ int scriptLoadVideo:loadVideo          (str ) 
 /* STATICFUNC */ int scriptClearSegments:clearSegments  (void) 
 /* STATICFUNC */ int scriptAppendVideo:appendVideo      (str ) 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:15 UTC (rev 6282)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:17 UTC (rev 6283)
@@ -2,6 +2,7 @@
 // audioCodec -> int scriptSetAudioCodec (str int couples ) 
 static tp_obj zzpy_audioCodec(TP)
  {
+jsLog("audioCodec invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   int p1= pm.asDouble();
@@ -13,6 +14,7 @@
 // addVideoFilter -> int scriptAddVideoFilter (str couples ) 
 static tp_obj zzpy_addVideoFilter(TP)
  {
+jsLog("addVideoFilter invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
@@ -23,6 +25,7 @@
 // loadVideo -> int scriptLoadVideo (str  ) 
 static tp_obj zzpy_loadVideo(TP)
  {
+jsLog("loadVideo invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   int r=  scriptLoadVideo(p0); 
@@ -31,18 +34,21 @@
 // clearSegments -> int scriptClearSegments (void ) 
 static tp_obj zzpy_clearSegments(TP)
  {
+jsLog("clearSegments invoked\n");
   int r=  scriptClearSegments(); 
   return tp_number(r);
 }
 // getHeight -> int scriptGetHeight (void ) 
 static tp_obj zzpy_getHeight(TP)
  {
+jsLog("getHeight invoked\n");
   int r=  scriptGetHeight(); 
   return tp_number(r);
 }
 // setPostProc -> int scriptSetPostProc (int  int   int  ) 
 static tp_obj zzpy_setPostProc(TP)
  {
+jsLog("setPostProc invoked\n");
   tinyParams pm(tp);
   int p0= pm.asDouble();
   int p1= pm.asDouble();
@@ -53,6 +59,7 @@
 // appendVideo -> int scriptAppendVideo (str  ) 
 static tp_obj zzpy_appendVideo(TP)
  {
+jsLog("appendVideo invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   int r=  scriptAppendVideo(p0); 
@@ -61,6 +68,7 @@
 // audioMixer -> int scriptAudioMixer (str  ) 
 static tp_obj zzpy_audioMixer(TP)
  {
+jsLog("audioMixer invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   int r=  scriptAudioMixer(p0); 
@@ -69,12 +77,14 @@
 // getFps1000 -> int scriptGetFps1000 (void ) 
 static tp_obj zzpy_getFps1000(TP)
  {
+jsLog("getFps1000 invoked\n");
   int r=  scriptGetFps1000(); 
   return tp_number(r);
 }
 // videoCodec -> int scriptSetVideoCodec (str couples ) 
 static tp_obj zzpy_videoCodec(TP)
  {
+jsLog("videoCodec invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
@@ -85,12 +95,14 @@
 // getWidth -> int scriptGetWidth (void ) 
 static tp_obj zzpy_getWidth(TP)
  {
+jsLog("getWidth invoked\n");
   int r=  scriptGetWidth(); 
   return tp_number(r);
 }
 // addSegment -> int scriptAddSegment (int  float   float  ) 
 static tp_obj zzpy_addSegment(TP)
  {
+jsLog("addSegment invoked\n");
   tinyParams pm(tp);
   int p0= pm.asDouble();
   float p1= pm.asFloat();
@@ -101,12 +113,14 @@
 // clearVideoFilters -> int scriptClearVideoFilters (void ) 
 static tp_obj zzpy_clearVideoFilters(TP)
  {
+jsLog("clearVideoFilters invoked\n");
   int r=  scriptClearVideoFilters(); 
   return tp_number(r);
 }
 // setContainer -> int scriptSetContainer (str couples ) 
 static tp_obj zzpy_setContainer(TP)
  {
+jsLog("setContainer invoked\n");
   tinyParams pm(tp);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
@@ -117,19 +131,23 @@
 // audioReset -> int scriptAudioReset (void ) 
 static tp_obj zzpy_audioReset(TP)
  {
+jsLog("audioReset invoked\n");
   int r=  scriptAudioReset(); 
   return tp_number(r);
 }
 // getVideoCodec -> str scriptGetVideoCodec (void ) 
 static tp_obj zzpy_getVideoCodec(TP)
  {
+jsLog("getVideoCodec invoked\n");
   char *r=  scriptGetVideoCodec(); 
   return tp_string(r);
 }
 tp_obj zzpy__pyAdm_get(tp_vm *vm)
 {
+jsLog("zzpy__pyAdm_get invoked\n");
+  tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=pm.asThis(0);
+  void *me=pm.asThis(&self,100);
   char const *key = pm.asString();
   if (!strcmp(key, "audioResample"))
   {
@@ -143,13 +161,14 @@
   {
      return tp_number(scriptGetMarkerB());
   }
-  pm.raise("No such attribute %s",key);
-  return tp_None;
+  return tp_get(vm,self,tp_string(key));
 }
 tp_obj zzpy__pyAdm_set(tp_vm *vm)
 {
+jsLog("zzpy__pyAdm_set invoked\n");
+  tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=pm.asThis(0);
+  void *me=pm.asThis(&self,100);
   char const *key = pm.asString();
   if (!strcmp(key, "audioResample"))
   {
@@ -169,11 +188,21 @@
      scriptSetMarkerB(val);
      return tp_None;
   }
-  pm.raise("No such attribute %s",key);
   return tp_None;
 }
+static void myDtorpyAdm(tp_vm *vm,tp_obj self)
+{
+jsLog("myDtorpyAdm invoked\n");
+}
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
+jsLog("ctor of pyAdm invoked\n");
+  tp_obj self = tp_getraw(vm);
+  void *me=NULL;
+  tp_obj cdata = tp_data(vm, 100, me);
+  cdata.data.info->xfree = myDtorpyAdm;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
 }
 static tp_obj zzpy__pyAdm_help(TP)
  {

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h	2010-06-01 18:15:15 UTC (rev 6282)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h	2010-06-01 18:15:17 UTC (rev 6283)
@@ -66,7 +66,7 @@
         float  asFloat(void);
         double asDouble(void);
 const   char  *asString(void);
-        void  *asThis(int id);
+        void  *asThis(tp_obj *self,int id);
         int    nbParam(void);
         void   raise(const char *fmt,...);
         const char *typeAsString(int type);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2010-06-01 18:15:15 UTC (rev 6282)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2010-06-01 18:15:17 UTC (rev 6283)
@@ -240,10 +240,9 @@
    \fn  asThis
 */
 
-void  *tinyParams::asThis(int id)
+void  *tinyParams::asThis(tp_obj *self,int id)
 {
-    tp_obj self = tp_getraw(tp);
-    tp_obj cdata = tp_get(tp, self, tp_string("cdata"));
+    tp_obj cdata = tp_get(tp, *self, tp_string("cdata"));
     if(cdata.data.magic!=id) 
     { 
         raise("Bad class : Expected %d, got %d\n",id,cdata.data.magic); \

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:15 UTC (rev 6282)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:17 UTC (rev 6283)
@@ -22,6 +22,7 @@
 my $functionPrefix="";
 my $className;
 my $cookieName;
+my $cookieId;
 my $staticClass=0;
 #
 my %cFuncs;
@@ -33,6 +34,13 @@
 my %setVar;
 my %typeVars;
 
+sub debug
+{
+        my $str=shift;
+        chomp($str);
+        print OUTPUT "jsLog(\"$str\\n\");\n";
+
+}
 #
 # processClass
 #
@@ -43,8 +51,8 @@
         $proto=~s%.*\*/%%g;
         $proto=~s/ //g;
         #print "**$proto**\n";
-        ($className,$cookieName)=split ":",$proto; 
-        print "Processing class $className (with cookie=$cookieName)\n"; 
+        ($className,$cookieName,$cookieId)=split ":",$proto; 
+        print "Processing class $className (with cookie=$cookieName,id=$cookieId)\n"; 
         if($cookieName=~m/void/)
         {
                 $staticClass=1;
@@ -253,7 +261,7 @@
                 # start our function
                 print OUTPUT "static tp_obj ".$glueprefix.$f."(TP)\n {\n";
 
-
+                debug("$f invoked\n");
                 if($params[0]=~m/^void$/)
                 {
                         $nb=0;
@@ -302,8 +310,10 @@
 # Get
         print OUTPUT "tp_obj ".$getName."(tp_vm *vm)\n";
         print OUTPUT "{\n";
+        debug("$getName invoked\n");
+        print OUTPUT "  tp_obj self=tp_getraw( vm);\n";
         print OUTPUT "  tinyParams pm(vm);\n";
-        print OUTPUT "  void *me=pm.asThis(0);\n";
+        print OUTPUT "  void *me=pm.asThis(&self,$cookieId);\n";
         print OUTPUT "  char const *key = pm.asString();\n";
         my @k=keys %typeVars;
         my $v;
@@ -314,15 +324,17 @@
           print OUTPUT "     return tp_number(".$getVar{$v}."());\n";
           print OUTPUT "  }\n";
         }
-        print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
-        print OUTPUT "  return tp_None;\n";
+        #print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        print OUTPUT "  return tp_get(vm,self,tp_string(key));\n";
         print OUTPUT "}\n";
 
 # Set
         print OUTPUT "tp_obj ".$setName."(tp_vm *vm)\n";
         print OUTPUT "{\n";
+        debug("$setName invoked\n");
+        print OUTPUT "  tp_obj self=tp_getraw( vm);\n";
         print OUTPUT "  tinyParams pm(vm);\n";
-        print OUTPUT "  void *me=pm.asThis(0);\n";
+        print OUTPUT "  void *me=pm.asThis(&self,$cookieId);\n";
         print OUTPUT "  char const *key = pm.asString();\n";
         my @k=keys %typeVars;
         my $v;
@@ -336,7 +348,7 @@
           print OUTPUT "  }\n";
         }
     #if (!strcmp(key, "prize")) return tp_number(fruit->prize);
-        print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        #print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
         print OUTPUT "  return tp_None;\n";
         print OUTPUT "}\n";
 
@@ -346,13 +358,38 @@
 #
 sub genTables
 {
+   my $dtor=  "myDtor".$className;
+# Dtor
+        print OUTPUT "static void ".$dtor."(tp_vm *vm,tp_obj self)\n";
+        print OUTPUT "{\n";
+        debug("$dtor invoked\n");
+        if($staticClass==1)
+        {
+        }else
+        {
+                #free(self.data.val);
+        }
+        print OUTPUT "}\n";
+        # end
+#
+# Ctor
+#
         # ctor
         print OUTPUT "static tp_obj myCtor".$className."(tp_vm *vm)\n";
         print OUTPUT "{\n";
-        if($staticClass==0)
+        debug("ctor of $className invoked\n");
+        print OUTPUT "  tp_obj self = tp_getraw(vm);\n";
+        if($staticClass==1)
         {
-                #todo allocate cookie
+                print OUTPUT "  void *me=NULL;\n";
+        }else
+        {
+
         }
+        print OUTPUT "  tp_obj cdata = tp_data(vm, $cookieId, me);\n";
+        print OUTPUT "  cdata.data.info->xfree = $dtor;\n";
+        print OUTPUT "  tp_set(vm, self, tp_string(\"cdata\"), cdata);\n";
+        print OUTPUT "  return tp_None;\n";
         print OUTPUT "}\n";
         # end
 #



From mean at mail.berlios.de  Tue Jun  1 20:15:19 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 1 Jun 2010 20:15:19 +0200
Subject: [Avidemux-svn-commit] r6284 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_editor avidemux/common/ADM_script2/py cmake
Message-ID: <201006011815.o51IFJeb009873@sheep.berlios.de>

Author: mean
Date: 2010-06-01 20:15:19 +0200 (Tue, 01 Jun 2010)
New Revision: 6284

Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyFunc
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[py] Proper binding of method object

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp	2010-06-01 18:15:19 UTC (rev 6284)
@@ -81,7 +81,7 @@
   qfprintf (fd, "#\n");
   qfprintf (fd, "#--automatically built--\n");
   qfprintf (fd, "#--Project: %s\n\n",name);
-
+  qfprintf (fd,"adm=Avidemux()\n");
   qfprintf (fd,"#** Video **\n");
   qfprintf (fd,"# %02ld videos source \n", _segments.getNbRefVideos());
  

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-01 18:15:19 UTC (rev 6284)
@@ -47,8 +47,7 @@
 static bool initPy(tinyPy *py)
 {
     py->init();
-    //py->registerFuncs("adm",adm_functions);
-    py->registerClass("adm",initClasspyAdm);
+    py->registerClass("Avidemux",initClasspyAdm);
     py->registerClass("Editor",initClasspyEditor);
     tinyPy::registerLogger(pyLogger);
     return true;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-01 18:15:19 UTC (rev 6284)
@@ -1,28 +1,28 @@
 #           name    cookie id
 /* CLASS */ pyAdm : void : 100
 #              cname:pyname
-/* STATICFUNC */ int scriptLoadVideo:loadVideo          (str ) 
-/* STATICFUNC */ int scriptClearSegments:clearSegments  (void) 
-/* STATICFUNC */ int scriptAppendVideo:appendVideo      (str ) 
-/* STATICFUNC */ int scriptAddSegment:addSegment        (int ,float , float ) 
-/* STATICFUNC */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
-/* STATICFUNC */ int scriptGetWidth:getWidth            (void) 
-/* STATICFUNC */ int scriptGetHeight:getHeight          (void) 
-/* STATICFUNC */ int scriptGetFps1000:getFps1000        (void) 
-/* STATICFUNC */ str scriptGetVideoCodec:getVideoCodec(void) 
-/* STATICFUNC */ int scriptAudioReset:audioReset        (void) 
-/* STATICFUNC */ int scriptAudioMixer:audioMixer        (str ) 
-/* STATICFUNC */ int scriptClearVideoFilters:clearVideoFilters   (void) 
+/* METHOD */ int scriptLoadVideo:loadVideo          (str ) 
+/* METHOD */ int scriptClearSegments:clearSegments  (void) 
+/* METHOD */ int scriptAppendVideo:appendVideo      (str ) 
+/* METHOD */ int scriptAddSegment:addSegment        (int ,float , float ) 
+/* METHOD */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
+/* METHOD */ int scriptGetWidth:getWidth            (void) 
+/* METHOD */ int scriptGetHeight:getHeight          (void) 
+/* METHOD */ int scriptGetFps1000:getFps1000        (void) 
+/* METHOD */ str scriptGetVideoCodec:getVideoCodec(void) 
+/* METHOD */ int scriptAudioReset:audioReset        (void) 
+/* METHOD */ int scriptAudioMixer:audioMixer        (str ) 
+/* METHOD */ int scriptClearVideoFilters:clearVideoFilters   (void) 
 #
 #
 #              cname:pyname
-/* STATICFUNC */ int scriptSetVideoCodec:videoCodec(str,couples) 
-/* STATICFUNC */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
-/* STATICFUNC */ int scriptSetContainer:setContainer(str,couples) 
-/* STATICFUNC */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
+/* METHOD */ int scriptSetVideoCodec:videoCodec(str,couples) 
+/* METHOD */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
+/* METHOD */ int scriptSetContainer:setContainer(str,couples) 
+/* METHOD */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
 #
 #       Variables
 #
-/* STATICVAR */ double markerA:scriptSetMarkerA,scriptGetMarkerA
-/* STATICVAR */ double markerB:scriptSetMarkerB,scriptGetMarkerB
-/* STATICVAR */ int    audioResample:scriptSetResample,scriptGetResample
+/* ATTRIBUTES */ double markerA:scriptSetMarkerA,scriptGetMarkerA
+/* ATTRIBUTES */ double markerB:scriptSetMarkerB,scriptGetMarkerB
+/* ATTRIBUTES */ int    audioResample:scriptSetResample,scriptGetResample

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyFunc
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyFunc	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyFunc	2010-06-01 18:15:19 UTC (rev 6284)
@@ -1,15 +0,0 @@
-#              cname:pyname
-
-/* FUNC */ int jsLoadVideo:loadVideo          (char * ) 
-/* FUNC */ int jsClearSegments:clearSegments  (void) 
-/* FUNC */ int jsAppendVideo:appendVideo      (char * ) 
-/* FUNC */ int jsAddSegment:addSegment        (int ,float , float ) 
-/* FUNC */ int jsSetPostProc:setPostProc      (int ,int , int ) 
-/* FUNC */ int jsGetWidth:getWidth            (void) 
-/* FUNC */ int jsGetHeight:getHeight          (void) 
-/* FUNC */ int jsGetFps1000:getFps1000        (void) 
-#/* FUNC */ char* getVideoCodec(void) 
-/* FUNC */ int jsAudioReset:audioReset        (void) 
-/* FUNC */ int jsAudioMixer:audioMixer        (char * ) 
-/* FUNC */ int jsClearVideoFilters:clearVideoFilters   (void) 
-

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-01 18:15:19 UTC (rev 6284)
@@ -2,8 +2,9 @@
 // audioCodec -> int scriptSetAudioCodec (str int couples ) 
 static tp_obj zzpy_audioCodec(TP)
  {
-jsLog("audioCodec invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   int p1= pm.asDouble();
   CONFcouple *p2=NULL;
@@ -14,8 +15,9 @@
 // addVideoFilter -> int scriptAddVideoFilter (str couples ) 
 static tp_obj zzpy_addVideoFilter(TP)
  {
-jsLog("addVideoFilter invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
   pm.makeCouples(&p1);
@@ -25,8 +27,9 @@
 // loadVideo -> int scriptLoadVideo (str  ) 
 static tp_obj zzpy_loadVideo(TP)
  {
-jsLog("loadVideo invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   int r=  scriptLoadVideo(p0); 
   return tp_number(r);
@@ -34,22 +37,21 @@
 // clearSegments -> int scriptClearSegments (void ) 
 static tp_obj zzpy_clearSegments(TP)
  {
-jsLog("clearSegments invoked\n");
   int r=  scriptClearSegments(); 
   return tp_number(r);
 }
 // getHeight -> int scriptGetHeight (void ) 
 static tp_obj zzpy_getHeight(TP)
  {
-jsLog("getHeight invoked\n");
   int r=  scriptGetHeight(); 
   return tp_number(r);
 }
 // setPostProc -> int scriptSetPostProc (int  int   int  ) 
 static tp_obj zzpy_setPostProc(TP)
  {
-jsLog("setPostProc invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   int p0= pm.asDouble();
   int p1= pm.asDouble();
   int p2= pm.asDouble();
@@ -59,8 +61,9 @@
 // appendVideo -> int scriptAppendVideo (str  ) 
 static tp_obj zzpy_appendVideo(TP)
  {
-jsLog("appendVideo invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   int r=  scriptAppendVideo(p0); 
   return tp_number(r);
@@ -68,8 +71,9 @@
 // audioMixer -> int scriptAudioMixer (str  ) 
 static tp_obj zzpy_audioMixer(TP)
  {
-jsLog("audioMixer invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   int r=  scriptAudioMixer(p0); 
   return tp_number(r);
@@ -77,15 +81,15 @@
 // getFps1000 -> int scriptGetFps1000 (void ) 
 static tp_obj zzpy_getFps1000(TP)
  {
-jsLog("getFps1000 invoked\n");
   int r=  scriptGetFps1000(); 
   return tp_number(r);
 }
 // videoCodec -> int scriptSetVideoCodec (str couples ) 
 static tp_obj zzpy_videoCodec(TP)
  {
-jsLog("videoCodec invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
   pm.makeCouples(&p1);
@@ -95,15 +99,15 @@
 // getWidth -> int scriptGetWidth (void ) 
 static tp_obj zzpy_getWidth(TP)
  {
-jsLog("getWidth invoked\n");
   int r=  scriptGetWidth(); 
   return tp_number(r);
 }
 // addSegment -> int scriptAddSegment (int  float   float  ) 
 static tp_obj zzpy_addSegment(TP)
  {
-jsLog("addSegment invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   int p0= pm.asDouble();
   float p1= pm.asFloat();
   float p2= pm.asFloat();
@@ -113,15 +117,15 @@
 // clearVideoFilters -> int scriptClearVideoFilters (void ) 
 static tp_obj zzpy_clearVideoFilters(TP)
  {
-jsLog("clearVideoFilters invoked\n");
   int r=  scriptClearVideoFilters(); 
   return tp_number(r);
 }
 // setContainer -> int scriptSetContainer (str couples ) 
 static tp_obj zzpy_setContainer(TP)
  {
-jsLog("setContainer invoked\n");
+  tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
+  void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
   pm.makeCouples(&p1);
@@ -131,72 +135,100 @@
 // audioReset -> int scriptAudioReset (void ) 
 static tp_obj zzpy_audioReset(TP)
  {
-jsLog("audioReset invoked\n");
   int r=  scriptAudioReset(); 
   return tp_number(r);
 }
 // getVideoCodec -> str scriptGetVideoCodec (void ) 
 static tp_obj zzpy_getVideoCodec(TP)
  {
-jsLog("getVideoCodec invoked\n");
   char *r=  scriptGetVideoCodec(); 
   return tp_string(r);
 }
 tp_obj zzpy__pyAdm_get(tp_vm *vm)
 {
-jsLog("zzpy__pyAdm_get invoked\n");
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
   void *me=pm.asThis(&self,100);
   char const *key = pm.asString();
-  if (!strcmp(key, "audioResample"))
+  if (!strcmp(key, "audioCodec"))
   {
-     return tp_number(scriptGetResample());
+     return tp_method(vm,self,zzpy_audioCodec);
   }
-  if (!strcmp(key, "markerA"))
+  if (!strcmp(key, "addVideoFilter"))
   {
-     return tp_number(scriptGetMarkerA());
+     return tp_method(vm,self,zzpy_addVideoFilter);
   }
-  if (!strcmp(key, "markerB"))
+  if (!strcmp(key, "loadVideo"))
   {
-     return tp_number(scriptGetMarkerB());
+     return tp_method(vm,self,zzpy_loadVideo);
   }
+  if (!strcmp(key, "clearSegments"))
+  {
+     return tp_method(vm,self,zzpy_clearSegments);
+  }
+  if (!strcmp(key, "getHeight"))
+  {
+     return tp_method(vm,self,zzpy_getHeight);
+  }
+  if (!strcmp(key, "setPostProc"))
+  {
+     return tp_method(vm,self,zzpy_setPostProc);
+  }
+  if (!strcmp(key, "appendVideo"))
+  {
+     return tp_method(vm,self,zzpy_appendVideo);
+  }
+  if (!strcmp(key, "audioMixer"))
+  {
+     return tp_method(vm,self,zzpy_audioMixer);
+  }
+  if (!strcmp(key, "getFps1000"))
+  {
+     return tp_method(vm,self,zzpy_getFps1000);
+  }
+  if (!strcmp(key, "videoCodec"))
+  {
+     return tp_method(vm,self,zzpy_videoCodec);
+  }
+  if (!strcmp(key, "getWidth"))
+  {
+     return tp_method(vm,self,zzpy_getWidth);
+  }
+  if (!strcmp(key, "addSegment"))
+  {
+     return tp_method(vm,self,zzpy_addSegment);
+  }
+  if (!strcmp(key, "clearVideoFilters"))
+  {
+     return tp_method(vm,self,zzpy_clearVideoFilters);
+  }
+  if (!strcmp(key, "setContainer"))
+  {
+     return tp_method(vm,self,zzpy_setContainer);
+  }
+  if (!strcmp(key, "audioReset"))
+  {
+     return tp_method(vm,self,zzpy_audioReset);
+  }
+  if (!strcmp(key, "getVideoCodec"))
+  {
+     return tp_method(vm,self,zzpy_getVideoCodec);
+  }
   return tp_get(vm,self,tp_string(key));
 }
 tp_obj zzpy__pyAdm_set(tp_vm *vm)
 {
-jsLog("zzpy__pyAdm_set invoked\n");
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
   void *me=pm.asThis(&self,100);
   char const *key = pm.asString();
-  if (!strcmp(key, "audioResample"))
-  {
-     int val=pm.asDouble();
-     scriptSetResample(val);
-     return tp_None;
-  }
-  if (!strcmp(key, "markerA"))
-  {
-     double val=pm.asDouble();
-     scriptSetMarkerA(val);
-     return tp_None;
-  }
-  if (!strcmp(key, "markerB"))
-  {
-     double val=pm.asDouble();
-     scriptSetMarkerB(val);
-     return tp_None;
-  }
   return tp_None;
 }
 static void myDtorpyAdm(tp_vm *vm,tp_obj self)
 {
-jsLog("myDtorpyAdm invoked\n");
 }
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
-jsLog("ctor of pyAdm invoked\n");
   tp_obj self = tp_getraw(vm);
   void *me=NULL;
   tp_obj cdata = tp_data(vm, 100, me);
@@ -230,21 +262,5 @@
   tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyAdm_set));
   tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyAdm_get));
   tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyAdm_help));
-  tp_set(vm,myClass,tp_string("audioCodec"),tp_fnc(vm,zzpy_audioCodec));
-  tp_set(vm,myClass,tp_string("addVideoFilter"),tp_fnc(vm,zzpy_addVideoFilter));
-  tp_set(vm,myClass,tp_string("loadVideo"),tp_fnc(vm,zzpy_loadVideo));
-  tp_set(vm,myClass,tp_string("clearSegments"),tp_fnc(vm,zzpy_clearSegments));
-  tp_set(vm,myClass,tp_string("getHeight"),tp_fnc(vm,zzpy_getHeight));
-  tp_set(vm,myClass,tp_string("setPostProc"),tp_fnc(vm,zzpy_setPostProc));
-  tp_set(vm,myClass,tp_string("appendVideo"),tp_fnc(vm,zzpy_appendVideo));
-  tp_set(vm,myClass,tp_string("audioMixer"),tp_fnc(vm,zzpy_audioMixer));
-  tp_set(vm,myClass,tp_string("getFps1000"),tp_fnc(vm,zzpy_getFps1000));
-  tp_set(vm,myClass,tp_string("videoCodec"),tp_fnc(vm,zzpy_videoCodec));
-  tp_set(vm,myClass,tp_string("getWidth"),tp_fnc(vm,zzpy_getWidth));
-  tp_set(vm,myClass,tp_string("addSegment"),tp_fnc(vm,zzpy_addSegment));
-  tp_set(vm,myClass,tp_string("clearVideoFilters"),tp_fnc(vm,zzpy_clearVideoFilters));
-  tp_set(vm,myClass,tp_string("setContainer"),tp_fnc(vm,zzpy_setContainer));
-  tp_set(vm,myClass,tp_string("audioReset"),tp_fnc(vm,zzpy_audioReset));
-  tp_set(vm,myClass,tp_string("getVideoCodec"),tp_fnc(vm,zzpy_getVideoCodec));
   return myClass;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-01 18:15:19 UTC (rev 6284)
@@ -1,6 +1,6 @@
 #              cname:pyname
-/* CLASS */ pyEditor : void
-/* FUNC */ int jsPrintTiming:printTiming      (int ) 
-/* FUNC */ int jsDumpSegments:dumpSegment     (void) 
-/* FUNC */ int jsDumpRefVideos:dumpRefVideo   (void) 
+/* CLASS */ pyEditor : void : 101
+/* METHOD */ int jsPrintTiming:printTiming      (int ) 
+/* METHOD */ int jsDumpSegments:dumpSegment     (void) 
+/* METHOD */ int jsDumpRefVideos:dumpRefVideo   (void) 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp	2010-06-01 18:15:19 UTC (rev 6284)
@@ -1,32 +1,78 @@
 // Generated by admPyClass.pl do not edit !
-//int  jsPrintTiming <int >
-tp_obj zzpy_printTiming(TP)
+// printTiming -> int jsPrintTiming (int  ) 
+static tp_obj zzpy_printTiming(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=pm.asThis(&self,101);
+  int p0= pm.asDouble();
+  int r=  jsPrintTiming(p0); 
+  return tp_number(r);
+}
+// dumpSegment -> int jsDumpSegments (void ) 
+static tp_obj zzpy_dumpSegment(TP)
+ {
+  int r=  jsDumpSegments(); 
+  return tp_number(r);
+}
+// dumpRefVideo -> int jsDumpRefVideos (void ) 
+static tp_obj zzpy_dumpRefVideo(TP)
+ {
+  int r=  jsDumpRefVideos(); 
+  return tp_number(r);
+}
+tp_obj zzpy__pyEditor_get(tp_vm *vm)
 {
-int p0=TP_NUM();
-int r=jsPrintTiming(p0); 
-return tp_number(r);
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  void *me=pm.asThis(&self,101);
+  char const *key = pm.asString();
+  if (!strcmp(key, "printTiming"))
+  {
+     return tp_method(vm,self,zzpy_printTiming);
+  }
+  if (!strcmp(key, "dumpSegment"))
+  {
+     return tp_method(vm,self,zzpy_dumpSegment);
+  }
+  if (!strcmp(key, "dumpRefVideo"))
+  {
+     return tp_method(vm,self,zzpy_dumpRefVideo);
+  }
+  return tp_get(vm,self,tp_string(key));
 }
-//int  jsDumpSegments <void>
-tp_obj zzpy_dumpSegment(TP)
+tp_obj zzpy__pyEditor_set(tp_vm *vm)
 {
-int r=jsDumpSegments(); 
-return tp_number(r);
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  void *me=pm.asThis(&self,101);
+  char const *key = pm.asString();
+  return tp_None;
 }
-//int  jsDumpRefVideos <void>
-tp_obj zzpy_dumpRefVideo(TP)
+static void myDtorpyEditor(tp_vm *vm,tp_obj self)
 {
-int r=jsDumpRefVideos(); 
-return tp_number(r);
 }
 static tp_obj myCtorpyEditor(tp_vm *vm)
 {
+  tp_obj self = tp_getraw(vm);
+  void *me=NULL;
+  tp_obj cdata = tp_data(vm, 101, me);
+  cdata.data.info->xfree = myDtorpyEditor;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
 }
+static tp_obj zzpy__pyEditor_help(TP)
+ {
+  jsLog("printTiming(int )");
+  jsLog("dumpSegment(void)");
+  jsLog("dumpRefVideo(void)");
+};
 tp_obj initClasspyEditor(tp_vm *vm)
 {
- tp_obj myClass=tp_class(vm);
- tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyEditor));
- tp_set(vm,myClass,tp_string("printTiming"),tp_fnc(vm,zzpy_printTiming));
- tp_set(vm,myClass,tp_string("dumpSegment"),tp_fnc(vm,zzpy_dumpSegment));
- tp_set(vm,myClass,tp_string("dumpRefVideo"),tp_fnc(vm,zzpy_dumpRefVideo));
- return myClass;
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyEditor));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyEditor_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyEditor_get));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyEditor_help));
+  return myClass;
 }

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:17 UTC (rev 6283)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-01 18:15:19 UTC (rev 6284)
@@ -5,12 +5,8 @@
 #                        str = const char *
 #                        couples =  confCouple *c
 #
-#  %funcss{funcName}
-#  %proto{funcName}
-#  %retType{funcName}
-#  %params{funcname}
+# If we deal with instance, the method must be set through set/get as metadata
 #
-#
 
 
 use strict;
@@ -38,7 +34,7 @@
 {
         my $str=shift;
         chomp($str);
-        print OUTPUT "jsLog(\"$str\\n\");\n";
+#        print OUTPUT "jsLog(\"$str\\n\");\n";
 
 }
 #
@@ -66,7 +62,7 @@
 #
 # Process a function declaration and write the glue code to do tinypy<->function call
 #
-sub processStaticFunc
+sub processMETHOD
 {
         my $proto=shift;
         my $args=$proto;
@@ -138,14 +134,14 @@
         }
         else
         {
-            if($line=~m/\* STATICFUNC \*/)
+            if($line=~m/\* METHOD \*/)
             {
                 my $proto=$line;
                 # Remove header...
                 # Remove tail
                 $line=~s/^.*\*\///g;
                 $line=~s/\/\/.*$//g;
-                processStaticFunc($line);
+                processMETHOD($line);
 
             } elsif($line =~m/\/* CLASS \*/)
                 {
@@ -246,6 +242,9 @@
 #
 #  Generate function call glue
 #
+#
+#
+#
         my $i; 
         my $f;
         foreach $f(  keys %cFuncs)
@@ -269,8 +268,9 @@
                 # unmarshall params...
                 if($nb)
                 {
+                         print OUTPUT "  tp_obj self=tp_getraw( tp);\n";  # We need a this as we only deal with instance!
                          print OUTPUT "  tinyParams pm(tp);\n";
-                         #print OUTPUT "  void *me=pm.asThis(0);\n";
+                         print OUTPUT "  void *me=pm.asThis(&self,$cookieId);\n";
                          for($i=0;$i<$nb;$i++)
                          {
                                  genParam($i,$params[$i]);
@@ -324,7 +324,21 @@
           print OUTPUT "     return tp_number(".$getVar{$v}."());\n";
           print OUTPUT "  }\n";
         }
-        #print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        #
+        # Functions are part of it...
+        #
+        my $cfunk;
+        foreach $f(  keys %cFuncs)
+        {
+                my $pyFunc=$f;
+                $cfunk=$glueprefix.$f;
+                print OUTPUT "  if (!strcmp(key, \"$pyFunc\"))\n";
+                print OUTPUT "  {\n";
+                print OUTPUT "     return tp_method(vm,self,".$cfunk.");\n";
+                print OUTPUT "  }\n";
+
+        }
+#print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
         print OUTPUT "  return tp_get(vm,self,tp_string(key));\n";
         print OUTPUT "}\n";
 
@@ -419,14 +433,6 @@
         print OUTPUT "  tp_set(vm,myClass,tp_string(\"__set__\"),tp_fnc(vm,".$setName."));\n";
         print OUTPUT "  tp_set(vm,myClass,tp_string(\"__get__\"),tp_fnc(vm,".$getName."));\n";
         print OUTPUT "  tp_set(vm,myClass,tp_string(\"help\"),tp_fnc(vm,$helpName));\n";
-        #
-        foreach $f(  keys %cFuncs)
-        {
-                my $pyFunc=$f;
-                $cfunk=$glueprefix.$f;
-
-                print OUTPUT "  tp_set(vm,myClass,tp_string(\"$pyFunc\"),tp_fnc(vm,$cfunk));\n";
-        }
         print OUTPUT "  return myClass;\n";
         print OUTPUT "}\n";
 }



From gruntster at mail.berlios.de  Tue Jun  1 20:46:51 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Jun 2010 20:46:51 +0200
Subject: [Avidemux-svn-commit] r6285 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:
	. qt4
Message-ID: <201006011846.o51Ikprt011899@sheep.berlios.de>

Author: gruntster
Date: 2010-06-01 20:46:45 +0200 (Tue, 01 Jun 2010)
New Revision: 6285

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] support for fast first pass

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-06-01 18:15:19 UTC (rev 6284)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-06-01 18:46:45 UTC (rev 6285)
@@ -193,29 +193,10 @@
 	_buffer = new uint8_t[_bufferSize];
 
 	memcpy(&_properties, properties, sizeof(vidEncVideoProperties));
-	updateEncodeParameters(&_properties);
 
-	_param.i_width = _properties.width;
-	_param.i_height = _properties.height;
-	_param.i_fps_num = _properties.fpsNum;
-	_param.i_fps_den = _properties.fpsDen;
-
-	if (_options.getSarAsInput())
-	{
-		_param.vui.i_sar_width = _properties.parWidth;
-		_param.vui.i_sar_height = _properties.parHeight;
-	}
-
-	if (properties->flags & ADM_VIDENC_FLAG_GLOBAL_HEADER)
-		_param.b_repeat_headers = 0;
-	else
-		_param.b_repeat_headers = 1;
-
 	properties->supportedCspsCount = 1;
 	properties->supportedCsps = supportedCsps;
 
-	printParam(&_param);
-
 	return ADM_VIDENC_ERR_SUCCESS;
 }
 
@@ -245,6 +226,7 @@
 	char *logFileName = NULL;
 
 	printf("[x264] begin pass %d/%d\n", _currentPass, _passCount);
+	updateEncodeParameters(&_properties);
 
 	if (_passCount > 1)
 	{
@@ -278,6 +260,12 @@
 		_param.rc.b_stat_read = 0;
 	}
 
+#if X264_BUILD > 85
+	if (_passCount > 1 && _currentPass == 1 && _options.getFastFirstPass())
+		x264_param_apply_fastfirstpass(&_param);
+#endif
+
+	printParam(&_param);
 	_handle = x264_encoder_open(&_param);
 
 	if (logFileName)
@@ -602,6 +590,25 @@
 			_param.rc.i_bitrate = _encodeOptions.encodeModeParameter;
 			break;
 	}
+
+	if (properties)
+	{
+		_param.i_width = properties->width;
+		_param.i_height = properties->height;
+		_param.i_fps_num = properties->fpsNum;
+		_param.i_fps_den = properties->fpsDen;
+
+		if (_options.getSarAsInput())
+		{
+			_param.vui.i_sar_width = properties->parWidth;
+			_param.vui.i_sar_height = properties->parHeight;
+		}
+
+		if (properties->flags & ADM_VIDENC_FLAG_GLOBAL_HEADER)
+			_param.b_repeat_headers = 0;
+		else
+			_param.b_repeat_headers = 1;
+	}
 }
 
 unsigned int x264Encoder::calculateBitrate(unsigned int fpsNum, unsigned int fpsDen, unsigned int frameCount, unsigned int sizeInMb)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-06-01 18:15:19 UTC (rev 6284)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-06-01 18:46:45 UTC (rev 6285)
@@ -71,6 +71,10 @@
 	connect(ui.targetRateControlSpinBox, SIGNAL(valueChanged(int)), this, SLOT(targetRateControlSpinBox_valueChanged(int)));
 	connect(ui.mbTreeCheckBox, SIGNAL(toggled(bool)), this, SLOT(mbTreeCheckBox_toggled(bool)));
 
+#if X264_BUILD < 86
+	ui.fastFirstPassCheckBox->setVisible(false);
+#endif
+
 	ui.sarAsInputLabel->setText(QString("%1:%2").arg(properties->parWidth).arg(properties->parHeight));
 
 	// Motion Estimation tab
@@ -596,6 +600,9 @@
 	}
 
 	ui.mbTreeCheckBox->setChecked(options->getMbTree());
+#if X264_BUILD > 85
+	ui.fastFirstPassCheckBox->setChecked(options->getFastFirstPass());
+#endif
 	ui.lookaheadSpinBox->setValue(options->getFrametypeLookahead());
 
 	if (options->getSarAsInput())
@@ -831,6 +838,9 @@
 	options->setPresetConfiguration(ui.configurationComboBox->currentText().toUtf8().constData(), configurationType);
 
 	options->setMbTree(ui.mbTreeCheckBox->isChecked());
+#if X264_BUILD > 85
+	options->setFastFirstPass(ui.fastFirstPassCheckBox->isChecked());
+#endif
 	options->setFrametypeLookahead(ui.lookaheadSpinBox->value());
 	options->setSarAsInput(ui.sarAsInputRadioButton->isChecked());
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2010-06-01 18:15:19 UTC (rev 6284)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2010-06-01 18:46:45 UTC (rev 6285)
@@ -423,9 +423,16 @@
            </layout>
           </item>
           <item>
+           <widget class="QCheckBox" name="fastFirstPassCheckBox" >
+            <property name="text" >
+             <string>Fast First Pass</string>
+            </property>
+           </widget>
+          </item>
+          <item>
            <widget class="QCheckBox" name="mbTreeCheckBox" >
             <property name="text" >
-             <string>Macroblock-Tree Rate Control</string>
+             <string>Macroblock-tree Rate Control</string>
             </property>
            </widget>
           </item>
@@ -4237,6 +4244,7 @@
   <tabstop>targetRateControlSpinBox</tabstop>
   <tabstop>quantiserSlider</tabstop>
   <tabstop>quantiserSpinBox</tabstop>
+  <tabstop>fastFirstPassCheckBox</tabstop>
   <tabstop>mbTreeCheckBox</tabstop>
   <tabstop>lookaheadSpinBox</tabstop>
   <tabstop>threadDisableRadioButton</tabstop>

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2010-06-01 18:15:19 UTC (rev 6284)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2010-06-01 18:46:45 UTC (rev 6285)
@@ -52,9 +52,12 @@
 	x264_param_default(&_param);
 	_param.vui.i_sar_height = 1;
 	_param.vui.i_sar_width = 1;
-	_param.i_threads = 0;	// set to auto-detect; default is disabled
 
 	_sarAsInput = false;
+
+#if X264_BUILD > 85
+	_fastFirstPast = true;
+#endif
 }
 
 x264_param_t* x264Options::getParameters(void)
@@ -75,6 +78,18 @@
 	return param;
 }
 
+#if X264_BUILD > 85
+bool x264Options::getFastFirstPass(void)
+{
+	return _fastFirstPast;
+}
+
+void x264Options::setFastFirstPass(bool fastFirstPass)
+{
+	_fastFirstPast = fastFirstPass;
+}
+#endif
+
 int x264Options::getThreads(void)
 {
 	return _param.i_threads;
@@ -1020,6 +1035,9 @@
 	xmlNodePtr xmlNodeChild, xmlNodeChild2;
 
 	xmlNodeRoot = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)getOptionsTagRoot(), NULL);
+#if X264_BUILD > 85
+	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"fastFirstPass", boolean2String(xmlBuffer, bufferSize, getFastFirstPass()));
+#endif
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"threads", number2String(xmlBuffer, bufferSize, getThreads()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"deterministic", boolean2String(xmlBuffer, bufferSize, getDeterministic()));
 	xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"sliceThreading", boolean2String(xmlBuffer, bufferSize, getSliceThreading()));
@@ -1413,6 +1431,10 @@
 
 			if (strcmp((char*)xmlChild->name, "threads") == 0)
 				setThreads(atoi(content));
+#if X264_BUILD > 85
+			else if (strcmp((char*)xmlChild->name, "fastFirstPass") == 0)
+				setFastFirstPass(string2Boolean(content));
+#endif
 			else if (strcmp((char*)xmlChild->name, "deterministic") == 0)
 				setDeterministic(string2Boolean(content));
 			else if (strcmp((char*)xmlChild->name, "sliceThreading") == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2010-06-01 18:15:19 UTC (rev 6284)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2010-06-01 18:46:45 UTC (rev 6285)
@@ -39,6 +39,9 @@
 	std::vector<x264ZoneOptions*> _zoneOptions;
 
 	bool _sarAsInput;
+#if X264_BUILD > 85
+	bool _fastFirstPast;
+#endif
 
 	void cleanUp(void);
 
@@ -58,6 +61,11 @@
 	void reset(void);
 	x264_param_t* getParameters(void);
 
+#if X264_BUILD > 85
+	bool getFastFirstPass(void);
+	void setFastFirstPass(bool fastFirstPass);
+#endif
+
 	int getThreads(void);
 	void setThreads(int threads);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2010-06-01 18:15:19 UTC (rev 6284)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2010-06-01 18:46:45 UTC (rev 6285)
@@ -40,6 +40,7 @@
         <xs:element name="x264Options">
           <xs:complexType>
             <xs:sequence>
+              <xs:element name="fastFirstPass" type="xs:boolean" minOccurs="0"/>
               <xs:element name="threads" type="uint" minOccurs="0"/>
               <xs:element name="deterministic" type="xs:boolean" minOccurs="0"/>
               <xs:element name="sliceThreading" type="xs:boolean" minOccurs="0"/>



From gruntster at mail.berlios.de  Tue Jun  1 21:00:41 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Jun 2010 21:00:41 +0200
Subject: [Avidemux-svn-commit] r6286 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <201006011900.o51J0ffE013586@sheep.berlios.de>

Author: gruntster
Date: 2010-06-01 21:00:32 +0200 (Tue, 01 Jun 2010)
New Revision: 6286

Modified:
   branches/avidemux_2.5_branch_gruntster/po/avidemux.pot
   branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts
Log:
[i18n] German translation update for Qt by Lance

Modified: branches/avidemux_2.5_branch_gruntster/po/avidemux.pot
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/avidemux.pot	2010-06-01 18:46:45 UTC (rev 6285)
+++ branches/avidemux_2.5_branch_gruntster/po/avidemux.pot	2010-06-01 19:00:32 UTC (rev 6286)
@@ -9,7 +9,7 @@
 msgstr ""
 "Project-Id-Version: PACKAGE VERSION\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2010-05-25 21:24+0100\n"
+"POT-Creation-Date: 2010-05-31 20:30+0100\n"
 "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
 "Last-Translator: FULL NAME <EMAIL at ADDRESS>\n"
 "Language-Team: LANGUAGE <LL at li.org>\n"
@@ -154,7 +154,7 @@
 msgid "Internal error finding codec"
 msgstr ""
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:127
 #: avidemux/ADM_ocr/adm_glyph.cpp:217
 #: avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp:326
 #: avidemux/ADM_outputs/oplug_ogm/op_ogsave.cpp:101
@@ -171,12 +171,12 @@
 msgid "File error"
 msgstr ""
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:129 avidemux/gtk_gui.cpp:941
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:127 avidemux/gtk_gui.cpp:941
 #, possible-c-format
 msgid "Cannot open \"%s\"."
 msgstr ""
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:142
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:140
 #, possible-c-format
 msgid ""
 "%s already exists.\n"
@@ -184,16 +184,16 @@
 "Do you want to replace it?"
 msgstr ""
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:169
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:183
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:167
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:181
 msgid "It is possible that you are trying to overwrite an input file!"
 msgstr ""
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:192
 msgid "Cannot write the file"
 msgstr ""
 
-#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:194
+#: avidemux/ADM_coreUI/src/DIA_fileSel.cpp:192
 #, possible-c-format
 msgid "No write access to \"%s\"."
 msgstr ""
@@ -521,8 +521,6 @@
 msgstr ""
 
 #: avidemux/ADM_libraries/ADM_utilities/ADM_gettext.cpp:46
-#: avidemux/ADM_UIs/ADM_CLI/src/ADM_translate.cpp:54
-#: avidemux/ADM_UIs/ADM_GTK/src/ADM_translate.cpp:50
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_main2.cpp:283
 msgid "_File"
 msgstr ""

Modified: branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts	2010-06-01 18:46:45 UTC (rev 6285)
+++ branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts	2010-06-01 19:00:32 UTC (rev 6286)
@@ -852,7 +852,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="167"/>
         <source>_Accept non-standard audio frequency for DVD</source>
-        <translation type="unfinished">Erlaube _Nicht-Standard Audio-Frequenz f?r DVD</translation>
+        <translation>Erlaube _nicht DVD-konforme Audiofrequenzen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="168"/>
@@ -892,52 +892,52 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="177"/>
         <source>SIMD</source>
-        <translation type="unfinished">SIMD</translation>
+        <translation>Befehlssatzerweiterungen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="179"/>
         <source>Enable all SIMD</source>
-        <translation type="unfinished">Alle SIMD aktivieren</translation>
+        <translation>benutze alle verf?gbaren Befehlssatzerweiterungen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="180"/>
         <source>Enable MMX</source>
-        <translation type="unfinished">MMX aktivieren</translation>
+        <translation>benutze MMX</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="181"/>
         <source>Enable MMXEXT</source>
-        <translation type="unfinished">MMXEXT aktivieren</translation>
+        <translation>benutze MMXEXT</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="182"/>
         <source>Enable 3DNOW</source>
-        <translation type="unfinished">3DNOW aktivieren</translation>
+        <translation>benutze 3DNOW</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="183"/>
         <source>Enable 3DNOWEXT</source>
-        <translation type="unfinished">3DNOWEXT aktivieren</translation>
+        <translation>benutze 3DNOWEXT</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="184"/>
         <source>Enable SSE</source>
-        <translation type="unfinished">SSE aktivieren</translation>
+        <translation>benutze SSE</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="185"/>
         <source>Enable SSE2</source>
-        <translation type="unfinished">SSE2 aktivieren</translation>
+        <translation>benutze SSE2</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="186"/>
         <source>Enable SSE3</source>
-        <translation type="unfinished">SSE3 aktivieren</translation>
+        <translation>benutze SSE3</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="187"/>
         <source>Enable SSSE3</source>
-        <translation type="unfinished">SSSE3 aktivieren</translation>
+        <translation>benutze SSSE3</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="208"/>
@@ -947,42 +947,42 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="210"/>
         <source>Multi-threading</source>
-        <translation type="unfinished">Multi-Threading</translation>
+        <translation>Mehrkernprozessoren</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="215"/>
         <source>Above normal</source>
-        <translation type="unfinished">?ber normal</translation>
+        <translation>?ber normal</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="217"/>
         <source>Below normal</source>
-        <translation type="unfinished">Unter normal</translation>
+        <translation>Unter normal</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="218"/>
         <source>Low</source>
-        <translation type="unfinished">Niedrig</translation>
+        <translation>Niedrig</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="220"/>
         <source>_Encoding priority:</source>
-        <translation type="unfinished">Kodi_erungspriorit?t:</translation>
+        <translation>Kodi_erungspriorit?t:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="221"/>
         <source>_Indexing/unpacking priority:</source>
-        <translation type="unfinished">_Indizieren/Entpacken Priorit?t:</translation>
+        <translation>_Indizieren/Entpacken Priorit?t:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="222"/>
         <source>_Playback priority:</source>
-        <translation type="unfinished">_Wiedergabe Priorit?t:</translation>
+        <translation>_Wiedergabe Priorit?t:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="224"/>
         <source>Prioritisation</source>
-        <translation type="unfinished">Priorisierung</translation>
+        <translation>Priorisierung</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="229"/>
@@ -1012,7 +1012,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="244"/>
         <source>Video _display:</source>
-        <translation type="unfinished">Video-Anzeige:</translation>
+        <translation>Video-Anzeige:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="249"/>
@@ -1047,42 +1047,42 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="265"/>
         <source>No downmixing</source>
-        <translation type="unfinished">Nicht herunter mischen</translation>
+        <translation>Nicht herunter mischen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="267"/>
         <source>Pro Logic</source>
-        <translation type="unfinished">Dolby ProLogic</translation>
+        <translation>Dolby ProLogic</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="268"/>
         <source>Pro Logic II</source>
-        <translation type="unfinished">Dolby ProLogic II</translation>
+        <translation>Dolby ProLogic II</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="270"/>
         <source>_Local playback downmixing:</source>
-        <translation type="unfinished">_Lokale Wiedergabe herunter mischen:</translation>
+        <translation>_Lokale Wiedergabe herunter mischen:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="284"/>
         <source>_AudioDevice</source>
-        <translation type="unfinished"></translation>
+        <translation>_Audioger?t</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="289"/>
         <source>De_ringing</source>
-        <translation type="unfinished">De-_Ringing</translation>
+        <translation>Be_reinigen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="290"/>
         <source>_Strength:</source>
-        <translation type="unfinished">_St?rke:</translation>
+        <translation>_St?rke:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="291"/>
         <source>Default Postprocessing</source>
-        <translation type="unfinished">Voreingestellte Nachbearbeitung</translation>
+        <translation>Voreingestellte Bildnachbearbeitung</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="298"/>
@@ -1123,12 +1123,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="336"/>
         <source>Global GlyphSet</source>
-        <translation type="unfinished">Globaler Zeichensatz</translation>
+        <translation>Globaler Zeichensatz</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="340"/>
         <source>Preferences</source>
-        <translation type="unfinished">Einstellungen</translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <source>Medium</source>
@@ -1137,7 +1137,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="214"/>
         <source>High</source>
-        <translation type="unfinished">Hoch</translation>
+        <translation>Hoch</translation>
     </message>
     <message>
         <source>Advanced Simple Profile</source>
@@ -1154,12 +1154,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="23"/>
         <source>No</source>
-        <translation type="unfinished">Nein</translation>
+        <translation>Nein</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="23"/>
         <source>Yes</source>
-        <translation type="unfinished">Ja</translation>
+        <translation>Ja</translation>
     </message>
     <message>
         <source>4:3</source>
@@ -1346,7 +1346,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp" line="81"/>
         <source>G_ain value:</source>
-        <translation type="unfinished">Verst?rk_ungswert</translation>
+        <translation>Verst?rk_ungswert:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_audioFilter.cpp" line="83"/>
@@ -1610,7 +1610,7 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp" line="96"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="328"/>
         <source>CPU</source>
-        <translation type="unfinished">CPU</translation>
+        <translation>Prozessor</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_builtin.cpp" line="100"/>
@@ -1669,17 +1669,17 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp" line="27"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp" line="22"/>
         <source>_Swap U and V</source>
-        <translation type="unfinished">U mit V tau_schen</translation>
+        <translation>U mit V tau_schen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp" line="28"/>
         <source>Show motion _vectors</source>
-        <translation type="unfinished">Bewegungs_vektoren anzeigen</translation>
+        <translation>Bewegungs_vektoren anzeigen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_lavDecoder.cpp" line="30"/>
         <source>Decoder Options</source>
-        <translation type="unfinished">Dekodierer Optionen</translation>
+        <translation>Dekoder Optionen</translation>
     </message>
     <message>
         <source>Full</source>
@@ -1859,23 +1859,23 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp" line="32"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="287"/>
         <source>_Horizontal deblocking</source>
-        <translation type="unfinished">_Horizontal entblockieren</translation>
+        <translation>_Horizontal entblocken</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp" line="33"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="288"/>
         <source>_Vertical deblocking</source>
-        <translation type="unfinished">_Vertikal entblockieren</translation>
+        <translation>_Vertikal entblocken</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp" line="34"/>
         <source>_Deringing</source>
-        <translation type="unfinished">_De-Ringing</translation>
+        <translation>_Bereinigen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_postproc.cpp" line="38"/>
         <source>Postprocessing</source>
-        <translation type="unfinished"></translation>
+        <translation>Nachbearbeitung</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp" line="37"/>
@@ -2245,7 +2245,7 @@
     <message>
         <location filename="../avidemux/gtk_gui.cpp" line="489"/>
         <source>Select AVI File to Append...</source>
-        <translation type="unfinished">AVI-Datei ausw?hlen zum Anh?ngen</translation>
+        <translation>AVI-Datei ausw?hlen zum Anh?ngen...</translation>
     </message>
     <message>
         <location filename="../avidemux/gtk_gui.cpp" line="493"/>
@@ -2344,7 +2344,7 @@
     <message>
         <location filename="../avidemux/gtk_gui.cpp" line="819"/>
         <source>Frame Rate</source>
-        <translation type="unfinished"></translation>
+        <translation>Bildrate</translation>
     </message>
     <message>
         <location filename="../avidemux/gtk_gui.cpp" line="819"/>
@@ -2572,7 +2572,7 @@
     <message>
         <location filename="../avidemux/gtk_gui.cpp" line="1410"/>
         <source>WAV open file failed...</source>
-        <translation type="unfinished">?ffnen der WAV Datei gescheitert</translation>
+        <translation>?ffnen der WAV Datei gescheitert...</translation>
     </message>
     <message>
         <location filename="../avidemux/gtk_gui.cpp" line="1547"/>
@@ -3240,7 +3240,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_glypheditor.cpp" line="248"/>
         <source>Select GlyphFile to edit</source>
-        <translation type="unfinished">Als Zeichensatzdatei speichern</translation>
+        <translation>W?hle Zeichensatzdatei zum Bearbeiten</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/MSharpen/ADM_vidMSharpen.cpp" line="80"/>
@@ -3711,7 +3711,7 @@
         <location filename="../avidemux/ADM_osSupport/ADM_misc.cpp" line="29"/>
         <location filename="../avidemux/ADM_osSupport/ADM_misc.cpp" line="33"/>
         <source>%</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_flv/oplug_flv.cpp" line="134"/>
@@ -3759,14 +3759,16 @@
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="229"/>
         <source>Invalid audio stream detected</source>
-        <translation type="unfinished"></translation>
+        <translation>unzul?ssige Audiospur erkannt</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="229"/>
         <source>The audio stream may be invalid for this container.
 
 Continue anyway?</source>
-        <translation type="unfinished"></translation>
+        <translation>Die Tonspur k?nnte f?r diesen Container nicht zul?ssig sein.
+
+Wollen Sie trotzdem fortfahren?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mp4/oplug_mp4.cpp" line="415"/>
@@ -3853,7 +3855,7 @@
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="147"/>
         <source>For VCD, audio must be 44.1 kHz MP2.</source>
-        <translation type="unfinished">F?r VCD muss Audio 44.1 kHz MP2 sein</translation>
+        <translation>F?r VCD muss Audio 44.1 kHz MP2 sein.</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="159"/>
@@ -3951,24 +3953,24 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="69"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="96"/>
         <source>Info</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="120"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="150"/>
         <source>Confirmation</source>
-        <translation type="unfinished"></translation>
+        <translation>Best?tigung</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="167"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="195"/>
         <source>Question</source>
-        <translation type="unfinished"></translation>
+        <translation>Frage</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="188"/>
         <source>Question ?</source>
-        <translation type="unfinished"></translation>
+        <translation>Frage ?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp" line="1015"/>
@@ -4019,14 +4021,14 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="82"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="198"/>
         <source>Use GlyphSet (optional):</source>
-        <translation type="unfinished">Zeichensatz verwenden (optional):</translation>
+        <translation>Zeichensatz verwenden (optional):</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="82"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="198"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp" line="299"/>
         <source>Select GlyphSet file</source>
-        <translation type="unfinished">Zeichensatzdatei ausw?hlen</translation>
+        <translation>Zeichensatzdatei ausw?hlen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="83"/>
@@ -4057,30 +4059,30 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="108"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="227"/>
         <source>Please Select a valid output SRT file.</source>
-        <translation type="unfinished">Bitte eine g?ltige SRT-Ausgabedatei ausw?hlen</translation>
+        <translation>Bitte eine g?ltige SRT-Ausgabedatei ausw?hlen.</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="124"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="243"/>
         <source>Cannot load the glyphset file.</source>
-        <translation type="unfinished">Zeichensatzdatei kann nicht geladen werden.</translation>
+        <translation>Zeichensatzdatei kann nicht geladen werden.</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="143"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="264"/>
         <source>GlyphSet filename</source>
-        <translation type="unfinished">Zeichensatz Dateiname</translation>
+        <translation>Zeichensatz Dateiname</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="143"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="264"/>
         <source>Save GlyphSet file</source>
-        <translation type="unfinished">Zeichensatzdatei speichern</translation>
+        <translation>Zeichensatzdatei speichern</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="145"/>
         <source>Save Glyph</source>
-        <translation type="unfinished">Schriftzeichen speichern</translation>
+        <translation>Schriftzeichen speichern</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="196"/>
@@ -4105,7 +4107,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_ocr.cpp" line="266"/>
         <source>Save GlyphSet</source>
-        <translation type="unfinished">Zeichensatz speichern</translation>
+        <translation>Zeichensatz speichern</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp" line="45"/>
@@ -4161,7 +4163,7 @@
     <message>
         <location filename="../avidemux/GUI_jobs.cpp" line="37"/>
         <source>Something very wrong happened when building joblist.</source>
-        <translation type="unfinished">Irgendwas ganz Falsches ist passiert beim Erstellen der Job-Liste</translation>
+        <translation>Irgendwas ganz Falsches ist passiert beim Erstellen der Job-Liste.</translation>
     </message>
     <message>
         <location filename="../avidemux/GUI_jobs.cpp" line="42"/>
@@ -4190,7 +4192,7 @@
     <message>
         <location filename="../avidemux/gui_navigate.cpp" line="238"/>
         <source>Seeking</source>
-        <translation type="unfinished">Suche...</translation>
+        <translation>Suche</translation>
     </message>
     <message>
         <location filename="../avidemux/gui_navigate.cpp" line="319"/>
@@ -4222,7 +4224,7 @@
     <message>
         <location filename="../avidemux/gui_savenew.cpp" line="248"/>
         <source>There is no second track</source>
-        <translation type="unfinished">Es gibt keine zweite Audio Spur.</translation>
+        <translation>Es gibt keine zweite Audio Spur</translation>
     </message>
     <message>
         <location filename="../avidemux/gui_savenew.cpp" line="248"/>
@@ -9438,32 +9440,32 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp" line="538"/>
         <source>_loader file:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp" line="539"/>
         <source>Select loader filename[avsload.exe]</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp" line="541"/>
         <source>_avs file:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp" line="542"/>
         <source>Select avs filename[*.avs]</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp" line="543"/>
         <source>_pipe timeout:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvsFilter/avsfilter.cpp" line="547"/>
         <source>AvsFilter config</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -9751,7 +9753,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp" line="76"/>
         <source>_Sharper engine:</source>
-        <translation type="unfinished">Sch?rfe optimieren</translation>
+        <translation>Sch?rfe optimieren:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/KernelDeint/ADM_vidKernelDeint.cpp" line="77"/>
@@ -9837,7 +9839,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp" line="113"/>
         <source>Lowpass5 deint</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/lavDeinterlace/ADM_lavpp_deint.cpp" line="117"/>
@@ -10109,7 +10111,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp" line="261"/>
         <source>90??</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp" line="262"/>
@@ -10119,7 +10121,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp" line="262"/>
         <source>180??</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp" line="263"/>
@@ -10129,7 +10131,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp" line="263"/>
         <source>270??</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Rotate/ADM_vidRotate.cpp" line="265"/>
@@ -10185,7 +10187,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp" line="88"/>
         <source>Botto_m margin</source>
-        <translation type="unfinished">_Unterer Rand:</translation>
+        <translation>_Unterer Rand</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Ass/ADM_vidASS.cpp" line="92"/>
@@ -10198,12 +10200,12 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp" line="189"/>
         <source>Could not open subtitle file</source>
-        <translation type="unfinished">Untertitel-Datei kann nicht ge?ffnet werden</translation>
+        <translation>Untertitel-Datei kann nicht ge?ffnet werden</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Srt/ADM_vidSRT.cpp" line="209"/>
         <source>Cannot identify subtitle format</source>
-        <translation type="unfinished">Kann Untertitel-Datei nicht identifizieren</translation>
+        <translation>Kann Untertitel-Datei nicht identifizieren</translation>
     </message>
 </context>
 <context>
@@ -10387,7 +10389,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="60"/>
         <source>Simple</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="61"/>
@@ -10397,7 +10399,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="62"/>
         <source>Slow</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="66"/>
@@ -10407,7 +10409,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="67"/>
         <source>_Iterations:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="67"/>
@@ -10418,22 +10420,22 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="68"/>
         <source>_Chroma:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="68"/>
         <source>Process chroma.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="69"/>
         <source>_Step:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="69"/>
         <source>Step.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TIsophote/ADM_vidTisophote.cpp" line="73"/>
@@ -10494,12 +10496,12 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="139"/>
         <source>Skip spatial temporal check</source>
-        <translation type="unfinished">Ohne r?umliche &amp; zeitliche Pr?fung</translation>
+        <translation>Ohne r?umliche &amp;&amp; zeitliche Pr?fung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="140"/>
         <source>Bob, skip spatial temporal check</source>
-        <translation type="unfinished">Bob, ohne r?umliche &amp; zeitliche Pr?fung</translation>
+        <translation>Bob, ohne r?umliche &amp;&amp; zeitliche Pr?fung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="143"/>
@@ -10596,7 +10598,7 @@
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="419"/>
         <source>File type identified but no loader support detected...</source>
-        <translation type="unfinished">Dateityp wurde ermittelt, aber keine Ladeunterst?tzung festgestellt.</translation>
+        <translation>Dateityp wurde ermittelt, aber keine Ladeunterst?tzung festgestellt...</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="420"/>
@@ -10648,7 +10650,7 @@
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="443"/>
         <source>Video dimensions don&apos;t match.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="443"/>
@@ -10656,14 +10658,14 @@
 
 1) &quot;Resize&quot; / &quot;Add Border&quot; / &quot;Crop&quot; each stream to the same resolution
 2) Concatenate them together</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="589"/>
         <source>If the file is using B-frames as reference it can lead to a crash or stuttering.
 Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.
 Do you want to use that mode?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="719"/>
@@ -10758,22 +10760,22 @@
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="50"/>
         <source>Constant Bitrate</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="51"/>
         <source>Constant Quantiser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="52"/>
         <source>Same Quantiser as Input</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="53"/>
         <source>Constant Rate Factor</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="54"/>
@@ -10788,7 +10790,7 @@
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="57"/>
         <source>Encoding mode</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="62"/>
@@ -10798,23 +10800,23 @@
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="163"/>
         <source>Target bitrate (kb/s)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="168"/>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="187"/>
         <source>Quantiser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="173"/>
         <source>Target video size (MB)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="178"/>
         <source>Average bitrate (kb/s)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="183"/>
@@ -10827,38 +10829,38 @@
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="48"/>
         <source>Configuration:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="50"/>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="198"/>
         <source>Save As</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="51"/>
         <source>Delete</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="122"/>
         <source>&lt;default&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="123"/>
         <source>&lt;custom&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation>&lt;individuell&gt;</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="183"/>
         <source>Are you sure you wish to delete the selected configuration?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="198"/>
         <source>Configuration File (*.xml)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -10962,7 +10964,7 @@
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="46"/>
         <source>Disabled</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="47"/>
@@ -10972,7 +10974,7 @@
     <message>
         <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="48"/>
         <source>Custom</source>
-        <translation type="unfinished">Individuell</translation>
+        <translation>Individuell</translation>
     </message>
 </context>
 <context>
@@ -10980,7 +10982,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/ADM_qtray.cpp" line="82"/>
         <source>Open Avidemux</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -11161,7 +11163,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp" line="91"/>
         <source>Ch_roma temporal threshold:</source>
-        <translation type="unfinished">Schwellen-Konfiguration</translation>
+        <translation>Farbe Schwellen-Konfiguration:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/TemporalCleaner/ADM_vidVlad.cpp" line="95"/>
@@ -11262,12 +11264,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="79"/>
         <source>Medium:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="86"/>
         <source>Format:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="93"/>
@@ -11297,7 +11299,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="121"/>
         <source>DVD-5</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="126"/>
@@ -11315,12 +11317,12 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="432"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="466"/>
         <source>MB</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="249"/>
         <source>Audio Bitrate</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="269"/>
@@ -11332,7 +11334,7 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="320"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="552"/>
         <source>kbps</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="306"/>
@@ -11376,7 +11378,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/calculator.ui" line="568"/>
         <source>Video Bitrate:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -11385,13 +11387,13 @@
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="13"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="333"/>
         <source>Chroma Noise Reducer 2</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="25"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="334"/>
         <source>Scene Change</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="61"/>
@@ -11403,7 +11405,7 @@
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="81"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="336"/>
         <source>Scene Change Threshold</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="101"/>
@@ -11415,13 +11417,13 @@
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="140"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="338"/>
         <source>Use chroma to also detect scene change</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="150"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="339"/>
         <source>Settings</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="171"/>
@@ -11431,7 +11433,7 @@
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="350"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="357"/>
         <source>Wide</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="176"/>
@@ -11447,31 +11449,31 @@
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="197"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="345"/>
         <source>Mode</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="211"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="346"/>
         <source>Luma Y:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="231"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="347"/>
         <source>Chroma V:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="285"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="353"/>
         <source>Maximum</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="292"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="354"/>
         <source>Chroma U:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="334"/>
@@ -11492,7 +11494,7 @@
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="25"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="378"/>
         <source>Colour Correction Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="55"/>
@@ -11504,19 +11506,19 @@
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="92"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="380"/>
         <source>Chroma U:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="119"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="381"/>
         <source>Chroma V:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="176"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="382"/>
         <source>Luma Y:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="183"/>
@@ -11540,19 +11542,19 @@
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="268"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="386"/>
         <source>Note: all values are normalised to 256</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="278"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="387"/>
         <source>Parameters</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="298"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="388"/>
         <source>Matrix:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="306"/>
@@ -11568,25 +11570,25 @@
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="311"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="392"/>
         <source>TV -&gt; PC</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="316"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="393"/>
         <source>PC -&gt; TV</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="321"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="394"/>
         <source>PC -&gt; TV.Y</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="329"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="396"/>
         <source>Level:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="342"/>
@@ -11604,25 +11606,25 @@
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="364"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="407"/>
         <source>Opt:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="412"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="408"/>
         <source>Auto Gain</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="419"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="409"/>
         <source>Display Colour Statistics</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/colorYUV/qt4/coloryuv.ui" line="426"/>
         <location filename="../plugins/build/ADM_videoFilters/colorYUV/ui_coloryuv.h" line="410"/>
         <source>Centre Colour Offsets</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -11631,49 +11633,49 @@
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="19"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="107"/>
         <source>Curve Editor</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="27"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="115"/>
         <source>Choose channel for editing</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="37"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="110"/>
         <source>Luma (Y)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="42"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="111"/>
         <source>Chroma (U)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="47"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="112"/>
         <source>Chroma (V)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="61"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="118"/>
         <source>Sets default curve</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="64"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="120"/>
         <source>Refresh</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/qt4/CurveDialog.ui" line="93"/>
         <location filename="../plugins/build/ADM_videoFilters/CurveEditor/ui_CurveDialog.h" line="121"/>
         <source>Help</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -11681,7 +11683,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/CurveEditor/ADM_vidCurveEditor.cpp" line="152"/>
         <source>Control points count: Y:%d, U:%d, V:%d</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -11747,7 +11749,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="208"/>
         <source>Shutting down</source>
-        <translation type="unfinished">Herunter fahren</translation>
+        <translation>Herunter fahren</translation>
     </message>
     <message>
         <source>%d%%</source>
@@ -11760,17 +11762,17 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="500"/>
         <source>The encoding is paused. Do you want to resume or abort?</source>
-        <translation type="unfinished"></translation>
+        <translation>Der Kodierungvorgang wurde angehalten. M?chten Sie den Vorgang fortsetzen oder abbrechen?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="501"/>
         <source>Resume</source>
-        <translation type="unfinished">Fortfahren</translation>
+        <translation>Fortfahren</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="501"/>
         <source>Abort</source>
-        <translation type="unfinished">Abbruch</translation>
+        <translation>Abbruch</translation>
     </message>
 </context>
 <context>
@@ -11778,12 +11780,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="123"/>
         <source># Images :%0lu</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="141"/>
         <source>Time Left :%02d:%02d:%02d</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -11798,7 +11800,7 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp" line="74"/>
         <source>The DV encoder only accepts the following profiles:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/dvEncoder.cpp" line="85"/>
@@ -11821,7 +11823,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp" line="173"/>
         <source>Discard longer dupe (anim??s)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Decimate/ADM_vidDecDec.cpp" line="174"/>
@@ -11889,12 +11891,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="68"/>
         <source>Time Left : Infinity</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="69"/>
         <source># Images :</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <source>Strength</source>
@@ -12149,17 +12151,17 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="13"/>
         <source>Dialog</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="33"/>
         <source>Calibrate</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="40"/>
         <source>Skip All</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="47"/>
@@ -12179,7 +12181,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="92"/>
         <source>Close</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="102"/>
@@ -12199,7 +12201,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/ocr.ui" line="123"/>
         <source>Nb Lines :</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -12292,19 +12294,19 @@
         <location filename="../plugins/ADM_videoFilters/Equalizer/qt4/equaliser.ui" line="21"/>
         <location filename="../plugins/build/ADM_videoFilters/Equalizer/ui_equaliser.h" line="348"/>
         <source>Equaliser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Equalizer/qt4/equaliser.ui" line="41"/>
         <location filename="../plugins/build/ADM_videoFilters/Equalizer/ui_equaliser.h" line="349"/>
         <source>Settings</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Equalizer/qt4/equaliser.ui" line="255"/>
         <location filename="../plugins/build/ADM_videoFilters/Equalizer/ui_equaliser.h" line="350"/>
         <source>Histogram</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -12322,12 +12324,12 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp" line="97"/>
         <source>Settings</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp" line="100"/>
         <source>avcodec Sorenson Spark Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -12462,7 +12464,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="13"/>
         <source>Glyph Editor</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="172"/>
@@ -12472,22 +12474,22 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="179"/>
         <source>Home</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="186"/>
         <source>Next</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="193"/>
         <source>Find</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="200"/>
         <source>Previous</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="207"/>
@@ -12497,7 +12499,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/glypheditor.ui" line="214"/>
         <source>Delete</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -12571,17 +12573,17 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="208"/>
         <source>Sum of Absolute Differences</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="209"/>
         <source>Fewest Bits</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="210"/>
         <source>Rate Distortion</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="216"/>
@@ -12591,27 +12593,27 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="219"/>
         <source>Motion Estimation Method:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="220"/>
         <source>_Maximum Consecutive B-frames:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="221"/>
         <source>4 _Motion Vector</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="222"/>
         <source>_Quarter Pixel</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="223"/>
         <source>_Global Motion Compensation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="226"/>
@@ -12621,57 +12623,57 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="229"/>
         <source>_Quantisation Type:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="230"/>
         <source>_Macroblock Decision Mode:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="231"/>
         <source>Mi_nimum Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="232"/>
         <source>Ma_ximum Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="233"/>
         <source>Maximum Quantiser _Difference:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="234"/>
         <source>_Quantiser Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="235"/>
         <source>Quantiser _Blur:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="236"/>
         <source>_Trellis Quantisation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="239"/>
         <source>Quantisation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="263"/>
         <source>avcodec H.263 Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="471"/>
         <source>The H.263 encoder only accepts the following resolutions:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="479"/>
@@ -12709,37 +12711,37 @@
         <location filename="../plugins/ADM_videoFilters/MPDelogo/qt4/mpdelogo.ui" line="13"/>
         <location filename="../plugins/build/ADM_videoFilters/MPDelogo/ui_mpdelogo.h" line="188"/>
         <source>MPlayer Delogo</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/MPDelogo/qt4/mpdelogo.ui" line="40"/>
         <location filename="../plugins/build/ADM_videoFilters/MPDelogo/ui_mpdelogo.h" line="189"/>
         <source>Band:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/MPDelogo/qt4/mpdelogo.ui" line="47"/>
         <location filename="../plugins/build/ADM_videoFilters/MPDelogo/ui_mpdelogo.h" line="190"/>
         <source>Height:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/MPDelogo/qt4/mpdelogo.ui" line="54"/>
         <location filename="../plugins/build/ADM_videoFilters/MPDelogo/ui_mpdelogo.h" line="191"/>
         <source>Width:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/MPDelogo/qt4/mpdelogo.ui" line="114"/>
         <location filename="../plugins/build/ADM_videoFilters/MPDelogo/ui_mpdelogo.h" line="192"/>
         <source>Y:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/MPDelogo/qt4/mpdelogo.ui" line="144"/>
         <location filename="../plugins/build/ADM_videoFilters/MPDelogo/ui_mpdelogo.h" line="193"/>
         <source>X:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -12804,7 +12806,7 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="823"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="842"/>
         <source>...</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="921"/>
@@ -12844,7 +12846,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1080"/>
         <source>?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1134"/>
@@ -12865,12 +12867,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1260"/>
         <source>Vi&amp;deo</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1270"/>
         <source>&amp;Audio</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1341"/>
@@ -12910,7 +12912,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1316"/>
         <source>&amp;Custom</source>
-        <translation>&amp;Gehe zu</translation>
+        <translation>&amp;Individuell</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1321"/>
@@ -12992,7 +12994,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1545"/>
         <source>[</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1553"/>
@@ -13004,7 +13006,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1562"/>
         <source>]</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1570"/>
@@ -13030,7 +13032,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1590"/>
         <source>Ctrl+S</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1595"/>
@@ -13090,42 +13092,42 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1662"/>
         <source>&amp;Zoom 1:4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1665"/>
         <source>Ctrl+Shift+4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1673"/>
         <source>Z&amp;oom 1:2</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1676"/>
         <source>Ctrl+Shift+2</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1687"/>
         <source>Zoom &amp;1:1</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1690"/>
         <source>Ctrl+Alt+1</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1698"/>
         <source>Zoom &amp;2:1</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1701"/>
         <source>Ctrl+Alt+2</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1706"/>
@@ -13141,7 +13143,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1715"/>
         <source>F3</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1720"/>
@@ -13151,7 +13153,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1723"/>
         <source>F4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1728"/>
@@ -13172,7 +13174,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1742"/>
         <source>Ctrl+Alt+F</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1747"/>
@@ -13199,7 +13201,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1771"/>
         <source>Ctrl+Alt+S</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1776"/>
@@ -13214,7 +13216,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1796"/>
         <source>F7</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1801"/>
@@ -13252,24 +13254,24 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1834"/>
         <source>&amp;VOB -&gt; VobSub...</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1837"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1840"/>
         <source>VOB -&gt; VobSub</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1845"/>
         <source>&amp;OCR (VobSub -&gt; srt)...</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1848"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1851"/>
         <source>OCR (VobSub -&gt; srt)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <source>Stop</source>
@@ -13278,7 +13280,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2046"/>
         <source>P</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1859"/>
@@ -13323,7 +13325,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1873"/>
         <source>Right</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1881"/>
@@ -13339,7 +13341,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1890"/>
         <source>Down</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1898"/>
@@ -13355,7 +13357,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1907"/>
         <source>Up</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1915"/>
@@ -13387,7 +13389,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1946"/>
         <source>Home</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1954"/>
@@ -13397,7 +13399,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1957"/>
         <source>End</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1965"/>
@@ -13413,7 +13415,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1974"/>
         <source>Ctrl+[</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1982"/>
@@ -13429,7 +13431,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1991"/>
         <source>Ctrl+]</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1996"/>
@@ -13439,7 +13441,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="1999"/>
         <source>Ctrl+F</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2004"/>
@@ -13449,7 +13451,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2007"/>
         <source>Ctrl+T</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2012"/>
@@ -13487,22 +13489,22 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2051"/>
         <source>Recent0</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2056"/>
         <source>Recent1</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2061"/>
         <source>Recent2</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2066"/>
         <source>Recent3</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2192"/>
@@ -13512,7 +13514,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2195"/>
         <source>Ctrl+W</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2200"/>
@@ -13532,42 +13534,42 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2215"/>
         <source>Recent4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2220"/>
         <source>Recent5</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2225"/>
         <source>RecentProject0</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2230"/>
         <source>RecentProject1</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2235"/>
         <source>RecentProject2</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2240"/>
         <source>RecentProject3</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2245"/>
         <source>RecentProject4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2250"/>
         <source>RecentProject5</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2071"/>
@@ -13594,7 +13596,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2091"/>
         <source>Ctrl+J</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2096"/>
@@ -13615,24 +13617,24 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2112"/>
         <source>OCR (&amp;TS -&gt; srt)...</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2115"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2118"/>
         <source>OCR (TS -&gt; srt)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2123"/>
         <source>Edit &amp;Glyphs...</source>
-        <translation>bearbeite &amp;Glyphs...</translation>
+        <translation>Schriftzeichen b&amp;earbeiten...</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2126"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2129"/>
         <source>Edit Glyphs</source>
-        <translation>bearbeite Glyphs</translation>
+        <translation>Schriftzeichen bearbeiten</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui" line="2143"/>
@@ -13777,22 +13779,22 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp" line="256"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp" line="78"/>
         <source>Settings</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp" line="259"/>
         <source>avcodec MPEG-1 Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp" line="71"/>
         <source>New sequence every (MB):</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp" line="81"/>
         <source>mpeg2enc Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -13899,12 +13901,12 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="277"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="111"/>
         <source>Settings</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="280"/>
         <source>avcodec MPEG-2 Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="78"/>
@@ -13914,22 +13916,22 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="79"/>
         <source>Super Video CD</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="100"/>
         <source>New sequence every (MB):</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="101"/>
         <source>Stream _type:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="114"/>
         <source>mpeg2enc Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -13972,17 +13974,17 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="208"/>
         <source>Sum of Absolute Differences</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="209"/>
         <source>Fewest Bits</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="210"/>
         <source>Rate Distortion</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="216"/>
@@ -13992,27 +13994,27 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="219"/>
         <source>Motion Estimation Method:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="220"/>
         <source>_Maximum Consecutive B-frames:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="221"/>
         <source>4 _Motion Vector</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="222"/>
         <source>_Quarter Pixel</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="223"/>
         <source>_Global Motion Compensation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="226"/>
@@ -14022,52 +14024,52 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="229"/>
         <source>_Quantisation Type:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="230"/>
         <source>_Macroblock Decision Mode:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="231"/>
         <source>Mi_nimum Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="232"/>
         <source>Ma_ximum Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="233"/>
         <source>Maximum Quantiser _Difference:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="234"/>
         <source>_Quantiser Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="235"/>
         <source>Quantiser _Blur:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="236"/>
         <source>_Trellis Quantisation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="239"/>
         <source>Quantisation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="263"/>
         <source>avcodec H.263 Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -14312,7 +14314,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp" line="26"/>
         <source>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt;&lt;head&gt;  &lt;title&gt;Avidemux is free software; you can redistribute it and/or  modify it under the terms of the GNU General Public License  version 2 as published by the Free Software Foundation&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;&lt;!-- /* Style Definitions */ p.licenseStyle, li.licenseStyle, div.licenseStyle        {margin:0cm;        margin-bottom:.0001pt;        font-size:12.0pt;        font-family:&quot;Times New Roman&quot;;} /* Page Definitions */ @page Section1        {size:612.0pt 792.0pt;        margin:72.0pt 90.0pt 72.0pt 90.0pt;}div.Section1        {page:Section1;}--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body lang=&quot;EN-GB&quot; style=&apos;text-justify-trim:punctuation&apos;&gt;  &lt;div class=&quot;Section1&quot;&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:1!
 0.0pt; font-family:Arial&apos;&gt;Avidemux is    free software; you can redistribute it and/or modify it under    the terms of the GNU General Public License version 2 as    published by the Free Software Foundation.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;b&gt;&lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt;    &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;GNU GENERAL PUBLIC    LICENSE&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Version 2, June    1991&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&qu!
 ot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt!
 ;    &lt
;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Copyright (C) 1989, 1991    Free Software Foundation, Inc.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;span lang=&quot;FR&quot; style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;59 Temple Place, Suite    330, Boston, MA  02111-1307  USA&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;span lang=&quot;FR&quot; style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-a!
 utospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Everyone is permitted to    copy and distribute verbatim copies of this license document,    but changing it is not allowed.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Preamble&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;fo!
 nt-family:Arial&apos;&gt;The licenses for most    software are!
  designe
d to take away your freedom to share and    change it.  By contrast, the GNU General Public License is    intended to guarantee your freedom to share and change free    software--to make sure the software is free for all its users.     This General Public License applies to most of the Free    Software Foundation&apos;s software and to any other program whose    authors commit to using it.  (Some other Free Software    Foundation software is covered by the GNU Library General    Public License instead.)  You can apply it to your programs,    too.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;When we speak of free    software, we are !
 referring to freedom, not price.  Our General    Public Licenses are designed to make sure that you have the    freedom to distribute copies of free software (and charge for    this service if you wish), that you receive source code or can    get it if you want it, that you can change the software or use    pieces of it in new free programs; and that you know you can do    these things.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;To protect your rights, we    need to make restrictions that forbid anyone to deny you these    rights or to ask you to surrender the rights. These    restrictions translate to certain responsibilities fo!
 r you if    you distribute copies of the software, or if you m!
 odify   
 it.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;For example, if you    distribute copies of such a program, whether gratis or for a    fee, you must give the recipients all the rights that you have.     You must make sure that they, too, receive or can get the    source code.  And you must show them these terms so they know    their rights.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify!
 ;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;We protect your rights    with two steps: (1) copyright the software, and (2) offer you    this license which gives you legal permission to copy,    distribute and/or modify the software.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Also, for each author&apos;s    protection and ours, we want to make certain that everyone    understands that there is no warranty for this free software.     If the software is modified by someone else and passed on, we    want its recipients to know that what they have is not the    original, so that an!
 y problems introduced by others will not    reflect on the ori!
 ginal au
thors&apos; reputations.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Finally, any free program    is threatened constantly by software patents.  We wish to avoid    the danger that redistributors of a free program will    individually obtain patent licenses, in effect making the    program proprietary.  To prevent this, we have made it clear    that any patent must be licensed for everyone&apos;s free use or not    licensed at all.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/s!
 pan&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;The precise terms and    conditions for copying, distribution and modification    follow.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;GNU GENERAL PUBLIC    LICENSE&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot!
 ; style=    &apos;text-align:center;text-autospace:none&apos;&!
 gt;&lt;b
&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;TERMS AND CONDITIONS FOR    COPYING, DISTRIBUTION AND MODIFICATION&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;0. This License applies to    any program or other work which contains a notice placed by the    copyright holder saying it may be distributed under the terms    of this General Public License.  The &quot;Program&quot;, below, refers    to any such program or work, and a &quot;work based on the Program&quot;    means either the Program or any derivative work under copyright    law: that is to say, a work containing the Program or a portion    of it, either verbat!
 im or with modifications and/or translated    into another language.  (Hereinafter, translation is included    without limitation in the term &quot;modification&quot;.)  Each licensee    is addressed as &quot;you&quot;.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Activities other than    copying, distribution and modification are not covered by this    License; they are outside its scope.  The act of running the    Program is not restricted, and the output from the Program is    covered only if its contents constitute a work based on the    Program (independent of having been made by running the    Program). Whether that is true d!
 epends on what the Program    does.&lt;/span&gt;&lt;/p&gt;    !
 &lt;p cl
ass=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;1. You may copy and    distribute verbatim copies of the Program&apos;s source code as you    receive it, in any medium, provided that you conspicuously and    appropriately publish on each copy an appropriate copyright    notice and disclaimer of warranty; keep intact all the notices    that refer to this License and to the absence of any warranty;    and give any other recipients of the Program a copy of this    License along with the Program.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-famil!
 y:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;You may charge a fee for    the physical act of transferring a copy, and you may at your    option offer warranty protection in exchange for a    fee.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;2. You may modify your    copy or copies of the Program or any portion of it, thus    forming a work based on the Program, and copy and distribute    such modifications or work under the terms of Section 1 above,    provided tha!
 t you also meet all of these conditions:&lt;/span&gt;&lt;/p&gt!
 ;    &lt
;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;a) You must cause the    modified files to carry prominent notices stating that you    changed the files and the date of any change.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;b) You must cause any work    that you distribute or publish, that in whole or in part    contain!
 s or is derived from the Program or any part thereof, to    be licensed as a whole at no charge to all third parties under    the terms of this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;c) If the modified program    normally reads commands interactively when run, you must cause    it, when started running for such interactive use in the most    ordinary way, to print or display an announcement including an    appropriate copyright notice and a notice that there is no    warranty (or else, saying that you provide a warranty) and that    users may redistribute the program under these conditions, and    telling the user ho!
 w to view a copy of this License.     (Exception: if the Progr!
 am itsel
f is interactive but does not    normally print such an announcement, your work based on the    Program is not required to print an announcement.)&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;These requirements apply    to the modified work as a whole.  If identifiable sections of    that work are not derived from the Program, and can be    reasonably considered independent and separate works in    themselves, then this License, and its t!
 erms, do not apply to    those sections when you distribute them as separate works.  But    when you distribute the same sections as part of a whole which    is a work based on the Program, the distribution of the whole    must be on the terms of this License, whose permissions for    other licensees extend to the entire whole, and thus to each    and every part regardless of who wrote it.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Thus, it is not the intent    of this section to claim rights or contest your rights to work    written entirely by you; rather, the intent is to exercise the    right to control the distribution of de!
 rivative or collective    works based on the Program.&lt;/span!
 &gt;&lt;
/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;In addition, mere    aggregation of another work not based on the Program with the    Program (or with a work based on the Program) on a volume of a    storage or distribution medium does not bring the other work    under the scope of this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10!
 .0pt;font-family:Arial&apos;&gt;3. You may copy and    distribute the Program (or a work based on it, under Section 2)    in object code or executable form under the terms of Sections 1    and 2 above provided that you also do one of the    following:&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;a) Accompany it with the    complete corresponding machine-readable source code, which must    be distributed under the terms of Sections 1 and 2 above on a    medium customarily used for software interchange;    or,&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&g!
 t;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&!
 apos;&gt
; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;b) Accompany it with a    written offer, valid for at least three years, to give any    third party, for a charge no more than your cost of physically    performing source distribution, a complete machine-readable    copy of the corresponding source code, to be distributed under    the terms of Sections 1 and 2 above on a medium customarily    used for software interchange; or,&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;c) Accompany it!
  with the    information you received as to the offer to distribute    corresponding source code.  (This alternative is allowed only    for noncommercial distribution and only if you received the    program in object code or executable form with such an offer,    in accord with Subsection b above.)&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;The source code for a work    means the preferred form of the work for making modifications    to it.  For an executable work, complete source code means all    the source code for all modules it contains, plus any    associated interface definition files, plus the scripts used to    control c!
 ompilation and installation of the executable.     However, as!
  a speci
al exception, the source code distributed    need not include anything that is normally distributed (in    either source or binary form) with the major components    (compiler, kernel, and so on) of the operating system on which    the executable runs, unless that component itself accompanies    the executable.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;If distribution of    executable or object code is made by offering access to copy    from a designated place, then offering equivalent access to    copy the source code from the same place counts as distribution    of the source code, even though third parties are not compelled   !
  to copy the source along with the object code.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;4. You may not copy,    modify, sublicense, or distribute the Program except as    expressly provided under this License.  Any attempt otherwise    to copy, modify, sublicense or distribute the Program is void,    and will automatically terminate your rights under this    License. However, parties who have received copies, or rights,    from you !
 under this License will not have their licenses    terminated !
 so long 
as such parties remain in full    compliance.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;5. You are not required to    accept this License, since you have not signed it.  However,    nothing else grants you permission to modify or distribute the    Program or its derivative works.  These actions are prohibited    by law if you do not accept this License.  Therefore, by    modifying or distributing the Program (or any work based on the    Program), you indicate your acceptance of this License to do    so, and all its terms and conditions for copying, distributing    or modifying the Program or works based on it.&lt;/span&gt;&lt;/p&!
 gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;6. Each time you    redistribute the Program (or any work based on the Program),    the recipient automatically receives a license from the    original licensor to copy, distribute or modify the Program    subject to these terms and conditions.  You may not impose any    further restrictions on the recipients&apos; exercise of the rights    granted herein. You are not responsible for enforcing    compliance by third parties to this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt!
 ;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p !
 class=&q
uot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;7. If, as a consequence of    a court judgment or allegation of patent infringement or for    any other reason (not limited to patent issues), conditions are    imposed on you (whether by court order, agreement or otherwise)    that contradict the conditions of this License, they do not    excuse you from the conditions of this License.  If you cannot    distribute so as to satisfy simultaneously your obligations    under this License and any other pertinent obligations, then as    a consequence you may not distribute the Program at all.  For    example, if a patent license would not permit royalty-free    redistribution of the Program by all those who receive copies    directly or indirectly through you, then the only way you could    satisfy both it and this License would be to refrain entirely    from distribution of t!
 he Program.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;If any portion of this    section is held invalid or unenforceable under any particular    circumstance, the balance of the section is intended to apply    and the section as a whole is intended to apply in other    circumstances.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;f!
 ont-size:10.0pt;font-family:Arial&apos;&gt;It is not the purpo!
 se of   
 this section to induce you to infringe any patents or other    property right claims or to contest validity of any such    claims; this section has the sole purpose of protecting the    integrity of the free software distribution system, which is    implemented by public license practices.  Many people have made    generous contributions to the wide range of software    distributed through that system in reliance on consistent    application of that system; it is up to the author/donor to    decide if he or she is willing to distribute software through    any other system and a licensee cannot impose that    choice.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0!
 pt;font-family:Arial&apos;&gt;This section is intended    to make thoroughly clear what is believed to be a consequence    of the rest of this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;8. If the distribution    and/or use of the Program is restricted in certain countries    either by patents or by copyrighted interfaces, the original    copyright holder who places the Program under this License may    add an explicit geograph!
 ical distribution limitation excluding    those countries, so !
 that dis
tribution is permitted only in or    among countries not thus excluded.  In such case, this License    incorporates the limitation as if written in the body of this    License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;9. The Free Software    Foundation may publish revised and/or new versions of the    General Public License from time to time.  Such new versions    will be similar in spirit to the present version, but may    differ in detail to address new problems or    concerns.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos!
 ;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Each version is given a    distinguishing version number.  If the Program specifies a    version number of this License which applies to it and &quot;any    later version&quot;, you have the option of following the terms and    conditions either of that version or of any later version    published by the Free Software Foundation.  If the Program does    not specify a version number of this License, you may choose    any version ever published by the Free Software    Foundation.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; s!
 tyle=    &apos;text-align:justify;text-autospace:none&apos;&gt!
 ;&lt;spa
n style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;10. If you wish to    incorporate parts of the Program into other free programs whose    distribution conditions are different, write to the author to    ask for permission.  For software which is copyrighted by the    Free Software Foundation, write to the Free Software    Foundation; we sometimes make exceptions for this.  Our    decision will be guided by the two goals of preserving the free    status of all derivatives of our free software and of promoting    the sharing and reuse of software generally.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;NO WARRAN!
 TY&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;11. BECAUSE THE PROGRAM IS    LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM,    TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN    OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER    PARTIES PROVIDE THE PROGRAM &quot;AS IS&quot; WITHOUT WARRANTY OF ANY    KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED    TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A    PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND    PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM    PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSAR!
 Y    SERVICING, REPAIR OR CORRECTION.&lt;/span&gt;&lt;/p&gt;  !
   &lt;p 
class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;12. IN NO EVENT UNLESS    REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY    COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR    REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU    FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR    CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO    USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR    DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR    THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY    OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN    ADVISED OF THE POSSIBILITY !
 OF SUCH DAMAGES.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;END OF TERMS AND    CONDITIONS&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;  &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -14320,7 +14322,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp" line="88"/>
         <source>Select Idx File</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -14329,88 +14331,88 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="14"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1966"/>
         <source>Xvid Configuraton</source>
-        <translation type="unfinished"></translation>
+        <translation>Xvid Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="50"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1967"/>
         <source>Configuration:</source>
-        <translation type="unfinished"></translation>
+        <translation>Konfiguration:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="216"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="67"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1968"/>
         <source>Save As</source>
-        <translation type="unfinished"></translation>
+        <translation>Speichern unter</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="74"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1969"/>
         <source>Delete</source>
-        <translation type="unfinished"></translation>
+        <translation>l?schen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="116"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2002"/>
         <source>General</source>
-        <translation type="unfinished"></translation>
+        <translation>Allgemein</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="128"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1970"/>
         <source>Rate Control</source>
-        <translation type="unfinished">Bitraten-Kontrolle</translation>
+        <translation>Bitraten-Kontrolle</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="284"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="148"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1971"/>
         <source>Target Video Size:</source>
-        <translation type="unfinished"></translation>
+        <translation>Ziel-Videogr??e:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="167"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1974"/>
         <source>Constant Bitrate (Single Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>konstante Bitrate (1 Durchlauf)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="172"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1975"/>
         <source>Constant Quantiser (Single Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>konstante Quantisierung (1 Durchlauf)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="177"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1976"/>
         <source>Video Size (Two Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>Videogr??e (2 Durchl?ufe)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="182"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1977"/>
         <source>Average Bitrate (Two Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>durchschnittl. Bitrate (2 Durchl?ufe)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="205"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1979"/>
         <source>Encoding Mode:</source>
-        <translation type="unfinished"></translation>
+        <translation>Kodier-Modus:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="285"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="233"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1981"/>
         <source>MB</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="308"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1982"/>
         <source>1 (High Quality)</source>
-        <translation type="unfinished"></translation>
+        <translation>1 (hohe Qualit?t)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="331"/>
@@ -14418,19 +14420,19 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1983"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2059"/>
         <source>Quantiser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="354"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1984"/>
         <source>31 (Low Quality)</source>
-        <translation type="unfinished"></translation>
+        <translation>31 (niedrige Qualit?t)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="432"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1985"/>
         <source>Pixel Aspect Ratio</source>
-        <translation type="unfinished">Pixel Seitenverh?ltnis (PAR)</translation>
+        <translation>Pixel Seitenverh?ltnis (PAR)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="452"/>
@@ -14438,349 +14440,349 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1986"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2001"/>
         <source>Custom:</source>
-        <translation type="unfinished"></translation>
+        <translation>individuelles Seitenverh?ltnis:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="462"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1987"/>
         <source>As Input</source>
-        <translation type="unfinished">Wie Eingang</translation>
+        <translation>Wie Eingang</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="523"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1989"/>
         <source>:</source>
-        <translation type="unfinished">:</translation>
+        <translation>:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="558"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1990"/>
         <source>Predefined Aspect Ratio:</source>
-        <translation type="unfinished"></translation>
+        <translation>Vordefiniertes Seitenverh?ltnis:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="577"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1993"/>
         <source>16:15 (PAL 4:3)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="582"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1994"/>
         <source>64:45 (PAL 16:9)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="587"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1995"/>
         <source>8:9 (NTSC 4:3)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="592"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1996"/>
         <source>32:27 (NTSC 16:9)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="620"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1998"/>
         <source>Multithreading</source>
-        <translation type="unfinished"></translation>
+        <translation>Mehrkernprozessoren</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="640"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1999"/>
         <source>Disable</source>
-        <translation type="unfinished">Deaktivieren</translation>
+        <translation>abschalten (nur einen Prozessorkern benutzen)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="647"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2000"/>
         <source>Auto-detect</source>
-        <translation type="unfinished">Auto-Erkennung</translation>
+        <translation>automatische Nutzung der vorhandenen Prozessorkerne</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="719"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2024"/>
         <source>Motion</source>
-        <translation type="unfinished"></translation>
+        <translation>Bewegung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="731"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2003"/>
         <source>Motion Estimation</source>
-        <translation type="unfinished">Absch?tzung der Bewegung</translation>
+        <translation>Bewegungabsch?tzung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="751"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2004"/>
         <source>Motion Estimation:</source>
-        <translation type="unfinished"></translation>
+        <translation>Bewegungabsch?tzung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="773"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2007"/>
         <source>Low</source>
-        <translation type="unfinished">Niedrig</translation>
+        <translation>Niedrig</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="778"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2008"/>
         <source>Medium</source>
-        <translation type="unfinished">Mittel</translation>
+        <translation>Mittel</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="783"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2009"/>
         <source>High</source>
-        <translation type="unfinished">Hoch</translation>
+        <translation>Hoch</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="816"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2011"/>
         <source>Rate Distortion Optimisation:</source>
-        <translation type="unfinished"></translation>
+        <translation>Rate Distortion Optimierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="838"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2014"/>
         <source>No Search (DCT only)</source>
-        <translation type="unfinished"></translation>
+        <translation>keine Suche (nur DCT)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="843"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2015"/>
         <source>Limited Search</source>
-        <translation type="unfinished"></translation>
+        <translation>geringe Suche</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="848"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2016"/>
         <source>Medium Search</source>
-        <translation type="unfinished"></translation>
+        <translation>mittlere Suche</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="853"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2017"/>
         <source>Wide Search</source>
-        <translation type="unfinished"></translation>
+        <translation>gro?e Suche</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="878"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2019"/>
         <source>Rate Distortion Optimisation for B-frames</source>
-        <translation type="unfinished"></translation>
+        <translation>Rate Distortion Optimierung f?r B-Bilder</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="888"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2020"/>
         <source>Chroma Motion Estimation</source>
-        <translation type="unfinished"></translation>
+        <translation>Bewegungsabsch?tzung nach Farbe</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="898"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2021"/>
         <source>Quarter Pixel Motion Estimation</source>
-        <translation type="unfinished"></translation>
+        <translation>Quarter Pixel Bewegungsabsch?tzung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="905"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2022"/>
         <source>Global Motion Compensation</source>
-        <translation type="unfinished"></translation>
+        <translation>globaler Bewegungsausgleich (GMC)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="912"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2023"/>
         <source>Turbo Mode</source>
-        <translation type="unfinished">Turbo Modus</translation>
+        <translation>Turbo Modus</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="936"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2043"/>
         <source>Frame</source>
-        <translation type="unfinished"></translation>
+        <translation>Bild</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="948"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2025"/>
         <source>Frame Encoding</source>
-        <translation type="unfinished"></translation>
+        <translation>Bildkodierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="960"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2026"/>
         <source>Chroma Optimiser</source>
-        <translation type="unfinished"></translation>
+        <translation>Farboptimierer</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="967"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2027"/>
         <source>Four Motion Vectors per Macroblock</source>
-        <translation type="unfinished"></translation>
+        <translation>4 Bewegungsvektoren pro Makroblock</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="974"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2028"/>
         <source>Cartoon</source>
-        <translation type="unfinished"></translation>
+        <translation>Zeichentrickfilm</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="981"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2029"/>
         <source>Greyscale</source>
-        <translation type="unfinished"></translation>
+        <translation>Graustufen (schwarz/wei?)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="996"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2030"/>
         <source>Interlaced:</source>
-        <translation type="unfinished"></translation>
+        <translation>Zeilensprungverfahren:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1015"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2033"/>
         <source>Bottom Field First</source>
-        <translation type="unfinished"></translation>
+        <translation>unteres Feld zuerst</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1020"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2034"/>
         <source>Top Field First</source>
-        <translation type="unfinished"></translation>
+        <translation>oberes Feld zuerst</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1056"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2036"/>
         <source>Maximum I-frame Interval:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. I-Bild Intervall:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1093"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2037"/>
         <source>Frame Drop Ratio:</source>
-        <translation type="unfinished"></translation>
+        <translation>Bildwegfall Anteil:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1135"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2038"/>
         <source>B-frames</source>
-        <translation type="unfinished"></translation>
+        <translation>B-Bilder</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1188"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2039"/>
         <source>B-frame Sensitivity:</source>
-        <translation type="unfinished"></translation>
+        <translation>B-Bilder Feineinstellung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1228"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2040"/>
         <source>Maximum Consecutive B-frames:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. aufeinanderfolgende B-Bilder:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1237"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2041"/>
         <source>Closed GOP</source>
-        <translation type="unfinished"></translation>
+        <translation>geschlossene Bildabfolge</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1244"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2042"/>
         <source>Packed Bitstream</source>
-        <translation type="unfinished"></translation>
+        <translation>gepackter Datenstrom</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1280"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2044"/>
         <source>Quantiser Control</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierungskontrolle</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1300"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2045"/>
         <source>Maximum B-frame Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. B-Bild Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1379"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2046"/>
         <source>B-frame Quantiser Offset:</source>
-        <translation type="unfinished"></translation>
+        <translation>B-Bild Quantisierungsversatz:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1422"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2047"/>
         <source>Minimum P-frame Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>min. P-Bild Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1429"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2048"/>
         <source>B-frame Quantiser Ratio:</source>
-        <translation type="unfinished"></translation>
+        <translation>B-Bild Quantisierungsverh?ltnis:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1436"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2049"/>
         <source>Minimum I-frame Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>min. I-Bild Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1515"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2050"/>
         <source>Minimum B-frame Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>min. B-Bild Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1522"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2051"/>
         <source>Maximum P-frame Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. P-Bild Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1643"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2052"/>
         <source>Maximum I-frame Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. I-Bild Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1652"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2053"/>
         <source>Trellis Quantisation</source>
-        <translation type="unfinished"></translation>
+        <translation>gitterartige Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1662"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2054"/>
         <source>Quantisation Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierungsmatrix</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1674"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2055"/>
         <source>H.263 Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1684"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2056"/>
         <source>MPEG Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1699"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2057"/>
         <source>Custom Matrix</source>
-        <translation type="unfinished">Individuelle Matrix</translation>
+        <translation>Individuelle Matrix</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1709"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2058"/>
         <source>Edit</source>
-        <translation type="unfinished"></translation>
+        <translation>Bearbeiten</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1748"/>
@@ -14788,43 +14790,43 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2060"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2064"/>
         <source>Single Pass</source>
-        <translation type="unfinished"></translation>
+        <translation>1. Durchlauf</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1772"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2061"/>
         <source>Smoother:</source>
-        <translation type="unfinished"></translation>
+        <translation>Gl?ttung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1779"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2062"/>
         <source>Averaging Quantiser Period:</source>
-        <translation type="unfinished"></translation>
+        <translation>durchschnitll. Quantisierungsperiode:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1786"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2063"/>
         <source>Reaction Delay Factor:</source>
-        <translation type="unfinished"></translation>
+        <translation>Reaktionsverz?gerungsfaktor:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1900"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2091"/>
         <source>Two Pass</source>
-        <translation type="unfinished"></translation>
+        <translation>2. Durchlauf</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1912"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2065"/>
         <source>I-frames</source>
-        <translation type="unfinished"></translation>
+        <translation>I-Bilder</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1924"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2066"/>
         <source>I-frame Boost:</source>
-        <translation type="unfinished"></translation>
+        <translation>I-Bild Verst?rkung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1949"/>
@@ -14842,73 +14844,73 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2081"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2083"/>
         <source>%</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2011"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2069"/>
         <source>I-frame Bitrate Reduction Threshold:</source>
-        <translation type="unfinished"></translation>
+        <translation>I-Bild Bitratensenkungsschwelle:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2018"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2070"/>
         <source>Maximum I-frame Bitrate Reduction:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. I-Bild Bitratenabsenkung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2043"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2071"/>
         <source>frame(s)</source>
-        <translation type="unfinished"></translation>
+        <translation>Bild(er)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2068"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2072"/>
         <source>Overflow Control</source>
-        <translation type="unfinished"></translation>
+        <translation>?berlaufkontrolle</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2120"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2074"/>
         <source>Maximum Overflow Degradation:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. ?berlaufverringerung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2213"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2077"/>
         <source>Maximum Overflow Improvement:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. ?berlaufaufbesserung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2220"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2078"/>
         <source>Overflow Control Strength:</source>
-        <translation type="unfinished"></translation>
+        <translation>?berlaufkontrollst?rke:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2230"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2079"/>
         <source>Curve Compression</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2242"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2080"/>
         <source>Above Average Curve Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2286"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2082"/>
         <source>Below Average Curve Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2333"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2084"/>
         <source>Video Buffer Verifier</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2360"/>
@@ -14916,72 +14918,72 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2085"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2090"/>
         <source>bit/s</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2397"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2086"/>
         <source>bit(s)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2419"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2087"/>
         <source>VBV Buffer Size:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2426"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2088"/>
         <source>Maximum VBV Bitrate:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2433"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2089"/>
         <source>Peak Bitrate Over 1 Second:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="118"/>
         <source>&lt;default&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="119"/>
         <source>&lt;custom&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation>&lt;individuell&gt;</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="216"/>
         <source>Xvid Configuration File (*.xml)</source>
-        <translation type="unfinished"></translation>
+        <translation>Xvid Konfigurationsdatei (*.xml)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="251"/>
         <source>Are you sure you wish to delete the selected configuration?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="271"/>
         <source>Target Bitrate:</source>
-        <translation type="unfinished"></translation>
+        <translation>Ziel-Bitrate:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="272"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="292"/>
         <source>kbit/s</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="278"/>
         <source>Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="291"/>
         <source>Average Bitrate:</source>
-        <translation type="unfinished">durchschnittliche Bitrate:</translation>
+        <translation>durchschnittliche Bitrate:</translation>
     </message>
 </context>
 <context>
@@ -14990,13 +14992,13 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="13"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1378"/>
         <source>Xvid Custom Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="29"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1380"/>
         <source>Intra 8x8</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="57"/>
@@ -15004,46 +15006,46 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1379"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1381"/>
         <source>Luma:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="732"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1382"/>
         <source>Inter 8x8</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="1459"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1383"/>
         <source>Load File</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="1479"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1384"/>
         <source>OK</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.ui" line="1489"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidCustomMatrixDialog.h" line="1385"/>
         <source>Cancel</source>
-        <translation type="unfinished"></translation>
+        <translation>Abbrechen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp" line="41"/>
         <source>Select Matrix File</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp" line="49"/>
         <source>Read Error</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp" line="49"/>
         <source>Error reading custom matrix file.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15051,7 +15053,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="13"/>
         <source>About Avidemux</source>
-        <translation type="unfinished">?ber Avidemux</translation>
+        <translation>?ber Avidemux</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="85"/>
@@ -15076,7 +15078,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="161"/>
         <source>&amp;License</source>
-        <translation type="unfinished"></translation>
+        <translation>&amp;Lizenz</translation>
     </message>
 </context>
 <context>
@@ -15085,7 +15087,7 @@
         <location filename="../plugins/ADM_videoFilters/ASharp/qt4/asharp.ui" line="13"/>
         <location filename="../plugins/build/ADM_videoFilters/ASharp/ui_asharp.h" line="139"/>
         <source>ASharp</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/ASharp/qt4/asharp.ui" line="109"/>
@@ -15103,13 +15105,13 @@
         <location filename="../plugins/ADM_videoFilters/ASharp/qt4/asharp.ui" line="123"/>
         <location filename="../plugins/build/ADM_videoFilters/ASharp/ui_asharp.h" line="142"/>
         <source>Block Adaptative</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/ASharp/qt4/asharp.ui" line="130"/>
         <location filename="../plugins/build/ADM_videoFilters/ASharp/ui_asharp.h" line="143"/>
         <source>High Quality Block Filtering</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15124,13 +15126,13 @@
         <location filename="../plugins/ADM_videoFilters/ChromaShift/qt4/chromashift.ui" line="37"/>
         <location filename="../plugins/build/ADM_videoFilters/ChromaShift/ui_chromashift.h" line="115"/>
         <source>V Shift</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/ChromaShift/qt4/chromashift.ui" line="44"/>
         <location filename="../plugins/build/ADM_videoFilters/ChromaShift/ui_chromashift.h" line="116"/>
         <source>U Shift</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15145,19 +15147,19 @@
         <location filename="../plugins/ADM_videoFilters/Contrast/qt4/contrast.ui" line="41"/>
         <location filename="../plugins/build/ADM_videoFilters/Contrast/ui_contrast.h" line="268"/>
         <source>Contrast:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Contrast/qt4/contrast.ui" line="97"/>
         <location filename="../plugins/build/ADM_videoFilters/Contrast/ui_contrast.h" line="269"/>
         <source>Brightness:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Contrast/qt4/contrast.ui" line="195"/>
         <location filename="../plugins/build/ADM_videoFilters/Contrast/ui_contrast.h" line="270"/>
         <source>Colour Space</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Contrast/qt4/contrast.ui" line="207"/>
@@ -15169,13 +15171,13 @@
         <location filename="../plugins/ADM_videoFilters/Contrast/qt4/contrast.ui" line="214"/>
         <location filename="../plugins/build/ADM_videoFilters/Contrast/ui_contrast.h" line="272"/>
         <source>ChromaU</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Contrast/qt4/contrast.ui" line="221"/>
         <location filename="../plugins/build/ADM_videoFilters/Contrast/ui_contrast.h" line="273"/>
         <source>ChromaV</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15190,13 +15192,13 @@
         <location filename="../plugins/ADM_videoFilters/Crop/qt4/crop.ui" line="33"/>
         <location filename="../plugins/build/ADM_videoFilters/Crop/ui_crop.h" line="185"/>
         <source>Right:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Crop/qt4/crop.ui" line="40"/>
         <location filename="../plugins/build/ADM_videoFilters/Crop/ui_crop.h" line="186"/>
         <source>Top:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Crop/qt4/crop.ui" line="83"/>
@@ -15208,19 +15210,19 @@
         <location filename="../plugins/ADM_videoFilters/Crop/qt4/crop.ui" line="104"/>
         <location filename="../plugins/build/ADM_videoFilters/Crop/ui_crop.h" line="188"/>
         <source>Bottom:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Crop/qt4/crop.ui" line="111"/>
         <location filename="../plugins/build/ADM_videoFilters/Crop/ui_crop.h" line="189"/>
         <source>Left:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Crop/qt4/crop.ui" line="141"/>
         <location filename="../plugins/build/ADM_videoFilters/Crop/ui_crop.h" line="190"/>
         <source>Auto Crop</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15346,12 +15348,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="113"/>
         <source>Phase:</source>
-        <translation type="unfinished"></translation>
+        <translation>Vorgang:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="126"/>
         <source>Video Codec:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="133"/>
@@ -15369,12 +15371,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="160"/>
         <source>Container:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="180"/>
         <source>Audio Codec:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="226"/>
@@ -15392,7 +15394,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="253"/>
         <source>Elapsed:</source>
-        <translation type="unfinished"></translation>
+        <translation>vergangene Zeit:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="266"/>
@@ -15434,7 +15436,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="446"/>
         <source>Total Frames:</source>
-        <translation type="unfinished"></translation>
+        <translation>Bilder gesamt:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="463"/>
@@ -15449,17 +15451,17 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="496"/>
         <source>Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierung:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="568"/>
         <source>Shut down computer when finished</source>
-        <translation>Danach Rechner herunter fahren</translation>
+        <translation>nach Beendigung den Computer herunterfahren</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="588"/>
         <source>Priority:</source>
-        <translation type="unfinished">Priorit?t:</translation>
+        <translation>Priorit?t:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/encoding.ui" line="599"/>
@@ -15492,7 +15494,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="46"/>
         <source>Pause / Abort</source>
-        <translation type="unfinished">Pause / Abbruch</translation>
+        <translation>Pause / Abbruch</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="107"/>
@@ -15519,19 +15521,19 @@
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="41"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="485"/>
         <source>Contrast:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="97"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="486"/>
         <source>Brightness:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="153"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="487"/>
         <source>Saturation:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="245"/>
@@ -15543,31 +15545,31 @@
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="472"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="489"/>
         <source>Green</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="479"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="490"/>
         <source>Red</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="486"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="491"/>
         <source>Blue</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="493"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="492"/>
         <source>Weight</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Eq2/qt4/eq2.ui" line="500"/>
         <location filename="../plugins/build/ADM_videoFilters/Eq2/ui_eq2.h" line="493"/>
         <source>Initial</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15615,7 +15617,7 @@
         <location filename="../plugins/ADM_videoFilters/Hue/qt4/hue.ui" line="123"/>
         <location filename="../plugins/build/ADM_videoFilters/Hue/ui_hue.h" line="125"/>
         <source>Saturation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15651,22 +15653,22 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
         <source>Job Name</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
         <source>Status</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
         <source>Start Time</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
         <source>End Time</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="100"/>
@@ -15682,27 +15684,27 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="100"/>
         <source>Are you sure you want to delete %s job?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="114"/>
         <source>Delete *all* job</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="114"/>
         <source>Are you sure you want to delete ALL jobs?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="138"/>
         <source>Already done</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="138"/>
         <source>This script has already been successfully executed.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15718,7 +15720,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/license.ui" line="13"/>
         <source>License</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15731,32 +15733,32 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="84"/>
         <source>&lt;big&gt;&lt;b&gt;Active Filters&lt;/b&gt;&lt;/big&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="141"/>
         <source>C&amp;onfigure</source>
-        <translation type="unfinished"></translation>
+        <translation>k&amp;onfigurieren</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="156"/>
         <source>P&amp;artial</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="163"/>
         <source>Open Script</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="166"/>
         <source>Load</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="176"/>
         <source>Save Script As</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="179"/>
@@ -15766,42 +15768,42 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="189"/>
         <source>Move Filter Down</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="192"/>
         <source>Down</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="202"/>
         <source>Move Filter Up</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="205"/>
         <source>Up</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="215"/>
         <source>Remove Filter</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="218"/>
         <source>Remove</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="251"/>
         <source>Add Filter</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="254"/>
         <source>Add</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="302"/>
@@ -15846,12 +15848,12 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="369"/>
         <source>&lt;big&gt;&lt;b&gt;Available Filters&lt;/b&gt;&lt;/big&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="418"/>
         <source>&amp;Preview</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -15992,7 +15994,7 @@
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="160"/>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="174"/>
         <source>TextLabel</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="47"/>
@@ -16002,7 +16004,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="61"/>
         <source>Frame Count: </source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="75"/>
@@ -16028,7 +16030,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="127"/>
         <source>Extra Video Properties</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/props.ui" line="139"/>
@@ -16097,7 +16099,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="388"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="388"/>
         <source>Aspect Ratio</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="37"/>
@@ -16105,7 +16107,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="389"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="389"/>
         <source>Lock Aspect Ratio</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="55"/>
@@ -16113,7 +16115,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="390"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="390"/>
         <source>Source:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="63"/>
@@ -16157,7 +16159,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="397"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="397"/>
         <source>Destination:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="141"/>
@@ -16165,7 +16167,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="404"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="404"/>
         <source>Resize Dimensions</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="161"/>
@@ -16173,7 +16175,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="405"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="405"/>
         <source>Width:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="197"/>
@@ -16181,7 +16183,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="406"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="406"/>
         <source>Height:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="232"/>
@@ -16189,7 +16191,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="407"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="407"/>
         <source>Round to the Nearest Multiple of 16</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="287"/>
@@ -16205,7 +16207,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="409"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="409"/>
         <source>Percent</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="327"/>
@@ -16221,7 +16223,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="411"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="411"/>
         <source>Error X / Y:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="384"/>
@@ -16229,7 +16231,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="412"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="412"/>
         <source>0.00 / 0.00</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="435"/>
@@ -16237,7 +16239,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="413"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="413"/>
         <source>Resize Method:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/AvisynthResize/qt4/resizing.ui" line="443"/>
@@ -16261,7 +16263,7 @@
         <location filename="../plugins/build/ADM_videoFilters/AvisynthResize/ui_resizing.h" line="418"/>
         <location filename="../plugins/build/ADM_videoFilters/MplayerResize/ui_resizing.h" line="418"/>
         <source>Lanzcos3</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -16287,13 +16289,13 @@
         <location filename="../plugins/ADM_videoFilters/Srt/qt4/srt.ui" line="13"/>
         <location filename="../plugins/build/ADM_videoFilters/Srt/ui_srt.h" line="106"/>
         <source>Subtitle Font Size and Position</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Srt/qt4/srt.ui" line="89"/>
         <location filename="../plugins/build/ADM_videoFilters/Srt/ui_srt.h" line="107"/>
         <source>Font Size :</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -16306,7 +16308,7 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp" line="72"/>
         <source>If value is smaller than threshold it is considered valid.Smaller value might mean more false positive.</source>
-        <translation type="unfinished">Wenn der Wert kleiner als die Schwelle ist, wird er als g?ltig angenommen. Kleinere Werte bedeuten mehr falsch-positiv</translation>
+        <translation>Wenn der Wert kleiner als die Schwelle ist, wird er als g?ltig angenommen. Kleinere Werte bedeuten mehr falsch-positiv.</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/BlendRemover/ADM_vidBlendRemoval.cpp" line="74"/>
@@ -16412,17 +16414,17 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/vobsub.ui" line="33"/>
         <source>Language:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/vobsub.ui" line="76"/>
         <source>Idx File:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/vobsub.ui" line="83"/>
         <source>Delay:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -16435,7 +16437,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/working.ui" line="74"/>
         <source>Elapsed:</source>
-        <translation type="unfinished"></translation>
+        <translation>vergangene Zeit:</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/working.ui" line="93"/>
@@ -16452,1287 +16454,1293 @@
     <name>x264ConfigDialog</name>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="14"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3079"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3086"/>
         <source>x264 Configuraton</source>
-        <translation type="unfinished"></translation>
+        <translation>x264 Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="50"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3080"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3087"/>
         <source>Configuration:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="292"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="294"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="67"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3081"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3088"/>
         <source>Save As</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="74"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3311"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3082"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3240"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3318"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3089"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3248"/>
         <source>Delete</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="116"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3110"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3118"/>
         <source>General</source>
-        <translation type="unfinished"></translation>
+        <translation>Allgemein</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="128"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3083"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3090"/>
         <source>Rate Control</source>
         <translation type="unfinished">Bitraten-Kontrolle</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="358"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="360"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="148"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3084"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3091"/>
         <source>Target Video Size:</source>
-        <translation type="unfinished"></translation>
+        <translation>Ziel-Videogr??e:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="167"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3087"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3094"/>
         <source>Constant Bitrate (Single Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>konstante Bitrate (1 Durchlauf)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="172"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3088"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3095"/>
         <source>Constant Quantiser (Single Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>konstante Quantisierung (1 Durchlauf)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="177"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3089"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3096"/>
         <source>Constant Rate Factor (Single Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>konstante Bildqualit?t (1 Durchlauf)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="182"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3090"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3097"/>
         <source>Video Size (Two Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>Videogr??e (2 Durchl?ufe)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="187"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3091"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3098"/>
         <source>Average Bitrate (Two Pass)</source>
-        <translation type="unfinished"></translation>
+        <translation>durchschnittl. Bitrate (2 Durchl?ufe)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="210"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3093"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3100"/>
         <source>Encoding Mode:</source>
-        <translation type="unfinished"></translation>
+        <translation>Kodier-Modus:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="359"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="361"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="238"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3095"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3102"/>
         <source>MB</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="313"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3096"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3103"/>
         <source>0 (High Quality)</source>
-        <translation type="unfinished"></translation>
+        <translation>0 (hohe Qualit?t)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="336"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2323"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3097"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3224"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2330"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3104"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3232"/>
         <source>Quantiser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="359"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3098"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3105"/>
         <source>51 (Low Quality)</source>
-        <translation type="unfinished"></translation>
+        <translation>51 (niedrige Qualit?t)</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="428"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3099"/>
-        <source>Macroblock-Tree Rate Control</source>
-        <translation type="unfinished"></translation>
-    </message>
-    <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="443"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3100"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="450"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3108"/>
         <source>Frametype Lookahead:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="457"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="606"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3101"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="464"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="613"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3109"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3117"/>
         <source>frames</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="482"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3102"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="489"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3110"/>
         <source>Multithreading</source>
-        <translation type="unfinished"></translation>
+        <translation>Mehrkernprozessoren</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="502"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3103"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="509"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3111"/>
         <source>Disable</source>
         <translation type="unfinished">Deaktivieren</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="509"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3104"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="516"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3112"/>
         <source>Auto-detect</source>
         <translation type="unfinished">Auto-Erkennung</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="527"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3584"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3105"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3275"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="534"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3591"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3113"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3283"/>
         <source>Custom:</source>
-        <translation type="unfinished"></translation>
+        <translation>individuelles Seitenverh?ltnis:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="564"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3106"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="571"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3114"/>
         <source>Enforce Repeatability</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="571"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3107"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="578"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3115"/>
         <source>Slice-based Threading</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="586"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3108"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="593"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3116"/>
         <source>Custom Threaded Lookahead Buffer:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="645"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3146"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="652"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3154"/>
         <source>Motion</source>
-        <translation type="unfinished"></translation>
+        <translation>Bewegung</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="657"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3111"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="664"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3119"/>
         <source>Motion Estimation</source>
         <translation type="unfinished">Absch?tzung der Bewegung</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="677"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3112"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="684"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3120"/>
         <source>Motion Estimation Method:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="696"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3115"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="703"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3123"/>
         <source>Diamond Search</source>
         <translation type="unfinished">Sternf?rmig suchen</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="701"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3116"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="708"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3124"/>
         <source>Hexagonal Search</source>
         <translation type="unfinished">Hexagonal suchen</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="706"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3117"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="713"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3125"/>
         <source>Uneven Multi-hexagonal Search</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="711"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3118"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="718"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3126"/>
         <source>Exhaustive Search</source>
         <translation type="unfinished">Vollst?ndige Suche</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="716"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3119"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="723"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3127"/>
         <source>Hadamard Exhaustive Search</source>
         <translation type="unfinished">&quot;Hadamard&quot; vollst?ndige Suche</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="773"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3121"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="780"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3129"/>
         <source>1 (Fast)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="793"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3122"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="800"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3130"/>
         <source>Subpixel Refinement</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="813"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3123"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="820"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3131"/>
         <source>9 (Best)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="893"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3124"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="900"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3132"/>
         <source>Motion Vector</source>
-        <translation type="unfinished"></translation>
+        <translation>Bewegungsvektor</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="949"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3125"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="956"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3133"/>
         <source>Maximum Motion Vector Length:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1031"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3126"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1038"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3134"/>
         <source>Minimum Buffer Between Threads:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1038"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3127"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1045"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3135"/>
         <source>Maximum Motion Vector Search Range:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1050"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3128"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1057"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3136"/>
         <source>Prediction</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1079"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1571"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1613"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3131"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3166"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3172"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1086"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1578"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1620"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3139"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3174"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3180"/>
         <source>Disabled</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1084"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3132"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1091"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3140"/>
         <source>Blind Offset</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1089"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3133"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1096"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3141"/>
         <source>Smart Analysis</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1112"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3135"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1119"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3143"/>
         <source>Direct Prediction Mode:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1119"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3136"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1126"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3144"/>
         <source>Weighted Prediction for P-frames:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1138"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3139"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1145"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3147"/>
         <source>None</source>
         <translation type="unfinished">Keine</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1143"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3140"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1150"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3148"/>
         <source>Spatial</source>
         <translation type="unfinished">r?umlich</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1148"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3141"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1155"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3149"/>
         <source>Temporal</source>
         <translation type="unfinished">zeitlich</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1153"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3383"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3142"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3245"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1160"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3390"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3150"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3253"/>
         <source>Auto</source>
         <translation type="unfinished">Auto</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1178"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3144"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1185"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3152"/>
         <source>Weighted Prediction for B-frames</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1185"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3145"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1192"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3153"/>
         <source>Constrained Intra Prediction</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1209"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3154"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1216"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3162"/>
         <source>Partition</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1221"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3147"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1228"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3155"/>
         <source>Partition Search</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1241"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3148"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1248"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3156"/>
         <source>8x8 DCT Spatial Transform</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1248"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3149"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1255"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3157"/>
         <source>8x8, 8x16 and 16x8 P-frame Intra-predicted Blocks</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1255"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3150"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1262"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3158"/>
         <source>8x8, 8x16 and 16x8 B-frame Intra-predicted Blocks</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1262"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3151"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1269"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3159"/>
         <source>4x4, 4x8 and 8x4 P-frame Intra-predicted Blocks</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1269"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3152"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1276"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3160"/>
         <source>8x8 Intra-predicted Blocks</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1276"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3153"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1283"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3161"/>
         <source>4x4 Intra-predicted Blocks</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1302"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3184"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1309"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3192"/>
         <source>Frame</source>
-        <translation type="unfinished"></translation>
+        <translation>Bild</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1314"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3155"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1321"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3163"/>
         <source>Frame Encoding</source>
-        <translation type="unfinished"></translation>
+        <translation>Bildkodierung</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1326"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3156"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1333"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3164"/>
         <source>CABAC</source>
         <translation type="unfinished">CABAC</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1333"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3157"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1340"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3165"/>
         <source>Pure Interlaced Mode</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1348"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3158"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1355"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3166"/>
         <source>Loop Filter</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1390"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2888"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3159"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3223"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1397"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2895"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3167"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3231"/>
         <source>Strength:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1429"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3160"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1436"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3168"/>
         <source>Threshold:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1495"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3161"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1502"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3169"/>
         <source>Maximum Reference Frames:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1543"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3162"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1550"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3170"/>
         <source>B-frames</source>
-        <translation type="unfinished"></translation>
+        <translation>B-Bilder</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1555"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3163"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1562"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3171"/>
         <source>B-frames as References:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1576"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3167"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1583"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3175"/>
         <source>Strictly Hierarchical Pyramid</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1581"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3168"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1588"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3176"/>
         <source>Non-strict (Not Blu-ray Compatible)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1618"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3173"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1625"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3181"/>
         <source>Fast</source>
         <translation type="unfinished">Schnell</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1623"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3174"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1630"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3182"/>
         <source>Optimal</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1715"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3176"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1722"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3184"/>
         <source>B-frame Bias:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1722"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3177"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1729"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3185"/>
         <source>Maximum Consecutive B-frames:</source>
-        <translation type="unfinished"></translation>
+        <translation>max. aufeinanderfolgende B-Bilder:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1729"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3178"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1736"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3186"/>
         <source>Adaptive B-frame Decision:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1739"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3179"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1746"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3187"/>
         <source>I-frames</source>
-        <translation type="unfinished"></translation>
+        <translation>I-Bilder</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1803"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3180"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1810"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3188"/>
         <source>Maximum GOP Size:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1810"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3181"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1817"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3189"/>
         <source>I-frame Threshold:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1856"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3182"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1863"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3190"/>
         <source>Minimum GOP Size:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1917"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3183"/>
-        <source>Pre-scenecut Detection</source>
-        <translation type="unfinished"></translation>
-    </message>
-    <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1943"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1955"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3185"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3206"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1950"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1962"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3193"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3214"/>
         <source>Analysis</source>
-        <translation type="unfinished"></translation>
+        <translation>Analyse</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1967"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3186"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1974"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3194"/>
         <source>Mixed References</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1974"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3187"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1981"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3195"/>
         <source>Chroma Motion Estimation</source>
-        <translation type="unfinished"></translation>
+        <translation>Bewegungsabsch?tzung nach Farbe</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1989"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3188"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1996"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3196"/>
         <source>Trellis Quantization:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2000"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3191"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2007"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3199"/>
         <source>Final Macroblock Only</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2005"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3192"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2012"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3200"/>
         <source>Always On</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2028"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3194"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2035"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3202"/>
         <source>Fast Skip Detection on P-frames</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2035"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3195"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2042"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3203"/>
         <source>DCT Decimation on P-frames</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2050"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3196"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2057"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3204"/>
         <source>Psychovisual Rate Distortion Optimisation:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2090"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3197"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2097"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3205"/>
         <source>Noise Reduction:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2122"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3198"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2129"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3206"/>
         <source>Luma Quantisation Deadzone</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2142"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3199"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2149"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3207"/>
         <source>Intra Luma Quantisation Deadzone:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2149"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3200"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2156"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3208"/>
         <source>Inter Luma Quantisation Deadzone:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2227"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3201"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2234"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3209"/>
         <source>Quantisation Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierungsmatrix</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2247"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3202"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2254"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3210"/>
         <source>Flat Matrix</source>
         <translation type="unfinished">breite Matrix</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2257"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3203"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2264"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3211"/>
         <source>JVT Matrix</source>
         <translation type="unfinished">JVT Matrix</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2272"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3204"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2279"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3212"/>
         <source>Custom Matrix</source>
         <translation type="unfinished">Individuelle Matrix</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2282"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3304"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3205"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3239"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2289"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3311"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3213"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3247"/>
         <source>Edit</source>
-        <translation type="unfinished"></translation>
+        <translation>Bearbeiten</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2335"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3207"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2342"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3215"/>
         <source>Quantiser Control</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierungskontrolle</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2388"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3208"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2395"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3216"/>
         <source>Maximum Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2395"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3209"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2402"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3217"/>
         <source>I and P-frame Quantiser Ratio:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2498"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2716"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3055"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3210"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2505"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2723"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3062"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3218"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3229"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3226"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3237"/>
         <source>%</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2520"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3211"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2527"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3219"/>
         <source>Maximum Quantiser Step:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2560"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3212"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2567"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3220"/>
         <source>P and B-frame Quantiser Ratio:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2567"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3213"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2574"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3221"/>
         <source>Average Bitrate Tolerance:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2574"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3214"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2581"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3222"/>
         <source>Chroma to Luma Quantiser Offset:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2617"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3215"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2624"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3223"/>
         <source>Minimum Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2671"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3216"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2678"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3224"/>
         <source>Quantiser Curve Compression</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2691"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3217"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2698"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3225"/>
         <source>Quantiser Curve Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2748"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3219"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2755"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3227"/>
         <source>Reduce Fluctuation Before Curve Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2830"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3220"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2837"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3228"/>
         <source>Reduce Fluctuation After Curve Compression:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2842"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3221"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2849"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3229"/>
         <source>Adaptive Quantisation</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2862"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3222"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2869"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3230"/>
         <source>Variance AQ</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2946"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3241"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2953"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3249"/>
         <source>Advanced</source>
         <translation type="unfinished">Fortgeschritten</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2966"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3225"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2973"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3233"/>
         <source>Video Buffer Verifier</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2986"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3226"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2993"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3234"/>
         <source>Maximum VBV Bitrate:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2993"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3227"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3000"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3235"/>
         <source>Initial VBV Buffer Occupancy:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3015"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3228"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3022"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3236"/>
         <source>kbit</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="346"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="364"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3092"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3230"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="348"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="366"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3099"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3238"/>
         <source>kbit/s</source>
+        <translation></translation>
+    </message>
+    <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="428"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3106"/>
+        <source>Fast First Pass</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3114"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3231"/>
-        <source>VBV Buffer Size:</source>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="435"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3107"/>
+        <source>Macroblock-tree Rate Control</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3126"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3232"/>
-        <source>Slicing</source>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1924"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3191"/>
+        <source>Periodic Intra Refresh</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3138"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3233"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3121"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3239"/>
+        <source>VBV Buffer Size:</source>
+        <translation></translation>
+    </message>
+    <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3133"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3240"/>
+        <source>Slicing</source>
+        <translation></translation>
+    </message>
+    <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3145"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3241"/>
         <source>Slices per Frame:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3145"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3234"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3152"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3242"/>
         <source>Maximum Size per Slice:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3167"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3235"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3174"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3243"/>
         <source>bytes</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3189"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3236"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3196"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3244"/>
         <source>Maximum Macroblocks per Slice:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3259"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3237"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3266"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3245"/>
         <source>Zones</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3297"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3238"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3304"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3246"/>
         <source>Add</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3339"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3351"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3242"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3344"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3346"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3358"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3250"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3352"/>
         <source>Output</source>
         <translation type="unfinished">Ausgabe</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3388"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3509"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3246"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3267"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3395"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3516"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3254"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3275"/>
         <source>1</source>
         <translation type="unfinished">1</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3393"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3247"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3400"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3255"/>
         <source>1.1</source>
         <translation type="unfinished">1.1</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3398"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3248"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3405"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3256"/>
         <source>1.2</source>
         <translation type="unfinished">1.2</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3403"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3249"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3410"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3257"/>
         <source>1.3</source>
         <translation type="unfinished">1.3</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3408"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3250"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3415"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3258"/>
         <source>2</source>
         <translation type="unfinished">2</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3413"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3251"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3420"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3259"/>
         <source>2.1</source>
         <translation type="unfinished">2.1</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3418"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3252"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3425"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3260"/>
         <source>2.2</source>
         <translation type="unfinished">2.2</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3423"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3514"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3253"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3268"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3430"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3521"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3261"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3276"/>
         <source>3</source>
         <translation type="unfinished">3</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3428"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3254"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3435"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3262"/>
         <source>3.1</source>
         <translation type="unfinished">3.1</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3433"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3255"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3440"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3263"/>
         <source>3.2</source>
         <translation type="unfinished">3.2</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3438"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3256"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3445"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3264"/>
         <source>4</source>
         <translation type="unfinished">4</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3443"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3257"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3450"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3265"/>
         <source>4.1</source>
         <translation type="unfinished">4.1</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3448"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3258"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3455"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3266"/>
         <source>4.2</source>
         <translation type="unfinished">4.2</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3453"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3259"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3460"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3267"/>
         <source>5</source>
         <translation type="unfinished">5</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3458"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3260"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3465"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3268"/>
         <source>5.1</source>
         <translation type="unfinished">5.1 Kan?le</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3481"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3262"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3488"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3270"/>
         <source>Sequence Parameter Set Identifer:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3488"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3263"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3495"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3271"/>
         <source>IDC Level:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3504"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3266"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3511"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3274"/>
         <source>0</source>
         <translation type="unfinished">0</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3519"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3269"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3526"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3277"/>
         <source>7</source>
         <translation type="unfinished">7</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3524"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3270"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3531"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3278"/>
         <source>15</source>
         <translation type="unfinished">15</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3529"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3271"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3536"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3279"/>
         <source>31</source>
         <translation type="unfinished">31</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3554"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3273"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3561"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3281"/>
         <source>Generate Access Unit Delimiters</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3564"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3274"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3571"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3282"/>
         <source>Pixel Aspect Ratio</source>
         <translation type="unfinished">Pixel Seitenverh?ltnis (PAR)</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3594"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3276"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3601"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3284"/>
         <source>As Input</source>
         <translation type="unfinished">Wie Eingang</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3655"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3278"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3662"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3286"/>
         <source>:</source>
         <translation type="unfinished">:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3690"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3279"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3697"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3287"/>
         <source>Predefined Aspect Ratio:</source>
-        <translation type="unfinished"></translation>
+        <translation>Vordefiniertes Seitenverh?ltnis:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3709"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3282"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3716"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3290"/>
         <source>16:15 (PAL 4:3)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3714"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3283"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3721"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3291"/>
         <source>64:45 (PAL 16:9)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3719"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3284"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3726"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3292"/>
         <source>8:9 (NTSC 4:3)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3724"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3285"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3731"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3293"/>
         <source>32:27 (NTSC 16:9)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3752"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3287"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3759"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3295"/>
         <source>Video Usability Information</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3764"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3288"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3771"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3296"/>
         <source>These settings are only suggestions for the playback equipment.  Use at your own risk.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3815"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3894"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3936"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4013"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4070"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3291"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3304"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3310"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3322"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3331"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3822"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3901"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3943"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4020"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4077"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3299"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3312"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3318"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3330"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3339"/>
         <source>Undefined</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3820"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3941"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4075"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3292"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3311"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3332"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3827"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3948"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4082"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3300"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3319"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3340"/>
         <source>BT709</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3825"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4080"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3293"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3333"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3832"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4087"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3301"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3341"/>
         <source>BT470M</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3830"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3951"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4085"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3294"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3313"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3334"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3837"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3958"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4092"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3302"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3321"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3342"/>
         <source>BT470BG</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3835"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3295"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3842"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3303"/>
         <source>Linear</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3840"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3296"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3847"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3304"/>
         <source>LOG100</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3845"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3297"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3852"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3305"/>
         <source>LOG316</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3850"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3298"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3857"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3306"/>
         <source>SMPTEL170M</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3855"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3961"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4095"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3299"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3315"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3336"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3862"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3968"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4102"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3307"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3323"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3344"/>
         <source>SMPTE240M</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3878"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3301"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3885"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3309"/>
         <source>Colour Primaries:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3899"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3305"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3906"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3313"/>
         <source>Show</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3904"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3306"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3911"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3314"/>
         <source>Crop</source>
         <translation type="unfinished">Zuschneiden</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3946"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3312"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3953"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3320"/>
         <source>FCC</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3956"/>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4090"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3314"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3335"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3963"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4097"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3322"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3343"/>
         <source>SMPTE170M</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3966"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3316"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3973"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3324"/>
         <source>GBR</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3971"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3317"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3978"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3325"/>
         <source>YCgCo</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3994"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3319"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4001"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3327"/>
         <source>Colour Matrix:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4018"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3323"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4025"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3331"/>
         <source>Component</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4023"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3324"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4030"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3332"/>
         <source>PAL</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4028"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3325"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4035"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3333"/>
         <source>NTSC</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4033"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3326"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4040"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3334"/>
         <source>SECAM</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4038"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3327"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4045"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3335"/>
         <source>MAC</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4100"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3337"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4107"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3345"/>
         <source>Film</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4123"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3339"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4130"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3347"/>
         <source>Transfer Characteristics:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4130"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3340"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4137"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3348"/>
         <source>Chroma Sample Location:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4167"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3341"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4174"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3349"/>
         <source>Video Format:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4174"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3342"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4181"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3350"/>
         <source>Overscan:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4183"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3343"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="4190"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3351"/>
         <source>Full Range Samples</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="164"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="166"/>
         <source>&lt;default&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="165"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="167"/>
         <source>&lt;custom&gt;</source>
-        <translation type="unfinished"></translation>
+        <translation>&lt;individuell&gt;</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="292"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="294"/>
         <source>x264 Configuration File (*.xml)</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="327"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="329"/>
         <source>Are you sure you wish to delete the selected configuration?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="345"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="347"/>
         <source>Target Bitrate:</source>
-        <translation type="unfinished"></translation>
+        <translation>Ziel-Bitrate:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="350"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="352"/>
         <source>Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>Quantisierung:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="354"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="356"/>
         <source>Quality:</source>
-        <translation type="unfinished"></translation>
+        <translation>Qualit?t:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="363"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="365"/>
         <source>Average Bitrate:</source>
         <translation type="unfinished">durchschnittliche Bitrate:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="402"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="404"/>
         <source>Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Variance Adaptive Quantisation will automatically be enabled.
 
 Do you wish to continue?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="449"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="451"/>
         <source>Trellis optimisation isn&apos;t possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.
 
  Do you wish to continue?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="461"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="463"/>
         <source>Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.
 
 Do you wish to continue?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="484"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="486"/>
         <source>Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Macroblock-Tree optimisation will automatically be disabled.
 
 Do you wish to continue?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="508"/>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="510"/>
         <source>Are you sure you wish to delete the selected zone?</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -17741,13 +17749,13 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="16"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2166"/>
         <source>x264 Custom Matrix</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="32"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2169"/>
         <source>Intra 4x4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="60"/>
@@ -17759,7 +17767,7 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2173"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2175"/>
         <source>Luma:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="270"/>
@@ -17767,58 +17775,58 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2168"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2171"/>
         <source>Chroma U/V:</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="478"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2172"/>
         <source>Inter 4x4</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="924"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2174"/>
         <source>Intra 8x8</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="1627"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2176"/>
         <source>Inter 8x8</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="2354"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2177"/>
         <source>Load File</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="2374"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2178"/>
         <source>OK</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.ui" line="2384"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264CustomMatrixDialog.h" line="2179"/>
         <source>Cancel</source>
-        <translation type="unfinished"></translation>
+        <translation>Abbrechen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp" line="49"/>
         <source>Select Matrix File</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp" line="61"/>
         <source>Read Error</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp" line="61"/>
         <source>Error reading custom matrix file.</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -17826,12 +17834,12 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp" line="51"/>
         <source>Quantiser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp" line="52"/>
         <source>Bitrate Factor</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 <context>
@@ -17839,32 +17847,32 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp" line="76"/>
         <source>Quantiser</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp" line="78"/>
         <source>Bitrate Factor</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp" line="110"/>
         <source>Frame Start</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp" line="112"/>
         <source>Frame End</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp" line="114"/>
         <source>Mode</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp" line="116"/>
         <source>Value</source>
-        <translation type="unfinished"></translation>
+        <translation></translation>
     </message>
 </context>
 </TS>



From gruntster at mail.berlios.de  Tue Jun  1 21:09:26 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Jun 2010 21:09:26 +0200
Subject: [Avidemux-svn-commit] r6287 -
	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux
Message-ID: <201006011909.o51J9Qx9014150@sheep.berlios.de>

Author: gruntster
Date: 2010-06-01 21:09:19 +0200 (Tue, 01 Jun 2010)
New Revision: 6287

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2c. Package Build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
Log:
[win32] build script tweaks

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat	2010-06-01 19:00:32 UTC (rev 6286)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat	2010-06-01 19:09:19 UTC (rev 6287)
@@ -11,10 +11,6 @@
 echo -- Generating Touch Files.html --
 sh gentouch.sh
 
-echo -- Generating avidemux.pot --
-cd "%sourceDir%\po"
-sh update_pot.bash
-
 goto end
 
 :error

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2c. Package Build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2c. Package Build.bat	2010-06-01 19:00:32 UTC (rev 6286)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2c. Package Build.bat	2010-06-01 19:09:19 UTC (rev 6287)
@@ -3,7 +3,6 @@
 
 copy "%buildDir%\Change Log.html" "%packageDir%"
 move "Tools\Package Notes.html" "%packageDir%"
-copy "%sourceDir%\po\avidemux.pot" "%packageDir%"
 
 cd %buildDir%
 echo -- Generating GTK+ Installer --

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2010-06-01 19:00:32 UTC (rev 6286)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2010-06-01 19:09:19 UTC (rev 6287)
@@ -1,5 +1,20 @@
 <?xml version="1.0"?>
 <log>
+  <buildentry revision="6261" date="2010-05-27">
+    <comment>Updated x264 to r1613.</comment>
+  </buildentry>
+  <buildentry revision="6195" date="2010-05-16">
+    <comment>Updated Freetype to version 2.3.12-1.</comment>
+    <comment>Updated GLib to version 2.24.1-1.</comment>
+    <comment>Updated GTK+ to version 2.20.1-1.</comment>
+    <comment>Updated x264 to r1583.</comment>
+  </buildentry>
+  <buildentry revision="6161 [2.5.3 Final]" date="2010-05-16">
+    <comment>Updated Avisynth Proxy GUI to version 2.12.</comment>
+  </buildentry>
+  <buildentry revision="6129" date="2010-04-15">
+    <comment>Updated x264 to r1542.</comment>
+  </buildentry>
   <buildentry revision="6121" date="2010-04-11">
     <comment>Updated ATK to version 1.30.0-1.</comment>
     <comment>Updated Cairo to version 1.8.10-3.</comment>



From gruntster at mail.berlios.de  Tue Jun  1 22:29:10 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 1 Jun 2010 22:29:10 +0200
Subject: [Avidemux-svn-commit] r6288 - in
	branches/avidemux_2.5_branch_gruntster:
	platforms/windows/build_scripts/avidemux
	platforms/windows/build_scripts/avidemux/Tools po
Message-ID: <201006012029.o51KTA7n019112@sheep.berlios.de>

Author: gruntster
Date: 2010-06-01 22:29:02 +0200 (Tue, 01 Jun 2010)
New Revision: 6288

Added:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Tools/Build Qt Translations.bat
Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat
   branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt
Log:
[win32] add batch file to win32 sdk for building Qt translations

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat	2010-06-01 19:09:19 UTC (rev 6287)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat	2010-06-01 20:29:02 UTC (rev 6288)
@@ -87,6 +87,9 @@
 mkdir "%sdkBuildDir%\i18n\gtk"
 
 copy *.ts "%sdkBuildDir%\i18n\qt4"
+copy qt_filter_context.xslt "%sdkBuildDir%\i18n\qt4\qt_filter_context.xsl"
+copy "%curDir%\Tools\Build Qt Translations.bat" "%sdkBuildDir%\i18n\qt4\Build Translations.bat"
+
 del avidemux_blank.ts
 
 sh update_pot.bash

Added: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Tools/Build Qt Translations.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Tools/Build Qt Translations.bat	2010-06-01 19:09:19 UTC (rev 6287)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Tools/Build Qt Translations.bat	2010-06-01 20:29:02 UTC (rev 6288)
@@ -0,0 +1,23 @@
+ at echo off
+
+if "%1" == "" (
+	echo Usage: "Build Translations.bat" [Qt directory]
+	echo e.g. "Build Translations.bat" C:\Qt\4.5.3
+	goto :EOF
+)
+
+for %%A in (avidemux*.ts) do (
+	echo.
+	echo Building %%~nA
+	echo.
+	"%1\bin\xmlpatterns" qt_filter_context.xsl "%%A" -output "%%~nA.xml"
+	"%1\bin\lrelease" "%%~nA.xml" -qm "%%~nA.qm"
+	del "%%~nA.xml"
+)
+
+for %%A in (qt*.ts) do (
+	echo.
+	echo Building %%~nA
+	echo.
+	"%1\bin\lrelease" "%%A"
+)

Modified: branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt	2010-06-01 19:09:19 UTC (rev 6287)
+++ branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt	2010-06-01 20:29:02 UTC (rev 6288)
@@ -1,8 +1,7 @@
 <?xml version="1.0" encoding="utf-8" ?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
-  <xsl:output method="xml" encoding="utf-8" indent="yes"/>
+  <xsl:output method="xml" encoding="utf-8" indent="yes" doctype-public=""/>
   <xsl:template match="TS">
-    <xsl:text disable-output-escaping="yes"><![CDATA[<!DOCTYPE TS>]]></xsl:text>
     <TS>
       <xsl:copy-of select="@*"/>
       <xsl:for-each select="context">



From mean at mail.berlios.de  Wed Jun  2 20:03:31 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 2 Jun 2010 20:03:31 +0200
Subject: [Avidemux-svn-commit] r6289 - in
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2:
	include include/scriptDialogFactory js/src_dialogFactory src
	src/scriptDialogFactory
Message-ID: <201006021803.o52I3VvF026448@sheep.berlios.de>

Author: mean
Date: 2010-06-02 20:03:27 +0200 (Wed, 02 Jun 2010)
New Revision: 6289

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDF.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFInteger.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFMenu.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFInteger.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFMenu.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFToggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt
Log:
[script/dialogFactory] Split helper from core so that helper can be reused by py binding

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDF.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDF.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDF.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,31 @@
+/**
+    \file   ADM_JSDF.h
+    \brief  JS / DF binding
+    \author gruntster/Mean 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_scriptDF_H
+#define _ADM_scriptDF_H
+#include "ADM_default.h"
+/**
+    \class ADM_scriptBaseHelper
+*/
+class ADM_scriptDFBaseHelper
+{
+public:
+                        ADM_scriptDFBaseHelper() {};
+    virtual             ~ADM_scriptDFBaseHelper() {};
+    virtual diaElem*    getControl(void)=0;
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFInteger.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFInteger.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFInteger.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,39 @@
+/**
+    \file   ADM_JSDFInteger.h
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_scriptDFInteger_H
+#define _ADM_scriptDFInteger_H
+
+#include "DIA_factory.h"
+#include "ADM_scriptDF.h"
+/**
+    \class ADM_JSDFIntegerHelper
+*/
+class ADM_scriptDFIntegerHelper : public ADM_scriptDFBaseHelper
+{
+private:
+	char                *_title;
+	int32_t             _value;
+        int32_t             _min,_max;
+
+public:
+                     ADM_scriptDFIntegerHelper(const char *title,int32_t mn, int32_t mx);
+                     ~ADM_scriptDFIntegerHelper(void);
+	virtual diaElem* getControl(void);
+            int32_t value(void);
+            void     setValue(int32_t value);
+};
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFMenu.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFMenu.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFMenu.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,43 @@
+/**
+    \file   ADM_scriptDFMenu.h
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_scriptDFMenu_H
+#define _ADM_scriptDFMenu_H
+
+#include "DIA_factory.h"
+#include "ADM_scriptDF.h"
+#include <vector>
+/**
+    \class ADM_scriptDFMenuHelper
+*/
+class ADM_scriptDFMenuHelper : public ADM_scriptDFBaseHelper
+{
+private:
+	char                *_title;
+	uint32_t            _index;
+	diaMenuEntry        *_menuEntries;
+	std::vector <char*> _items;
+
+public:
+                     ADM_scriptDFMenuHelper(const char *title);
+                     ~ADM_scriptDFMenuHelper(void);
+            void     addItem(const char* item);
+	virtual diaElem* getControl(void);
+            int      index(void);
+            void     setIndex(int index);
+};
+
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDFToggle.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,38 @@
+/**
+    \file   ADM_JSDFToggle.h
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_scriptDFToggle_H
+#define _ADM_scriptDFToggle_H
+
+#include "DIA_factory.h"
+#include "ADM_scriptDF.h"
+/**
+    \class ADM_JSDFToggleHelper
+*/
+class ADM_scriptDFToggleHelper : public ADM_scriptDFBaseHelper
+{
+private:
+	char                *_title;
+	uint32_t            _value;
+
+public:
+                     ADM_scriptDFToggleHelper(const char *title);
+                     ~ADM_scriptDFToggleHelper(void);
+	virtual diaElem* getControl(void);
+            uint32_t value(void);
+            void     setValue(uint32_t value);
+};
+#endif

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,40 @@
+/**
+    \file   ADM_scriptDialogFactory.h
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef _ADM_scriptDialogFactory_H
+#define _ADM_scriptDialogFactory_H
+
+#include "DIA_factory.h"
+#include "ADM_scriptDFMenu.h"
+#include <vector>
+/**
+    \class ADM_scriptDialogFactoryHelper
+*/
+class ADM_scriptDialogFactoryHelper
+{
+private:
+	char* _title;
+	std::vector <ADM_scriptDFBaseHelper*> _controls;
+
+public:
+	ADM_scriptDialogFactoryHelper(const char *title);
+	~ADM_scriptDialogFactoryHelper(void);
+	void addControl(ADM_scriptDFBaseHelper* control);
+	diaElem** getControls(int *controlCount);
+	const char* title(void);
+};
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -14,41 +14,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_JSDFInteger.h"
+#include "ADM_JSDFInteger.h"
+#include "ADM_scriptDFInteger.h"
 
-ADM_JSDFIntegerHelper::ADM_JSDFIntegerHelper(const char *title,int32_t mn,int32_t mx)
-{
-	_title = ADM_strdup(title); 
-    _min=mn;
-    _max=mx;
-	_value = 0;
-}
-
-ADM_JSDFIntegerHelper::~ADM_JSDFIntegerHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-
-
-}
-
-
-diaElem* ADM_JSDFIntegerHelper::getControl(void)
-{
-    return new diaElemInteger(&_value,_title, _min,_max);
-}
-
-int32_t ADM_JSDFIntegerHelper::value(void)
-{
-	return _value;
-}
-
-void ADM_JSDFIntegerHelper::setValue(int32_t index)
-{
-	_value = index;
-}
 /*************************************************/
 JSPropertySpec ADM_JSDFInteger::properties[] = 
 { 
@@ -95,7 +63,7 @@
 		return JS_FALSE;
 
 
-	ADM_JSDFIntegerHelper *pObject = new ADM_JSDFIntegerHelper(
+	ADM_scriptDFIntegerHelper *pObject = new ADM_scriptDFIntegerHelper(
                                                     JS_GetStringBytes(JSVAL_TO_STRING(argv[0])),
                                                     JSVAL_TO_INT(argv[1]),
                                                     JSVAL_TO_INT(argv[2])
@@ -111,7 +79,7 @@
 
 void ADM_JSDFInteger::JSDestructor(JSContext *cx, JSObject *obj)
 {
-	ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &m_dfIntegerHelper, NULL);
+	ADM_scriptDFIntegerHelper *pObject = (ADM_scriptDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &m_dfIntegerHelper, NULL);
 
 	if (pObject)
 		delete pObject;
@@ -121,7 +89,7 @@
 {
 	if (JSVAL_IS_INT(id)) 
 	{
-		ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &m_dfIntegerHelper, NULL);
+		ADM_scriptDFIntegerHelper *pObject = (ADM_scriptDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &m_dfIntegerHelper, NULL);
 
 		switch(JSVAL_TO_INT(id))
 		{
@@ -140,7 +108,7 @@
 {
 	if (JSVAL_IS_INT(id)) 
 	{
-		ADM_JSDFIntegerHelper *pObject = (ADM_JSDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &m_dfIntegerHelper, NULL);
+		ADM_scriptDFIntegerHelper *pObject = (ADM_scriptDFIntegerHelper*)JS_GetInstancePrivate(cx, obj, &m_dfIntegerHelper, NULL);
 
 		switch(JSVAL_TO_INT(id))
 		{

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFInteger.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -20,24 +20,8 @@
 #include "jsapi.h"
 #include "DIA_factory.h"
 #include "ADM_JSDF.h"
+#include "ADM_scriptDF.h"
 /**
-    \class ADM_JSDFIntegerHelper
-*/
-class ADM_JSDFIntegerHelper : public ADM_JSDFBaseHelper
-{
-private:
-	char                *_title;
-	int32_t             _value;
-    int32_t             _min,_max;
-
-public:
-                     ADM_JSDFIntegerHelper(const char *title,int32_t mn, int32_t mx);
-                     ~ADM_JSDFIntegerHelper(void);
-	virtual diaElem* getControl(void);
-            int32_t value(void);
-            void     setValue(int32_t value);
-};
-/**
     \class ADM_JSDFInteger
 */
 class ADM_JSDFInteger

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -14,72 +14,10 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_JSDFMenu.h"
+#include "ADM_JSDFMenu.h"
+#include "ADM_scriptDFMenu.h"
 
-ADM_JSDFMenuHelper::ADM_JSDFMenuHelper(const char *title)
-{
-	_title = ADM_strdup(title);
-	_menuEntries = NULL;
-	_index = 0;
-}
 
-ADM_JSDFMenuHelper::~ADM_JSDFMenuHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-
-	std::vector<char*>::iterator it;
-
-	for (it = _items.begin(); it != _items.end(); it++)
-		delete *it;
-
-	_items.clear();
-
-	if (_menuEntries)
-		delete _menuEntries;
-
-	_menuEntries = NULL;
-}
-
-void ADM_JSDFMenuHelper::addItem(const char* item)
-{
-	_items.push_back(ADM_strdup(item));
-}
-
-diaElem* ADM_JSDFMenuHelper::getControl(void)
-{
-	if (_menuEntries)
-		delete _menuEntries;
-
-	std::vector<char*>::iterator it;
-	int i = 0;
-
-	_menuEntries = new diaMenuEntry[_items.size()];	
-
-	for (it = _items.begin(); it != _items.end(); it++)
-	{
-		_menuEntries[i].val = i;
-		_menuEntries[i].text = *it;
-		_menuEntries[i].desc = NULL;
-
-		i++;
-	}
-
-	return new diaElemMenu(&_index, _title, _items.size(), _menuEntries);
-}
-
-int ADM_JSDFMenuHelper::index(void)
-{
-	return _index;
-}
-
-void ADM_JSDFMenuHelper::setIndex(int index)
-{
-	_index = index;
-}
-
 JSPropertySpec ADM_JSDFMenu::properties[] = 
 { 
 	{ "index", indexProperty, JSPROP_ENUMERATE },
@@ -117,7 +55,7 @@
 	if (!JSVAL_IS_STRING(argv[0]))
 		return JS_FALSE;
 
-	ADM_JSDFMenuHelper *pObject = new ADM_JSDFMenuHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+	ADM_scriptDFMenuHelper *pObject = new ADM_scriptDFMenuHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
 
 	if (!JS_SetPrivate(cx, obj, pObject))
 		return JS_FALSE;
@@ -129,7 +67,7 @@
 
 void ADM_JSDFMenu::JSDestructor(JSContext *cx, JSObject *obj)
 {
-	ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
+	ADM_scriptDFMenuHelper *pObject = (ADM_scriptDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
 
 	if (pObject)
 		delete pObject;
@@ -137,7 +75,7 @@
 
 JSBool ADM_JSDFMenu::addItem(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-	ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
+	ADM_scriptDFMenuHelper *pObject = (ADM_scriptDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
 
 	if (argc != 1)
 		return JS_FALSE;
@@ -154,7 +92,7 @@
 {
 	if (JSVAL_IS_INT(id)) 
 	{
-		ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
+		ADM_scriptDFMenuHelper *pObject = (ADM_scriptDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
 
 		switch(JSVAL_TO_INT(id))
 		{
@@ -173,7 +111,7 @@
 {
 	if (JSVAL_IS_INT(id)) 
 	{
-		ADM_JSDFMenuHelper *pObject = (ADM_JSDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
+		ADM_scriptDFMenuHelper *pObject = (ADM_scriptDFMenuHelper*)JS_GetInstancePrivate(cx, obj, &m_dfMenuHelper, NULL);
 
 		switch(JSVAL_TO_INT(id))
 		{

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFMenu.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -19,27 +19,10 @@
 
 #include "jsapi.h"
 #include "DIA_factory.h"
-#include "ADM_JSDF.h"
+#include "ADM_JSDF.h"
+#include "ADM_scriptDF.h"
 #include <vector>
-/**
-    \class ADM_JSDFMenuHelper
-*/
-class ADM_JSDFMenuHelper : public ADM_JSDFBaseHelper
-{
-private:
-	char                *_title;
-	uint32_t            _index;
-	diaMenuEntry        *_menuEntries;
-	std::vector <char*> _items;
 
-public:
-                     ADM_JSDFMenuHelper(const char *title);
-                     ~ADM_JSDFMenuHelper(void);
-            void     addItem(const char* item);
-	virtual diaElem* getControl(void);
-            int      index(void);
-            void     setIndex(int index);
-};
 /**
     \class ADM_JSDFMenu
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -14,39 +14,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_JSDFToggle.h"
+#include "ADM_JSDFToggle.h"
+#include "ADM_scriptDFToggle.h"
 
-ADM_JSDFToggleHelper::ADM_JSDFToggleHelper(const char *title)
-{
-	_title = ADM_strdup(title);
-	_value = 0;
-}
-
-ADM_JSDFToggleHelper::~ADM_JSDFToggleHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-
-
-}
-
-
-diaElem* ADM_JSDFToggleHelper::getControl(void)
-{
-    return new   diaElemToggle(&_value,_title,NULL);
-}
-
-uint32_t ADM_JSDFToggleHelper::value(void)
-{
-	return _value;
-}
-
-void ADM_JSDFToggleHelper::setValue(uint32_t index)
-{
-	_value = index;
-}
 /*************************************************/
 JSPropertySpec ADM_JSDFToggle::properties[] = 
 { 
@@ -86,7 +56,7 @@
 	if (!JSVAL_IS_STRING(argv[0]))
 		return JS_FALSE;
 
-	ADM_JSDFToggleHelper *pObject = new ADM_JSDFToggleHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+	ADM_scriptDFToggleHelper *pObject = new ADM_scriptDFToggleHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
 
 	if (!JS_SetPrivate(cx, obj, pObject))
 		return JS_FALSE;
@@ -98,7 +68,7 @@
 
 void ADM_JSDFToggle::JSDestructor(JSContext *cx, JSObject *obj)
 {
-	ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &m_dfToggleHelper, NULL);
+	ADM_scriptDFToggleHelper *pObject = (ADM_scriptDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &m_dfToggleHelper, NULL);
 
 	if (pObject)
 		delete pObject;
@@ -108,7 +78,7 @@
 {
 	if (JSVAL_IS_INT(id)) 
 	{
-		ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &m_dfToggleHelper, NULL);
+		ADM_scriptDFToggleHelper *pObject = (ADM_scriptDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &m_dfToggleHelper, NULL);
 
 		switch(JSVAL_TO_INT(id))
 		{
@@ -127,7 +97,7 @@
 {
 	if (JSVAL_IS_INT(id)) 
 	{
-		ADM_JSDFToggleHelper *pObject = (ADM_JSDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &m_dfToggleHelper, NULL);
+		ADM_scriptDFToggleHelper *pObject = (ADM_scriptDFToggleHelper*)JS_GetInstancePrivate(cx, obj, &m_dfToggleHelper, NULL);
 
 		switch(JSVAL_TO_INT(id))
 		{

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDFToggle.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -20,22 +20,8 @@
 #include "jsapi.h"
 #include "DIA_factory.h"
 #include "ADM_JSDF.h"
-/**
-    \class ADM_JSDFToggleHelper
-*/
-class ADM_JSDFToggleHelper : public ADM_JSDFBaseHelper
-{
-private:
-	char                *_title;
-	uint32_t            _value;
+#include "ADM_scriptDF.h"
 
-public:
-                     ADM_JSDFToggleHelper(const char *title);
-                     ~ADM_JSDFToggleHelper(void);
-	virtual diaElem* getControl(void);
-            uint32_t value(void);
-            void     setValue(uint32_t value);
-};
 /**
     \class ADM_JSDFToggle
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -13,48 +13,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_JSDialogFactory.h"
+#include "ADM_JSDialogFactory.h"
+#include "ADM_scriptDialogFactory.h"
 
-ADM_JSDialogFactoryHelper::ADM_JSDialogFactoryHelper(const char *title)
-{
-	_title = ADM_strdup(title);
-}
-
-ADM_JSDialogFactoryHelper::~ADM_JSDialogFactoryHelper(void)
-{
-	if (_title)
-		delete _title;
-
-	_title = NULL;
-}
-
-void ADM_JSDialogFactoryHelper::addControl(ADM_JSDFBaseHelper* control)
-{
-	_controls.push_back(control);
-}
-
-diaElem** ADM_JSDialogFactoryHelper::getControls(int *controlCount)
-{
-	*controlCount = (int)_controls.size();
-
-	std::vector<ADM_JSDFBaseHelper*>::iterator it;
-	int i = 0;
-	diaElem **elems = new diaElem*[*controlCount];
-
-	for (it = _controls.begin(); it != _controls.end(); it++)
-	{
-		elems[i] = (*it)->getControl();
-		i++;
-	}
-
-	return elems;
-}
-
-const char* ADM_JSDialogFactoryHelper::title(void)
-{
-	return _title;
-}
-
 JSFunctionSpec ADM_JSDialogFactory::methods[] =
 {
 	{ "addControl", addControl, 1, 0, 0 },
@@ -87,7 +48,7 @@
 	if (JSVAL_IS_STRING(argv[0]) == false)
 		return JS_FALSE;
 
-	ADM_JSDialogFactoryHelper *pObject = new ADM_JSDialogFactoryHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
+	ADM_scriptDialogFactoryHelper *pObject = new ADM_scriptDialogFactoryHelper(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])));
 
 	if (!JS_SetPrivate(cx, obj, pObject))
 		return JS_FALSE;
@@ -99,7 +60,7 @@
 
 void ADM_JSDialogFactory::JSDestructor(JSContext *cx, JSObject *obj)
 {
-	ADM_JSDialogFactoryHelper *pObject = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &m_dialogFactoryHelper, NULL);
+	ADM_scriptDialogFactoryHelper *pObject = (ADM_scriptDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &m_dialogFactoryHelper, NULL);
 
 	if (pObject != NULL)
 		delete pObject;
@@ -107,19 +68,19 @@
 
 JSBool ADM_JSDialogFactory::addControl(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-	ADM_JSDialogFactoryHelper *p = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &m_dialogFactoryHelper, NULL);
+	ADM_scriptDialogFactoryHelper *p = (ADM_scriptDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &m_dialogFactoryHelper, NULL);
 
 	if (argc != 1)
 		return JS_FALSE;
 
-	p->addControl((ADM_JSDFMenuHelper*)JS_GetPrivate(cx, JSVAL_TO_OBJECT(argv[0])));
+	p->addControl((ADM_scriptDFMenuHelper*)JS_GetPrivate(cx, JSVAL_TO_OBJECT(argv[0])));
 
 	return JS_TRUE;
 }
 
 JSBool ADM_JSDialogFactory::show(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
-	ADM_JSDialogFactoryHelper *p = (ADM_JSDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &m_dialogFactoryHelper, NULL);
+	ADM_scriptDialogFactoryHelper *p = (ADM_scriptDialogFactoryHelper*)JS_GetInstancePrivate(cx, obj, &m_dialogFactoryHelper, NULL);
 
 	if (argc != 0)
 		return JS_FALSE;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory.h	2010-06-02 18:03:27 UTC (rev 6289)
@@ -20,24 +20,9 @@
 #include "jsapi.h"
 #include "DIA_factory.h"
 #include "ADM_JSDFMenu.h"
+#include "ADM_scriptDFMenu.h"
 #include <vector>
 /**
-    \class ADM_JSDialogFactoryHelper
-*/
-class ADM_JSDialogFactoryHelper
-{
-private:
-	char* _title;
-	std::vector <ADM_JSDFBaseHelper*> _controls;
-
-public:
-	ADM_JSDialogFactoryHelper(const char *title);
-	~ADM_JSDialogFactoryHelper(void);
-	void addControl(ADM_JSDFBaseHelper* control);
-	diaElem** getControls(int *controlCount);
-	const char* title(void);
-};
-/**
     \class ADM_JSDialogFactory
 */
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/ADM_JSDialogFactory_if.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -25,6 +25,11 @@
 #include "ADM_JSDFInteger.h"
 #include "ADM_JSDialogFactory.h"
 
+#include "ADM_scriptDFMenu.h"
+#include "ADM_scriptDFToggle.h"
+#include "ADM_scriptDFInteger.h"
+#include "ADM_scriptDialogFactory.h"
+
 /**
     \fn ADM_JSDialogFactoryInit()
     \brief Hook classes to spidermonkey

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/src_dialogFactory/CMakeLists.txt	2010-06-02 18:03:27 UTC (rev 6289)
@@ -9,6 +9,7 @@
 
 ADD_DEFINITIONS("-DJS_THREADSAFE -DXP_UNIX")
 ADD_LIBRARY(ADM_scriptDF STATIC ${ADM_scriptDF_SRCS})
+include_directories(../../include/scriptDialogFactory)
 include_directories(../include)
 include_directories(.)
 include_directories(${AVIDEMUX_TOP_SOURCE_DIR}/avidemux_core/ADM_smjs)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt	2010-06-02 18:03:27 UTC (rev 6289)
@@ -5,6 +5,10 @@
         ADM_scriptAvidemuxInfo.cpp
         ADM_scriptAudio.cpp
         ADM_scriptUtils.cpp
+        scriptDialogFactory/ADM_scriptDFInteger.cpp
+        scriptDialogFactory/ADM_scriptDFMenu.cpp
+        scriptDialogFactory/ADM_scriptDFToggle.cpp
+        scriptDialogFactory/ADM_scriptDialogFactory.cpp
 )
 
 

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFInteger.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFInteger.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFInteger.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,51 @@
+/**
+    \file   ADM_JSDFInteger.cpp
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "scriptDialogFactory/ADM_scriptDFInteger.h"
+
+ADM_scriptDFIntegerHelper::ADM_scriptDFIntegerHelper(const char *title,int32_t mn,int32_t mx)
+{
+	_title = ADM_strdup(title); 
+    _min=mn;
+    _max=mx;
+	_value = 0;
+}
+
+ADM_scriptDFIntegerHelper::~ADM_scriptDFIntegerHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+
+
+}
+
+
+diaElem* ADM_scriptDFIntegerHelper::getControl(void)
+{
+    return new diaElemInteger(&_value,_title, _min,_max);
+}
+
+int32_t ADM_scriptDFIntegerHelper::value(void)
+{
+	return _value;
+}
+
+void ADM_scriptDFIntegerHelper::setValue(int32_t index)
+{
+	_value = index;
+}

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFMenu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFMenu.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFMenu.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,82 @@
+/**
+    \file   ADM_scriptDFMenu.cpp
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "scriptDialogFactory/ADM_scriptDFMenu.h"
+
+ADM_scriptDFMenuHelper::ADM_scriptDFMenuHelper(const char *title)
+{
+	_title = ADM_strdup(title);
+	_menuEntries = NULL;
+	_index = 0;
+}
+
+ADM_scriptDFMenuHelper::~ADM_scriptDFMenuHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+
+	std::vector<char*>::iterator it;
+
+	for (it = _items.begin(); it != _items.end(); it++)
+		delete *it;
+
+	_items.clear();
+
+	if (_menuEntries)
+		delete _menuEntries;
+
+	_menuEntries = NULL;
+}
+
+void ADM_scriptDFMenuHelper::addItem(const char* item)
+{
+	_items.push_back(ADM_strdup(item));
+}
+
+diaElem* ADM_scriptDFMenuHelper::getControl(void)
+{
+	if (_menuEntries)
+		delete _menuEntries;
+
+	std::vector<char*>::iterator it;
+	int i = 0;
+
+	_menuEntries = new diaMenuEntry[_items.size()];	
+
+	for (it = _items.begin(); it != _items.end(); it++)
+	{
+		_menuEntries[i].val = i;
+		_menuEntries[i].text = *it;
+		_menuEntries[i].desc = NULL;
+
+		i++;
+	}
+
+	return new diaElemMenu(&_index, _title, _items.size(), _menuEntries);
+}
+
+int ADM_scriptDFMenuHelper::index(void)
+{
+	return _index;
+}
+
+void ADM_scriptDFMenuHelper::setIndex(int index)
+{
+	_index = index;
+}
+

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFToggle.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFToggle.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDFToggle.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,50 @@
+/**
+    \file   ADM_scriptDFToggle.cpp
+    \brief  JS / DF binding
+    \author gruntster/mean 2010
+
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "scriptDialogFactory/ADM_scriptDFToggle.h"
+
+ADM_scriptDFToggleHelper::ADM_scriptDFToggleHelper(const char *title)
+{
+	_title = ADM_strdup(title);
+	_value = 0;
+}
+
+ADM_scriptDFToggleHelper::~ADM_scriptDFToggleHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+
+
+}
+
+
+diaElem* ADM_scriptDFToggleHelper::getControl(void)
+{
+    return new   diaElemToggle(&_value,_title,NULL);
+}
+
+uint32_t ADM_scriptDFToggleHelper::value(void)
+{
+	return _value;
+}
+
+void ADM_scriptDFToggleHelper::setValue(uint32_t index)
+{
+	_value = index;
+}
+/**/

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp	2010-06-01 20:29:02 UTC (rev 6288)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp	2010-06-02 18:03:27 UTC (rev 6289)
@@ -0,0 +1,58 @@
+/**
+    \file   ADM_scriptDialogFactory.cpp
+    \brief  JS / DF binding
+    \author gruntster 2010
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "scriptDialogFactory/ADM_scriptDialogFactory.h"
+
+ADM_scriptDialogFactoryHelper::ADM_scriptDialogFactoryHelper(const char *title)
+{
+	_title = ADM_strdup(title);
+}
+
+ADM_scriptDialogFactoryHelper::~ADM_scriptDialogFactoryHelper(void)
+{
+	if (_title)
+		delete _title;
+
+	_title = NULL;
+}
+
+void ADM_scriptDialogFactoryHelper::addControl(ADM_scriptDFBaseHelper* control)
+{
+	_controls.push_back(control);
+}
+
+diaElem** ADM_scriptDialogFactoryHelper::getControls(int *controlCount)
+{
+	*controlCount = (int)_controls.size();
+
+	std::vector<ADM_scriptDFBaseHelper*>::iterator it;
+	int i = 0;
+	diaElem **elems = new diaElem*[*controlCount];
+
+	for (it = _controls.begin(); it != _controls.end(); it++)
+	{
+		elems[i] = (*it)->getControl();
+		i++;
+	}
+
+	return elems;
+}
+
+const char* ADM_scriptDialogFactoryHelper::title(void)
+{
+	return _title;
+}
+// EOF
+



From mean at mail.berlios.de  Wed Jun  2 20:03:47 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 2 Jun 2010 20:03:47 +0200
Subject: [Avidemux-svn-commit] r6290 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2/py cmake
Message-ID: <201006021803.o52I3lGJ026628@sheep.berlios.de>

Author: mean
Date: 2010-06-02 20:03:34 +0200 (Wed, 02 Jun 2010)
New Revision: 6290

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[pyDialogFactory] Add integer and toggle

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-02 18:03:34 UTC (rev 6290)
@@ -26,10 +26,15 @@
 #include "ADM_scriptEditor.h"
 #include "ADM_scriptUtils.h"
 
-#undef free
+#include "scriptDialogFactory/ADM_scriptDFToggle.h"
+#include "scriptDialogFactory/ADM_scriptDFInteger.h"
 
+
+
 #include "adm_gen.cpp"
 #include "editor_gen.cpp"
+#include "pyDFToggle_gen.cpp"
+#include "pyDFInteger_gen.cpp"
 
 extern pyRegisterClass initClasspyAdm;
 extern pyRegisterClass initClasspyEditor;
@@ -49,6 +54,8 @@
     py->init();
     py->registerClass("Avidemux",initClasspyAdm);
     py->registerClass("Editor",initClasspyEditor);
+    py->registerClass("DFToggle",initClasspyDFToggle);
+    py->registerClass("DFInteger",initClasspyDFInteger);
     tinyPy::registerLogger(pyLogger);
     return true;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-02 18:03:34 UTC (rev 6290)
@@ -6,7 +6,7 @@
   tinyParams pm(tp);
   void *me=pm.asThis(&self,100);
   const char *p0= pm.asString();
-  int p1= pm.asDouble();
+  int p1= pm.asInt();
   CONFcouple *p2=NULL;
   pm.makeCouples(&p2);
   int r=  scriptSetAudioCodec(p0,p1,p2); 
@@ -52,9 +52,9 @@
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
   void *me=pm.asThis(&self,100);
-  int p0= pm.asDouble();
-  int p1= pm.asDouble();
-  int p2= pm.asDouble();
+  int p0= pm.asInt();
+  int p1= pm.asInt();
+  int p2= pm.asInt();
   int r=  scriptSetPostProc(p0,p1,p2); 
   return tp_number(r);
 }
@@ -108,7 +108,7 @@
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
   void *me=pm.asThis(&self,100);
-  int p0= pm.asDouble();
+  int p0= pm.asInt();
   float p1= pm.asFloat();
   float p2= pm.asFloat();
   int r=  scriptAddSegment(p0,p1,p2); 
@@ -148,8 +148,20 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,100);
   char const *key = pm.asString();
+  if (!strcmp(key, "audioResample"))
+  {
+     return tp_number(scriptGetResample());
+  }
+  if (!strcmp(key, "markerA"))
+  {
+     return tp_number(scriptGetMarkerA());
+  }
+  if (!strcmp(key, "markerB"))
+  {
+     return tp_number(scriptGetMarkerB());
+  }
   if (!strcmp(key, "audioCodec"))
   {
      return tp_method(vm,self,zzpy_audioCodec);
@@ -222,11 +234,31 @@
   tinyParams pm(vm);
   void *me=pm.asThis(&self,100);
   char const *key = pm.asString();
+  if (!strcmp(key, "audioResample"))
+  {
+     int val=pm.asInt();
+     scriptSetResample(val);
+     return tp_None;
+  }
+  if (!strcmp(key, "markerA"))
+  {
+     double val=pm.asDouble();
+     scriptSetMarkerA(val);
+     return tp_None;
+  }
+  if (!strcmp(key, "markerB"))
+  {
+     double val=pm.asDouble();
+     scriptSetMarkerB(val);
+     return tp_None;
+  }
   return tp_None;
 }
+// Dctor
 static void myDtorpyAdm(tp_vm *vm,tp_obj self)
 {
 }
+// Ctor ()
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
   tp_obj self = tp_getraw(vm);

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-02 18:03:34 UTC (rev 6290)
@@ -0,0 +1,7 @@
+#           name    cookie id
+/* CLASS */ pyDFInteger : ADM_scriptDFIntegerHelper : 201
+#              cname:pyname
+/* CTOR */   (str,int,int) 
+#
+/* ATTRIBUTES */ int value:setValue,value
+#

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp	2010-06-02 18:03:34 UTC (rev 6290)
@@ -0,0 +1,62 @@
+// Generated by admPyClass.pl do not edit !
+tp_obj zzpy__pyDFInteger_get(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDFIntegerHelper *me=(ADM_scriptDFIntegerHelper *)pm.asThis(&self,201);
+  char const *key = pm.asString();
+  if (!strcmp(key, "value"))
+  {
+     if(!me) pm.raise("pyDFInteger:No this!");
+     return tp_number(me->value());
+  }
+  return tp_get(vm,self,tp_string(key));
+}
+tp_obj zzpy__pyDFInteger_set(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDFIntegerHelper *me=(ADM_scriptDFIntegerHelper *)pm.asThis(&self,201);
+  char const *key = pm.asString();
+  if (!strcmp(key, "value"))
+  {
+     if(!me) pm.raise("pyDFInteger:No this!");
+     int val=pm.asInt();
+     me->setValue(val);
+     return tp_None;
+  }
+  return tp_None;
+}
+// Dctor
+static void myDtorpyDFInteger(tp_vm *vm,tp_obj self)
+{
+  ADM_scriptDFIntegerHelper *cookie=(ADM_scriptDFIntegerHelper *)self.data.val;
+  if(cookie) delete cookie;
+  self.data.val=NULL;
+}
+// Ctor (str int int)
+static tp_obj myCtorpyDFInteger(tp_vm *vm)
+{
+  tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
+  const char *p0= pm.asString();
+  int p1= pm.asInt();
+  int p2= pm.asInt();
+  ADM_scriptDFIntegerHelper *me=new ADM_scriptDFIntegerHelper(p0,p1,p2);
+  tp_obj cdata = tp_data(vm, 201, me);
+  cdata.data.info->xfree = myDtorpyDFInteger;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
+}
+static tp_obj zzpy__pyDFInteger_help(TP)
+ {
+};
+tp_obj initClasspyDFInteger(tp_vm *vm)
+{
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyDFInteger));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyDFInteger_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyDFInteger_get));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyDFInteger_help));
+  return myClass;
+}

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-02 18:03:34 UTC (rev 6290)
@@ -0,0 +1,7 @@
+#           name    cookie id
+/* CLASS */ pyDFToggle : ADM_scriptDFToggleHelper : 200
+#              cname:pyname
+/* CTOR */   (str) 
+#
+/* ATTRIBUTES */ int value:setValue,value
+#

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp	2010-06-02 18:03:34 UTC (rev 6290)
@@ -0,0 +1,60 @@
+// Generated by admPyClass.pl do not edit !
+tp_obj zzpy__pyDFToggle_get(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDFToggleHelper *me=(ADM_scriptDFToggleHelper *)pm.asThis(&self,200);
+  char const *key = pm.asString();
+  if (!strcmp(key, "value"))
+  {
+     if(!me) pm.raise("pyDFToggle:No this!");
+     return tp_number(me->value());
+  }
+  return tp_get(vm,self,tp_string(key));
+}
+tp_obj zzpy__pyDFToggle_set(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDFToggleHelper *me=(ADM_scriptDFToggleHelper *)pm.asThis(&self,200);
+  char const *key = pm.asString();
+  if (!strcmp(key, "value"))
+  {
+     if(!me) pm.raise("pyDFToggle:No this!");
+     int val=pm.asInt();
+     me->setValue(val);
+     return tp_None;
+  }
+  return tp_None;
+}
+// Dctor
+static void myDtorpyDFToggle(tp_vm *vm,tp_obj self)
+{
+  ADM_scriptDFToggleHelper *cookie=(ADM_scriptDFToggleHelper *)self.data.val;
+  if(cookie) delete cookie;
+  self.data.val=NULL;
+}
+// Ctor (str)
+static tp_obj myCtorpyDFToggle(tp_vm *vm)
+{
+  tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
+  const char *p0= pm.asString();
+  ADM_scriptDFToggleHelper *me=new ADM_scriptDFToggleHelper(p0);
+  tp_obj cdata = tp_data(vm, 200, me);
+  cdata.data.info->xfree = myDtorpyDFToggle;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
+}
+static tp_obj zzpy__pyDFToggle_help(TP)
+ {
+};
+tp_obj initClasspyDFToggle(tp_vm *vm)
+{
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyDFToggle));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyDFToggle_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyDFToggle_get));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyDFToggle_help));
+  return myClass;
+}

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-02 18:03:27 UTC (rev 6289)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-02 18:03:34 UTC (rev 6290)
@@ -24,6 +24,7 @@
 my %cFuncs;
 my %rType;
 my %funcParams;
+my @ctorParams;
 #
 # Variables
 my %getVar;
@@ -60,6 +61,23 @@
 
 }
 #
+# Process the constructor list 
+#
+sub processCTOR
+{
+        my $proto=shift;
+        my $args=$proto;
+        my @params;
+        my $retType=$proto;;
+        my $pyfunc=$proto;;
+        my $cfunc;
+        $args=~s/^.*\(//g;
+        $args=~s/\).*$//g;
+        #print "args => $args\n";
+        @ctorParams=split ",",$args;
+        #print " $pyfunc -> @params \n";
+}
+#
 # Process a function declaration and write the glue code to do tinypy<->function call
 #
 sub processMETHOD
@@ -147,10 +165,14 @@
                 {
                         processClass($line);
                 }
-                elsif($line =~m/\/* STATICVAR \*/)
+                elsif($line =~m/\/* ATTRIBUTES \*/)
                 {
                         processStaticVar($line);
                 }
+                elsif($line=~m/\/* CTOR \*/)
+                {
+                        processCTOR($line);
+                }
 }
 }
 close(INPUT);
@@ -191,7 +213,7 @@
         }
         if($type=~m/^int/)
         {
-                return "pm.asDouble()";
+                return "pm.asInt()";
         }
         if($type=~m/^float/)
         {
@@ -235,6 +257,97 @@
         return $r;
 }
 #
+# Generate getter and setter glue
+#
+sub genGetSet
+{
+#
+# Generate get/set
+#
+        my $i;
+        my $f;
+        my $setName=$glueprefix."_".$className."_set";
+        my $getName=$glueprefix."_".$className."_get";
+# Get
+        print OUTPUT "tp_obj ".$getName."(tp_vm *vm)\n";
+        print OUTPUT "{\n";
+        debug("$getName invoked\n");
+        print OUTPUT "  tp_obj self=tp_getraw( vm);\n";
+        print OUTPUT "  tinyParams pm(vm);\n";
+        print OUTPUT "  $cookieName *me=($cookieName *)pm.asThis(&self,$cookieId);\n";
+        print OUTPUT "  char const *key = pm.asString();\n";
+        my @k=keys %typeVars;
+        my $v;
+        foreach $v (@k)
+        {
+          print OUTPUT "  if (!strcmp(key, \"$v\"))\n";
+          print OUTPUT "  {\n";
+          if($staticClass==1)
+          {
+                print OUTPUT "     return tp_number(".$getVar{$v}."());\n";
+           }else
+        {
+                print OUTPUT "     if(!me) pm.raise(\"$className:No this!\");\n";
+                print OUTPUT "     return tp_number(me->".$getVar{$v}."());\n";
+
+        }
+          print OUTPUT "  }\n";
+        }
+        #
+        # Functions are part of it...
+        #
+        my $cfunk;
+        foreach $f(  keys %cFuncs)
+        {
+                my $pyFunc=$f;
+                $cfunk=$glueprefix.$f;
+                print OUTPUT "  if (!strcmp(key, \"$pyFunc\"))\n";
+                print OUTPUT "  {\n";
+                print OUTPUT "     return tp_method(vm,self,".$cfunk.");\n";
+                print OUTPUT "  }\n";
+
+        }
+#print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        print OUTPUT "  return tp_get(vm,self,tp_string(key));\n";
+        print OUTPUT "}\n";
+
+# Set
+        print OUTPUT "tp_obj ".$setName."(tp_vm *vm)\n";
+        print OUTPUT "{\n";
+        debug("$setName invoked\n");
+        print OUTPUT "  tp_obj self=tp_getraw( vm);\n";
+        print OUTPUT "  tinyParams pm(vm);\n";
+        print OUTPUT "  $cookieName *me=($cookieName *)pm.asThis(&self,$cookieId);\n";
+        print OUTPUT "  char const *key = pm.asString();\n";
+        my @k=keys %typeVars;
+        my $v;
+        foreach $v (@k)
+        {
+          print OUTPUT "  if (!strcmp(key, \"$v\"))\n";
+          print OUTPUT "  {\n";
+        if($staticClass==1)
+          {
+                print OUTPUT "     ".$typeVars{$v}." val=".castFrom($typeVars{$v}).";\n";
+                print OUTPUT "     ".$setVar{$v}."(val);\n"; 
+                print OUTPUT "     return tp_None;\n";
+           }else
+          {
+                print OUTPUT "     if(!me) pm.raise(\"$className:No this!\");\n";
+                print OUTPUT "     ".$typeVars{$v}." val=".castFrom($typeVars{$v}).";\n";
+                print OUTPUT "     me->".$setVar{$v}."(val);\n"; 
+                print OUTPUT "     return tp_None;\n";
+
+         }
+          print OUTPUT "  }\n";
+        }
+    #if (!strcmp(key, "prize")) return tp_number(fruit->prize);
+        #print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
+        print OUTPUT "  return tp_None;\n";
+        print OUTPUT "}\n";
+
+
+}
+#
 # Gen glue
 #
 sub genGlue
@@ -302,86 +415,28 @@
                 print OUTPUT "\n}\n";
 
         }
-#
-# Generate get/set
-#
-        my $setName=$glueprefix."_".$className."_set";
-        my $getName=$glueprefix."_".$className."_get";
-# Get
-        print OUTPUT "tp_obj ".$getName."(tp_vm *vm)\n";
-        print OUTPUT "{\n";
-        debug("$getName invoked\n");
-        print OUTPUT "  tp_obj self=tp_getraw( vm);\n";
-        print OUTPUT "  tinyParams pm(vm);\n";
-        print OUTPUT "  void *me=pm.asThis(&self,$cookieId);\n";
-        print OUTPUT "  char const *key = pm.asString();\n";
-        my @k=keys %typeVars;
-        my $v;
-        foreach $v (@k)
-        {
-          print OUTPUT "  if (!strcmp(key, \"$v\"))\n";
-          print OUTPUT "  {\n";
-          print OUTPUT "     return tp_number(".$getVar{$v}."());\n";
-          print OUTPUT "  }\n";
-        }
-        #
-        # Functions are part of it...
-        #
-        my $cfunk;
-        foreach $f(  keys %cFuncs)
-        {
-                my $pyFunc=$f;
-                $cfunk=$glueprefix.$f;
-                print OUTPUT "  if (!strcmp(key, \"$pyFunc\"))\n";
-                print OUTPUT "  {\n";
-                print OUTPUT "     return tp_method(vm,self,".$cfunk.");\n";
-                print OUTPUT "  }\n";
+        genGetSet();
 
-        }
-#print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
-        print OUTPUT "  return tp_get(vm,self,tp_string(key));\n";
-        print OUTPUT "}\n";
-
-# Set
-        print OUTPUT "tp_obj ".$setName."(tp_vm *vm)\n";
-        print OUTPUT "{\n";
-        debug("$setName invoked\n");
-        print OUTPUT "  tp_obj self=tp_getraw( vm);\n";
-        print OUTPUT "  tinyParams pm(vm);\n";
-        print OUTPUT "  void *me=pm.asThis(&self,$cookieId);\n";
-        print OUTPUT "  char const *key = pm.asString();\n";
-        my @k=keys %typeVars;
-        my $v;
-        foreach $v (@k)
-        {
-          print OUTPUT "  if (!strcmp(key, \"$v\"))\n";
-          print OUTPUT "  {\n";
-          print OUTPUT "     ".$typeVars{$v}." val=".castFrom($typeVars{$v}).";\n";
-          print OUTPUT "     ".$setVar{$v}."(val);\n"; 
-          print OUTPUT "     return tp_None;\n";
-          print OUTPUT "  }\n";
-        }
-    #if (!strcmp(key, "prize")) return tp_number(fruit->prize);
-        #print OUTPUT "  pm.raise(\"No such attribute %s\",key);\n";
-        print OUTPUT "  return tp_None;\n";
-        print OUTPUT "}\n";
-
 }
 #
 #
 #
-sub genTables
+sub genCtorDtor
 {
    my $dtor=  "myDtor".$className;
 # Dtor
+        print OUTPUT "// Dctor\n";
         print OUTPUT "static void ".$dtor."(tp_vm *vm,tp_obj self)\n";
         print OUTPUT "{\n";
         debug("$dtor invoked\n");
         if($staticClass==1)
         {
+                # no cookie, so no need to destroy
         }else
         {
-                #free(self.data.val);
+                print OUTPUT "  $cookieName *cookie=($cookieName *)self.data.val;\n";
+                print OUTPUT "  if(cookie) delete cookie;\n";
+                print OUTPUT "  self.data.val=NULL;\n";
         }
         print OUTPUT "}\n";
         # end
@@ -389,16 +444,34 @@
 # Ctor
 #
         # ctor
+        print OUTPUT "// Ctor (@ctorParams)\n";
         print OUTPUT "static tp_obj myCtor".$className."(tp_vm *vm)\n";
         print OUTPUT "{\n";
         debug("ctor of $className invoked\n");
         print OUTPUT "  tp_obj self = tp_getraw(vm);\n";
+        print OUTPUT "  tinyParams pm(vm);\n";
         if($staticClass==1)
         {
                 print OUTPUT "  void *me=NULL;\n";
         }else
         {
-
+                
+                my $i;
+                my $nb=scalar(@ctorParams);
+                for($i=0;$i<$nb;$i++)
+                         {
+                                 genParam($i,$ctorParams[$i]);
+                         }
+                print OUTPUT "  $cookieName *me=new $cookieName(";
+                for($i=0;$i<$nb;$i++)
+                {
+                        if($i)
+                        {
+                                print OUTPUT ",";
+                        }
+                        print OUTPUT "p".$i;
+                }  
+                print OUTPUT ");\n";
         }
         print OUTPUT "  tp_obj cdata = tp_data(vm, $cookieId, me);\n";
         print OUTPUT "  cdata.data.info->xfree = $dtor;\n";
@@ -406,9 +479,12 @@
         print OUTPUT "  return tp_None;\n";
         print OUTPUT "}\n";
         # end
+}
 #
 #  Generate help table
 #
+sub genTables
+{
 my $helpName=$glueprefix."_".$className."_help";
 my $f;
 my $cfunk;
@@ -460,6 +536,10 @@
 print OUTPUT "// Generated by admPyClass.pl do not edit !\n";
 genGlue();
 #
+#
+#
+genCtorDtor();
+#
 # 3 gen tables (ctor, help, register)
 #
 genTables();



From gruntster at mail.berlios.de  Wed Jun  2 20:07:30 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 2 Jun 2010 20:07:30 +0200
Subject: [Avidemux-svn-commit] r6291 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <201006021807.o52I7UOD028900@sheep.berlios.de>

Author: gruntster
Date: 2010-06-02 20:07:10 +0200 (Wed, 02 Jun 2010)
New Revision: 6291

Modified:
   branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt
Log:
[i18n] traverse through all location tags to safely ignore translation contexts containing Qt UI strings

Modified: branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt	2010-06-02 18:03:34 UTC (rev 6290)
+++ branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt	2010-06-02 18:07:10 UTC (rev 6291)
@@ -11,19 +11,18 @@
   </xsl:template>
 
   <xsl:template name="processContext">
-    <xsl:variable name="filename" select="message[1]/location[1]/@filename"/>
-    <xsl:variable name="ext" select="substring($filename, string-length($filename) - 2)"/>
+    <xsl:variable name="hasUiNodes" select="count(message/location[substring(@filename, string-length(@filename) - 2) = '.ui']) > 0"/>
 
     <context>
       <xsl:for-each select="name">
         <name>
-          <xsl:if test="$ext = '.ui'">
+          <xsl:if test="$hasUiNodes = 'true'">
             <xsl:value-of select="../name"/>
           </xsl:if>
         </name>
       </xsl:for-each>
 
-      <xsl:for-each select="message[not(source = preceding::message/source and $ext != '.ui')]">
+      <xsl:for-each select="message[not(source = preceding::message/source) or $hasUiNodes = 'true']">
         <message>
           <xsl:copy-of select="*"/>
         </message>



From gruntster at mail.berlios.de  Wed Jun  2 21:37:39 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 2 Jun 2010 21:37:39 +0200
Subject: [Avidemux-svn-commit] r6293 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src
Message-ID: <201006021937.o52JbdbO008846@sheep.berlios.de>

Author: gruntster
Date: 2010-06-02 21:37:20 +0200 (Wed, 02 Jun 2010)
New Revision: 6293

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
Log:
[i18n] fix Qt dialogFactory controls for translation

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2010-06-02 18:10:22 UTC (rev 6292)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2010-06-02 19:37:20 UTC (rev 6293)
@@ -18,7 +18,8 @@
 #include "DIA_factory.h"
 #include "ADM_dialogFactoryQt4.h"
 
-extern const char *shortkey(const char *);
+#undef QT_TR_NOOP
+#include "ADM_plugin/ADM_plugin_translate.h"
 
 namespace ADM_Qt4Factory
 {

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2010-06-02 18:10:22 UTC (rev 6292)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2010-06-02 19:37:20 UTC (rev 6293)
@@ -21,13 +21,14 @@
 #include "ADM_files.h"
 #include "DIA_coreToolkit.h"
 
+#undef QT_TR_NOOP
+#include "ADM_plugin/ADM_plugin_translate.h"
+
 extern "C"
 {
 #include "ADM_plugin/ADM_vidEnc_plugin.h"
 }
 
-extern const char* shortkey(const char*);
-
 namespace ADM_Qt4Factory
 {
 	ADM_QconfigMenu::ADM_QconfigMenu(QWidget *widget, QGridLayout *layout, int line, const char* userConfigDir,

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2010-06-02 18:10:22 UTC (rev 6292)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2010-06-02 19:37:20 UTC (rev 6293)
@@ -14,10 +14,12 @@
 ***************************************************************************/
 
 #include "T_threadCount.h"
-#include "ADM_default.h"
 #include "DIA_factory.h"
 #include "ADM_dialogFactoryQt4.h"
 
+#undef QT_TR_NOOP
+#include "ADM_plugin/ADM_plugin_translate.h"
+
 extern const char* shortkey(const char*);
 
 namespace ADM_qt4Factory



From mean at mail.berlios.de  Thu Jun  3 07:43:30 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 3 Jun 2010 07:43:30 +0200
Subject: [Avidemux-svn-commit] r6294 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2/include/scriptDialogFactory
	avidemux/common/ADM_script2/py
	avidemux/common/ADM_script2/src/scriptDialogFactory
	avidemux_core/ADM_coreTinyPy/include
	avidemux_core/ADM_coreTinyPy/src cmake
Message-ID: <201006030543.o535hUHY023412@sheep.berlios.de>

Author: mean
Date: 2010-06-03 07:43:28 +0200 (Thu, 03 Jun 2010)
New Revision: 6294

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[py] Hook dialogFactory

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/scriptDialogFactory/ADM_scriptDialogFactory.h	2010-06-03 05:43:28 UTC (rev 6294)
@@ -26,14 +26,15 @@
 class ADM_scriptDialogFactoryHelper
 {
 private:
-	char* _title;
+	char        *_title;
 	std::vector <ADM_scriptDFBaseHelper*> _controls;
 
 public:
-	ADM_scriptDialogFactoryHelper(const char *title);
-	~ADM_scriptDialogFactoryHelper(void);
-	void addControl(ADM_scriptDFBaseHelper* control);
-	diaElem** getControls(int *controlCount);
+                ADM_scriptDialogFactoryHelper(const char *title);
+                ~ADM_scriptDialogFactoryHelper(void);
+	void        addControl(ADM_scriptDFBaseHelper* control);
+    int         run(void);
+	diaElem**   getControls(int *controlCount);
 	const char* title(void);
 };
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-03 05:43:28 UTC (rev 6294)
@@ -28,13 +28,16 @@
 
 #include "scriptDialogFactory/ADM_scriptDFToggle.h"
 #include "scriptDialogFactory/ADM_scriptDFInteger.h"
+#include "scriptDialogFactory/ADM_scriptDialogFactory.h"
 
 
 
 #include "adm_gen.cpp"
 #include "editor_gen.cpp"
+
 #include "pyDFToggle_gen.cpp"
 #include "pyDFInteger_gen.cpp"
+#include "pyDialogFactory_gen.cpp"
 
 extern pyRegisterClass initClasspyAdm;
 extern pyRegisterClass initClasspyEditor;
@@ -56,6 +59,7 @@
     py->registerClass("Editor",initClasspyEditor);
     py->registerClass("DFToggle",initClasspyDFToggle);
     py->registerClass("DFInteger",initClasspyDFInteger);
+    py->registerClass("DialogFactory",initClasspyDialogFactory);
     tinyPy::registerLogger(pyLogger);
     return true;
 }

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-03 05:43:28 UTC (rev 6294)
@@ -0,0 +1,8 @@
+#           name    cookie id
+/* CLASS */ pyDialogFactory : ADM_scriptDialogFactoryHelper : 240
+#              cname:pyname
+/* CTOR */   (str) 
+#
+/* METHOD */ int run:show(void) 
+/* METHOD */ void addControl:addControl(ptr at ADM_scriptDFBaseHelper) 
+#

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp	2010-06-03 05:43:28 UTC (rev 6294)
@@ -0,0 +1,77 @@
+// Generated by admPyClass.pl do not edit !
+// show -> int run (void ) 
+static tp_obj zzpy_show(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  int r=  me->run(); 
+  return tp_number(r);
+}
+// addControl -> void addControl (ptr at ADM_scriptDFBaseHelper ) 
+static tp_obj zzpy_addControl(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  ADM_scriptDFBaseHelper *p0= ( ADM_scriptDFBaseHelper *)pm.asObjectPointer();
+  me->addControl(p0); 
+
+}
+tp_obj zzpy__pyDialogFactory_get(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  char const *key = pm.asString();
+  if (!strcmp(key, "show"))
+  {
+     return tp_method(vm,self,zzpy_show);
+  }
+  if (!strcmp(key, "addControl"))
+  {
+     return tp_method(vm,self,zzpy_addControl);
+  }
+  return tp_get(vm,self,tp_string(key));
+}
+tp_obj zzpy__pyDialogFactory_set(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  char const *key = pm.asString();
+  return tp_None;
+}
+// Dctor
+static void myDtorpyDialogFactory(tp_vm *vm,tp_obj self)
+{
+  ADM_scriptDialogFactoryHelper *cookie=(ADM_scriptDialogFactoryHelper *)self.data.val;
+  if(cookie) delete cookie;
+  self.data.val=NULL;
+}
+// Ctor (str)
+static tp_obj myCtorpyDialogFactory(tp_vm *vm)
+{
+  tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
+  const char *p0= pm.asString();
+  ADM_scriptDialogFactoryHelper *me=new ADM_scriptDialogFactoryHelper(p0);
+  tp_obj cdata = tp_data(vm, 240, me);
+  cdata.data.info->xfree = myDtorpyDialogFactory;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
+}
+static tp_obj zzpy__pyDialogFactory_help(TP)
+ {
+  jsLog("show(void)");
+  jsLog("addControl(ptr at ADM_scriptDFBaseHelper)");
+};
+tp_obj initClasspyDialogFactory(tp_vm *vm)
+{
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyDialogFactory));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyDialogFactory_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyDialogFactory_get));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyDialogFactory_help));
+  return myClass;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/scriptDialogFactory/ADM_scriptDialogFactory.cpp	2010-06-03 05:43:28 UTC (rev 6294)
@@ -48,8 +48,31 @@
 	}
 
 	return elems;
+
 }
+/**
+    \fn run
+*/
+int  ADM_scriptDialogFactoryHelper::run(void)
+{
+	int nb = (int)_controls.size();
 
+	std::vector<ADM_scriptDFBaseHelper*>::iterator it;
+	int i = 0;
+	diaElem **elems = new diaElem*[nb];
+
+	for (it = _controls.begin(); it != _controls.end(); it++)
+	{
+		elems[i] = (*it)->getControl();
+		i++;
+	}
+    int ret = diaFactoryRun(_title, nb, elems);
+
+	delete [] elems;
+
+	return ret;
+
+}
 const char* ADM_scriptDialogFactoryHelper::title(void)
 {
 	return _title;

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/include/ADM_tinypy.h	2010-06-03 05:43:28 UTC (rev 6294)
@@ -67,6 +67,7 @@
         double asDouble(void);
 const   char  *asString(void);
         void  *asThis(tp_obj *self,int id);
+        void  *asObjectPointer(void);
         int    nbParam(void);
         void   raise(const char *fmt,...);
         const char *typeAsString(int type);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreTinyPy/src/ADM_tinypy.cpp	2010-06-03 05:43:28 UTC (rev 6294)
@@ -249,7 +249,16 @@
     }
     return cdata.data.val;
 }
+/**
+   \fn  asObjectPointer
+*/
+void  *tinyParams::asObjectPointer(void)
+{
+    preamble(TP_DICT);
+    tp_obj cdata = tp_get(tp, obj, tp_string("cdata"));
+    return cdata.data.val;
 
+}
 /**
    \fn  typeAsString
     \brief return the type given as a string

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-02 19:37:20 UTC (rev 6293)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-03 05:43:28 UTC (rev 6294)
@@ -219,6 +219,13 @@
         {
                 return "pm.asFloat()";
         }
+        if($type=~m/^ptr/)
+        {
+                my $ptr;
+                my $obj;
+                ($ptr,$obj)=split "@",$type;
+                return "( $obj *)pm.asObjectPointer()";
+        }
         if($type=~m/^double/)
         {
                 return "pm.asDouble()";
@@ -244,11 +251,24 @@
                 $r=0;
         }else
         {
-                if($type=~m/str/)
+                my $regular=1;
+                if($type=~m/^str/)
                 {
                         print OUTPUT "  const char *p".$num."=";
-                }else
+                        $regular=0;
+                }
+                if($type=~m/^ptr/)
                 {
+                        $regular=0;
+                        my $ptr;
+                        my $obj;
+                        ($ptr,$obj)=split "@",$type;
+                        
+                        print OUTPUT "  $obj *p".$num."=";
+
+                }
+                if($regular==1)
+                {
                         print OUTPUT "  $type p".$num."=";
                 }
                 print OUTPUT " ".castFrom($type);
@@ -374,6 +394,9 @@
                 print OUTPUT "static tp_obj ".$glueprefix.$f."(TP)\n {\n";
 
                 debug("$f invoked\n");
+                 print OUTPUT "  tp_obj self=tp_getraw( tp);\n";  # We need a this as we only deal with instance!
+                 print OUTPUT "  tinyParams pm(tp);\n";
+                 print OUTPUT "  $cookieName *me=($cookieName *)pm.asThis(&self,$cookieId);\n";
                 if($params[0]=~m/^void$/)
                 {
                         $nb=0;
@@ -381,9 +404,6 @@
                 # unmarshall params...
                 if($nb)
                 {
-                         print OUTPUT "  tp_obj self=tp_getraw( tp);\n";  # We need a this as we only deal with instance!
-                         print OUTPUT "  tinyParams pm(tp);\n";
-                         print OUTPUT "  void *me=pm.asThis(&self,$cookieId);\n";
                          for($i=0;$i<$nb;$i++)
                          {
                                  genParam($i,$params[$i]);
@@ -400,7 +420,13 @@
                                 print OUTPUT "  ".$ret." r=";
                         }
                 }
-                print OUTPUT "  ".$functionPrefix.$cfunc."(";
+                if($staticClass==1)
+                {
+                        print OUTPUT "  ".$functionPrefix.$cfunc."(";
+                }else
+                {
+                        print OUTPUT "  me->".$functionPrefix.$cfunc."(";
+                }
                 for($i=0;$i<$nb;$i++)
                 {
                         if($i)



From mean at mail.berlios.de  Thu Jun  3 07:43:37 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 3 Jun 2010 07:43:37 +0200
Subject: [Avidemux-svn-commit] r6295 - in
	branches/avidemux_2.6_branch_mean/autononreg: . audio
	codecwrite dialogFactory dialogFactory/unit functiontest js
	js/audio js/codecwrite js/dialogFactory js/dialogFactory/unit
	js/functiontest js/utils js/videofunc py py/dialogFactory
	utils videofunc
Message-ID: <201006030543.o535hbxB023460@sheep.berlios.de>

Author: mean
Date: 2010-06-03 07:43:33 +0200 (Thu, 03 Jun 2010)
New Revision: 6295

Added:
   branches/avidemux_2.6_branch_mean/autononreg/js/
   branches/avidemux_2.6_branch_mean/autononreg/js/audio/
   branches/avidemux_2.6_branch_mean/autononreg/js/audio/lame.js
   branches/avidemux_2.6_branch_mean/autononreg/js/audio/stream.js
   branches/avidemux_2.6_branch_mean/autononreg/js/codecwrite/
   branches/avidemux_2.6_branch_mean/autononreg/js/codecwrite/codecwrite.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/integer.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/menu.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/toggle.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/bar.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/binhex.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/bitrate.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/button.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/dirsel.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/encoding.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/fileread.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/float.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/frame.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/hex.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/integer.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/matrix.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/menu.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/notch.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/readonlytext.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/run_non_reg.sh
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/slider.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/tabs.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/text.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/threadcount.js
   branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/toggle.js
   branches/avidemux_2.6_branch_mean/autononreg/js/fcctest.js
   branches/avidemux_2.6_branch_mean/autononreg/js/foreach.pl
   branches/avidemux_2.6_branch_mean/autononreg/js/fpstest.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/assert.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/crash.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/direread.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fcctest.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fileread.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fpstest.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/savejpg_seek.js
   branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/width.js
   branches/avidemux_2.6_branch_mean/autononreg/js/nbframestest.js
   branches/avidemux_2.6_branch_mean/autononreg/js/run_non_reg.sh
   branches/avidemux_2.6_branch_mean/autononreg/js/utils/
   branches/avidemux_2.6_branch_mean/autononreg/js/utils/dirselect.js
   branches/avidemux_2.6_branch_mean/autononreg/js/utils/fileselect.js
   branches/avidemux_2.6_branch_mean/autononreg/js/utils/fileselectwrite.js
   branches/avidemux_2.6_branch_mean/autononreg/js/utils/info_error1.js
   branches/avidemux_2.6_branch_mean/autononreg/js/utils/trytoreadall.js
   branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/
   branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/dumpEditing.js
   branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/dumpTiming.js
   branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/size.js
   branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/type.js
   branches/avidemux_2.6_branch_mean/autononreg/js/width.js
   branches/avidemux_2.6_branch_mean/autononreg/py/
   branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/
   branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyInteger.py
   branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyToggle.py
Removed:
   branches/avidemux_2.6_branch_mean/autononreg/audio/lame.js
   branches/avidemux_2.6_branch_mean/autononreg/audio/stream.js
   branches/avidemux_2.6_branch_mean/autononreg/codecwrite/codecwrite.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/integer.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/menu.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/toggle.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bar.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/binhex.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bitrate.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/button.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/dirsel.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/encoding.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/fileread.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/float.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/frame.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/hex.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/integer.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/matrix.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/menu.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/notch.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/readonlytext.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/run_non_reg.sh
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/slider.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/tabs.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/text.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/threadcount.js
   branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/toggle.js
   branches/avidemux_2.6_branch_mean/autononreg/fcctest.js
   branches/avidemux_2.6_branch_mean/autononreg/foreach.pl
   branches/avidemux_2.6_branch_mean/autononreg/fpstest.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/assert.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/crash.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/direread.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/fcctest.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/fileread.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/fpstest.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/savejpg_seek.js
   branches/avidemux_2.6_branch_mean/autononreg/functiontest/width.js
   branches/avidemux_2.6_branch_mean/autononreg/nbframestest.js
   branches/avidemux_2.6_branch_mean/autononreg/run_non_reg.sh
   branches/avidemux_2.6_branch_mean/autononreg/utils/dirselect.js
   branches/avidemux_2.6_branch_mean/autononreg/utils/fileselect.js
   branches/avidemux_2.6_branch_mean/autononreg/utils/fileselectwrite.js
   branches/avidemux_2.6_branch_mean/autononreg/utils/info_error1.js
   branches/avidemux_2.6_branch_mean/autononreg/utils/trytoreadall.js
   branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js
   branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js
   branches/avidemux_2.6_branch_mean/autononreg/videofunc/size.js
   branches/avidemux_2.6_branch_mean/autononreg/videofunc/type.js
   branches/avidemux_2.6_branch_mean/autononreg/width.js
Log:
[script] split script test into js and py subfolders

Deleted: branches/avidemux_2.6_branch_mean/autononreg/audio/lame.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/audio/lame.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/audio/lame.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,28 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/dual_avi.avi";
-var fps;
-/* Load file
-*/
-print("lamepreset Test Start");
-app.load(file);
-app.audio.codec("lame",128);
-//displayInfo("Changing preset");
-/* Test get fps 
-*/
-if(!app.audio.lamePreset("CBR"))
-{
-	displayError("CBR preset failed");
-}
-if(!app.audio.lamePreset("ABR"))
-{
-	displayError("ABR preset failed");
-}
-if(!app.audio.lamePreset("EXtreme"))
-{
-	displayError("Extreme preset failed");
-}
-print("lamepreset Test End");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/audio/stream.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/audio/stream.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/audio/stream.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,17 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/dual_avi.avi";
-var fps;
-/* Load file
-*/
-print("Audio Test Start");
-app.load(file);
-/* Test get fps 
-*/
-fps=app.audio.getNbTracks();
-displayInfo("# "+fps);
-app.audio.setTrack(1);
-print("Audio Test End");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/codecwrite/codecwrite.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/codecwrite/codecwrite.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/codecwrite/codecwrite.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,34 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var dir="/tmp/";
-/* Load file
-*/
-if(!app.load(file))
-{
-	displayError("Failed to load "+file);
-}
-/*
-	Save using all codec with their default settings
-*/
-app.setContainer("AVI");
-/*
-
-*/
-doit("XVID4","xvid4");
-doit("Mpeg4","xvid4");
-doit("H263","xvid4");
-doit("FFHUFF","xvid4");
-doit("HUFF","xvid4");
-doit("FFV1","xvid4");
-doit("Mjpeg","xvid4");
-doit("x264","xvid4");
-/* End of test
-*/
-function doit(codec,out)
-{
-app.video.codec(codec,"CQ=4","");
-app.save(dir+out+".avi");
-return true;
-
-}

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/integer.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/integer.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/integer.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,12 +0,0 @@
-    var toggle = new DFInteger("Integer (5-10)",5,10);
-    var dlgWizard = new DialogFactory("Dialog Factory toggle");
-
-    
-    toggle.value=7;
-    dlgWizard.addControl(toggle);
-
-    if (dlgWizard.show())
-    {
-                var out="toggle "+toggle.value;
-                print(out);
-    }

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/menu.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/menu.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/menu.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,22 +0,0 @@
-    var aspectRatios = [[1, 1], [4, 3], [16, 9]];
-    var mnuResolution = new DFMenu("Resolution:");
-    var mnuSourceRatio = new DFMenu("Source Aspect Ratio:");
-    var mnuDestinationRatio = new DFMenu("Destination Aspect Ratio:");
-    var dlgWizard = new DialogFactory("Dialog Factory menu");
-    var i;
-
-    for (i = 0; i < aspectRatios.length; i++)
-    {
-        mnuSourceRatio.addItem(aspectRatios[i][0].toString() + ":" + aspectRatios[i][1].toString());
-        mnuDestinationRatio.addItem(aspectRatios[i][0].toString() + ":" + aspectRatios[i][1].toString());
-    }
-    
-
-    dlgWizard.addControl(mnuSourceRatio);
-    dlgWizard.addControl(mnuDestinationRatio);
-
-    if (dlgWizard.show())
-    {
-                var out="source index"+mnuSourceRatio.index+", dest index="+mnuDestinationRatio.index;
-                print(out);
-    }

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/toggle.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/toggle.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/toggle.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,12 +0,0 @@
-    var toggle = new DFToggle("Toggle:");
-    var dlgWizard = new DialogFactory("Dialog Factory toggle");
-
-    
-    toggle.value=0;
-    dlgWizard.addControl(toggle);
-
-    if (dlgWizard.show())
-    {
-                var out="toggle "+toggle.value;
-                print(out);
-    }

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bar.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bar.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bar.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,7 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory bar");
-	admTestFacBar();
-print("/Testing factory bar");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/binhex.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/binhex.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/binhex.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Hex");
-	admTestFacHex();
-print("Testing factory Hex");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bitrate.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bitrate.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bitrate.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Bitrate");
-	admTestFacBitrate();
-print("Testing factory Bitrate");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/button.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/button.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/button.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Button");
-	admTestFacButton();
-print("Testing factory Button");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/dirsel.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/dirsel.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/dirsel.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,7 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory DirSel");
-	admTestFacDirSel();
-print("Testing factory DirSel");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/encoding.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/encoding.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/encoding.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory FileSel");
-admTestEncoding();
-print("Testing factory FileSel");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/fileread.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/fileread.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/fileread.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory FileSel");
-	admTestFacFile();
-print("Testing factory FileSel");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/float.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/float.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/float.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Float");
-	admTestFacFloat();
-print("Testing factory Float");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/frame.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/frame.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/frame.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Frame");
-	admTestFacFrame();
-print("Testing factory Frame");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/hex.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/hex.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/hex.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory hex");
-	admTestFacHex();
-print("Testing factory hex");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/integer.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/integer.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/integer.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory int");
-	admTestFacInt();
-print("Testing factory int");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/matrix.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/matrix.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/matrix.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Matrix");
-	admTestFacMatrix();
-print("Testing factory Matrix");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/menu.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/menu.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/menu.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Menu");
-	admTestFacMenu();
-print("Testing factory Menu");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/notch.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/notch.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/notch.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Notch");
-	admTestFacNotch();
-print("Testing factory Notch");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/readonlytext.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/readonlytext.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/readonlytext.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory RoTexy");
-	admTestFacRoText();
-print("Testing factory RoText");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/run_non_reg.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/run_non_reg.sh	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/run_non_reg.sh	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,11 +0,0 @@
-#!/bin/bash
-export PRG=~/workspace/qt4/avidemux3_qt4
-export SRC=.
-echo "Running tests..."
-#*****************
-cd functiontest
-perl ../foreach.pl $SRC/*.js "echo %f &&  $PRG    --run %f --quit > /dev/null"
-cd ..
-#*****************
-echo "## ALL done checking...##"
-		

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/slider.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/slider.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/slider.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Slider");
-	admTestFacSlider();
-print("Testing factory Slider");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/tabs.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/tabs.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/tabs.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Tabs");
-	admTestFacTab();
-print("Testing factory Tabs");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/text.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/text.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/text.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,6 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Text");
-	admTestFacText();
-print("Testing factory Text");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/threadcount.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/threadcount.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/threadcount.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory ThreadCount");
-	admTestFacThreadCount();
-print("Testing factory ThreadCount");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/toggle.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/toggle.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/toggle.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,4 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-print("Testing factory Toggle");
-	admTestFacToggle();
-print("Testing factory Toggle");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/fcctest.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/fcctest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/fcctest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,23 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodfcc="DIV3";
-var fps;
-/* Load file
-*/
-app.load(file);
-/* Test get fps 
-*/
-fps=app.video.getFCC();
-//app.displayInfo("FPS "+fps);
-if(fps==goodfcc)
-{
-}
-else
-{
-	app.displayError("Good:"+goodfcc+"Bad:"+fps);
-	app.displayError("Wrong fcc ");
-}
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/foreach.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/foreach.pl	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/foreach.pl	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,131 +0,0 @@
-#!/usr/bin/perl
-
-$ARGC = scalar(@ARGV);
-
-if ($ARGC <2){
-  if ($ARGV[0] eq '-h') {
-    &longhelp()
-  }else{
-    &help();
-  }
-  exit(1);
-}
-
-for ($i=0; $i<$ARGC-1; $i++){
-
-  my $command  = $ARGV[$ARGC-1];
-  my $fullfile = $ARGV[$i];
-  my ($suffix, $base, $dir, $file);
-
-  if (rindex($fullfile,'/')!=-1){
-    $file = substr($fullfile,rindex($fullfile,'/')+1);
-    $dir  = substr($fullfile,0,rindex($fullfile,'/'));
-  }else{
-    $file = $fullfile;
-    $dir  = '';
-  }
-
-  if (rindex($file,'.')!=-1){
-    $suffix = substr($file,rindex($file,'.')+1);
-    $base   = substr($file,0,rindex($file,'.'));
-  }else{
-    $suffix = '';
-    $base   = $file; 
-  }
-
-  $fullfile = quotemeta($fullfile);
-  $dir      = quotemeta($dir);
-  $file     = quotemeta($file);
-  $base     = quotemeta($base);
-  $suffix   = quotemeta($suffix);
-
-  my $count = 0;
-  $count += $command =~ s/%l/$fullfile/g;
-  $count += $command =~ s/%d/$dir/g;
-  $count += $command =~ s/%f/$file/g;
-  $count += $command =~ s/%b/$base/g;
-  $count += $command =~ s/%s/$suffix/g;
-
-  if ($count){
-    system ($command);
-  }else{
-    system ("$command $fullfile");
-  }
-
-}
-
-##############################################################################
-# print a short Help text
-sub help() {
-print STDERR <<STOP
-  Syntax: foreach.pl <file[s]> "<command>"
-
-    Missing parameters. Run 'foreach.pl -h' for help 
-STOP
-}
-
-
-##############################################################################
-# print a longer Help text
-sub longhelp() {
-print STDERR <<STOP
-
-      SYNTAX
-
-      foreach.pl <file[s]> "<command>"
-
-      INFO
-
-      foreach.pl runs a command on multiple files. It is not as mighty as
-      find's execute function, but much easyier to use and it's syntax 
-      should be much better to remember.
-
-      PARAMETERS
-
-      <file[s]> are one or more files that should be handled by <command>,
-      use the shell's globbing for a lot of files.
-
-      The following parameters can be used for <command>:
-
-      %l full filename (with path)
-      %d directory part of above filename
-      %f filename without directory
-      %b basename of file (no suffix, no directory)
-      %s suffix (without the dot) 
-      
-      When no parameter is given the script assumes "<command> %l" as
-      given command. Special chars in each parameter are quoted by the
-      script.
-
-      EXAMPLES
-
-      foreach.pl /etc/* "tar -czf /tmp/%b.tgz %l"
-
-      This will tar and gzip every file in /etc to a single tgz in /tmp
-      I know that isn't really useful but it's just an example :-)
-
-      foreach.pl *.tar.gz "tar -xzvf"
-
-      This is somehow more useful. It extracts all tar.gz files in the
-      current directory.
-
-      Go and find some useful examples for yourself ;-)
-
-      BUGS
-
-      Only the parameters are quoted before passing the to the shell,
-      quoting your commands is up to you.
-
-      LICENSE
-
-      foreach.pl - Does things to multiple files
-      Copyright (C) 2001 Andreas Gohr <a.gohr\@web.de>
-
-      This program is free software; you can redistribute it and/or
-      modify it under the terms of the GNU General Public License as
-      published by the Free Software Foundation; either version 2 of
-      the License, or (at your option) any later version.
-
-      See COPYING for details
-STOP
-}

Deleted: branches/avidemux_2.6_branch_mean/autononreg/fpstest.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/fpstest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/fpstest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,31 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodfps=23976;
-var fps;
-/* Load file
-*/
-app.load(file);
-/* Test get fps 
-*/
-fps=app.video.getFps1000();
-//app.displayInfo("FPS "+fps);
-if(fps==goodfps)
-{
-}
-else
-{
-	app.displayError("Wrong fps ");
-}
-fps=10000;
-app.video.setFps1000(fps);
-fps=90;
-fps=app.video.getFps1000();
-//app.displayInfo("FPS "+fps);
-if(fps!=10000)
-{
-	app.displayError("Testfps failed");
-}
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/assert.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/assert.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/assert.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,7 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-
-        assertTest();
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/crash.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/crash.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/crash.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,7 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-
-        crashTest();
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/direread.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/direread.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/direread.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,17 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var count;
-var file;
-/* Load file
-*/
-print("DirRead Test Start");
-count=allFilesFrom("/work/samples/");
-print("FPS "+count);
-for(i=0;i<count;i++)
-{
-	print(nextFile());
-}
-print("DirRead Test End");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/fcctest.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/fcctest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/fcctest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,24 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodfcc="DIV3";
-var fps;
-/* Load file
-*/
-print("FCC Test Begin");
-app.load(file);
-/* Test get fps 
-*/
-fps=app.video.getFCC();
-//displayInfo("FPS "+fps);
-if(fps==goodfcc)
-{
-}
-else
-{
-	displayError("Good:"+goodfcc+"Bad:"+fps);
-	displayError("Wrong fcc ");
-}
-print("FCC Test End");
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/fileread.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/fileread.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/fileread.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,18 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodwidth=512;
-var goodheight=384;
-var fps;
-/* Load file
-*/
-print("fileRead Test Start");
-/* Test get fps 
-*/
-fps=fileReadSelect();
-app.load(fps);
-print("fileRead Test End");
-
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/fpstest.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/fpstest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/fpstest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,33 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodfps=23976;
-var fps;
-/* Load file
-*/
-print("FPS Test Start");
-app.load(file);
-/* Test get fps 
-*/
-fps=app.video.getFps1000();
-//displayInfo("FPS "+fps);
-if(fps==goodfps)
-{
-}
-else
-{
-	displayError("Wrong fps ");
-}
-fps=10000;
-app.video.setFps1000(fps);
-fps=90;
-fps=app.video.getFps1000();
-//displayInfo("FPS "+fps);
-if(fps!=10000)
-{
-	displayError("Testfps failed");
-}
-print("FPS Test End");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/savejpg_seek.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/savejpg_seek.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/savejpg_seek.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,18 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodfps=23976;
-var fps;
-/* Load file
-*/
-print("SaveJpeg Test Start");
-app.load(file);
-/* Test get fps 
-*/
-app.video.saveJpeg("../out/saveJ0.avi");
-app.goToTime(0,1,0);
-app.video.saveJpeg("../out/saveJ1.avi");
-print("SaveJpeg Test End");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/functiontest/width.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/width.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/functiontest/width.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,35 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodwidth=512;
-var goodheight=384;
-var fps;
-/* Load file
-*/
-print("Width Test Start");
-app.load(file);
-/* Test get fps 
-*/
-fps=app.video.getWidth();
-//displayInfo("FPS "+fps);
-if(fps==goodwidth)
-{
-}
-else
-{
-	displayError("Wrong width "+fps+"expected "+goodwidth);
-}
-fps=app.video.getHeight();
-//displayInfo("FPS "+fps);
-if(fps==goodheight)
-{
-}
-else
-{
-	displayError("Wrong height "+fps+"expected "+goodheight);
-}
-print("Width Test End");
-
-
-/* End of test
-*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/audio/lame.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/audio/lame.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/audio/lame.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/audio/lame.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,28 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/dual_avi.avi";
+var fps;
+/* Load file
+*/
+print("lamepreset Test Start");
+app.load(file);
+app.audio.codec("lame",128);
+//displayInfo("Changing preset");
+/* Test get fps 
+*/
+if(!app.audio.lamePreset("CBR"))
+{
+	displayError("CBR preset failed");
+}
+if(!app.audio.lamePreset("ABR"))
+{
+	displayError("ABR preset failed");
+}
+if(!app.audio.lamePreset("EXtreme"))
+{
+	displayError("Extreme preset failed");
+}
+print("lamepreset Test End");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/audio/stream.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/audio/stream.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/audio/stream.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/audio/stream.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,17 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/dual_avi.avi";
+var fps;
+/* Load file
+*/
+print("Audio Test Start");
+app.load(file);
+/* Test get fps 
+*/
+fps=app.audio.getNbTracks();
+displayInfo("# "+fps);
+app.audio.setTrack(1);
+print("Audio Test End");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/codecwrite/codecwrite.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/codecwrite/codecwrite.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/codecwrite/codecwrite.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/codecwrite/codecwrite.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,34 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var dir="/tmp/";
+/* Load file
+*/
+if(!app.load(file))
+{
+	displayError("Failed to load "+file);
+}
+/*
+	Save using all codec with their default settings
+*/
+app.setContainer("AVI");
+/*
+
+*/
+doit("XVID4","xvid4");
+doit("Mpeg4","xvid4");
+doit("H263","xvid4");
+doit("FFHUFF","xvid4");
+doit("HUFF","xvid4");
+doit("FFV1","xvid4");
+doit("Mjpeg","xvid4");
+doit("x264","xvid4");
+/* End of test
+*/
+function doit(codec,out)
+{
+app.video.codec(codec,"CQ=4","");
+app.save(dir+out+".avi");
+return true;
+
+}

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/integer.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/integer.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/integer.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/integer.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,12 @@
+    var toggle = new DFInteger("Integer (5-10)",5,10);
+    var dlgWizard = new DialogFactory("Dialog Factory toggle");
+
+    
+    toggle.value=7;
+    dlgWizard.addControl(toggle);
+
+    if (dlgWizard.show())
+    {
+                var out="toggle "+toggle.value;
+                print(out);
+    }

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/menu.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/menu.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/menu.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/menu.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,22 @@
+    var aspectRatios = [[1, 1], [4, 3], [16, 9]];
+    var mnuResolution = new DFMenu("Resolution:");
+    var mnuSourceRatio = new DFMenu("Source Aspect Ratio:");
+    var mnuDestinationRatio = new DFMenu("Destination Aspect Ratio:");
+    var dlgWizard = new DialogFactory("Dialog Factory menu");
+    var i;
+
+    for (i = 0; i < aspectRatios.length; i++)
+    {
+        mnuSourceRatio.addItem(aspectRatios[i][0].toString() + ":" + aspectRatios[i][1].toString());
+        mnuDestinationRatio.addItem(aspectRatios[i][0].toString() + ":" + aspectRatios[i][1].toString());
+    }
+    
+
+    dlgWizard.addControl(mnuSourceRatio);
+    dlgWizard.addControl(mnuDestinationRatio);
+
+    if (dlgWizard.show())
+    {
+                var out="source index"+mnuSourceRatio.index+", dest index="+mnuDestinationRatio.index;
+                print(out);
+    }

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/toggle.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/toggle.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/toggle.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/toggle.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,12 @@
+    var toggle = new DFToggle("Toggle:");
+    var dlgWizard = new DialogFactory("Dialog Factory toggle");
+
+    
+    toggle.value=0;
+    dlgWizard.addControl(toggle);
+
+    if (dlgWizard.show())
+    {
+                var out="toggle "+toggle.value;
+                print(out);
+    }

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/bar.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bar.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bar.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/bar.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,7 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory bar");
+	admTestFacBar();
+print("/Testing factory bar");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/binhex.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/binhex.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/binhex.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/binhex.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Hex");
+	admTestFacHex();
+print("Testing factory Hex");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/bitrate.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bitrate.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/bitrate.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/bitrate.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Bitrate");
+	admTestFacBitrate();
+print("Testing factory Bitrate");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/button.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/button.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/button.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/button.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Button");
+	admTestFacButton();
+print("Testing factory Button");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/dirsel.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/dirsel.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/dirsel.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/dirsel.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,7 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory DirSel");
+	admTestFacDirSel();
+print("Testing factory DirSel");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/encoding.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/encoding.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/encoding.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/encoding.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory FileSel");
+admTestEncoding();
+print("Testing factory FileSel");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/fileread.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/fileread.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/fileread.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/fileread.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory FileSel");
+	admTestFacFile();
+print("Testing factory FileSel");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/float.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/float.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/float.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/float.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Float");
+	admTestFacFloat();
+print("Testing factory Float");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/frame.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/frame.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/frame.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/frame.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Frame");
+	admTestFacFrame();
+print("Testing factory Frame");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/hex.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/hex.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/hex.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/hex.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory hex");
+	admTestFacHex();
+print("Testing factory hex");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/integer.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/integer.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/integer.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/integer.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory int");
+	admTestFacInt();
+print("Testing factory int");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/matrix.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/matrix.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/matrix.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/matrix.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Matrix");
+	admTestFacMatrix();
+print("Testing factory Matrix");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/menu.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/menu.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/menu.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/menu.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Menu");
+	admTestFacMenu();
+print("Testing factory Menu");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/notch.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/notch.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/notch.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/notch.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Notch");
+	admTestFacNotch();
+print("Testing factory Notch");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/readonlytext.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/readonlytext.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/readonlytext.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/readonlytext.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory RoTexy");
+	admTestFacRoText();
+print("Testing factory RoText");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/run_non_reg.sh (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/run_non_reg.sh)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/run_non_reg.sh	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/run_non_reg.sh	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,11 @@
+#!/bin/bash
+export PRG=~/workspace/qt4/avidemux3_qt4
+export SRC=.
+echo "Running tests..."
+#*****************
+cd functiontest
+perl ../foreach.pl $SRC/*.js "echo %f &&  $PRG    --run %f --quit > /dev/null"
+cd ..
+#*****************
+echo "## ALL done checking...##"
+		

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/slider.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/slider.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/slider.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/slider.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Slider");
+	admTestFacSlider();
+print("Testing factory Slider");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/tabs.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/tabs.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/tabs.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/tabs.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Tabs");
+	admTestFacTab();
+print("Testing factory Tabs");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/text.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/text.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/text.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/text.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,6 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Text");
+	admTestFacText();
+print("Testing factory Text");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/threadcount.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/threadcount.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/threadcount.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/threadcount.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory ThreadCount");
+	admTestFacThreadCount();
+print("Testing factory ThreadCount");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/toggle.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/toggle.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/dialogFactory/unit/toggle.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/dialogFactory/unit/toggle.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,4 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+print("Testing factory Toggle");
+	admTestFacToggle();
+print("Testing factory Toggle");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/fcctest.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/fcctest.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/fcctest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/fcctest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,23 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfcc="DIV3";
+var fps;
+/* Load file
+*/
+app.load(file);
+/* Test get fps 
+*/
+fps=app.video.getFCC();
+//app.displayInfo("FPS "+fps);
+if(fps==goodfcc)
+{
+}
+else
+{
+	app.displayError("Good:"+goodfcc+"Bad:"+fps);
+	app.displayError("Wrong fcc ");
+}
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/foreach.pl (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/foreach.pl)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/foreach.pl	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/foreach.pl	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,131 @@
+#!/usr/bin/perl
+
+$ARGC = scalar(@ARGV);
+
+if ($ARGC <2){
+  if ($ARGV[0] eq '-h') {
+    &longhelp()
+  }else{
+    &help();
+  }
+  exit(1);
+}
+
+for ($i=0; $i<$ARGC-1; $i++){
+
+  my $command  = $ARGV[$ARGC-1];
+  my $fullfile = $ARGV[$i];
+  my ($suffix, $base, $dir, $file);
+
+  if (rindex($fullfile,'/')!=-1){
+    $file = substr($fullfile,rindex($fullfile,'/')+1);
+    $dir  = substr($fullfile,0,rindex($fullfile,'/'));
+  }else{
+    $file = $fullfile;
+    $dir  = '';
+  }
+
+  if (rindex($file,'.')!=-1){
+    $suffix = substr($file,rindex($file,'.')+1);
+    $base   = substr($file,0,rindex($file,'.'));
+  }else{
+    $suffix = '';
+    $base   = $file; 
+  }
+
+  $fullfile = quotemeta($fullfile);
+  $dir      = quotemeta($dir);
+  $file     = quotemeta($file);
+  $base     = quotemeta($base);
+  $suffix   = quotemeta($suffix);
+
+  my $count = 0;
+  $count += $command =~ s/%l/$fullfile/g;
+  $count += $command =~ s/%d/$dir/g;
+  $count += $command =~ s/%f/$file/g;
+  $count += $command =~ s/%b/$base/g;
+  $count += $command =~ s/%s/$suffix/g;
+
+  if ($count){
+    system ($command);
+  }else{
+    system ("$command $fullfile");
+  }
+
+}
+
+##############################################################################
+# print a short Help text
+sub help() {
+print STDERR <<STOP
+  Syntax: foreach.pl <file[s]> "<command>"
+
+    Missing parameters. Run 'foreach.pl -h' for help 
+STOP
+}
+
+
+##############################################################################
+# print a longer Help text
+sub longhelp() {
+print STDERR <<STOP
+
+      SYNTAX
+
+      foreach.pl <file[s]> "<command>"
+
+      INFO
+
+      foreach.pl runs a command on multiple files. It is not as mighty as
+      find's execute function, but much easyier to use and it's syntax 
+      should be much better to remember.
+
+      PARAMETERS
+
+      <file[s]> are one or more files that should be handled by <command>,
+      use the shell's globbing for a lot of files.
+
+      The following parameters can be used for <command>:
+
+      %l full filename (with path)
+      %d directory part of above filename
+      %f filename without directory
+      %b basename of file (no suffix, no directory)
+      %s suffix (without the dot) 
+      
+      When no parameter is given the script assumes "<command> %l" as
+      given command. Special chars in each parameter are quoted by the
+      script.
+
+      EXAMPLES
+
+      foreach.pl /etc/* "tar -czf /tmp/%b.tgz %l"
+
+      This will tar and gzip every file in /etc to a single tgz in /tmp
+      I know that isn't really useful but it's just an example :-)
+
+      foreach.pl *.tar.gz "tar -xzvf"
+
+      This is somehow more useful. It extracts all tar.gz files in the
+      current directory.
+
+      Go and find some useful examples for yourself ;-)
+
+      BUGS
+
+      Only the parameters are quoted before passing the to the shell,
+      quoting your commands is up to you.
+
+      LICENSE
+
+      foreach.pl - Does things to multiple files
+      Copyright (C) 2001 Andreas Gohr <a.gohr\@web.de>
+
+      This program is free software; you can redistribute it and/or
+      modify it under the terms of the GNU General Public License as
+      published by the Free Software Foundation; either version 2 of
+      the License, or (at your option) any later version.
+
+      See COPYING for details
+STOP
+}

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/fpstest.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/fpstest.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/fpstest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/fpstest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,31 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfps=23976;
+var fps;
+/* Load file
+*/
+app.load(file);
+/* Test get fps 
+*/
+fps=app.video.getFps1000();
+//app.displayInfo("FPS "+fps);
+if(fps==goodfps)
+{
+}
+else
+{
+	app.displayError("Wrong fps ");
+}
+fps=10000;
+app.video.setFps1000(fps);
+fps=90;
+fps=app.video.getFps1000();
+//app.displayInfo("FPS "+fps);
+if(fps!=10000)
+{
+	app.displayError("Testfps failed");
+}
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/assert.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/assert.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/assert.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/assert.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,7 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+
+        assertTest();
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/crash.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/crash.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/crash.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/crash.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,7 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+
+        crashTest();
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/direread.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/direread.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/direread.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/direread.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,17 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var count;
+var file;
+/* Load file
+*/
+print("DirRead Test Start");
+count=allFilesFrom("/work/samples/");
+print("FPS "+count);
+for(i=0;i<count;i++)
+{
+	print(nextFile());
+}
+print("DirRead Test End");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fcctest.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/fcctest.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/fcctest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fcctest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,24 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfcc="DIV3";
+var fps;
+/* Load file
+*/
+print("FCC Test Begin");
+app.load(file);
+/* Test get fps 
+*/
+fps=app.video.getFCC();
+//displayInfo("FPS "+fps);
+if(fps==goodfcc)
+{
+}
+else
+{
+	displayError("Good:"+goodfcc+"Bad:"+fps);
+	displayError("Wrong fcc ");
+}
+print("FCC Test End");
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fileread.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/fileread.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/fileread.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fileread.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,18 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodwidth=512;
+var goodheight=384;
+var fps;
+/* Load file
+*/
+print("fileRead Test Start");
+/* Test get fps 
+*/
+fps=fileReadSelect();
+app.load(fps);
+print("fileRead Test End");
+
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fpstest.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/fpstest.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/fpstest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/fpstest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,33 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfps=23976;
+var fps;
+/* Load file
+*/
+print("FPS Test Start");
+app.load(file);
+/* Test get fps 
+*/
+fps=app.video.getFps1000();
+//displayInfo("FPS "+fps);
+if(fps==goodfps)
+{
+}
+else
+{
+	displayError("Wrong fps ");
+}
+fps=10000;
+app.video.setFps1000(fps);
+fps=90;
+fps=app.video.getFps1000();
+//displayInfo("FPS "+fps);
+if(fps!=10000)
+{
+	displayError("Testfps failed");
+}
+print("FPS Test End");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/savejpg_seek.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/savejpg_seek.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/savejpg_seek.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/savejpg_seek.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,18 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodfps=23976;
+var fps;
+/* Load file
+*/
+print("SaveJpeg Test Start");
+app.load(file);
+/* Test get fps 
+*/
+app.video.saveJpeg("../out/saveJ0.avi");
+app.goToTime(0,1,0);
+app.video.saveJpeg("../out/saveJ1.avi");
+print("SaveJpeg Test End");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/width.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/functiontest/width.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/functiontest/width.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/functiontest/width.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,35 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodwidth=512;
+var goodheight=384;
+var fps;
+/* Load file
+*/
+print("Width Test Start");
+app.load(file);
+/* Test get fps 
+*/
+fps=app.video.getWidth();
+//displayInfo("FPS "+fps);
+if(fps==goodwidth)
+{
+}
+else
+{
+	displayError("Wrong width "+fps+"expected "+goodwidth);
+}
+fps=app.video.getHeight();
+//displayInfo("FPS "+fps);
+if(fps==goodheight)
+{
+}
+else
+{
+	displayError("Wrong height "+fps+"expected "+goodheight);
+}
+print("Width Test End");
+
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/nbframestest.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/nbframestest.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/nbframestest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/nbframestest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,14 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var nbf;
+/* Load file
+*/
+app.load(file);
+/* Test get nbf 
+*/
+nbf=app.video.getNbFrames();
+	displayInfo("Nb frames:"+nbf);
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/run_non_reg.sh (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/run_non_reg.sh)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/run_non_reg.sh	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/run_non_reg.sh	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,14 @@
+#!/bin/bash
+export PRG=adm2_s
+export SRC=.
+echo "Running tests..."
+rm -f allog
+rm -f out/* /tmp/md5
+#*****************
+cd functiontest
+perl ../foreach.pl $SRC/*.js "echo %f && adm2_s    --run %f --quit > /dev/null"
+cd ..
+#*****************
+echo "## ALL done checking...##"
+md5sum out/*  > /tmp/md5
+		

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/utils/dirselect.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/utils/dirselect.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/dirselect.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/utils/dirselect.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,30 @@
+//AD  <- 
+/*
+	Simple script that scans the orgDir directory
+	and unpack all avi files
+	The resuling file is put in destDir directory
+
+	Using new directorySearch API
+
+*/
+var app = new Avidemux();
+var orgDir;
+var destDir;
+var reg =new RegExp(".$");
+/*
+	This is for unix
+	For windows change to
+	sep="\\";
+	reg2=new RegExp("\\.*\\");
+*/
+var sep="/";
+var extension;
+var target;
+//
+//
+//
+// 	select files from original & target directories
+//
+	orgDir=dirSelect();
+	displayInfo("Selected :"+orgDir);
+

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/utils/fileselect.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/utils/fileselect.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/fileselect.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/utils/fileselect.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,30 @@
+//AD  <- 
+/*
+	Simple script that scans the orgDir directory
+	and unpack all avi files
+	The resuling file is put in destDir directory
+
+	Using new directorySearch API
+
+*/
+var app = new Avidemux();
+var orgDir;
+var destDir;
+var reg =new RegExp(".$");
+/*
+	This is for unix
+	For windows change to
+	sep="\\";
+	reg2=new RegExp("\\.*\\");
+*/
+var sep="/";
+var extension;
+var target;
+//
+//
+//
+// 	select files from original & target directories
+//
+	orgDir=fileReadSelect();
+	displayInfo("Selected :"+orgDir);
+

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/utils/fileselectwrite.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/utils/fileselectwrite.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/fileselectwrite.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/utils/fileselectwrite.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,30 @@
+//AD  <- 
+/*
+	Simple script that scans the orgDir directory
+	and unpack all avi files
+	The resuling file is put in destDir directory
+
+	Using new directorySearch API
+
+*/
+var app = new Avidemux();
+var orgDir;
+var destDir;
+var reg =new RegExp(".$");
+/*
+	This is for unix
+	For windows change to
+	sep="\\";
+	reg2=new RegExp("\\.*\\");
+*/
+var sep="/";
+var extension;
+var target;
+//
+//
+//
+// 	select files from original & target directories
+//
+	orgDir=fileWriteSelect();
+	displayInfo("Selected :"+orgDir);
+

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/utils/info_error1.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/utils/info_error1.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/info_error1.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/utils/info_error1.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,12 @@
+//AD  <- 
+/*
+	Simple script that scans the orgDir directory
+	and unpack all avi files
+	The resuling file is put in destDir directory
+
+	Using new directorySearch API
+
+*/
+var app = new Avidemux();
+    	displayError("This is an ERROR");
+	displayInfo("This is an INFO");

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/utils/trytoreadall.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/utils/trytoreadall.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/trytoreadall.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/utils/trytoreadall.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,39 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+/************************/
+var basedir="/work/samples/";
+
+var extension="avi";
+/************************/
+var app = new Avidemux();
+var count;
+var file;
+var reg;
+/* Load file
+*/
+print("DirRead Test Start");
+count=allFilesFrom(basedir);
+reg=new RegExp("\."+extension+"$");
+print("Nb "+count);
+print("Match "+reg);
+for(i=0;i<count;i++)
+{
+	file=nextFile();
+	if(!file.match(reg))
+	{
+		print(file+":does not match");
+		continue;
+	}
+	print(file+":match");
+	//displayInfo(file);
+	/* Process it */
+	app.forceUnpack(); // automatic unpack
+	if(!app.load(file))
+	{
+		displayInfo("Faild to load "+file);
+		continue;
+	}
+}
+print("DirRead Test End");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/dumpEditing.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/dumpEditing.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,5 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+app.video.dumpEditing();
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/dumpTiming.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/dumpTiming.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,5 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+app.video.dumpTiming();
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/size.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/videofunc/size.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/size.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/size.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,15 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var nbf;
+/* Load file
+*/
+app.load(file);
+/* Test get nbf 
+*/
+nbf=app.video.getNbFrames();
+	displayInfo("Frame size 0 :"+app.video.frameSize(0)+" bytes");
+	displayInfo("Frame size 1 :"+app.video.frameSize(1)+" bytes");
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/type.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/videofunc/type.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/type.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/videofunc/type.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,15 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var nbf;
+/* Load file
+*/
+app.load(file);
+/* Test get nbf 
+*/
+nbf=app.video.getNbFrames();
+	displayInfo("Frame type 0 :"+app.video.frameType(0)+" [16:I,0:P,BIG=B]");
+	displayInfo("Frame type 1 :"+app.video.frameType(1));
+
+/* End of test
+*/

Copied: branches/avidemux_2.6_branch_mean/autononreg/js/width.js (from rev 6294, branches/avidemux_2.6_branch_mean/autononreg/width.js)
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/width.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/js/width.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,33 @@
+//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
+var app = new Avidemux();
+var file="/work/samples/2mn.avi";
+var goodwidth=512;
+var goodheight=384;
+var fps;
+/* Load file
+*/
+app.load(file);
+/* Test get fps 
+*/
+fps=app.video.getWidth();
+//app.displayInfo("FPS "+fps);
+if(fps==goodwidth)
+{
+}
+else
+{
+	app.displayError("Wrong width "+fps+"expected "+goodwidth);
+}
+fps=app.video.getHeight();
+//app.displayInfo("FPS "+fps);
+if(fps==goodheight)
+{
+}
+else
+{
+	app.displayError("Wrong height "+fps+"expected "+goodheight);
+}
+
+
+/* End of test
+*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/nbframestest.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/nbframestest.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/nbframestest.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,14 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var nbf;
-/* Load file
-*/
-app.load(file);
-/* Test get nbf 
-*/
-nbf=app.video.getNbFrames();
-	displayInfo("Nb frames:"+nbf);
-
-/* End of test
-*/

Added: branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyInteger.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyInteger.py	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyInteger.py	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,12 @@
+teger = DFInteger("Integer(10/20):",10,20);
+dlgWizard = DialogFactory("Dialog Factory integer");
+
+
+teger.value=15;
+dlgWizard.addControl(teger);
+
+res=dlgWizard.show()
+print("Dialog output ");
+print(res);
+print("Toggle value");
+print(teger.value);

Added: branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyToggle.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyToggle.py	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyToggle.py	2010-06-03 05:43:33 UTC (rev 6295)
@@ -0,0 +1,12 @@
+toggle = DFToggle("Toggle:");
+dlgWizard = DialogFactory("Dialog Factory toggle");
+
+
+toggle.value=0;
+dlgWizard.addControl(toggle);
+
+res=dlgWizard.show()
+print("Dialog output ");
+print(res);
+print("Toggle value");
+print(toggle.value);

Deleted: branches/avidemux_2.6_branch_mean/autononreg/run_non_reg.sh
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/run_non_reg.sh	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/run_non_reg.sh	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,14 +0,0 @@
-#!/bin/bash
-export PRG=adm2_s
-export SRC=.
-echo "Running tests..."
-rm -f allog
-rm -f out/* /tmp/md5
-#*****************
-cd functiontest
-perl ../foreach.pl $SRC/*.js "echo %f && adm2_s    --run %f --quit > /dev/null"
-cd ..
-#*****************
-echo "## ALL done checking...##"
-md5sum out/*  > /tmp/md5
-		

Deleted: branches/avidemux_2.6_branch_mean/autononreg/utils/dirselect.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/dirselect.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/utils/dirselect.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,30 +0,0 @@
-//AD  <- 
-/*
-	Simple script that scans the orgDir directory
-	and unpack all avi files
-	The resuling file is put in destDir directory
-
-	Using new directorySearch API
-
-*/
-var app = new Avidemux();
-var orgDir;
-var destDir;
-var reg =new RegExp(".$");
-/*
-	This is for unix
-	For windows change to
-	sep="\\";
-	reg2=new RegExp("\\.*\\");
-*/
-var sep="/";
-var extension;
-var target;
-//
-//
-//
-// 	select files from original & target directories
-//
-	orgDir=dirSelect();
-	displayInfo("Selected :"+orgDir);
-

Deleted: branches/avidemux_2.6_branch_mean/autononreg/utils/fileselect.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/fileselect.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/utils/fileselect.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,30 +0,0 @@
-//AD  <- 
-/*
-	Simple script that scans the orgDir directory
-	and unpack all avi files
-	The resuling file is put in destDir directory
-
-	Using new directorySearch API
-
-*/
-var app = new Avidemux();
-var orgDir;
-var destDir;
-var reg =new RegExp(".$");
-/*
-	This is for unix
-	For windows change to
-	sep="\\";
-	reg2=new RegExp("\\.*\\");
-*/
-var sep="/";
-var extension;
-var target;
-//
-//
-//
-// 	select files from original & target directories
-//
-	orgDir=fileReadSelect();
-	displayInfo("Selected :"+orgDir);
-

Deleted: branches/avidemux_2.6_branch_mean/autononreg/utils/fileselectwrite.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/fileselectwrite.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/utils/fileselectwrite.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,30 +0,0 @@
-//AD  <- 
-/*
-	Simple script that scans the orgDir directory
-	and unpack all avi files
-	The resuling file is put in destDir directory
-
-	Using new directorySearch API
-
-*/
-var app = new Avidemux();
-var orgDir;
-var destDir;
-var reg =new RegExp(".$");
-/*
-	This is for unix
-	For windows change to
-	sep="\\";
-	reg2=new RegExp("\\.*\\");
-*/
-var sep="/";
-var extension;
-var target;
-//
-//
-//
-// 	select files from original & target directories
-//
-	orgDir=fileWriteSelect();
-	displayInfo("Selected :"+orgDir);
-

Deleted: branches/avidemux_2.6_branch_mean/autononreg/utils/info_error1.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/info_error1.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/utils/info_error1.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,12 +0,0 @@
-//AD  <- 
-/*
-	Simple script that scans the orgDir directory
-	and unpack all avi files
-	The resuling file is put in destDir directory
-
-	Using new directorySearch API
-
-*/
-var app = new Avidemux();
-    	displayError("This is an ERROR");
-	displayInfo("This is an INFO");

Deleted: branches/avidemux_2.6_branch_mean/autononreg/utils/trytoreadall.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/utils/trytoreadall.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/utils/trytoreadall.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,39 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-/************************/
-var basedir="/work/samples/";
-
-var extension="avi";
-/************************/
-var app = new Avidemux();
-var count;
-var file;
-var reg;
-/* Load file
-*/
-print("DirRead Test Start");
-count=allFilesFrom(basedir);
-reg=new RegExp("\."+extension+"$");
-print("Nb "+count);
-print("Match "+reg);
-for(i=0;i<count;i++)
-{
-	file=nextFile();
-	if(!file.match(reg))
-	{
-		print(file+":does not match");
-		continue;
-	}
-	print(file+":match");
-	//displayInfo(file);
-	/* Process it */
-	app.forceUnpack(); // automatic unpack
-	if(!app.load(file))
-	{
-		displayInfo("Faild to load "+file);
-		continue;
-	}
-}
-print("DirRead Test End");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpEditing.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,5 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-app.video.dumpEditing();
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/videofunc/dumpTiming.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,5 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-app.video.dumpTiming();
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/videofunc/size.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/size.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/videofunc/size.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,15 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var nbf;
-/* Load file
-*/
-app.load(file);
-/* Test get nbf 
-*/
-nbf=app.video.getNbFrames();
-	displayInfo("Frame size 0 :"+app.video.frameSize(0)+" bytes");
-	displayInfo("Frame size 1 :"+app.video.frameSize(1)+" bytes");
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/videofunc/type.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/videofunc/type.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/videofunc/type.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,15 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var nbf;
-/* Load file
-*/
-app.load(file);
-/* Test get nbf 
-*/
-nbf=app.video.getNbFrames();
-	displayInfo("Frame type 0 :"+app.video.frameType(0)+" [16:I,0:P,BIG=B]");
-	displayInfo("Frame type 1 :"+app.video.frameType(1));
-
-/* End of test
-*/

Deleted: branches/avidemux_2.6_branch_mean/autononreg/width.js
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/width.js	2010-06-03 05:43:28 UTC (rev 6294)
+++ branches/avidemux_2.6_branch_mean/autononreg/width.js	2010-06-03 05:43:33 UTC (rev 6295)
@@ -1,33 +0,0 @@
-//AD  <- These first 4 characters need to be the first 4 characters to identify the ECMAScript file to Avidemux
-var app = new Avidemux();
-var file="/work/samples/2mn.avi";
-var goodwidth=512;
-var goodheight=384;
-var fps;
-/* Load file
-*/
-app.load(file);
-/* Test get fps 
-*/
-fps=app.video.getWidth();
-//app.displayInfo("FPS "+fps);
-if(fps==goodwidth)
-{
-}
-else
-{
-	app.displayError("Wrong width "+fps+"expected "+goodwidth);
-}
-fps=app.video.getHeight();
-//app.displayInfo("FPS "+fps);
-if(fps==goodheight)
-{
-}
-else
-{
-	app.displayError("Wrong height "+fps+"expected "+goodheight);
-}
-
-
-/* End of test
-*/



From mean at mail.berlios.de  Thu Jun  3 19:39:29 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 3 Jun 2010 19:39:29 +0200
Subject: [Avidemux-svn-commit] r6296 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py
Message-ID: <201006031739.o53HdTso028382@sheep.berlios.de>

Author: mean
Date: 2010-06-03 19:39:28 +0200 (Thu, 03 Jun 2010)
New Revision: 6296

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
Log:
[py] Use ID rather than numeric stuff

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-03 17:39:28 UTC (rev 6296)
@@ -30,8 +30,12 @@
 #include "scriptDialogFactory/ADM_scriptDFInteger.h"
 #include "scriptDialogFactory/ADM_scriptDialogFactory.h"
 
+#define ADM_PYID_AVIDEMUX 100
+#define ADM_PYID_EDITOR   101
+#define ADM_PYID_DIALOGF     200
+#define ADM_PYID_DF_TOGGLE   201
+#define ADM_PYID_DF_INTEGER  202
 
-
 #include "adm_gen.cpp"
 #include "editor_gen.cpp"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-03 17:39:28 UTC (rev 6296)
@@ -1,5 +1,5 @@
 #           name    cookie id
-/* CLASS */ pyAdm : void : 100
+/* CLASS */ pyAdm : void : ADM_PYID_AVIDEMUX
 #              cname:pyname
 /* METHOD */ int scriptLoadVideo:loadVideo          (str ) 
 /* METHOD */ int scriptClearSegments:clearSegments  (void) 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-03 17:39:28 UTC (rev 6296)
@@ -4,7 +4,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   int p1= pm.asInt();
   CONFcouple *p2=NULL;
@@ -17,7 +17,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
   pm.makeCouples(&p1);
@@ -29,7 +29,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   int r=  scriptLoadVideo(p0); 
   return tp_number(r);
@@ -37,12 +37,18 @@
 // clearSegments -> int scriptClearSegments (void ) 
 static tp_obj zzpy_clearSegments(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int r=  scriptClearSegments(); 
   return tp_number(r);
 }
 // getHeight -> int scriptGetHeight (void ) 
 static tp_obj zzpy_getHeight(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int r=  scriptGetHeight(); 
   return tp_number(r);
 }
@@ -51,7 +57,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int p0= pm.asInt();
   int p1= pm.asInt();
   int p2= pm.asInt();
@@ -63,7 +69,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   int r=  scriptAppendVideo(p0); 
   return tp_number(r);
@@ -73,7 +79,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   int r=  scriptAudioMixer(p0); 
   return tp_number(r);
@@ -81,6 +87,9 @@
 // getFps1000 -> int scriptGetFps1000 (void ) 
 static tp_obj zzpy_getFps1000(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int r=  scriptGetFps1000(); 
   return tp_number(r);
 }
@@ -89,7 +98,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
   pm.makeCouples(&p1);
@@ -99,6 +108,9 @@
 // getWidth -> int scriptGetWidth (void ) 
 static tp_obj zzpy_getWidth(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int r=  scriptGetWidth(); 
   return tp_number(r);
 }
@@ -107,7 +119,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int p0= pm.asInt();
   float p1= pm.asFloat();
   float p2= pm.asFloat();
@@ -117,6 +129,9 @@
 // clearVideoFilters -> int scriptClearVideoFilters (void ) 
 static tp_obj zzpy_clearVideoFilters(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int r=  scriptClearVideoFilters(); 
   return tp_number(r);
 }
@@ -125,7 +140,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   const char *p0= pm.asString();
   CONFcouple *p1=NULL;
   pm.makeCouples(&p1);
@@ -135,12 +150,18 @@
 // audioReset -> int scriptAudioReset (void ) 
 static tp_obj zzpy_audioReset(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   int r=  scriptAudioReset(); 
   return tp_number(r);
 }
 // getVideoCodec -> str scriptGetVideoCodec (void ) 
 static tp_obj zzpy_getVideoCodec(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   char *r=  scriptGetVideoCodec(); 
   return tp_string(r);
 }
@@ -148,7 +169,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=(void *)pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   char const *key = pm.asString();
   if (!strcmp(key, "audioResample"))
   {
@@ -232,7 +253,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=pm.asThis(&self,100);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   char const *key = pm.asString();
   if (!strcmp(key, "audioResample"))
   {
@@ -262,8 +283,9 @@
 static tp_obj myCtorpyAdm(tp_vm *vm)
 {
   tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
   void *me=NULL;
-  tp_obj cdata = tp_data(vm, 100, me);
+  tp_obj cdata = tp_data(vm, ADM_PYID_AVIDEMUX, me);
   cdata.data.info->xfree = myDtorpyAdm;
   tp_set(vm, self, tp_string("cdata"), cdata);
   return tp_None;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-03 17:39:28 UTC (rev 6296)
@@ -1,5 +1,5 @@
 #              cname:pyname
-/* CLASS */ pyEditor : void : 101
+/* CLASS */ pyEditor : void : ADM_PYID_EDITOR
 /* METHOD */ int jsPrintTiming:printTiming      (int ) 
 /* METHOD */ int jsDumpSegments:dumpSegment     (void) 
 /* METHOD */ int jsDumpRefVideos:dumpRefVideo   (void) 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp	2010-06-03 17:39:28 UTC (rev 6296)
@@ -4,20 +4,26 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  void *me=pm.asThis(&self,101);
-  int p0= pm.asDouble();
+  void *me=(void *)pm.asThis(&self,ADM_PYID_EDITOR);
+  int p0= pm.asInt();
   int r=  jsPrintTiming(p0); 
   return tp_number(r);
 }
 // dumpSegment -> int jsDumpSegments (void ) 
 static tp_obj zzpy_dumpSegment(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_EDITOR);
   int r=  jsDumpSegments(); 
   return tp_number(r);
 }
 // dumpRefVideo -> int jsDumpRefVideos (void ) 
 static tp_obj zzpy_dumpRefVideo(TP)
  {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_EDITOR);
   int r=  jsDumpRefVideos(); 
   return tp_number(r);
 }
@@ -25,7 +31,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=pm.asThis(&self,101);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_EDITOR);
   char const *key = pm.asString();
   if (!strcmp(key, "printTiming"))
   {
@@ -45,18 +51,21 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  void *me=pm.asThis(&self,101);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_EDITOR);
   char const *key = pm.asString();
   return tp_None;
 }
+// Dctor
 static void myDtorpyEditor(tp_vm *vm,tp_obj self)
 {
 }
+// Ctor ()
 static tp_obj myCtorpyEditor(tp_vm *vm)
 {
   tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
   void *me=NULL;
-  tp_obj cdata = tp_data(vm, 101, me);
+  tp_obj cdata = tp_data(vm, ADM_PYID_EDITOR, me);
   cdata.data.info->xfree = myDtorpyEditor;
   tp_set(vm, self, tp_string("cdata"), cdata);
   return tp_None;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-03 17:39:28 UTC (rev 6296)
@@ -1,5 +1,5 @@
 #           name    cookie id
-/* CLASS */ pyDFInteger : ADM_scriptDFIntegerHelper : 201
+/* CLASS */ pyDFInteger : ADM_scriptDFIntegerHelper : ADM_PYID_DF_INTEGER
 #              cname:pyname
 /* CTOR */   (str,int,int) 
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger_gen.cpp	2010-06-03 17:39:28 UTC (rev 6296)
@@ -3,7 +3,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  ADM_scriptDFIntegerHelper *me=(ADM_scriptDFIntegerHelper *)pm.asThis(&self,201);
+  ADM_scriptDFIntegerHelper *me=(ADM_scriptDFIntegerHelper *)pm.asThis(&self,ADM_PYID_DF_INTEGER);
   char const *key = pm.asString();
   if (!strcmp(key, "value"))
   {
@@ -16,7 +16,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  ADM_scriptDFIntegerHelper *me=(ADM_scriptDFIntegerHelper *)pm.asThis(&self,201);
+  ADM_scriptDFIntegerHelper *me=(ADM_scriptDFIntegerHelper *)pm.asThis(&self,ADM_PYID_DF_INTEGER);
   char const *key = pm.asString();
   if (!strcmp(key, "value"))
   {
@@ -43,7 +43,7 @@
   int p1= pm.asInt();
   int p2= pm.asInt();
   ADM_scriptDFIntegerHelper *me=new ADM_scriptDFIntegerHelper(p0,p1,p2);
-  tp_obj cdata = tp_data(vm, 201, me);
+  tp_obj cdata = tp_data(vm, ADM_PYID_DF_INTEGER, me);
   cdata.data.info->xfree = myDtorpyDFInteger;
   tp_set(vm, self, tp_string("cdata"), cdata);
   return tp_None;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-03 17:39:28 UTC (rev 6296)
@@ -1,5 +1,5 @@
 #           name    cookie id
-/* CLASS */ pyDFToggle : ADM_scriptDFToggleHelper : 200
+/* CLASS */ pyDFToggle : ADM_scriptDFToggleHelper : ADM_PYID_DF_TOGGLE
 #              cname:pyname
 /* CTOR */   (str) 
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle_gen.cpp	2010-06-03 17:39:28 UTC (rev 6296)
@@ -3,7 +3,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  ADM_scriptDFToggleHelper *me=(ADM_scriptDFToggleHelper *)pm.asThis(&self,200);
+  ADM_scriptDFToggleHelper *me=(ADM_scriptDFToggleHelper *)pm.asThis(&self,ADM_PYID_DF_TOGGLE);
   char const *key = pm.asString();
   if (!strcmp(key, "value"))
   {
@@ -16,7 +16,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  ADM_scriptDFToggleHelper *me=(ADM_scriptDFToggleHelper *)pm.asThis(&self,200);
+  ADM_scriptDFToggleHelper *me=(ADM_scriptDFToggleHelper *)pm.asThis(&self,ADM_PYID_DF_TOGGLE);
   char const *key = pm.asString();
   if (!strcmp(key, "value"))
   {
@@ -41,7 +41,7 @@
   tinyParams pm(vm);
   const char *p0= pm.asString();
   ADM_scriptDFToggleHelper *me=new ADM_scriptDFToggleHelper(p0);
-  tp_obj cdata = tp_data(vm, 200, me);
+  tp_obj cdata = tp_data(vm, ADM_PYID_DF_TOGGLE, me);
   cdata.data.info->xfree = myDtorpyDFToggle;
   tp_set(vm, self, tp_string("cdata"), cdata);
   return tp_None;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-03 17:39:28 UTC (rev 6296)
@@ -1,5 +1,5 @@
 #           name    cookie id
-/* CLASS */ pyDialogFactory : ADM_scriptDialogFactoryHelper : 240
+/* CLASS */ pyDialogFactory : ADM_scriptDialogFactoryHelper : ADM_PYID_DIALOGF
 #              cname:pyname
 /* CTOR */   (str) 
 #

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory_gen.cpp	2010-06-03 17:39:28 UTC (rev 6296)
@@ -4,7 +4,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,ADM_PYID_DIALOGF);
   int r=  me->run(); 
   return tp_number(r);
 }
@@ -13,7 +13,7 @@
  {
   tp_obj self=tp_getraw( tp);
   tinyParams pm(tp);
-  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,ADM_PYID_DIALOGF);
   ADM_scriptDFBaseHelper *p0= ( ADM_scriptDFBaseHelper *)pm.asObjectPointer();
   me->addControl(p0); 
 
@@ -22,7 +22,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,ADM_PYID_DIALOGF);
   char const *key = pm.asString();
   if (!strcmp(key, "show"))
   {
@@ -38,7 +38,7 @@
 {
   tp_obj self=tp_getraw( vm);
   tinyParams pm(vm);
-  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,240);
+  ADM_scriptDialogFactoryHelper *me=(ADM_scriptDialogFactoryHelper *)pm.asThis(&self,ADM_PYID_DIALOGF);
   char const *key = pm.asString();
   return tp_None;
 }
@@ -56,7 +56,7 @@
   tinyParams pm(vm);
   const char *p0= pm.asString();
   ADM_scriptDialogFactoryHelper *me=new ADM_scriptDialogFactoryHelper(p0);
-  tp_obj cdata = tp_data(vm, 240, me);
+  tp_obj cdata = tp_data(vm, ADM_PYID_DIALOGF, me);
   cdata.data.info->xfree = myDtorpyDialogFactory;
   tp_set(vm, self, tp_string("cdata"), cdata);
   return tp_None;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-03 05:43:33 UTC (rev 6295)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-03 17:39:28 UTC (rev 6296)
@@ -1,4 +1,4 @@
-OBJS=adm_gen.cpp editor_gen.cpp
+OBJS=adm_gen.cpp  editor_gen.cpp  pyDFInteger_gen.cpp  pyDFToggle_gen.cpp  pyDialogFactory_gen.cpp
 %_gen.cpp:%.admPyClass
 	perl ../../../../cmake/admPyClass.pl  $<
 all: $(OBJS)



From mean at mail.berlios.de  Thu Jun  3 19:39:31 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 3 Jun 2010 19:39:31 +0200
Subject: [Avidemux-svn-commit] r6297 - in branches/avidemux_2.6_branch_mean:
	autononreg/py/dialogFactory avidemux/common/ADM_script2/py
Message-ID: <201006031739.o53HdVbi028408@sheep.berlios.de>

Author: mean
Date: 2010-06-03 19:39:31 +0200 (Thu, 03 Jun 2010)
New Revision: 6297

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu_gen.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
Log:
[py] Add menu

Added: branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py	2010-06-03 17:39:28 UTC (rev 6296)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py	2010-06-03 17:39:31 UTC (rev 6297)
@@ -0,0 +1,20 @@
+mnuResolution = DFMenu("Resolution:");
+mnuSourceRatio = DFMenu("Source Aspect Ratio:");
+mnuSourceRatio.addItem("1:1")
+mnuSourceRatio.addItem("4:3")
+mnuSourceRatio.addItem("16:9")
+mnuResolution.addItem("320x240")
+mnuResolution.addItem("640x400")
+
+dlgWizard = DialogFactory("Dialog Factory menu");
+
+dlgWizard.addControl(mnuSourceRatio);
+dlgWizard.addControl(mnuResolution);
+
+res=dlgWizard.show()
+print("res")
+print(res)
+print("source index:")
+print(mnuSourceRatio.index)
+print("dest index:")
+print(mnuResolution.index)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-03 17:39:28 UTC (rev 6296)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-03 17:39:31 UTC (rev 6297)
@@ -28,6 +28,7 @@
 
 #include "scriptDialogFactory/ADM_scriptDFToggle.h"
 #include "scriptDialogFactory/ADM_scriptDFInteger.h"
+#include "scriptDialogFactory/ADM_scriptDFMenu.h"
 #include "scriptDialogFactory/ADM_scriptDialogFactory.h"
 
 #define ADM_PYID_AVIDEMUX 100
@@ -35,12 +36,14 @@
 #define ADM_PYID_DIALOGF     200
 #define ADM_PYID_DF_TOGGLE   201
 #define ADM_PYID_DF_INTEGER  202
+#define ADM_PYID_DF_MENU     203
 
 #include "adm_gen.cpp"
 #include "editor_gen.cpp"
 
 #include "pyDFToggle_gen.cpp"
 #include "pyDFInteger_gen.cpp"
+#include "pyDFMenu_gen.cpp"
 #include "pyDialogFactory_gen.cpp"
 
 extern pyRegisterClass initClasspyAdm;
@@ -63,6 +66,7 @@
     py->registerClass("Editor",initClasspyEditor);
     py->registerClass("DFToggle",initClasspyDFToggle);
     py->registerClass("DFInteger",initClasspyDFInteger);
+    py->registerClass("DFMenu",initClasspyDFMenu);
     py->registerClass("DialogFactory",initClasspyDialogFactory);
     tinyPy::registerLogger(pyLogger);
     return true;

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass	2010-06-03 17:39:28 UTC (rev 6296)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass	2010-06-03 17:39:31 UTC (rev 6297)
@@ -0,0 +1,8 @@
+#           name    cookie id
+/* CLASS */ pyDFMenu : ADM_scriptDFMenuHelper :  ADM_PYID_DF_INTEGER 
+#              cname:pyname
+/* CTOR */   (str) 
+#
+/* ATTRIBUTES */ int index:setIndex,index
+/* METHOD */ void addItem:addItem(str)
+#

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu_gen.cpp	2010-06-03 17:39:28 UTC (rev 6296)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu_gen.cpp	2010-06-03 17:39:31 UTC (rev 6297)
@@ -0,0 +1,75 @@
+// Generated by admPyClass.pl do not edit !
+// addItem -> void addItem (str ) 
+static tp_obj zzpy_addItem(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  ADM_scriptDFMenuHelper *me=(ADM_scriptDFMenuHelper *)pm.asThis(&self,ADM_PYID_DF_INTEGER);
+  const char *p0= pm.asString();
+  me->addItem(p0); 
+
+}
+tp_obj zzpy__pyDFMenu_get(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDFMenuHelper *me=(ADM_scriptDFMenuHelper *)pm.asThis(&self,ADM_PYID_DF_INTEGER);
+  char const *key = pm.asString();
+  if (!strcmp(key, "index"))
+  {
+     if(!me) pm.raise("pyDFMenu:No this!");
+     return tp_number(me->index());
+  }
+  if (!strcmp(key, "addItem"))
+  {
+     return tp_method(vm,self,zzpy_addItem);
+  }
+  return tp_get(vm,self,tp_string(key));
+}
+tp_obj zzpy__pyDFMenu_set(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  ADM_scriptDFMenuHelper *me=(ADM_scriptDFMenuHelper *)pm.asThis(&self,ADM_PYID_DF_INTEGER);
+  char const *key = pm.asString();
+  if (!strcmp(key, "index"))
+  {
+     if(!me) pm.raise("pyDFMenu:No this!");
+     int val=pm.asInt();
+     me->setIndex(val);
+     return tp_None;
+  }
+  return tp_None;
+}
+// Dctor
+static void myDtorpyDFMenu(tp_vm *vm,tp_obj self)
+{
+  ADM_scriptDFMenuHelper *cookie=(ADM_scriptDFMenuHelper *)self.data.val;
+  if(cookie) delete cookie;
+  self.data.val=NULL;
+}
+// Ctor (str)
+static tp_obj myCtorpyDFMenu(tp_vm *vm)
+{
+  tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
+  const char *p0= pm.asString();
+  ADM_scriptDFMenuHelper *me=new ADM_scriptDFMenuHelper(p0);
+  tp_obj cdata = tp_data(vm, ADM_PYID_DF_INTEGER, me);
+  cdata.data.info->xfree = myDtorpyDFMenu;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
+}
+static tp_obj zzpy__pyDFMenu_help(TP)
+ {
+  jsLog("addItem(str)");
+};
+tp_obj initClasspyDFMenu(tp_vm *vm)
+{
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyDFMenu));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyDFMenu_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyDFMenu_get));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyDFMenu_help));
+  return myClass;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-03 17:39:28 UTC (rev 6296)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-03 17:39:31 UTC (rev 6297)
@@ -1,4 +1,4 @@
-OBJS=adm_gen.cpp  editor_gen.cpp  pyDFInteger_gen.cpp  pyDFToggle_gen.cpp  pyDialogFactory_gen.cpp
+OBJS=adm_gen.cpp  editor_gen.cpp  pyDFInteger_gen.cpp  pyDFToggle_gen.cpp  pyDialogFactory_gen.cpp pyDFMenu_gen.cpp
 %_gen.cpp:%.admPyClass
 	perl ../../../../cmake/admPyClass.pl  $<
 all: $(OBJS)



From mean at mail.berlios.de  Thu Jun  3 20:10:12 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 3 Jun 2010 20:10:12 +0200
Subject: [Avidemux-svn-commit] r6298 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <201006031810.o53IAC1k000812@sheep.berlios.de>

Author: mean
Date: 2010-06-03 20:10:11 +0200 (Thu, 03 Jun 2010)
New Revision: 6298

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.h
Log:
[QT4] Add contextual menu to filters

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2010-06-03 17:39:31 UTC (rev 6297)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2010-06-03 18:10:11 UTC (rev 6298)
@@ -631,9 +631,29 @@
 	activeList->setItemDelegate(new FilterItemDelegate(activeList));
 	availableList->setItemDelegate(new FilterItemDelegate(availableList));
 
+    //____________________
+    //  Context Menu
+    //____________________
+    QAction *add = new  QAction(QString("Add"),this);
+    availableList->setContextMenuPolicy(Qt::ActionsContextMenu);
+    availableList->addAction(add );
+    connect(add,SIGNAL(activated()),this,SLOT(add()));
+
+	//previewFrameIndex = curframe;
+    QAction *remove = new  QAction(QString("Remove"),this);
+    QAction *configure = new  QAction(QString("Configure"),this);
+    activeList->setContextMenuPolicy(Qt::ActionsContextMenu);
+    activeList->addAction(remove);
+    activeList->addAction(configure);
+    connect(remove,SIGNAL(activated()),this,SLOT(remove()));
+    connect(configure,SIGNAL(activated()),this,SLOT(configure()));
+
+
+
     displayFamily(0);
     buildActiveFilterList();
 	setSelected(nb_active_filter - 1);
+
  }
 
 filtermainWindow::~filtermainWindow()
@@ -696,4 +716,29 @@
          diaElem *tabs[]={&start,&end,&button};
         return diaFactoryRun(QT_TR_NOOP("Partial Video Filter"),3,tabs);
 }
+
+/**
+    \fn    Add
+    \brief Right click on an available filer
+*/
+void filtermainWindow::add(void)
+{
+    add(true);
+}
+/**
+    \fn    Add
+    \brief Right click on an available filer
+*/
+void filtermainWindow::remove(void)
+{
+    remove(true);
+}
+/**
+    \fn    Add
+    \brief Right click on an available filer
+*/
+void filtermainWindow::configure(void)
+{
+    configure(true);
+}
 //EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.h	2010-06-03 17:39:31 UTC (rev 6297)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.h	2010-06-03 18:10:11 UTC (rev 6298)
@@ -56,6 +56,10 @@
 	void filterFamilyItemChanged(QListWidgetItem *current, QListWidgetItem *previous);
 	void preview(bool b);
 	void closePreview();
+    // right click
+    void add(void);
+    void remove(void);
+    void configure(void);
 
 private:
 	uint32_t previewFrameIndex;



From gruntster at mail.berlios.de  Thu Jun  3 23:06:00 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 3 Jun 2010 23:06:00 +0200
Subject: [Avidemux-svn-commit] r6299 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <201006032106.o53L604o013901@sheep.berlios.de>

Author: gruntster
Date: 2010-06-03 23:05:53 +0200 (Thu, 03 Jun 2010)
New Revision: 6299

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
Log:
[i18n] enable translations for various Qt dialogs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -24,6 +24,10 @@
 #include "../ADM_gui/ADM_qtray.h"
 #include "ADM_toolkitQt.h"
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
 extern void UI_iconify(void);
 extern void UI_deiconify(void);
 extern void UI_purge(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -1,205 +1,209 @@
-/**
-    Jobs dialog
-    (c) Mean 2007
-*/
-
-#include "Q_jobs.h"
-#include "DIA_coreToolkit.h"
-#include "ADM_toolkitQt.h"
-
-static void updateStatus(void);
-extern bool parseECMAScript(const char *name);
-static const char *StringStatus[]={QT_TR_NOOP("Ready"),QT_TR_NOOP("Succeeded"),QT_TR_NOOP("Failed"),QT_TR_NOOP("Deleted"),QT_TR_NOOP("Running")};
-
-ADM_Job_Descriptor::ADM_Job_Descriptor(void) 
-{
-	status = STATUS_READY;
-	memset(&startDate, 0, sizeof(startDate));
-	memset(&endDate, 0, sizeof(startDate));
-}
-
- /**
-          \fn jobsWindow
- */
-jobsWindow::jobsWindow(QWidget *parent, uint32_t n,char **j)     : QDialog(parent)
- {
-     ui.setupUi(this);
-     _nbJobs=n;
-     _jobsName=j;
-     desc=new ADM_Job_Descriptor[n];
-     // Setup display
-	 ui.tableWidget->setRowCount(_nbJobs);
-     ui.tableWidget->setColumnCount(4);
-
-     // Set headers
-      QStringList headers;
-     headers << QT_TR_NOOP("Job Name") << QT_TR_NOOP("Status") << QT_TR_NOOP("Start Time") << QT_TR_NOOP("End Time"); 
-     
-     ui.tableWidget->setVerticalHeaderLabels(headers);
-     updateRows();
-    
-#define CNX(x) connect( ui.pushButton##x,SIGNAL(clicked(bool)),this,SLOT(x(bool)))
-           //connect( ui.pushButtonRunOne,SIGNAL(buttonPressed(const char *)),this,SLOT(runOne(const char *)));
-      CNX(RunOne);
-      CNX(RunAll);
-      CNX(DeleteAll);
-      CNX(DeleteOne);
- }
- /**
-    \fn ~jobsWindow
- */
-jobsWindow::~jobsWindow()
-{
-	delete [] desc;
-}
- /*
-    There is maybe a huge mem leak here
- */
-static void ADM_setText(const char *txt,uint32_t col, uint32_t row,QTableWidget *w)
-{
-	QString str = QString::fromUtf8(txt);
-        QTableWidgetItem *newItem = new QTableWidgetItem(str);//GetFileName(_jobsName[i]));
-        w->setItem(row, col, newItem);
-  
-}
- /**
-      \fn updateRaw
-      \brief update display for raw x
- */
-void jobsWindow::updateRows(void)
-{
-   ui.tableWidget->clear();
-   ADM_Job_Descriptor *j;
-   char str[20];
-   for(int i=0;i<_nbJobs;i++)
-   {
-      j=&(desc[i]);
-      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,ui.tableWidget);
-      ADM_setText(StringStatus[j->status],1,i,ui.tableWidget);
-      
-      sprintf(str,"%02u:%02u:%02u",j->startDate.hours,j->startDate.minutes,j->startDate.seconds);
-      ADM_setText(str,2,i,ui.tableWidget);
-      
-      sprintf(str,"%02u:%02u:%02u",j->endDate.hours,j->endDate.minutes,j->endDate.seconds);
-      ADM_setText(str,3,i,ui.tableWidget);
-   }
-}
-
-                                                                 
-                                                                 
-/**
-      \fn deleteOne
-      \brief delete one job
-*/
-void jobsWindow::DeleteOne(bool b)
-{
-	int sel = ui.tableWidget->currentRow();
-
-	if (sel >= 0 && sel < _nbJobs)
-	{
-		if (GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"), QT_TR_NOOP("Delete job"), QT_TR_NOOP("Are you sure you want to delete %s job?"), ADM_GetFileName(_jobsName[sel])))
-		{
-			desc[sel].status = STATUS_DELETED;
-			unlink(_jobsName[sel]);
-			updateRows();
-		}
-	}
-}
-/**
-      \fn deleteAll
-      \brief delete all job
-*/
-void jobsWindow::DeleteAll(bool b)
-{
-	if (GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"), QT_TR_NOOP("Delete *all* job"), QT_TR_NOOP("Are you sure you want to delete ALL jobs?")))
-	{
-		for(int sel = 0; sel < _nbJobs; sel++)
-		{
-			desc[sel].status = STATUS_DELETED;
-			unlink(_jobsName[sel]);
-		}
-
-		updateRows();
-	}
-}
-                                                        
-/**
-      \fn runOne
-      \brief Run one job
-*/
-void jobsWindow::RunOne(bool b)
-{
-	int sel = ui.tableWidget->currentRow();
-	printf("Selected %d\n", sel);
-
-	if(sel >= 0 && sel < _nbJobs)
-	{
-		if(desc[sel].status == STATUS_SUCCEED)
-			GUI_Info_HIG(ADM_LOG_INFO,QT_TR_NOOP("Already done"),QT_TR_NOOP("This script has already been successfully executed."));
-		else
-		{
-			desc[sel].status=STATUS_RUNNING;
-			updateRows();
-			GUI_Quiet();
-			TLK_getDate(&(desc[sel].startDate));
-
-			if(parseECMAScript(_jobsName[sel]))
-				desc[sel].status=STATUS_SUCCEED;
-			else
-				desc[sel].status=STATUS_FAILED;
-
-			TLK_getDate(&(desc[sel].endDate));
-			updateRows();
-			GUI_Verbose();
-		}
-	}
-}
-/**
-      \fn RunAll
-      \brief Run all jobs
-*/
-void jobsWindow::RunAll(bool b)
-{
-	for(int sel=0;sel<_nbJobs;sel++)
-	{
-		if(desc[sel].status == STATUS_SUCCEED || desc[sel].status == STATUS_DELETED)
-			continue;
-
-		desc[sel].status=STATUS_RUNNING;
-		updateRows();
-		GUI_Quiet();
-		TLK_getDate(&(desc[sel].startDate));
-
-		if(parseECMAScript(_jobsName[sel]))
-			desc[sel].status=STATUS_SUCCEED;
-		else
-			desc[sel].status=STATUS_FAILED;
-
-		TLK_getDate(&(desc[sel].endDate));
-		updateRows();
-		GUI_Verbose();
-	}
-}
-
-/**
-    \fn     DIA_job
-    \brief  
-*/
-uint8_t  DIA_job(uint32_t nb, char **name)
-{
-  uint8_t r=0;
-  jobsWindow jobswindow(qtLastRegisteredDialog(), nb,name);
-
-  qtRegisterDialog(&jobswindow);
-     
-     if(jobswindow.exec()==QDialog::Accepted)
-     {
-       r=1;
-     }
-
-	 qtUnregisterDialog(&jobswindow);
-
-     return r;
-}
-
-//EOF
+/**
+    Jobs dialog
+    (c) Mean 2007
+*/
+
+#include "Q_jobs.h"
+#include "DIA_coreToolkit.h"
+#include "ADM_toolkitQt.h"
+
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
+static void updateStatus(void);
+extern bool parseECMAScript(const char *name);
+static const char *StringStatus[]={QT_TR_NOOP("Ready"),QT_TR_NOOP("Succeeded"),QT_TR_NOOP("Failed"),QT_TR_NOOP("Deleted"),QT_TR_NOOP("Running")};
+
+ADM_Job_Descriptor::ADM_Job_Descriptor(void) 
+{
+	status = STATUS_READY;
+	memset(&startDate, 0, sizeof(startDate));
+	memset(&endDate, 0, sizeof(startDate));
+}
+
+ /**
+          \fn jobsWindow
+ */
+jobsWindow::jobsWindow(QWidget *parent, uint32_t n,char **j) : QDialog(parent)
+{
+	ui.setupUi(this);
+	_nbJobs=n;
+	_jobsName=j;
+	desc=new ADM_Job_Descriptor[n];
+	// Setup display
+	ui.tableWidget->setRowCount(_nbJobs);
+	ui.tableWidget->setColumnCount(4);
+
+	// Set headers
+	QStringList headers;
+	headers << QT_TR_NOOP("Job Name") << QT_TR_NOOP("Status") << QT_TR_NOOP("Start Time") << QT_TR_NOOP("End Time"); 
+
+	ui.tableWidget->setVerticalHeaderLabels(headers);
+	updateRows();
+
+#define CNX(x) connect( ui.pushButton##x,SIGNAL(clicked(bool)),this,SLOT(x(bool)))
+	//connect( ui.pushButtonRunOne,SIGNAL(buttonPressed(const char *)),this,SLOT(runOne(const char *)));
+	CNX(RunOne);
+	CNX(RunAll);
+	CNX(DeleteAll);
+	CNX(DeleteOne);
+}
+ /**
+    \fn ~jobsWindow
+ */
+jobsWindow::~jobsWindow()
+{
+	delete [] desc;
+}
+ /*
+    There is maybe a huge mem leak here
+ */
+static void ADM_setText(const char *txt,uint32_t col, uint32_t row,QTableWidget *w)
+{
+	QString str = QString::fromUtf8(txt);
+        QTableWidgetItem *newItem = new QTableWidgetItem(str);//GetFileName(_jobsName[i]));
+        w->setItem(row, col, newItem);
+  
+}
+ /**
+      \fn updateRaw
+      \brief update display for raw x
+ */
+void jobsWindow::updateRows(void)
+{
+   ui.tableWidget->clear();
+   ADM_Job_Descriptor *j;
+   char str[20];
+   for(int i=0;i<_nbJobs;i++)
+   {
+      j=&(desc[i]);
+      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,ui.tableWidget);
+      ADM_setText(StringStatus[j->status],1,i,ui.tableWidget);
+      
+      sprintf(str,"%02u:%02u:%02u",j->startDate.hours,j->startDate.minutes,j->startDate.seconds);
+      ADM_setText(str,2,i,ui.tableWidget);
+      
+      sprintf(str,"%02u:%02u:%02u",j->endDate.hours,j->endDate.minutes,j->endDate.seconds);
+      ADM_setText(str,3,i,ui.tableWidget);
+   }
+}
+
+                                                                 
+                                                                 
+/**
+      \fn deleteOne
+      \brief delete one job
+*/
+void jobsWindow::DeleteOne(bool b)
+{
+	int sel = ui.tableWidget->currentRow();
+
+	if (sel >= 0 && sel < _nbJobs)
+	{
+		if (GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"), QT_TR_NOOP("Delete job"), QT_TR_NOOP("Are you sure you want to delete %s job?"), ADM_GetFileName(_jobsName[sel])))
+		{
+			desc[sel].status = STATUS_DELETED;
+			unlink(_jobsName[sel]);
+			updateRows();
+		}
+	}
+}
+/**
+      \fn deleteAll
+      \brief delete all job
+*/
+void jobsWindow::DeleteAll(bool b)
+{
+	if (GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"), QT_TR_NOOP("Delete *all* job"), QT_TR_NOOP("Are you sure you want to delete ALL jobs?")))
+	{
+		for(int sel = 0; sel < _nbJobs; sel++)
+		{
+			desc[sel].status = STATUS_DELETED;
+			unlink(_jobsName[sel]);
+		}
+
+		updateRows();
+	}
+}
+                                                        
+/**
+      \fn runOne
+      \brief Run one job
+*/
+void jobsWindow::RunOne(bool b)
+{
+	int sel = ui.tableWidget->currentRow();
+	printf("Selected %d\n", sel);
+
+	if(sel >= 0 && sel < _nbJobs)
+	{
+		if(desc[sel].status == STATUS_SUCCEED)
+			GUI_Info_HIG(ADM_LOG_INFO,QT_TR_NOOP("Already done"),QT_TR_NOOP("This script has already been successfully executed."));
+		else
+		{
+			desc[sel].status=STATUS_RUNNING;
+			updateRows();
+			GUI_Quiet();
+			TLK_getDate(&(desc[sel].startDate));
+
+			if(parseECMAScript(_jobsName[sel]))
+				desc[sel].status=STATUS_SUCCEED;
+			else
+				desc[sel].status=STATUS_FAILED;
+
+			TLK_getDate(&(desc[sel].endDate));
+			updateRows();
+			GUI_Verbose();
+		}
+	}
+}
+/**
+      \fn RunAll
+      \brief Run all jobs
+*/
+void jobsWindow::RunAll(bool b)
+{
+	for(int sel=0;sel<_nbJobs;sel++)
+	{
+		if(desc[sel].status == STATUS_SUCCEED || desc[sel].status == STATUS_DELETED)
+			continue;
+
+		desc[sel].status=STATUS_RUNNING;
+		updateRows();
+		GUI_Quiet();
+		TLK_getDate(&(desc[sel].startDate));
+
+		if(parseECMAScript(_jobsName[sel]))
+			desc[sel].status=STATUS_SUCCEED;
+		else
+			desc[sel].status=STATUS_FAILED;
+
+		TLK_getDate(&(desc[sel].endDate));
+		updateRows();
+		GUI_Verbose();
+	}
+}
+
+/**
+    \fn     DIA_job
+    \brief  
+*/
+uint8_t  DIA_job(uint32_t nb, char **name)
+{
+  uint8_t r=0;
+  jobsWindow jobswindow(qtLastRegisteredDialog(), nb,name);
+
+  qtRegisterDialog(&jobswindow);
+     
+     if(jobswindow.exec()==QDialog::Accepted)
+     {
+       r=1;
+     }
+
+	 qtUnregisterDialog(&jobswindow);
+
+     return r;
+}
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -19,6 +19,10 @@
 #include "ADM_default.h"
 #include "ADM_toolkitQt.h"
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
 Ui_licenseWindow::Ui_licenseWindow(QWidget *parent) : QDialog(parent)
 {
 	ui.setupUi(this);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -1,137 +1,141 @@
-/***************************************************************************
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <math.h>
-
-#include "Q_props.h"
-#include "avi_vars.h"
-#include "avidemutils.h"
-#include "ADM_video/ADM_vidMisc.h"
-#include "ADM_toolkitQt.h"
-
-static const char *yesno[2]={QT_TR_NOOP("No"),QT_TR_NOOP("Yes")};
-extern const char *getStrFromAudioCodec( uint32_t codec);
-
-propWindow::propWindow(QWidget *parent) : QDialog(parent)
- {
-     ui.setupUi(this);
-     uint8_t gmc, qpel,vop;
- uint32_t info=0;
- uint32_t war,har;
- uint16_t hh, mm, ss, ms;
- char text[80];
- const char *s;
-  
-    text[0] = 0;
-    if (!avifileinfo)
-        return;
-  
-        // Fetch info
-        info=video_body->getSpecificMpeg4Info();
-        vop=!!(info & ADM_VOP_ON);
-        qpel=!!(info & ADM_QPEL_ON);
-        gmc=!!(info & ADM_GMC_ON);
-
-#define FILLTEXT(a,b,c) {snprintf(text,79,b,c);ui.a->setText(QString::fromUtf8(text));}
-#define FILLTEXT4(a,b,c,d) {snprintf(text,79,b,c,d);ui.a->setText(QString::fromUtf8(text));}
-#define FILLTEXT5(a,b,c,d,e) {snprintf(text,79,b,c,d,e);ui.a->setText(QString::fromUtf8(text));}
-        
-        FILLTEXT4(labeImageSize,QT_TR_NOOP("%lu x %lu"), avifileinfo->width,avifileinfo->height);
-        FILLTEXT(labelFrameRate, QT_TR_NOOP("%2.3f fps"), (float) avifileinfo->fps1000 / 1000.F);
-        FILLTEXT(labelNbOfFrames,QT_TR_NOOP("%ld frames"), avifileinfo->nb_frames);
-        FILLTEXT(label4CC, "%s",      fourCC::tostring(avifileinfo->fcc));
-        if (avifileinfo->nb_frames)
-          {
-                frame2time(avifileinfo->nb_frames, avifileinfo->fps1000,
-                          &hh, &mm, &ss, &ms);
-                snprintf(text,79, QT_TR_NOOP("%02d:%02d:%02d.%03d"), hh, mm, ss, ms);
-                ui.labelVideoDuration->setText(QString::fromUtf8(text));
-          }
-        war=video_body->getPARWidth();
-        har=video_body->getPARHeight();
-        getAspectRatioFromAR(war,har, &s);
-		FILLTEXT5(LabelAspectRatio,QT_TR_NOOP("%s (%u:%u)"), s,war,har);
-#define SET_YES(a,b) ui.a->setText(QString::fromUtf8(yesno[b]))
-#define FILLQT_TR_NOOP(q) ui.q->setText(QString::fromUtf8(text));
-        SET_YES(LabelPackedBitstream,vop);
-        SET_YES(LabelQuarterPixel,qpel);
-        SET_YES(LabelGMC,gmc);
-        
-         WAVHeader *wavinfo=NULL;
-        if (currentaudiostream) wavinfo=currentaudiostream->getInfo();
-          if(wavinfo)
-          {
-              
-              switch (wavinfo->channels)
-                {
-                case 1:
-		  sprintf(text, "%s", QT_TR_NOOP("Mono"));
-                    break;
-                case 2:
-                    sprintf(text, "%s", QT_TR_NOOP("Stereo"));
-                    break;
-                default:
-                    sprintf(text, "%d",wavinfo->channels);
-                    break;
-                }
-
-                FILLQT_TR_NOOP(labelChannels);
-                FILLTEXT(labelFrequency, QT_TR_NOOP("%lu Hz"), wavinfo->frequency);
-                FILLTEXT4(labelBitrate, QT_TR_NOOP("%lu Bps / %lu kbps"), wavinfo->byterate,wavinfo->byterate * 8 / 1000);
-                
-                sprintf(text, "%s", getStrFromAudioCodec(wavinfo->encoding));
-                FILLQT_TR_NOOP(labelACodec);
-
-                // Duration in seconds too
-                if(currentaudiostream && wavinfo->byterate>1)
-                {
-                        uint32_t l=currentaudiostream->getLength();
-                        double du;
-                        du=l;
-                        du*=1000;
-                        du/=wavinfo->byterate;
-                        ms2time((uint32_t)floor(du), &hh, &mm, &ss, &ms);
-
-						sprintf(text, QT_TR_NOOP("%02d:%02d:%02d.%03d"), hh, mm, ss, ms);
-						FILLQT_TR_NOOP(labelAudioDuration);
-
-						sprintf(text, QT_TR_NOOP("%.2f MB"), l / 1048576.F);
-						FILLQT_TR_NOOP(labelFileSize);
-                }
-
-                SET_YES(labelVBR,currentaudiostream->isVBR());
-        } else
-          {
-			  ui.groupBoxAudio->setEnabled(false);
-          }
- }
-/**
-    \fn DIA_properties
-    \brief Display dialog with file information (size, codec, duration etc....)
-*/
-void DIA_properties( void )
-{
-
-      if (playing)
-        return;
-      if (!avifileinfo)
-        return;
-     // Fetch info
-     propWindow propwindow(qtLastRegisteredDialog());
-	 qtRegisterDialog(&propwindow);
-     propwindow.exec();
-	 qtUnregisterDialog(&propwindow);
-}  
-//********************************************
-//EOF
+/***************************************************************************
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <math.h>
+
+#include "Q_props.h"
+#include "avi_vars.h"
+#include "avidemutils.h"
+#include "ADM_video/ADM_vidMisc.h"
+#include "ADM_toolkitQt.h"
+
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
+static const char *yesno[2]={QT_TR_NOOP("No"),QT_TR_NOOP("Yes")};
+extern const char *getStrFromAudioCodec( uint32_t codec);
+
+propWindow::propWindow(QWidget *parent) : QDialog(parent)
+ {
+     ui.setupUi(this);
+     uint8_t gmc, qpel,vop;
+ uint32_t info=0;
+ uint32_t war,har;
+ uint16_t hh, mm, ss, ms;
+ char text[80];
+ const char *s;
+  
+    text[0] = 0;
+    if (!avifileinfo)
+        return;
+  
+        // Fetch info
+        info=video_body->getSpecificMpeg4Info();
+        vop=!!(info & ADM_VOP_ON);
+        qpel=!!(info & ADM_QPEL_ON);
+        gmc=!!(info & ADM_GMC_ON);
+
+#define FILLTEXT(a,b,c) {snprintf(text,79,b,c);ui.a->setText(QString::fromUtf8(text));}
+#define FILLTEXT4(a,b,c,d) {snprintf(text,79,b,c,d);ui.a->setText(QString::fromUtf8(text));}
+#define FILLTEXT5(a,b,c,d,e) {snprintf(text,79,b,c,d,e);ui.a->setText(QString::fromUtf8(text));}
+        
+        FILLTEXT4(labeImageSize,QT_TR_NOOP("%lu x %lu"), avifileinfo->width,avifileinfo->height);
+        FILLTEXT(labelFrameRate, QT_TR_NOOP("%2.3f fps"), (float) avifileinfo->fps1000 / 1000.F);
+        FILLTEXT(labelNbOfFrames,QT_TR_NOOP("%ld frames"), avifileinfo->nb_frames);
+        FILLTEXT(label4CC, "%s",      fourCC::tostring(avifileinfo->fcc));
+        if (avifileinfo->nb_frames)
+          {
+                frame2time(avifileinfo->nb_frames, avifileinfo->fps1000,
+                          &hh, &mm, &ss, &ms);
+                snprintf(text,79, QT_TR_NOOP("%02d:%02d:%02d.%03d"), hh, mm, ss, ms);
+                ui.labelVideoDuration->setText(QString::fromUtf8(text));
+          }
+        war=video_body->getPARWidth();
+        har=video_body->getPARHeight();
+        getAspectRatioFromAR(war,har, &s);
+		FILLTEXT5(LabelAspectRatio,QT_TR_NOOP("%s (%u:%u)"), s,war,har);
+#define SET_YES(a,b) ui.a->setText(QString::fromUtf8(yesno[b]))
+#define FILLQT_TR_NOOP(q) ui.q->setText(QString::fromUtf8(text));
+        SET_YES(LabelPackedBitstream,vop);
+        SET_YES(LabelQuarterPixel,qpel);
+        SET_YES(LabelGMC,gmc);
+        
+         WAVHeader *wavinfo=NULL;
+        if (currentaudiostream) wavinfo=currentaudiostream->getInfo();
+          if(wavinfo)
+          {
+              
+              switch (wavinfo->channels)
+                {
+                case 1:
+		  sprintf(text, "%s", QT_TR_NOOP("Mono"));
+                    break;
+                case 2:
+                    sprintf(text, "%s", QT_TR_NOOP("Stereo"));
+                    break;
+                default:
+                    sprintf(text, "%d",wavinfo->channels);
+                    break;
+                }
+
+                FILLQT_TR_NOOP(labelChannels);
+                FILLTEXT(labelFrequency, QT_TR_NOOP("%lu Hz"), wavinfo->frequency);
+                FILLTEXT4(labelBitrate, QT_TR_NOOP("%lu Bps / %lu kbps"), wavinfo->byterate,wavinfo->byterate * 8 / 1000);
+                
+                sprintf(text, "%s", getStrFromAudioCodec(wavinfo->encoding));
+                FILLQT_TR_NOOP(labelACodec);
+
+                // Duration in seconds too
+                if(currentaudiostream && wavinfo->byterate>1)
+                {
+                        uint32_t l=currentaudiostream->getLength();
+                        double du;
+                        du=l;
+                        du*=1000;
+                        du/=wavinfo->byterate;
+                        ms2time((uint32_t)floor(du), &hh, &mm, &ss, &ms);
+
+						sprintf(text, QT_TR_NOOP("%02d:%02d:%02d.%03d"), hh, mm, ss, ms);
+						FILLQT_TR_NOOP(labelAudioDuration);
+
+						sprintf(text, QT_TR_NOOP("%.2f MB"), l / 1048576.F);
+						FILLQT_TR_NOOP(labelFileSize);
+                }
+
+                SET_YES(labelVBR,currentaudiostream->isVBR());
+        } else
+          {
+			  ui.groupBoxAudio->setEnabled(false);
+          }
+ }
+/**
+    \fn DIA_properties
+    \brief Display dialog with file information (size, codec, duration etc....)
+*/
+void DIA_properties( void )
+{
+
+      if (playing)
+        return;
+      if (!avifileinfo)
+        return;
+     // Fetch info
+     propWindow propwindow(qtLastRegisteredDialog());
+	 qtRegisterDialog(&propwindow);
+     propwindow.exec();
+	 qtUnregisterDialog(&propwindow);
+}  
+//********************************************
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -20,6 +20,10 @@
 #include "DIA_fileSel.h"
 #include "ADM_toolkitQt.h"
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
 //
 //	Video is in YV12 Colorspace
 //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -28,6 +28,10 @@
 #include "ADM_video/ADM_vidMisc.h"
 #include "ADM_toolkitQt.h"
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
 extern void UI_purge( void );
 
 void Ui_iDialog::setupUi(QDialog *Dialog)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -1,247 +1,251 @@
-/**
-    \file alert_qt4
-   copyright            : (C) 2007 by mean
-    email                : Mean/fixounet at free.fr
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include <QtGui/QDialog>
-#include <QtGui/QMessageBox>
-#include "ADM_default.h"
-#include "DIA_coreToolkit.h"
-#include "DIA_coreUI_internal.h"
-#include "prefs.h"
-#include "ADM_toolkitQt.h"
-
-static int beQuiet=0;
-extern QWidget *QuiMainWindows;
-namespace ADM_Qt4CoreUIToolkit
-{
-//****************************************************************************************************
-void            GUI_Alert(const char *alertstring)
-{
-    QMessageBox::StandardButton reply;
-              reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Alert")),
-                                        QString::fromUtf8(alertstring),
-                                        QMessageBox::Ok );
-}
-//****************************************************************************************************
-void            GUI_Info(const char *alertstring)
-{
-    QMessageBox::StandardButton reply;
-              reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
-                                        QString::fromUtf8(alertstring),
-                                        QMessageBox::Ok );
-}
-
-//****************************************************************************************************
-void GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
-{
-	uint32_t msglvl = 2;
-	QString alertString;
-
-	prefs->get(MESSAGE_LEVEL, &msglvl);
-
-	if (msglvl<level)
-	{
-		printf("Info: %s\n",primary);
-		return;
-	}
-
-	if (!secondary_format)
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
-	else
-	{
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
-		alertString.replace("\n", "<br>");
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
-		alertString, QMessageBox::Ok);
-}
-//****************************************************************************************************
-void GUI_Error_HIG(const char *primary, const char *secondary_format)
-{
-	uint32_t msglvl = 2;
-	QString alertString;
-
-	prefs->get(MESSAGE_LEVEL, &msglvl);
-
-	if (msglvl == ADM_LOG_NONE)
-	{
-		printf("Error: %s\n", primary);
-		return;
-	}
-
-	if (!secondary_format)
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
-	else
-	{
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
-		alertString.replace("\n", "<br>");
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
-		alertString, QMessageBox::Ok);
-}
-//****************************************************************************************************
-int GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format)
-{
-	QString alertString;
-
-	if (beQuiet)
-	{
-		printf("Info: %s\n", primary);
-		return 0;
-	}
-
-	if (!secondary_format)
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
-	else
-	{
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
-		alertString.replace("\n", "<br>");
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Confirmation")),
-		alertString, QMessageBox::Yes | QMessageBox::No);
-
-	if (reply == QMessageBox::Yes)
-		return 1;
-
-	return 0;
-}
-//****************************************************************************************************
-int GUI_YesNo(const char *primary, const char *secondary_format)
-{
-	uint32_t msglvl = 2;
-	QString alertString;
-
-	if (beQuiet)
-	{
-		printf("Info: %s\n", primary);
-		return 0;
-	}
-
-	if (!secondary_format)
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
-	else
-	{
-		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
-		alertString.replace("\n", "<br>");
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Confirmation")),
-		alertString, QMessageBox::Yes | QMessageBox::No);
-
-	if (reply == QMessageBox::Yes)
-		return 1;
-
-	return 0; 
-}
-//****************************************************************************************************
-int             GUI_Question(const char *alertstring)
-{
- QMessageBox::StandardButton reply;
-          if (beQuiet)
-              {
-                      printf("Question: %s\n", alertstring);
-                      return 0;
-              }
-          reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Question")),
-                                    QString::fromUtf8(alertstring),
-                                    QMessageBox::Yes | QMessageBox::No );
-          if(reply==QMessageBox::Yes) return 1;
-          return 0;
-}
-/**
-    \fn GUI_Alternate(char *title,char *choice1,char *choice2)
-    \brief Popup a dialog box name title with 2 buttons (choice1/choice2)
-    \return 0 if first is selected, 1 if second
-*/
-int      GUI_Alternate(char *title,char *choice1,char *choice2)
-{
-	if (beQuiet)
-	{
-		printf("Alternate<%s>: %s or %s\n", title,choice1,choice2);
-		return 0;
-	}
-
-	QMessageBox box(qtLastRegisteredDialog());
-
-	box.setWindowTitle(QString::fromUtf8(QT_TR_NOOP("Question ?")));
-	box.addButton(QString::fromUtf8(choice1),QMessageBox::YesRole);
-	box.addButton(QString::fromUtf8(choice2),QMessageBox::NoRole);
-
-	if (title)
-		box.setText(QString::fromUtf8(title));
-	else
-		box.setText(QString::fromUtf8(QT_TR_NOOP("Question")));
-
-	box.setIcon(QMessageBox::Question);
-
-	if (box.exec() == 0)
-		return 1;
-	else
-		return 0;
-}
-//****************************************************************************************************
-uint8_t  GUI_getDoubleValue(double *valye, float min, float max, const char *title)
-{
-  
-  
-  return 0; 
-}
-//****************************************************************************************************
-uint8_t		GUI_isQuiet(void)
-{
-    return beQuiet;
-}
-//****************************************************************************************************
-void            GUI_Verbose(void)
-{
-    beQuiet=0;
-}
-//****************************************************************************************************
-void            GUI_Quiet(void)
-{
-  beQuiet=1;
-}
-//****************************************************************************************************
-}
-
-static CoreToolkitDescriptor Qt4CoreToolkitDescriptor=
-{
-		&ADM_Qt4CoreUIToolkit::GUI_Info_HIG,
-		&ADM_Qt4CoreUIToolkit::GUI_Error_HIG,
-		&ADM_Qt4CoreUIToolkit::GUI_Confirmation_HIG,
-		&ADM_Qt4CoreUIToolkit::GUI_YesNo,
-		&ADM_Qt4CoreUIToolkit::GUI_Question,
-		&ADM_Qt4CoreUIToolkit::GUI_Alternate,
-		&ADM_Qt4CoreUIToolkit::GUI_Verbose,
-		&ADM_Qt4CoreUIToolkit::GUI_Quiet,
-		&ADM_Qt4CoreUIToolkit::GUI_isQuiet
-};
-
-void InitCoreToolkit(void )
-{
-	DIA_toolkitInit(&Qt4CoreToolkitDescriptor);
-	
-}
-//EOF
+/**
+    \file alert_qt4
+   copyright            : (C) 2007 by mean
+    email                : Mean/fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include <QtGui/QDialog>
+#include <QtGui/QMessageBox>
+#include "ADM_default.h"
+#include "DIA_coreToolkit.h"
+#include "DIA_coreUI_internal.h"
+#include "prefs.h"
+#include "ADM_toolkitQt.h"
+
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate("", x)
+
+static int beQuiet=0;
+extern QWidget *QuiMainWindows;
+namespace ADM_Qt4CoreUIToolkit
+{
+//****************************************************************************************************
+void            GUI_Alert(const char *alertstring)
+{
+    QMessageBox::StandardButton reply;
+              reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Alert")),
+                                        QString::fromUtf8(alertstring),
+                                        QMessageBox::Ok );
+}
+//****************************************************************************************************
+void            GUI_Info(const char *alertstring)
+{
+    QMessageBox::StandardButton reply;
+              reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
+                                        QString::fromUtf8(alertstring),
+                                        QMessageBox::Ok );
+}
+
+//****************************************************************************************************
+void GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
+{
+	uint32_t msglvl = 2;
+	QString alertString;
+
+	prefs->get(MESSAGE_LEVEL, &msglvl);
+
+	if (msglvl<level)
+	{
+		printf("Info: %s\n",primary);
+		return;
+	}
+
+	if (!secondary_format)
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
+	else
+	{
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
+		alertString.replace("\n", "<br>");
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
+		alertString, QMessageBox::Ok);
+}
+//****************************************************************************************************
+void GUI_Error_HIG(const char *primary, const char *secondary_format)
+{
+	uint32_t msglvl = 2;
+	QString alertString;
+
+	prefs->get(MESSAGE_LEVEL, &msglvl);
+
+	if (msglvl == ADM_LOG_NONE)
+	{
+		printf("Error: %s\n", primary);
+		return;
+	}
+
+	if (!secondary_format)
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
+	else
+	{
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
+		alertString.replace("\n", "<br>");
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
+		alertString, QMessageBox::Ok);
+}
+//****************************************************************************************************
+int GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format)
+{
+	QString alertString;
+
+	if (beQuiet)
+	{
+		printf("Info: %s\n", primary);
+		return 0;
+	}
+
+	if (!secondary_format)
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
+	else
+	{
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
+		alertString.replace("\n", "<br>");
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Confirmation")),
+		alertString, QMessageBox::Yes | QMessageBox::No);
+
+	if (reply == QMessageBox::Yes)
+		return 1;
+
+	return 0;
+}
+//****************************************************************************************************
+int GUI_YesNo(const char *primary, const char *secondary_format)
+{
+	uint32_t msglvl = 2;
+	QString alertString;
+
+	if (beQuiet)
+	{
+		printf("Info: %s\n", primary);
+		return 0;
+	}
+
+	if (!secondary_format)
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big>";
+	else
+	{
+		alertString = "<big><b>" + QString::fromUtf8(primary) + "</b></big><br><br>" + QString::fromUtf8(secondary_format);
+		alertString.replace("\n", "<br>");
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Confirmation")),
+		alertString, QMessageBox::Yes | QMessageBox::No);
+
+	if (reply == QMessageBox::Yes)
+		return 1;
+
+	return 0; 
+}
+//****************************************************************************************************
+int             GUI_Question(const char *alertstring)
+{
+ QMessageBox::StandardButton reply;
+          if (beQuiet)
+              {
+                      printf("Question: %s\n", alertstring);
+                      return 0;
+              }
+          reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Question")),
+                                    QString::fromUtf8(alertstring),
+                                    QMessageBox::Yes | QMessageBox::No );
+          if(reply==QMessageBox::Yes) return 1;
+          return 0;
+}
+/**
+    \fn GUI_Alternate(char *title,char *choice1,char *choice2)
+    \brief Popup a dialog box name title with 2 buttons (choice1/choice2)
+    \return 0 if first is selected, 1 if second
+*/
+int      GUI_Alternate(char *title,char *choice1,char *choice2)
+{
+	if (beQuiet)
+	{
+		printf("Alternate<%s>: %s or %s\n", title,choice1,choice2);
+		return 0;
+	}
+
+	QMessageBox box(qtLastRegisteredDialog());
+
+	box.setWindowTitle(QString::fromUtf8(QT_TR_NOOP("Question ?")));
+	box.addButton(QString::fromUtf8(choice1),QMessageBox::YesRole);
+	box.addButton(QString::fromUtf8(choice2),QMessageBox::NoRole);
+
+	if (title)
+		box.setText(QString::fromUtf8(title));
+	else
+		box.setText(QString::fromUtf8(QT_TR_NOOP("Question")));
+
+	box.setIcon(QMessageBox::Question);
+
+	if (box.exec() == 0)
+		return 1;
+	else
+		return 0;
+}
+//****************************************************************************************************
+uint8_t  GUI_getDoubleValue(double *valye, float min, float max, const char *title)
+{
+  
+  
+  return 0; 
+}
+//****************************************************************************************************
+uint8_t		GUI_isQuiet(void)
+{
+    return beQuiet;
+}
+//****************************************************************************************************
+void            GUI_Verbose(void)
+{
+    beQuiet=0;
+}
+//****************************************************************************************************
+void            GUI_Quiet(void)
+{
+  beQuiet=1;
+}
+//****************************************************************************************************
+}
+
+static CoreToolkitDescriptor Qt4CoreToolkitDescriptor=
+{
+		&ADM_Qt4CoreUIToolkit::GUI_Info_HIG,
+		&ADM_Qt4CoreUIToolkit::GUI_Error_HIG,
+		&ADM_Qt4CoreUIToolkit::GUI_Confirmation_HIG,
+		&ADM_Qt4CoreUIToolkit::GUI_YesNo,
+		&ADM_Qt4CoreUIToolkit::GUI_Question,
+		&ADM_Qt4CoreUIToolkit::GUI_Alternate,
+		&ADM_Qt4CoreUIToolkit::GUI_Verbose,
+		&ADM_Qt4CoreUIToolkit::GUI_Quiet,
+		&ADM_Qt4CoreUIToolkit::GUI_isQuiet
+};
+
+void InitCoreToolkit(void )
+{
+	DIA_toolkitInit(&Qt4CoreToolkitDescriptor);
+	
+}
+//EOF



From gruntster at mail.berlios.de  Thu Jun  3 23:07:07 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 3 Jun 2010 23:07:07 +0200
Subject: [Avidemux-svn-commit] r6300 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <201006032107.o53L77H2013930@sheep.berlios.de>

Author: gruntster
Date: 2010-06-03 23:07:03 +0200 (Thu, 03 Jun 2010)
New Revision: 6300

Modified:
   branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts
Log:
[i18n] German translation update for Qt by Lance

Modified: branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts	2010-06-03 21:05:53 UTC (rev 6299)
+++ branches/avidemux_2.5_branch_gruntster/po/avidemux_de.ts	2010-06-03 21:07:03 UTC (rev 6300)
@@ -584,7 +584,7 @@
     <message>
         <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="30"/>
         <source>MPEG-2 requant</source>
-        <translation type="unfinished">MPEG-2 requant</translation>
+        <translation>MPEG-2 Requantisierung</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_encoder/ADM_encCodecDesc.h" line="47"/>
@@ -1152,12 +1152,12 @@
         <translation type="obsolete">Quantization</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="23"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="27"/>
         <source>No</source>
         <translation>Nein</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="23"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="27"/>
         <source>Yes</source>
         <translation>Ja</translation>
     </message>
@@ -1885,7 +1885,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp" line="40"/>
         <source>Requant Configuration</source>
-        <translation type="unfinished">Requant Konfiguration</translation>
+        <translation>Requantisierung</translation>
     </message>
     <message>
         <source>VCD</source>
@@ -3274,48 +3274,48 @@
         <translation type="unfinished">Gro?es Halbbildmodus-Paket, beinhaltet IVTC.</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="692"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="712"/>
         <source>Partial Start Frame:</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="693"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="713"/>
         <source>Partial End Frame:</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="694"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="714"/>
         <source>Configure child</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="697"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp" line="717"/>
         <source>Partial Video Filter</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="12"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="16"/>
         <source>Ready</source>
         <translation type="unfinished">Fertig</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="12"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="16"/>
         <source>Succeeded</source>
         <translation type="unfinished">Gelungen</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="12"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="16"/>
         <location filename="../avidemux/gtk_gui.cpp" line="2334"/>
         <source>Failed</source>
         <translation type="unfinished">Fehlgeschlagen</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="12"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="16"/>
         <source>Deleted</source>
         <translation type="unfinished">Gel?scht</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="12"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="16"/>
         <source>Running</source>
         <translation type="unfinished">L?uft gerade</translation>
     </message>
@@ -3870,7 +3870,7 @@
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="211"/>
         <source>MPEG Requantizer</source>
-        <translation type="unfinished">MPEG Requantizer</translation>
+        <translation>MPEG Requantisierer</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_outputs/oplug_mpegFF/oplug_vcdff.cpp" line="221"/>
@@ -3944,31 +3944,31 @@
         <translation type="unfinished">Men?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="32"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="36"/>
         <source>Alert</source>
         <translation type="unfinished">Meldung</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="40"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="69"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="96"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="44"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="73"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="100"/>
         <source>Info</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="120"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="150"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="124"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="154"/>
         <source>Confirmation</source>
         <translation>Best?tigung</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="167"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="195"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="171"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="199"/>
         <source>Question</source>
         <translation>Frage</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="188"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp" line="192"/>
         <source>Question ?</source>
         <translation>Frage ?</translation>
     </message>
@@ -4272,7 +4272,7 @@
     <message>
         <location filename="../plugins/ADM_audioEncoders/twolame/audioencoder_twolame.cpp" line="231"/>
         <source>TwoLame Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation>TwoLame Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp" line="295"/>
@@ -4292,7 +4292,7 @@
     <message>
         <location filename="../plugins/ADM_audioEncoders/vorbis/audioencoder_vorbis.cpp" line="314"/>
         <source>Vorbis Configuration</source>
-        <translation type="unfinished">Vorbis Konfiguration</translation>
+        <translation>Vorbis Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp" line="60"/>
@@ -5007,7 +5007,7 @@
     </message>
     <message>
         <source>MPEG-2 requant</source>
-        <translation type="obsolete">MPEG-2 requant</translation>
+        <translation type="obsolete">MPEG-2 Requantisierung</translation>
     </message>
     <message>
         <source>DVD (mpeg2enc)</source>
@@ -10083,17 +10083,17 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp" line="72"/>
         <source>_New frame rate:</source>
-        <translation type="unfinished">_Neue Bildrate:</translation>
+        <translation>_Neue Bildrate:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp" line="73"/>
         <source>_Blend</source>
-        <translation type="unfinished">_Mischen</translation>
+        <translation>die Bilder _mischen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/ResampleFps/ADM_vidResampleFPS.cpp" line="77"/>
         <source>Resample fps</source>
-        <translation type="unfinished">Resample Bilder/s (Hz)</translation>
+        <translation>Resample Bilder/s (Hz)</translation>
     </message>
 </context>
 <context>
@@ -10381,7 +10381,7 @@
     <message>
         <location filename="../avidemux/ADM_videoFilter/ADM_vidSwissArmyKnife.cpp" line="385"/>
         <source>Swiss Army Knife Configuration</source>
-        <translation type="unfinished">&quot;Swiss Army Knife&quot; Konfiguration</translation>
+        <translation>Swiss Army Knife Konfiguration</translation>
     </message>
 </context>
 <context>
@@ -10478,7 +10478,7 @@
     <message>
         <location filename="../avidemux/ADM_videoFilter/ADM_vidThreshold.cpp" line="152"/>
         <source>Threshold Configuration</source>
-        <translation type="unfinished">Schwellen-Konfiguration</translation>
+        <translation>Schwellwert-Einstellung</translation>
     </message>
 </context>
 <context>
@@ -10486,47 +10486,47 @@
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="137"/>
         <source>Temporal &amp; spatial check</source>
-        <translation type="unfinished">Zeitliche &amp; r?umliche Pr?fung</translation>
+        <translation>Zeitliche &amp; r?umliche Pr?fung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="138"/>
         <source>Bob, temporal &amp; spatial check</source>
-        <translation type="unfinished">Bob, zeitliche &amp; r?umliche Pr?fung</translation>
+        <translation>Bob, zeitliche &amp; r?umliche Pr?fung (Frameverdopplung)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="139"/>
         <source>Skip spatial temporal check</source>
-        <translation>Ohne r?umliche &amp;&amp; zeitliche Pr?fung</translation>
+        <translation>Ohne r?umliche &amp; zeitliche Pr?fung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="140"/>
         <source>Bob, skip spatial temporal check</source>
-        <translation>Bob, ohne r?umliche &amp;&amp; zeitliche Pr?fung</translation>
+        <translation>Bob, ohne r?umliche &amp; zeitliche Pr?fung (Frameverdopplung)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="143"/>
         <source>Bottom field first</source>
-        <translation type="unfinished">Unteres Feld zuerst</translation>
+        <translation>Unteres Feld zuerst (BFF)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="144"/>
         <source>Top field first</source>
-        <translation type="unfinished">Oberes Feld zuerst</translation>
+        <translation>Oberes Feld zuerst (TFF)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="147"/>
         <source>_Mode:</source>
-        <translation type="unfinished">_Modus:</translation>
+        <translation>_Modus:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="148"/>
         <source>_Order:</source>
-        <translation type="unfinished">Reihenf_olge:</translation>
+        <translation>Reihenf_olge:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Yadif/ADM_vidYadif.cpp" line="152"/>
         <source>yadif</source>
-        <translation type="unfinished">yadif (Yet Another DeInterlacing Filter)</translation>
+        <translation>yadif (Yet Another DeInterlacing Filter)</translation>
     </message>
 </context>
 <context>
@@ -10665,22 +10665,25 @@
         <source>If the file is using B-frames as reference it can lead to a crash or stuttering.
 Avidemux can use another mode which is safe but YOU WILL LOSE FRAME ACCURACY.
 Do you want to use that mode?</source>
-        <translation></translation>
+        <translation>Wenn die Datei B-Bilder als Referenz verwendet, kann das zum Absturz oder Stottern 
+f?hren. Avidemux kann einen anderen Modus verwenden, der sicher ist, aber 
+&lt;b&gt;DAMIT GEHT DIE BILD-GENAUIGKEIT VERLOREN&lt;/b&gt;.
+Soll dieser sichere Modus verwendet werden ?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="719"/>
         <source>Packed Bitstream detected</source>
-        <translation type="unfinished">Gepackten Bitstrom gefunden</translation>
+        <translation>Gepackten Bitstrom gefunden</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="720"/>
         <source>Do you want me to unpack it ?</source>
-        <translation type="unfinished">Soll es entpackt werden ?</translation>
+        <translation>Soll er entpackt werden ?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="740"/>
         <source>Could not unpack the video</source>
-        <translation type="unfinished">Video konnte nicht entpackt werden</translation>
+        <translation>Das Video konnte nicht entpackt werden</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="740"/>
@@ -10695,7 +10698,7 @@
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="744"/>
         <source>The unpacking succeedeed but the index is still not up to date.</source>
-        <translation type="unfinished">Das Entpacken war erfolgreich, aber der Index ist nicht aktuell.</translation>
+        <translation>Das Entpacken war erfolgreich, aber der Index ist nicht aktuell.</translation>
     </message>
     <message>
         <source>Troubles ahead</source>
@@ -10708,24 +10711,24 @@
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="757"/>
         <source>Index is not up to date</source>
-        <translation type="unfinished">Index ist nicht aktuell</translation>
+        <translation>Der Index ist nicht aktuell</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="757"/>
         <source>You should use Tool-&gt;Rebuild frame. Do it now ?</source>
-        <translation type="unfinished">Werkzeuge -&gt; Bilder neu erstellen sollte verwendet werden. Starten ?</translation>
+        <translation>Werkzeuge -&gt; Bilder neu erstellen sollte verwendet werden. Starten ?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1526"/>
         <source>This looks like mpeg
  Do you want to index it?</source>
-        <translation type="unfinished">Dies schaut wie Mpeg aus
+        <translation>Dies sieht wie Mpeg aus
 Soll ein Index erstellt werden ?</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_editor/ADM_edit.cpp" line="1578"/>
         <source>Indexing failed</source>
-        <translation type="unfinished">Indizierung gescheitert</translation>
+        <translation>Indexerstellung fehlgeschlagen</translation>
     </message>
 </context>
 <context>
@@ -10758,68 +10761,68 @@
 <context>
     <name>ADM_Qt4Factory::ADM_Qbitrate</name>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="50"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="51"/>
         <source>Constant Bitrate</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="51"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="52"/>
         <source>Constant Quantiser</source>
-        <translation></translation>
+        <translation>konstante Quantisierung</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="52"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="53"/>
         <source>Same Quantiser as Input</source>
-        <translation></translation>
+        <translation>gleiche Quantisierung wie Quelle</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="53"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="54"/>
         <source>Constant Rate Factor</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="54"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="55"/>
         <source>Two Pass - Video Size</source>
-        <translation type="unfinished">Zweifach-Durchlauf - Videogr??e</translation>
+        <translation>Videogr??e (2 Durchl?ufe)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="55"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="56"/>
         <source>Two Pass - Average Bitrate</source>
-        <translation type="unfinished">Zweifach-Durchlauf - Durchschnittsbitrate</translation>
+        <translation>durchschnittl. Bitrate (2 Durchl?ufe)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="57"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="58"/>
         <source>Encoding mode</source>
-        <translation></translation>
+        <translation>Kodiermodus</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="62"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="63"/>
         <source>Bitrate</source>
-        <translation type="unfinished">Bitrate</translation>
+        <translation>Bitrate</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="163"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="164"/>
         <source>Target bitrate (kb/s)</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="168"/>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="187"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="169"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="188"/>
         <source>Quantiser</source>
-        <translation></translation>
+        <translation>Quantisierung</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="173"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="174"/>
         <source>Target video size (MB)</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="178"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="179"/>
         <source>Average bitrate (kb/s)</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="183"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp" line="184"/>
         <source>-</source>
         <translation type="unfinished">-</translation>
     </message>
@@ -10827,40 +10830,40 @@
 <context>
     <name>ADM_Qt4Factory::ADM_QconfigMenu</name>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="48"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="49"/>
         <source>Configuration:</source>
-        <translation></translation>
+        <translation>Konfiguration:</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="50"/>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="198"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="51"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="199"/>
         <source>Save As</source>
-        <translation></translation>
+        <translation>speichern unter</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="51"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="52"/>
         <source>Delete</source>
-        <translation></translation>
+        <translation>l?schen</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="122"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="123"/>
         <source>&lt;default&gt;</source>
-        <translation></translation>
+        <translation>&lt;Voreinstellung&gt;</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="123"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="124"/>
         <source>&lt;custom&gt;</source>
-        <translation>&lt;individuell&gt;</translation>
+        <translation>&lt;benutzerdefiniert&gt;</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="183"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="184"/>
         <source>Are you sure you wish to delete the selected configuration?</source>
-        <translation></translation>
+        <translation>M?chten Sie die ausgew?hlte Konfiguration wirklich l?schen?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="198"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp" line="199"/>
         <source>Configuration File (*.xml)</source>
-        <translation></translation>
+        <translation>Konfigurationsdatei (*.xml)</translation>
     </message>
 </context>
 <context>
@@ -10962,17 +10965,17 @@
 <context>
     <name>ADM_qt4Factory::ADM_QthreadCount</name>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="46"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="48"/>
         <source>Disabled</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="47"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="49"/>
         <source>Auto-detect</source>
         <translation type="unfinished">Auto-Erkennung</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="48"/>
+        <location filename="../avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp" line="50"/>
         <source>Custom</source>
         <translation>Individuell</translation>
     </message>
@@ -11423,7 +11426,7 @@
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="150"/>
         <location filename="../plugins/build/ADM_videoFilters/CNR2/ui_cnr2.h" line="339"/>
         <source>Settings</source>
-        <translation></translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/CNR2/qt4/cnr2.ui" line="171"/>
@@ -11747,7 +11750,7 @@
 <context>
     <name>DIA_encoding</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="208"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="212"/>
         <source>Shutting down</source>
         <translation>Herunter fahren</translation>
     </message>
@@ -11760,17 +11763,17 @@
         <translation type="obsolete">%lu MB</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="500"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="504"/>
         <source>The encoding is paused. Do you want to resume or abort?</source>
         <translation>Der Kodierungvorgang wurde angehalten. M?chten Sie den Vorgang fortsetzen oder abbrechen?</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="501"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="505"/>
         <source>Resume</source>
         <translation>Fortfahren</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="501"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="505"/>
         <source>Abort</source>
         <translation>Abbruch</translation>
     </message>
@@ -11778,12 +11781,12 @@
 <context>
     <name>DIA_progressIndexing</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="123"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="127"/>
         <source># Images :%0lu</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="141"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="145"/>
         <source>Time Left :%02d:%02d:%02d</source>
         <translation></translation>
     </message>
@@ -11884,17 +11887,17 @@
 <context>
     <name>Dialog</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="67"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="71"/>
         <source>Indexing</source>
         <translation type="unfinished">Indizierung</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="68"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="72"/>
         <source>Time Left : Infinity</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="69"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp" line="73"/>
         <source># Images :</source>
         <translation></translation>
     </message>
@@ -12300,7 +12303,7 @@
         <location filename="../plugins/ADM_videoFilters/Equalizer/qt4/equaliser.ui" line="41"/>
         <location filename="../plugins/build/ADM_videoFilters/Equalizer/ui_equaliser.h" line="349"/>
         <source>Settings</source>
-        <translation></translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoFilters/Equalizer/qt4/equaliser.ui" line="255"/>
@@ -12324,12 +12327,12 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp" line="97"/>
         <source>Settings</source>
-        <translation></translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/flv1Encoder.cpp" line="100"/>
         <source>avcodec Sorenson Spark Configuration</source>
-        <translation></translation>
+        <translation>avcodec Sorenson Spark Einstellung</translation>
     </message>
 </context>
 <context>
@@ -12588,22 +12591,26 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="216"/>
         <source>Encoding Mode</source>
-        <translation type="unfinished">Kodier-Modus</translation>
+        <translation>Kodiermodus</translation>
     </message>
     <message>
+        <source>Motion _Estimation Method:</source>
+        <translation type="obsolete">Methode zur _Bewegungseinsch?tzung:</translation>
+    </message>
+    <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="219"/>
         <source>Motion Estimation Method:</source>
-        <translation></translation>
+        <translation type="unfinished"></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="220"/>
         <source>_Maximum Consecutive B-frames:</source>
-        <translation></translation>
+        <translation>_max. aufeinanderfolgende B-Frames:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="221"/>
         <source>4 _Motion Vector</source>
-        <translation></translation>
+        <translation>4 Motion _Vector</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="222"/>
@@ -12613,72 +12620,72 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="223"/>
         <source>_Global Motion Compensation</source>
-        <translation></translation>
+        <translation>globale Bewegungskompensation (_GMC)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="226"/>
         <source>Motion Estimation</source>
-        <translation type="unfinished">Absch?tzung der Bewegung</translation>
+        <translation>Bewegungabsch?tzung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="229"/>
         <source>_Quantisation Type:</source>
-        <translation></translation>
+        <translation>_Quantisierungstyp:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="230"/>
         <source>_Macroblock Decision Mode:</source>
-        <translation></translation>
+        <translation>_Makroblock Entscheidungsmodus:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="231"/>
         <source>Mi_nimum Quantiser:</source>
-        <translation></translation>
+        <translation>mi_nimale Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="232"/>
         <source>Ma_ximum Quantiser:</source>
-        <translation></translation>
+        <translation>max_imale Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="233"/>
         <source>Maximum Quantiser _Difference:</source>
-        <translation></translation>
+        <translation>max. Quantisierungs_differenz:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="234"/>
         <source>_Quantiser Compression:</source>
-        <translation></translation>
+        <translation>Quantisierungs_kompression:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="235"/>
         <source>Quantiser _Blur:</source>
-        <translation></translation>
+        <translation>Quantisierungs_unsch?rfe:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="236"/>
         <source>_Trellis Quantisation</source>
-        <translation></translation>
+        <translation>_Trellis Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="239"/>
         <source>Quantisation</source>
-        <translation></translation>
+        <translation>Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="263"/>
         <source>avcodec H.263 Configuration</source>
-        <translation></translation>
+        <translation>avcodec H.263 Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="471"/>
         <source>The H.263 encoder only accepts the following resolutions:</source>
-        <translation></translation>
+        <translation>Der H.263 Kodierer akzeptiert lediglich die folgenden Bildaufl?sungen:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/h263Encoder.cpp" line="479"/>
         <source>Incompatible settings</source>
-        <translation type="unfinished">Inkompatible Einstellungen</translation>
+        <translation>Inkompatible Einstellungen</translation>
     </message>
 </context>
 <context>
@@ -13675,17 +13682,17 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp" line="85"/>
         <source>_Quantiser:</source>
-        <translation type="unfinished"></translation>
+        <translation>_Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp" line="92"/>
         <source>Settings</source>
-        <translation type="unfinished"></translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mjpegEncoder.cpp" line="95"/>
         <source>avcodec M-JPEG Configuration</source>
-        <translation type="unfinished"></translation>
+        <translation>M-JPEG Konfiguration</translation>
     </message>
 </context>
 <context>
@@ -13779,22 +13786,22 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp" line="256"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp" line="78"/>
         <source>Settings</source>
-        <translation></translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg1Encoder.cpp" line="259"/>
         <source>avcodec MPEG-1 Configuration</source>
-        <translation></translation>
+        <translation>avcodec MPEG-1 Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp" line="71"/>
         <source>New sequence every (MB):</source>
-        <translation></translation>
+        <translation>teilen nach (MB):</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg1Encoder.cpp" line="81"/>
         <source>mpeg2enc Configuration</source>
-        <translation></translation>
+        <translation>mpeg2enc Konfiguration</translation>
     </message>
 </context>
 <context>
@@ -13815,7 +13822,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="250"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="86"/>
         <source>Default</source>
-        <translation type="unfinished">Voreinstellung</translation>
+        <translation>Voreinstellung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="251"/>
@@ -13839,74 +13846,74 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="257"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="93"/>
         <source>Progressive</source>
-        <translation type="unfinished">Progressiv (Vollbilder)</translation>
+        <translation>Progressiv (Vollbilder)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="258"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="94"/>
         <source>Interlaced BFF</source>
-        <translation type="unfinished">BBF-Halbbildmodus (interlaced)</translation>
+        <translation>BBF-Halbbildmodus (interlaced)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="259"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="95"/>
         <source>Interlaced TFF</source>
-        <translation type="unfinished">TTF- Halbbildmodus (interlaced)</translation>
+        <translation>TTF- Halbbildmodus (interlaced)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="263"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="99"/>
         <source>Ma_x. bitrate:</source>
-        <translation type="unfinished">Ma_x. Bitrate:</translation>
+        <translation>Ma_x. Bitrate:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="264"/>
         <source>Mi_n. bitrate:</source>
-        <translation type="unfinished">Mi_n. Bitrate:</translation>
+        <translation>Mi_n. Bitrate:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="265"/>
         <source>_Use Xvid rate control</source>
-        <translation type="unfinished">_Xvid Bitratenpr?fung verwenden</translation>
+        <translation>ben-utze die Xvid Bitratenkontrolle</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="266"/>
         <source>_Buffer size:</source>
-        <translation type="unfinished">_Puffergr??e:</translation>
+        <translation>_Puffergr??e:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="267"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="102"/>
         <source>Aspect _ratio:</source>
-        <translation type="unfinished">Seitenve_rh?ltnis:</translation>
+        <translation>Seitenve_rh?ltnis:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="268"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="103"/>
         <source>_Matrices:</source>
-        <translation type="unfinished">_Matrizen:</translation>
+        <translation>_Matrizen:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="269"/>
         <source>_GOP size:</source>
-        <translation type="unfinished">_GOP Gr??e:</translation>
+        <translation>_GOP Gr??e (Bildanzahl zwischen zwei Vollbildern-Frames):</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="270"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="104"/>
         <source>_Interlacing:</source>
-        <translation type="unfinished">_Interlacing:</translation>
+        <translation>Halbb_ildmodus:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="277"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="111"/>
         <source>Settings</source>
-        <translation></translation>
+        <translation>Einstellungen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg2Encoder.cpp" line="280"/>
         <source>avcodec MPEG-2 Configuration</source>
-        <translation></translation>
+        <translation>avcodec MPEG-2 Konfiguration</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="78"/>
@@ -13931,7 +13938,7 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_mpeg2enc/mpeg2Encoder.cpp" line="114"/>
         <source>mpeg2enc Configuration</source>
-        <translation></translation>
+        <translation>mpeg2enc Konfiguration</translation>
     </message>
 </context>
 <context>
@@ -13989,12 +13996,12 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="216"/>
         <source>Encoding Mode</source>
-        <translation type="unfinished">Kodier-Modus</translation>
+        <translation>Kodiermodus</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="219"/>
         <source>Motion Estimation Method:</source>
-        <translation></translation>
+        <translation>Methode zur Bewegungsabsch?tzung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="220"/>
@@ -14034,32 +14041,32 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="231"/>
         <source>Mi_nimum Quantiser:</source>
-        <translation></translation>
+        <translation>mi_n. Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="232"/>
         <source>Ma_ximum Quantiser:</source>
-        <translation></translation>
+        <translation>ma_x. Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="233"/>
         <source>Maximum Quantiser _Difference:</source>
-        <translation></translation>
+        <translation>max. Quantisierungsunterschied:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="234"/>
         <source>_Quantiser Compression:</source>
-        <translation></translation>
+        <translation>_Quantisierungskompression:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="235"/>
         <source>Quantiser _Blur:</source>
-        <translation></translation>
+        <translation>Quantisierungs_unsch?rfe:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="236"/>
         <source>_Trellis Quantisation</source>
-        <translation></translation>
+        <translation>_Trellis Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="239"/>
@@ -14069,7 +14076,7 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_avcodec/mpeg4aspEncoder.cpp" line="263"/>
         <source>avcodec H.263 Configuration</source>
-        <translation></translation>
+        <translation>avcodec H.263 Konfiguration</translation>
     </message>
 </context>
 <context>
@@ -14312,7 +14319,7 @@
 <context>
     <name>Ui_licenseWindow</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp" line="26"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp" line="30"/>
         <source>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;&lt;html&gt;&lt;head&gt;  &lt;title&gt;Avidemux is free software; you can redistribute it and/or  modify it under the terms of the GNU General Public License  version 2 as published by the Free Software Foundation&lt;/title&gt;&lt;style type=&quot;text/css&quot;&gt;&lt;!-- /* Style Definitions */ p.licenseStyle, li.licenseStyle, div.licenseStyle        {margin:0cm;        margin-bottom:.0001pt;        font-size:12.0pt;        font-family:&quot;Times New Roman&quot;;} /* Page Definitions */ @page Section1        {size:612.0pt 792.0pt;        margin:72.0pt 90.0pt 72.0pt 90.0pt;}div.Section1        {page:Section1;}--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body lang=&quot;EN-GB&quot; style=&apos;text-justify-trim:punctuation&apos;&gt;  &lt;div class=&quot;Section1&quot;&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:1!
 0.0pt; font-family:Arial&apos;&gt;Avidemux is    free software; you can redistribute it and/or modify it under    the terms of the GNU General Public License version 2 as    published by the Free Software Foundation.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;b&gt;&lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt;    &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;GNU GENERAL PUBLIC    LICENSE&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Version 2, June    1991&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&qu!
 ot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt!
 ;    &lt
;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Copyright (C) 1989, 1991    Free Software Foundation, Inc.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;span lang=&quot;FR&quot; style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;59 Temple Place, Suite    330, Boston, MA  02111-1307  USA&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;span lang=&quot;FR&quot; style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-a!
 utospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Everyone is permitted to    copy and distribute verbatim copies of this license document,    but changing it is not allowed.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Preamble&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;fo!
 nt-family:Arial&apos;&gt;The licenses for most    software are!
  designe
d to take away your freedom to share and    change it.  By contrast, the GNU General Public License is    intended to guarantee your freedom to share and change free    software--to make sure the software is free for all its users.     This General Public License applies to most of the Free    Software Foundation&apos;s software and to any other program whose    authors commit to using it.  (Some other Free Software    Foundation software is covered by the GNU Library General    Public License instead.)  You can apply it to your programs,    too.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;When we speak of free    software, we are !
 referring to freedom, not price.  Our General    Public Licenses are designed to make sure that you have the    freedom to distribute copies of free software (and charge for    this service if you wish), that you receive source code or can    get it if you want it, that you can change the software or use    pieces of it in new free programs; and that you know you can do    these things.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;To protect your rights, we    need to make restrictions that forbid anyone to deny you these    rights or to ask you to surrender the rights. These    restrictions translate to certain responsibilities fo!
 r you if    you distribute copies of the software, or if you m!
 odify   
 it.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;For example, if you    distribute copies of such a program, whether gratis or for a    fee, you must give the recipients all the rights that you have.     You must make sure that they, too, receive or can get the    source code.  And you must show them these terms so they know    their rights.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify!
 ;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;We protect your rights    with two steps: (1) copyright the software, and (2) offer you    this license which gives you legal permission to copy,    distribute and/or modify the software.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Also, for each author&apos;s    protection and ours, we want to make certain that everyone    understands that there is no warranty for this free software.     If the software is modified by someone else and passed on, we    want its recipients to know that what they have is not the    original, so that an!
 y problems introduced by others will not    reflect on the ori!
 ginal au
thors&apos; reputations.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Finally, any free program    is threatened constantly by software patents.  We wish to avoid    the danger that redistributors of a free program will    individually obtain patent licenses, in effect making the    program proprietary.  To prevent this, we have made it clear    that any patent must be licensed for everyone&apos;s free use or not    licensed at all.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/s!
 pan&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;The precise terms and    conditions for copying, distribution and modification    follow.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;GNU GENERAL PUBLIC    LICENSE&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot!
 ; style=    &apos;text-align:center;text-autospace:none&apos;&!
 gt;&lt;b
&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;TERMS AND CONDITIONS FOR    COPYING, DISTRIBUTION AND MODIFICATION&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;0. This License applies to    any program or other work which contains a notice placed by the    copyright holder saying it may be distributed under the terms    of this General Public License.  The &quot;Program&quot;, below, refers    to any such program or work, and a &quot;work based on the Program&quot;    means either the Program or any derivative work under copyright    law: that is to say, a work containing the Program or a portion    of it, either verbat!
 im or with modifications and/or translated    into another language.  (Hereinafter, translation is included    without limitation in the term &quot;modification&quot;.)  Each licensee    is addressed as &quot;you&quot;.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Activities other than    copying, distribution and modification are not covered by this    License; they are outside its scope.  The act of running the    Program is not restricted, and the output from the Program is    covered only if its contents constitute a work based on the    Program (independent of having been made by running the    Program). Whether that is true d!
 epends on what the Program    does.&lt;/span&gt;&lt;/p&gt;    !
 &lt;p cl
ass=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;1. You may copy and    distribute verbatim copies of the Program&apos;s source code as you    receive it, in any medium, provided that you conspicuously and    appropriately publish on each copy an appropriate copyright    notice and disclaimer of warranty; keep intact all the notices    that refer to this License and to the absence of any warranty;    and give any other recipients of the Program a copy of this    License along with the Program.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-famil!
 y:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;You may charge a fee for    the physical act of transferring a copy, and you may at your    option offer warranty protection in exchange for a    fee.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;2. You may modify your    copy or copies of the Program or any portion of it, thus    forming a work based on the Program, and copy and distribute    such modifications or work under the terms of Section 1 above,    provided tha!
 t you also meet all of these conditions:&lt;/span&gt;&lt;/p&gt!
 ;    &lt
;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;a) You must cause the    modified files to carry prominent notices stating that you    changed the files and the date of any change.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;b) You must cause any work    that you distribute or publish, that in whole or in part    contain!
 s or is derived from the Program or any part thereof, to    be licensed as a whole at no charge to all third parties under    the terms of this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;c) If the modified program    normally reads commands interactively when run, you must cause    it, when started running for such interactive use in the most    ordinary way, to print or display an announcement including an    appropriate copyright notice and a notice that there is no    warranty (or else, saying that you provide a warranty) and that    users may redistribute the program under these conditions, and    telling the user ho!
 w to view a copy of this License.     (Exception: if the Progr!
 am itsel
f is interactive but does not    normally print such an announcement, your work based on the    Program is not required to print an announcement.)&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;These requirements apply    to the modified work as a whole.  If identifiable sections of    that work are not derived from the Program, and can be    reasonably considered independent and separate works in    themselves, then this License, and its t!
 erms, do not apply to    those sections when you distribute them as separate works.  But    when you distribute the same sections as part of a whole which    is a work based on the Program, the distribution of the whole    must be on the terms of this License, whose permissions for    other licensees extend to the entire whole, and thus to each    and every part regardless of who wrote it.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Thus, it is not the intent    of this section to claim rights or contest your rights to work    written entirely by you; rather, the intent is to exercise the    right to control the distribution of de!
 rivative or collective    works based on the Program.&lt;/span!
 &gt;&lt;
/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;In addition, mere    aggregation of another work not based on the Program with the    Program (or with a work based on the Program) on a volume of a    storage or distribution medium does not bring the other work    under the scope of this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10!
 .0pt;font-family:Arial&apos;&gt;3. You may copy and    distribute the Program (or a work based on it, under Section 2)    in object code or executable form under the terms of Sections 1    and 2 above provided that you also do one of the    following:&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;a) Accompany it with the    complete corresponding machine-readable source code, which must    be distributed under the terms of Sections 1 and 2 above on a    medium customarily used for software interchange;    or,&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&g!
 t;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&!
 apos;&gt
; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;b) Accompany it with a    written offer, valid for at least three years, to give any    third party, for a charge no more than your cost of physically    performing source distribution, a complete machine-readable    copy of the corresponding source code, to be distributed under    the terms of Sections 1 and 2 above on a medium customarily    used for software interchange; or,&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;c) Accompany it!
  with the    information you received as to the offer to distribute    corresponding source code.  (This alternative is allowed only    for noncommercial distribution and only if you received the    program in object code or executable form with such an offer,    in accord with Subsection b above.)&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;The source code for a work    means the preferred form of the work for making modifications    to it.  For an executable work, complete source code means all    the source code for all modules it contains, plus any    associated interface definition files, plus the scripts used to    control c!
 ompilation and installation of the executable.     However, as!
  a speci
al exception, the source code distributed    need not include anything that is normally distributed (in    either source or binary form) with the major components    (compiler, kernel, and so on) of the operating system on which    the executable runs, unless that component itself accompanies    the executable.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;If distribution of    executable or object code is made by offering access to copy    from a designated place, then offering equivalent access to    copy the source code from the same place counts as distribution    of the source code, even though third parties are not compelled   !
  to copy the source along with the object code.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;4. You may not copy,    modify, sublicense, or distribute the Program except as    expressly provided under this License.  Any attempt otherwise    to copy, modify, sublicense or distribute the Program is void,    and will automatically terminate your rights under this    License. However, parties who have received copies, or rights,    from you !
 under this License will not have their licenses    terminated !
 so long 
as such parties remain in full    compliance.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;5. You are not required to    accept this License, since you have not signed it.  However,    nothing else grants you permission to modify or distribute the    Program or its derivative works.  These actions are prohibited    by law if you do not accept this License.  Therefore, by    modifying or distributing the Program (or any work based on the    Program), you indicate your acceptance of this License to do    so, and all its terms and conditions for copying, distributing    or modifying the Program or works based on it.&lt;/span&gt;&lt;/p&!
 gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;6. Each time you    redistribute the Program (or any work based on the Program),    the recipient automatically receives a license from the    original licensor to copy, distribute or modify the Program    subject to these terms and conditions.  You may not impose any    further restrictions on the recipients&apos; exercise of the rights    granted herein. You are not responsible for enforcing    compliance by third parties to this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt!
 ;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p !
 class=&q
uot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;7. If, as a consequence of    a court judgment or allegation of patent infringement or for    any other reason (not limited to patent issues), conditions are    imposed on you (whether by court order, agreement or otherwise)    that contradict the conditions of this License, they do not    excuse you from the conditions of this License.  If you cannot    distribute so as to satisfy simultaneously your obligations    under this License and any other pertinent obligations, then as    a consequence you may not distribute the Program at all.  For    example, if a patent license would not permit royalty-free    redistribution of the Program by all those who receive copies    directly or indirectly through you, then the only way you could    satisfy both it and this License would be to refrain entirely    from distribution of t!
 he Program.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;If any portion of this    section is held invalid or unenforceable under any particular    circumstance, the balance of the section is intended to apply    and the section as a whole is intended to apply in other    circumstances.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;f!
 ont-size:10.0pt;font-family:Arial&apos;&gt;It is not the purpo!
 se of   
 this section to induce you to infringe any patents or other    property right claims or to contest validity of any such    claims; this section has the sole purpose of protecting the    integrity of the free software distribution system, which is    implemented by public license practices.  Many people have made    generous contributions to the wide range of software    distributed through that system in reliance on consistent    application of that system; it is up to the author/donor to    decide if he or she is willing to distribute software through    any other system and a licensee cannot impose that    choice.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0!
 pt;font-family:Arial&apos;&gt;This section is intended    to make thoroughly clear what is believed to be a consequence    of the rest of this License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;8. If the distribution    and/or use of the Program is restricted in certain countries    either by patents or by copyrighted interfaces, the original    copyright holder who places the Program under this License may    add an explicit geograph!
 ical distribution limitation excluding    those countries, so !
 that dis
tribution is permitted only in or    among countries not thus excluded.  In such case, this License    incorporates the limitation as if written in the body of this    License.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;9. The Free Software    Foundation may publish revised and/or new versions of the    General Public License from time to time.  Such new versions    will be similar in spirit to the present version, but may    differ in detail to address new problems or    concerns.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos!
 ;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;Each version is given a    distinguishing version number.  If the Program specifies a    version number of this License which applies to it and &quot;any    later version&quot;, you have the option of following the terms and    conditions either of that version or of any later version    published by the Free Software Foundation.  If the Program does    not specify a version number of this License, you may choose    any version ever published by the Free Software    Foundation.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; s!
 tyle=    &apos;text-align:justify;text-autospace:none&apos;&gt!
 ;&lt;spa
n style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;10. If you wish to    incorporate parts of the Program into other free programs whose    distribution conditions are different, write to the author to    ask for permission.  For software which is copyrighted by the    Free Software Foundation, write to the Free Software    Foundation; we sometimes make exceptions for this.  Our    decision will be guided by the two goals of preserving the free    status of all derivatives of our free software and of promoting    the sharing and reuse of software generally.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;NO WARRAN!
 TY&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;11. BECAUSE THE PROGRAM IS    LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE PROGRAM,    TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN    OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER    PARTIES PROVIDE THE PROGRAM &quot;AS IS&quot; WITHOUT WARRANTY OF ANY    KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED    TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A    PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND    PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM    PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSAR!
 Y    SERVICING, REPAIR OR CORRECTION.&lt;/span&gt;&lt;/p&gt;  !
   &lt;p 
class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=    &apos;text-align:justify;text-autospace:none&apos;&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;12. IN NO EVENT UNLESS    REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY    COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR    REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU    FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR    CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO    USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR    DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR    THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY    OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN    ADVISED OF THE POSSIBILITY !
 OF SUCH DAMAGES.&lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; align=&quot;center&quot; style=    &apos;text-align:center;text-autospace:none&apos;&gt;&lt;b&gt;&lt;span style=    &apos;font-size:10.0pt;font-family:Arial&apos;&gt;END OF TERMS AND    CONDITIONS&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;    &lt;p class=&quot;licenseStyle&quot; style=&apos;text-autospace:none&apos;&gt;    &lt;span style=&apos;font-size:10.0pt; font-family:Arial&apos;&gt; &lt;/span&gt;&lt;/p&gt;  &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</source>
         <translation></translation>
     </message>
@@ -14320,7 +14327,7 @@
 <context>
     <name>Ui_vobsubWindow</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp" line="88"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp" line="92"/>
         <source>Select Idx File</source>
         <translation></translation>
     </message>
@@ -14399,7 +14406,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="205"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1979"/>
         <source>Encoding Mode:</source>
-        <translation>Kodier-Modus:</translation>
+        <translation>Kodiermodus:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="285"/>
@@ -14420,7 +14427,7 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1983"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2059"/>
         <source>Quantiser</source>
-        <translation></translation>
+        <translation>Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="354"/>
@@ -14494,7 +14501,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="640"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="1999"/>
         <source>Disable</source>
-        <translation>abschalten (nur einen Prozessorkern benutzen)</translation>
+        <translation>nur einen Prozessorkern nutzen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="647"/>
@@ -14752,7 +14759,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1652"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2053"/>
         <source>Trellis Quantisation</source>
-        <translation>gitterartige Quantisierung</translation>
+        <translation>Trellis Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="1662"/>
@@ -14930,13 +14937,13 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2419"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2087"/>
         <source>VBV Buffer Size:</source>
-        <translation></translation>
+        <translation>VBV Puffergr??e:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2426"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/ui_xvidConfigDialog.h" line="2088"/>
         <source>Maximum VBV Bitrate:</source>
-        <translation></translation>
+        <translation>max. VBV Bitrate:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.ui" line="2433"/>
@@ -14947,7 +14954,7 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="118"/>
         <source>&lt;default&gt;</source>
-        <translation></translation>
+        <translation>&lt;Voreinstellung&gt;</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="119"/>
@@ -14962,7 +14969,7 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="251"/>
         <source>Are you sure you wish to delete the selected configuration?</source>
-        <translation></translation>
+        <translation>M?chten Sie die ausgew?hlte Konfiguration wirklich l?schen?</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp" line="271"/>
@@ -15492,21 +15499,21 @@
 <context>
     <name>encodingWindow</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="46"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="50"/>
         <source>Pause / Abort</source>
         <translation>Pause / Abbruch</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="107"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="125"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="111"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="129"/>
         <source>Privileges Required</source>
-        <translation type="unfinished">Rechte erforderlich</translation>
+        <translation>Rechte erforderlich</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="107"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="125"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="111"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp" line="129"/>
         <source>Root privileges are required to perform this operation.</source>
-        <translation type="unfinished">F?r diese Operation sind Root-Rechte erforderlich.</translation>
+        <translation>F?r diese Operation sind Root-Rechte erforderlich.</translation>
     </message>
 </context>
 <context>
@@ -15651,58 +15658,58 @@
 <context>
     <name>jobsWindow</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="40"/>
         <source>Job Name</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="40"/>
         <source>Status</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="40"/>
         <source>Start Time</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="36"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="40"/>
         <source>End Time</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="100"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="114"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="104"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="118"/>
         <source>Sure!</source>
         <translation type="unfinished">Sicher!</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="100"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="104"/>
         <source>Delete job</source>
         <translation type="unfinished">Job l?schen</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="100"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="104"/>
         <source>Are you sure you want to delete %s job?</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="114"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="118"/>
         <source>Delete *all* job</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="114"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="118"/>
         <source>Are you sure you want to delete ALL jobs?</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="138"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="142"/>
         <source>Already done</source>
         <translation></translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="138"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp" line="142"/>
         <source>This script has already been successfully executed.</source>
         <translation></translation>
     </message>
@@ -15803,7 +15810,7 @@
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="254"/>
         <source>Add</source>
-        <translation></translation>
+        <translation>Hinzuf?gen</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/mainfilter.ui" line="302"/>
@@ -15920,53 +15927,53 @@
 <context>
     <name>propWindow</name>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="50"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="54"/>
         <source>%lu x %lu</source>
         <translation type="unfinished">%lu x %lu</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="51"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="55"/>
         <source>%2.3f fps</source>
         <translation type="unfinished">%2.3f Bilder/s</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="52"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="56"/>
         <source>%ld frames</source>
         <translation type="unfinished">%ld Bilder</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="58"/>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="106"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="62"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="110"/>
         <source>%02d:%02d:%02d.%03d</source>
         <translation type="unfinished">%02d:%02d:%02d.%03d</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="64"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="68"/>
         <source>%s (%u:%u)</source>
         <translation type="unfinished">%s (%u:%u)</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="79"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="83"/>
         <source>Mono</source>
         <translation type="unfinished">Mono</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="82"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="86"/>
         <source>Stereo</source>
         <translation type="unfinished">Stereo</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="90"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="94"/>
         <source>%lu Hz</source>
         <translation type="unfinished">%lu Hz</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="91"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="95"/>
         <source>%lu Bps / %lu kbps</source>
         <translation type="unfinished">%lu Byte/s,  %lu kb/s</translation>
     </message>
     <message>
-        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="109"/>
+        <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp" line="113"/>
         <source>%.2f MB</source>
         <translation type="unfinished">%.2f MB</translation>
     </message>
@@ -16462,14 +16469,14 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="50"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3087"/>
         <source>Configuration:</source>
-        <translation></translation>
+        <translation>Konfiguration:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="294"/>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="67"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3088"/>
         <source>Save As</source>
-        <translation></translation>
+        <translation>speichern unter</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="74"/>
@@ -16477,7 +16484,7 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3089"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3248"/>
         <source>Delete</source>
-        <translation></translation>
+        <translation>l?schen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="116"/>
@@ -16532,7 +16539,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="210"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3100"/>
         <source>Encoding Mode:</source>
-        <translation>Kodier-Modus:</translation>
+        <translation>Kodiermodus:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="361"/>
@@ -16553,7 +16560,7 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3104"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3232"/>
         <source>Quantiser</source>
-        <translation></translation>
+        <translation>Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="359"/>
@@ -16573,25 +16580,25 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3109"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3117"/>
         <source>frames</source>
-        <translation></translation>
+        <translation>Bilder</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="489"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3110"/>
         <source>Multithreading</source>
-        <translation>Mehrkernprozessoren</translation>
+        <translation>den Kodiervorgang f?r Mehrkernprozessoren auf mehrere Aufgabenstr?nge aufteilen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="509"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3111"/>
         <source>Disable</source>
-        <translation type="unfinished">Deaktivieren</translation>
+        <translation>nein, nicht aufteilen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="516"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3112"/>
         <source>Auto-detect</source>
-        <translation type="unfinished">Auto-Erkennung</translation>
+        <translation>automatische Erkennung und ideale Nutzung der vorhandenen Prozessorkerne/-leistung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="534"/>
@@ -16599,7 +16606,7 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3113"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3283"/>
         <source>Custom:</source>
-        <translation>individuelles Seitenverh?ltnis:</translation>
+        <translation>die Anzahl der Aufgabenstr?nge manuell festlegen:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="571"/>
@@ -16629,61 +16636,61 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="664"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3119"/>
         <source>Motion Estimation</source>
-        <translation type="unfinished">Absch?tzung der Bewegung</translation>
+        <translation>Absch?tzung der Bildbewegungen im Video</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="684"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3120"/>
         <source>Motion Estimation Method:</source>
-        <translation></translation>
+        <translation>Suchraster zur Bewegungsabsch?tzung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="703"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3123"/>
         <source>Diamond Search</source>
-        <translation type="unfinished">Sternf?rmig suchen</translation>
+        <translation>sternf?rmig (schnell/schlecht)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="708"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3124"/>
         <source>Hexagonal Search</source>
-        <translation type="unfinished">Hexagonal suchen</translation>
+        <translation>hexagonal / Sechseck (normal)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="713"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3125"/>
         <source>Uneven Multi-hexagonal Search</source>
-        <translation></translation>
+        <translation>viele ungleiche Sechsecke (sehr gut)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="718"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3126"/>
         <source>Exhaustive Search</source>
-        <translation type="unfinished">Vollst?ndige Suche</translation>
+        <translation>vollst?ndige Suche (sehr langsam)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="723"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3127"/>
         <source>Hadamard Exhaustive Search</source>
-        <translation type="unfinished">&quot;Hadamard&quot; vollst?ndige Suche</translation>
+        <translation>&quot;Hadamard&quot; vollst?ndige Suche (sehr langsam)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="780"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3129"/>
         <source>1 (Fast)</source>
-        <translation></translation>
+        <translation>1 (Schnell)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="800"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3130"/>
         <source>Subpixel Refinement</source>
-        <translation></translation>
+        <translation>Verfeinerung auf Sub-Pixel-Ebene (normal = 5)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="820"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3131"/>
         <source>9 (Best)</source>
-        <translation></translation>
+        <translation>9 (am Besten)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="900"/>
@@ -16794,12 +16801,6 @@
         <translation></translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1228"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3155"/>
-        <source>Partition Search</source>
-        <translation></translation>
-    </message>
-    <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1248"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3156"/>
         <source>8x8 DCT Spatial Transform</source>
@@ -16851,19 +16852,19 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1333"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3164"/>
         <source>CABAC</source>
-        <translation type="unfinished">CABAC</translation>
+        <translation>CABAC (verlustfreie Entropiekodierung)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1340"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3165"/>
         <source>Pure Interlaced Mode</source>
-        <translation></translation>
+        <translation>im Zeilensprungverfahren kodieren (interlaced mode)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1355"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3166"/>
         <source>Loop Filter</source>
-        <translation></translation>
+        <translation>Blockartefakte verhindern --&gt;</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1397"/>
@@ -16871,31 +16872,31 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3167"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3231"/>
         <source>Strength:</source>
-        <translation></translation>
+        <translation>St?rke:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1436"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3168"/>
         <source>Threshold:</source>
-        <translation></translation>
+        <translation>Schwellwert:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1502"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3169"/>
         <source>Maximum Reference Frames:</source>
-        <translation></translation>
+        <translation>maximale Anzahl durchsuchbarer Referenzbilder:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1550"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3170"/>
         <source>B-frames</source>
-        <translation>B-Bilder</translation>
+        <translation>B-Frames (bidirectionale Bildberechnung)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1562"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3171"/>
         <source>B-frames as References:</source>
-        <translation></translation>
+        <translation>B-Frames als Referenzen (nicht mit MB-Tree verwenden):</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1583"/>
@@ -16925,43 +16926,43 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1722"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3184"/>
         <source>B-frame Bias:</source>
-        <translation></translation>
+        <translation>Gewichtung der B-Frames (0 = normal):</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1729"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3185"/>
         <source>Maximum Consecutive B-frames:</source>
-        <translation>max. aufeinanderfolgende B-Bilder:</translation>
+        <translation>maximale Anzahl aufeinanderfolgender B-Frames:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1736"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3186"/>
         <source>Adaptive B-frame Decision:</source>
-        <translation></translation>
+        <translation>an die Bildinformation angepasste B-Frame Entscheidung (DCT):</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1746"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3187"/>
         <source>I-frames</source>
-        <translation>I-Bilder</translation>
+        <translation>I-Frames (unabh?ngige Vollbilder, u.a.wichtig f?r einen sp?teren Videoschnitt)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1810"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3188"/>
         <source>Maximum GOP Size:</source>
-        <translation></translation>
+        <translation>Anzahl der Bilder nachdem ein I-Frame gesetzt werden mu?:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1817"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3189"/>
         <source>I-frame Threshold:</source>
-        <translation></translation>
+        <translation>Bildver?nderungsschwellwert der zum Setzen eines I-Frames f?hrt (%):</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1863"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3190"/>
         <source>Minimum GOP Size:</source>
-        <translation></translation>
+        <translation>einen I-Frame fr?hestens nach der folgenden Bildanzahl setzen:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1950"/>
@@ -16987,7 +16988,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1996"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3196"/>
         <source>Trellis Quantization:</source>
-        <translation></translation>
+        <translation>Trellis Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2007"/>
@@ -17017,21 +17018,9 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2057"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3204"/>
         <source>Psychovisual Rate Distortion Optimisation:</source>
-        <translation></translation>
+        <translation>psychovisuell optimierte Abstimmung der Bitrate auf die Bildqualit?t (Psy RDO):</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2097"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3205"/>
-        <source>Noise Reduction:</source>
-        <translation></translation>
-    </message>
-    <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2129"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3206"/>
-        <source>Luma Quantisation Deadzone</source>
-        <translation></translation>
-    </message>
-    <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2149"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3207"/>
         <source>Intra Luma Quantisation Deadzone:</source>
@@ -17085,13 +17074,13 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2395"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3216"/>
         <source>Maximum Quantiser:</source>
-        <translation></translation>
+        <translation>max. Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2402"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3217"/>
         <source>I and P-frame Quantiser Ratio:</source>
-        <translation></translation>
+        <translation>I und P-Fram Quantisierungsverh?ltnis:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2505"/>
@@ -17107,31 +17096,31 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2527"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3219"/>
         <source>Maximum Quantiser Step:</source>
-        <translation></translation>
+        <translation>max. Quantisierungsschritt:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2567"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3220"/>
         <source>P and B-frame Quantiser Ratio:</source>
-        <translation></translation>
+        <translation>P und B-Frame Quantisierungsverh?ltnis:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2574"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3221"/>
         <source>Average Bitrate Tolerance:</source>
-        <translation></translation>
+        <translation>durchschnittl. Bitratenabweichung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2581"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3222"/>
         <source>Chroma to Luma Quantiser Offset:</source>
-        <translation></translation>
+        <translation>Farb- zu Helligkeitsquantisierungsversatz:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2624"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3223"/>
         <source>Minimum Quantiser:</source>
-        <translation></translation>
+        <translation>min. Quantisierung:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2678"/>
@@ -17161,13 +17150,13 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2849"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3229"/>
         <source>Adaptive Quantisation</source>
-        <translation></translation>
+        <translation>angepa?te Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2869"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3230"/>
         <source>Variance AQ</source>
-        <translation></translation>
+        <translation>abweichende angepa?te Quantisierung</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2953"/>
@@ -17179,21 +17168,15 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2973"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3233"/>
         <source>Video Buffer Verifier</source>
-        <translation></translation>
+        <translation>?berwachung des Videopuffers</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2993"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3234"/>
         <source>Maximum VBV Bitrate:</source>
-        <translation></translation>
+        <translation>max. VBV Bitrate:</translation>
     </message>
     <message>
-        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3000"/>
-        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3235"/>
-        <source>Initial VBV Buffer Occupancy:</source>
-        <translation></translation>
-    </message>
-    <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3022"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3236"/>
         <source>kbit</source>
@@ -17211,25 +17194,49 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="428"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3106"/>
         <source>Fast First Pass</source>
-        <translation type="unfinished"></translation>
+        <translation>ersten Durchlauf schnell ausf?hren</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="435"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3107"/>
         <source>Macroblock-tree Rate Control</source>
+        <translation>Macroblock-tree Rate Control (beachte: B-Frames d?rfen dann nicht als Referenz benutzt werden)</translation>
+    </message>
+    <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1228"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3155"/>
+        <source>Partition Search</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="1924"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3191"/>
         <source>Periodic Intra Refresh</source>
+        <translation>erzeuge statt eines einzigen Vollbildes eine Bildabfolge (Periodic intra refresh)</translation>
+    </message>
+    <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2097"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3205"/>
+        <source>Noise Reduction:</source>
         <translation type="unfinished"></translation>
     </message>
     <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="2129"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3206"/>
+        <source>Luma Quantisation Deadzone</source>
+        <translation type="unfinished"></translation>
+    </message>
+    <message>
+        <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3000"/>
+        <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3235"/>
+        <source>Initial VBV Buffer Occupancy:</source>
+        <translation type="unfinished"></translation>
+    </message>
+    <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3121"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3239"/>
         <source>VBV Buffer Size:</source>
-        <translation></translation>
+        <translation>VBV Puffergr??e:</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3133"/>
@@ -17271,7 +17278,7 @@
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3304"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3246"/>
         <source>Add</source>
-        <translation></translation>
+        <translation>Hinzuf?gen</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3346"/>
@@ -17279,7 +17286,7 @@
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3250"/>
         <location filename="../plugins/build/ADM_videoEncoder/ADM_vidEnc_x264/qt4/ui_x264ConfigDialog.h" line="3352"/>
         <source>Output</source>
-        <translation type="unfinished">Ausgabe</translation>
+        <translation>Ausgabe</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui" line="3395"/>
@@ -17672,7 +17679,7 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="166"/>
         <source>&lt;default&gt;</source>
-        <translation></translation>
+        <translation>&lt;Voreinstellung&gt;</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="167"/>
@@ -17682,12 +17689,12 @@
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="294"/>
         <source>x264 Configuration File (*.xml)</source>
-        <translation></translation>
+        <translation>x264 Konfigurationsdatei (*.xml)</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="329"/>
         <source>Are you sure you wish to delete the selected configuration?</source>
-        <translation></translation>
+        <translation>M?chten Sie die ausgew?hlte Konfiguration wirklich l?schen?</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="347"/>
@@ -17721,7 +17728,9 @@
         <source>Trellis optimisation isn&apos;t possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.
 
  Do you wish to continue?</source>
-        <translation></translation>
+        <translation>Die Trellisoptimierung nicht durchf?hrbar, wenn CABAC nicht eingeschaltet wurde. Trellis wird daher jetzt abgeschaltet.
+		
+		Wollen Sie fortfahren?</translation>
     </message>
     <message>
         <location filename="../plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp" line="463"/>



From mean at mail.berlios.de  Fri Jun  4 07:23:20 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 4 Jun 2010 07:23:20 +0200
Subject: [Avidemux-svn-commit] r6301 -
	branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc
Message-ID: <201006040523.o545NKdw023764@sheep.berlios.de>

Author: mean
Date: 2010-06-04 07:23:19 +0200 (Fri, 04 Jun 2010)
New Revision: 6301

Modified:
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js
Log:
[auto] Fix Pal/NTSC swap in auto DVD/SVCD/VCD, thanks to Andreas W

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js	2010-06-03 21:07:03 UTC (rev 6300)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js	2010-06-04 05:23:19 UTC (rev 6301)
@@ -18,9 +18,9 @@
         var targetX = 720;
 
         if (getColourEncodingSystem(fps1000) == "NTSC")
+            targetY = 480;
+        else
             targetY = 576;
-        else
-            targetY = 480;
 
         var sourceRatio = result[1][0] + ":" + result[1][1];
         var destinationRatio = result[2][0] + ":" + result[2][1];

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js	2010-06-03 21:07:03 UTC (rev 6300)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js	2010-06-04 05:23:19 UTC (rev 6301)
@@ -18,9 +18,9 @@
         var targetX = 480;
 
         if (getColourEncodingSystem(fps1000) == "NTSC")
+            targetY = 480;
+        else
             targetY = 576;
-        else
-            targetY = 480;
 
         var sourceRatio = result[1][0] + ":" + result[1][1];
         var destinationRatio = result[2][0] + ":" + result[2][1];

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js	2010-06-03 21:07:03 UTC (rev 6300)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js	2010-06-04 05:23:19 UTC (rev 6301)
@@ -19,9 +19,9 @@
         var targetY;
 
         if (getColourEncodingSystem(fps1000) == "NTSC")
+            targetY = 240;
+        else
             targetY = 288;
-        else
-            targetY = 240;
 
         var sourceRatio = result[1][0] + ":" + result[1][1];
         var destinationRatio = result[2][0] + ":" + result[2][1];



From mean at mail.berlios.de  Fri Jun  4 07:45:30 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 4 Jun 2010 07:45:30 +0200
Subject: [Avidemux-svn-commit] r6302 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui
Message-ID: <201006040545.o545jUfR031290@sheep.berlios.de>

Author: mean
Date: 2010-06-04 07:45:29 +0200 (Fri, 04 Jun 2010)
New Revision: 6302

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
Log:
[Qt] Add check to avoid invalid access

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2010-06-04 05:23:19 UTC (rev 6301)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2010-06-04 05:45:29 UTC (rev 6302)
@@ -381,11 +381,12 @@
 */
 void MainWindow::buttonPressed(void)
 {
-	// Receveid a key press Event, look into table..
-	const char *source=qPrintable(sender()->objectName());
+	// Receveid a key press Event, look into table..
+    QObject *obj=sender();
+    if(!obj) return;
+    QString me(obj->objectName());
+    Action action=searchTranslationTable(qPrintable(me));
 
-	Action action=searchTranslationTable(source);
-
 	if(action!=ACT_DUMMY)
 		HandleAction (action);
 



From gruntster at mail.berlios.de  Fri Jun  4 19:45:49 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Fri, 4 Jun 2010 19:45:49 +0200
Subject: [Avidemux-svn-commit] r6303 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities
Message-ID: <201006041745.o54Hjn3U016731@sheep.berlios.de>

Author: gruntster
Date: 2010-06-04 19:45:44 +0200 (Fri, 04 Jun 2010)
New Revision: 6303

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
Log:
[prefs] save Recent Projects properly

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2010-06-04 05:45:29 UTC (rev 6302)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2010-06-04 17:45:44 UTC (rev 6303)
@@ -1077,7 +1077,7 @@
 		xmlNodePtr q;
 		
 		p = xdoc->children;				// ->avidemux (should be there)
-		p = goto_node_with_create(p, "lastfiles");	// ->avidemux->lastfile
+		p = goto_node_with_create(p, "lastproject");	// ->avidemux->lastfile
 
 		q = goto_node_with_create(p, "file1");
 		xmlNodeSetContent(q, (xmlChar*)(opt_defs[LASTPROJECT_FILE1].current_val ? opt_defs[LASTPROJECT_FILE1].current_val : ""));



From mean at mail.berlios.de  Fri Jun  4 20:09:37 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 4 Jun 2010 20:09:37 +0200
Subject: [Avidemux-svn-commit] r6304 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006041809.o54I9bMl020033@sheep.berlios.de>

Author: mean
Date: 2010-06-04 20:09:36 +0200 (Fri, 04 Jun 2010)
New Revision: 6304

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[Qt4] Check send is valid (avoid invalid access spotted by valgrind

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-04 17:45:44 UTC (rev 6303)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-04 18:09:36 UTC (rev 6304)
@@ -336,10 +336,13 @@
 void MainWindow::buttonPressed(void)
 {
 	// Receveid a key press Event, look into table..
-	const char *source=qPrintable(sender()->objectName());
+    QObject *obj=sender();
+    if(!obj) return;
+    QString me(obj->objectName());
+    
+	Action action=searchTranslationTable(qPrintable(me));
+    
 
-	Action action=searchTranslationTable(source);
-
 	if(action!=ACT_DUMMY)
 		HandleAction (action);
 



From mean at mail.berlios.de  Fri Jun  4 20:09:39 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 4 Jun 2010 20:09:39 +0200
Subject: [Avidemux-svn-commit] r6305 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters
Message-ID: <201006041809.o54I9dk3020043@sheep.berlios.de>

Author: mean
Date: 2010-06-04 20:09:38 +0200 (Fri, 04 Jun 2010)
New Revision: 6305

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.h
Log:
[Qt4] Filter context menu

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2010-06-04 18:09:36 UTC (rev 6304)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2010-06-04 18:09:38 UTC (rev 6305)
@@ -519,7 +519,22 @@
 	previewDialog = NULL;
 	previewDialogX = INT_MIN;
 	previewDialogY = INT_MIN;
+    //____________________
+    //  Context Menu
+    //____________________
+    QAction *add = new  QAction(QString("Add"),this);
+    availableList->setContextMenuPolicy(Qt::ActionsContextMenu);
+    availableList->addAction(add );
+    connect(add,SIGNAL(activated()),this,SLOT(add()));
+
 	//previewFrameIndex = curframe;
+    QAction *remove = new  QAction(QString("Remove"),this);
+    QAction *configure = new  QAction(QString("Configure"),this);
+    activeList->setContextMenuPolicy(Qt::ActionsContextMenu);
+    activeList->addAction(remove);
+    activeList->addAction(configure);
+    connect(remove,SIGNAL(activated()),this,SLOT(remove()));
+    connect(configure,SIGNAL(activated()),this,SLOT(configure()));
 
  }
 /**
@@ -589,5 +604,31 @@
     
 }
 #endif
+
+/**
+    \fn    Add
+    \brief Right click on an available filer
+*/
+void filtermainWindow::add(void)
+{
+    add(true);
+}
+/**
+    \fn    Add
+    \brief Right click on an available filer
+*/
+void filtermainWindow::remove(void)
+{
+    remove(true);
+}
+/**
+    \fn    Add
+    \brief Right click on an available filer
+*/
+void filtermainWindow::configure(void)
+{
+    configure(true);
+}
+
 //EOF
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.h	2010-06-04 18:09:36 UTC (rev 6304)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.h	2010-06-04 18:09:38 UTC (rev 6305)
@@ -61,6 +61,10 @@
 	void filterFamilyClick(int  item);
 	void preview(bool b);
     void closePreview(void);
+    // context menu
+    void add(void);
+    void remove(void);
+    void configure(void);
 
 private:
 	void setSelected(int sel);



From mean at mail.berlios.de  Fri Jun  4 20:09:41 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 4 Jun 2010 20:09:41 +0200
Subject: [Avidemux-svn-commit] r6306 - in branches/avidemux_2.6_branch_mean:
	autononreg/py autononreg/py/dialogFactory autononreg/py/gui
	avidemux/common/ADM_script2/include avidemux/common/ADM_script2/py
	avidemux/common/ADM_script2/src cmake
Message-ID: <201006041809.o54I9fqN020061@sheep.berlios.de>

Author: mean
Date: 2010-06-04 20:09:40 +0200 (Fri, 04 Jun 2010)
New Revision: 6306

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/gui/
   branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDirSelect.py
   branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp
Modified:
   branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[py] Hook fileSelect/dirSelect

Modified: branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/dialogFactory/pyMenu.py	2010-06-04 18:09:40 UTC (rev 6306)
@@ -12,9 +12,7 @@
 dlgWizard.addControl(mnuResolution);
 
 res=dlgWizard.show()
-print("res")
-print(res)
-print("source index:")
-print(mnuSourceRatio.index)
-print("dest index:")
-print(mnuResolution.index)
+if res==1:
+        print("res="+str(res)+" menuSource="+str(mnuSourceRatio.index)+" Resolution="+str(mnuResolution.index)+"\n")
+else:
+        print("cancelled\n");

Added: branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDirSelect.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDirSelect.py	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDirSelect.py	2010-06-04 18:09:40 UTC (rev 6306)
@@ -0,0 +1,3 @@
+gui=Gui()
+red=gui.dirSelect("Select a directory ")
+print(">>>>>>>>>>>>>>>>>>>>>>output"+red+".\n")

Added: branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py	2010-06-04 18:09:40 UTC (rev 6306)
@@ -0,0 +1,5 @@
+gui=Gui()
+red=gui.fileReadSelect("Select a file read")
+print(">>>>>>>>>>>>>>>>>>>>>>output"+red+".\n")
+red=gui.fileWriteSelect("Select a file write")
+print(">>>>>>>>>>>>>>>>>>>>>>output"+red+".\n")

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h	2010-06-04 18:09:40 UTC (rev 6306)
@@ -0,0 +1,30 @@
+/**
+    \file ADM_scriptGui.h
+    \brief Standard includes and defines
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_JS_GUI_H
+#define ADM_JS_GUI_H
+#include "ADM_inttype.h"
+#ifdef __cplusplus
+extern "C" {
+#endif
+// All the function returns NULL in case of cancel
+char *scriptFileSelRead(const char *title);
+char *scriptFileSelWrite(const char *title);
+char *scriptDirSelect(const char *title);
+
+
+#ifdef __cplusplus
+};
+#endif
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-04 18:09:40 UTC (rev 6306)
@@ -25,6 +25,7 @@
 #include "ADM_scriptAudio.h"
 #include "ADM_scriptEditor.h"
 #include "ADM_scriptUtils.h"
+#include "ADM_scriptGui.h"
 
 #include "scriptDialogFactory/ADM_scriptDFToggle.h"
 #include "scriptDialogFactory/ADM_scriptDFInteger.h"
@@ -33,13 +34,16 @@
 
 #define ADM_PYID_AVIDEMUX 100
 #define ADM_PYID_EDITOR   101
+#define ADM_PYID_GUI      102
 #define ADM_PYID_DIALOGF     200
 #define ADM_PYID_DF_TOGGLE   201
 #define ADM_PYID_DF_INTEGER  202
 #define ADM_PYID_DF_MENU     203
 
+
 #include "adm_gen.cpp"
 #include "editor_gen.cpp"
+#include "GUI_gen.cpp"
 
 #include "pyDFToggle_gen.cpp"
 #include "pyDFInteger_gen.cpp"
@@ -64,6 +68,7 @@
     py->init();
     py->registerClass("Avidemux",initClasspyAdm);
     py->registerClass("Editor",initClasspyEditor);
+    py->registerClass("Gui",initClasspyGui);
     py->registerClass("DFToggle",initClasspyDFToggle);
     py->registerClass("DFInteger",initClasspyDFInteger);
     py->registerClass("DFMenu",initClasspyDFMenu);

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-04 18:09:40 UTC (rev 6306)
@@ -0,0 +1,7 @@
+#           name    cookie id
+/* CLASS */ pyGui : void : ADM_PYID_GUI
+#              cname:pyname
+/* METHOD */ str scriptDirSelect:dirSelect(str) 
+/* METHOD */ str scriptFileSelRead:fileReadSelect(str) 
+/* METHOD */ str scriptFileSelWrite:fileWriteSelect(str) 
+

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp	2010-06-04 18:09:40 UTC (rev 6306)
@@ -0,0 +1,95 @@
+// Generated by admPyClass.pl do not edit !
+// fileWriteSelect -> str scriptFileSelWrite (str ) 
+static tp_obj zzpy_fileWriteSelect(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  const char *p0= pm.asString();
+  char *r=  scriptFileSelWrite(p0); 
+  if(!r) pm.raise("pyGui : null pointer");
+  return tp_string(r);
+
+}
+// dirSelect -> str scriptDirSelect (str ) 
+static tp_obj zzpy_dirSelect(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  const char *p0= pm.asString();
+  char *r=  scriptDirSelect(p0); 
+  if(!r) pm.raise("pyGui : null pointer");
+  return tp_string(r);
+
+}
+// fileReadSelect -> str scriptFileSelRead (str ) 
+static tp_obj zzpy_fileReadSelect(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  const char *p0= pm.asString();
+  char *r=  scriptFileSelRead(p0); 
+  if(!r) pm.raise("pyGui : null pointer");
+  return tp_string(r);
+
+}
+tp_obj zzpy__pyGui_get(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  char const *key = pm.asString();
+  if (!strcmp(key, "fileWriteSelect"))
+  {
+     return tp_method(vm,self,zzpy_fileWriteSelect);
+  }
+  if (!strcmp(key, "dirSelect"))
+  {
+     return tp_method(vm,self,zzpy_dirSelect);
+  }
+  if (!strcmp(key, "fileReadSelect"))
+  {
+     return tp_method(vm,self,zzpy_fileReadSelect);
+  }
+  return tp_get(vm,self,tp_string(key));
+}
+tp_obj zzpy__pyGui_set(tp_vm *vm)
+{
+  tp_obj self=tp_getraw( vm);
+  tinyParams pm(vm);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  char const *key = pm.asString();
+  return tp_None;
+}
+// Dctor
+static void myDtorpyGui(tp_vm *vm,tp_obj self)
+{
+}
+// Ctor ()
+static tp_obj myCtorpyGui(tp_vm *vm)
+{
+  tp_obj self = tp_getraw(vm);
+  tinyParams pm(vm);
+  void *me=NULL;
+  tp_obj cdata = tp_data(vm, ADM_PYID_GUI, me);
+  cdata.data.info->xfree = myDtorpyGui;
+  tp_set(vm, self, tp_string("cdata"), cdata);
+  return tp_None;
+}
+static tp_obj zzpy__pyGui_help(TP)
+ {
+  jsLog("fileWriteSelect(str)");
+  jsLog("dirSelect(str)");
+  jsLog("fileReadSelect(str)");
+};
+tp_obj initClasspyGui(tp_vm *vm)
+{
+  tp_obj myClass=tp_class(vm);
+  tp_set(vm,myClass,tp_string("__init__"),tp_fnc(vm,myCtorpyGui));
+  tp_set(vm,myClass,tp_string("__set__"),tp_fnc(vm,zzpy__pyGui_set));
+  tp_set(vm,myClass,tp_string("__get__"),tp_fnc(vm,zzpy__pyGui_get));
+  tp_set(vm,myClass,tp_string("help"),tp_fnc(vm,zzpy__pyGui_help));
+  return myClass;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-04 18:09:40 UTC (rev 6306)
@@ -163,7 +163,9 @@
   tinyParams pm(tp);
   void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   char *r=  scriptGetVideoCodec(); 
+  if(!r) pm.raise("pyAdm : null pointer");
   return tp_string(r);
+
 }
 tp_obj zzpy__pyAdm_get(tp_vm *vm)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-04 18:09:40 UTC (rev 6306)
@@ -1,4 +1,4 @@
-OBJS=adm_gen.cpp  editor_gen.cpp  pyDFInteger_gen.cpp  pyDFToggle_gen.cpp  pyDialogFactory_gen.cpp pyDFMenu_gen.cpp
+OBJS=adm_gen.cpp  editor_gen.cpp  pyDFInteger_gen.cpp  pyDFToggle_gen.cpp  pyDialogFactory_gen.cpp pyDFMenu_gen.cpp GUI_gen.cpp
 %_gen.cpp:%.admPyClass
 	perl ../../../../cmake/admPyClass.pl  $<
 all: $(OBJS)

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp	2010-06-04 18:09:40 UTC (rev 6306)
@@ -0,0 +1,54 @@
+/**
+    \file ADM_jsVideo.cpp
+    \brief Video oriented functions
+    \author mean (c) 2009 fixounet at free.fr
+
+
+    jsapigen does not like much variable number of arguments
+    In that case, we patch the generated file to go back to native spidermonkey api
+
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_scriptCommon.h"
+#include "ADM_scriptIf.h"
+#include "ADM_scriptGui.h"
+
+#include "DIA_fileSel.h"
+/**
+
+*/
+char *scriptFileSelRead(const char *title)
+{
+char *me=NULL;
+    GUI_FileSelRead(title,&me);
+    return me;
+}
+/**
+
+*/
+char *scriptFileSelWrite(const char *title)
+{
+    char *me=NULL;
+    GUI_FileSelWrite(title,&me);
+    return me;
+}
+/**
+
+*/
+char *scriptDirSelect(const char *title)
+{
+    char me[1024]={0};
+    if(!FileSel_SelectDir(QT_TR_NOOP("Select a directory"),me,1023, NULL))
+        return NULL;
+    return ADM_strdup(me);
+}
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/CMakeLists.txt	2010-06-04 18:09:40 UTC (rev 6306)
@@ -5,6 +5,7 @@
         ADM_scriptAvidemuxInfo.cpp
         ADM_scriptAudio.cpp
         ADM_scriptUtils.cpp
+        ADM_scriptGui.cpp
         scriptDialogFactory/ADM_scriptDFInteger.cpp
         scriptDialogFactory/ADM_scriptDFMenu.cpp
         scriptDialogFactory/ADM_scriptDFToggle.cpp

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-04 18:09:38 UTC (rev 6305)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-04 18:09:40 UTC (rev 6306)
@@ -197,7 +197,7 @@
         }
          if($retType=~m/str/)
         {
-                return "  return tp_string(r);";
+                return "  if(!r) pm.raise(\"$className : null pointer\");\n  return tp_string(r);\n";
         }
 return "???? $retType";
 }



From mean at mail.berlios.de  Fri Jun  4 20:09:43 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 4 Jun 2010 20:09:43 +0200
Subject: [Avidemux-svn-commit] r6307 - in branches/avidemux_2.6_branch_mean:
	autononreg/py/gui avidemux/common/ADM_script2/py cmake
Message-ID: <201006041809.o54I9h8N020071@sheep.berlios.de>

Author: mean
Date: 2010-06-04 20:09:43 +0200 (Fri, 04 Jun 2010)
New Revision: 6307

Modified:
   branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
Log:
[py] plug mem leak with string

Modified: branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py	2010-06-04 18:09:40 UTC (rev 6306)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyFileSel.py	2010-06-04 18:09:43 UTC (rev 6307)
@@ -1,5 +1,7 @@
 gui=Gui()
 red=gui.fileReadSelect("Select a file read")
-print(">>>>>>>>>>>>>>>>>>>>>>output"+red+".\n")
+mix=":::::::::: output = @"+red+"@\n"
+mix
+print(mix)
 red=gui.fileWriteSelect("Select a file write")
-print(">>>>>>>>>>>>>>>>>>>>>>output"+red+".\n")
+print(">>>>>>>>>>>>>>>>>>>>>>output<"+str(red)+"@.\n")

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp	2010-06-04 18:09:40 UTC (rev 6306)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp	2010-06-04 18:09:43 UTC (rev 6307)
@@ -8,8 +8,10 @@
   const char *p0= pm.asString();
   char *r=  scriptFileSelWrite(p0); 
   if(!r) pm.raise("pyGui : null pointer");
-  return tp_string(r);
-
+  
+  tp_obj o=tp_string_copy(tp,r,  strlen(r));
+  ADM_dealloc(r);
+  return o;
 }
 // dirSelect -> str scriptDirSelect (str ) 
 static tp_obj zzpy_dirSelect(TP)
@@ -20,8 +22,10 @@
   const char *p0= pm.asString();
   char *r=  scriptDirSelect(p0); 
   if(!r) pm.raise("pyGui : null pointer");
-  return tp_string(r);
-
+  
+  tp_obj o=tp_string_copy(tp,r,  strlen(r));
+  ADM_dealloc(r);
+  return o;
 }
 // fileReadSelect -> str scriptFileSelRead (str ) 
 static tp_obj zzpy_fileReadSelect(TP)
@@ -32,8 +36,10 @@
   const char *p0= pm.asString();
   char *r=  scriptFileSelRead(p0); 
   if(!r) pm.raise("pyGui : null pointer");
-  return tp_string(r);
-
+  
+  tp_obj o=tp_string_copy(tp,r,  strlen(r));
+  ADM_dealloc(r);
+  return o;
 }
 tp_obj zzpy__pyGui_get(tp_vm *vm)
 {

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-04 18:09:40 UTC (rev 6306)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-04 18:09:43 UTC (rev 6307)
@@ -164,8 +164,10 @@
   void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
   char *r=  scriptGetVideoCodec(); 
   if(!r) pm.raise("pyAdm : null pointer");
-  return tp_string(r);
-
+  
+  tp_obj o=tp_string_copy(tp,r,  strlen(r));
+  ADM_dealloc(r);
+  return o;
 }
 tp_obj zzpy__pyAdm_get(tp_vm *vm)
 {

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-04 18:09:40 UTC (rev 6306)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-04 18:09:43 UTC (rev 6307)
@@ -197,7 +197,10 @@
         }
          if($retType=~m/str/)
         {
-                return "  if(!r) pm.raise(\"$className : null pointer\");\n  return tp_string(r);\n";
+                return "  if(!r) pm.raise(\"$className : null pointer\");\n  
+  tp_obj o=tp_string_copy(tp,r,  strlen(r));
+  ADM_dealloc(r);
+  return o;";
         }
 return "???? $retType";
 }



From mean at mail.berlios.de  Sat Jun  5 12:21:11 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:21:11 +0200
Subject: [Avidemux-svn-commit] r6308 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src
Message-ID: <201006051021.o55ALBr7022415@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:21:00 +0200 (Sat, 05 Jun 2010)
New Revision: 6308

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
Log:
[saveAsBmp] Sort of fix colorspace for bmp

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp	2010-06-04 18:09:43 UTC (rev 6307)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_colorspace.cpp	2010-06-05 10:21:00 UTC (rev 6308)
@@ -45,7 +45,7 @@
 /**
     \fn swapRGB
 */
-static void swapRGB(uint32_t w,uint32_t h, uint8_t *to)
+static void swapRGB32(uint32_t w,uint32_t h, uint8_t *to)
 {
   uint32_t l=w*h;
     uint8_t *d=(uint8_t *)to;
@@ -59,8 +59,24 @@
         
     }
 }
-
 /**
+    \fn swapRGB
+*/
+static void swapRGB24(uint32_t w,uint32_t h, uint8_t *to)
+{
+    uint32_t l=w*h;
+    uint8_t *d=(uint8_t *)to;
+    return;
+    int r,b,g;
+    while(l--)
+    {
+        uint8_t s=d[0];
+        d[0]=d[2];
+        d[2]=s;
+        d+=3;
+    }
+}
+/**
     \fn ADMColor2LAVColor
     \brief Convert ADM colorspace type swscale/lavcodec colorspace name
 
@@ -74,6 +90,7 @@
     case ADM_COLOR_RGB32A: return PIX_FMT_RGB32;
     case ADM_COLOR_BGR32A: return PIX_FMT_RGB32; // Faster that way...PIX_FMT_BGR32;
     case ADM_COLOR_RGB24: return PIX_FMT_RGB24;
+    case ADM_COLOR_BGR24: return PIX_FMT_RGB24;
     default : ADM_assert(0); 
   }
   return PIX_FMT_YUV420P;
@@ -100,6 +117,7 @@
   switch(fromColor)
   {
     case ADM_COLOR_RGB24:
+    case ADM_COLOR_BGR24:
             srcData[0]=from;
             srcData[1]=NULL;
             srcData[2]=NULL;
@@ -157,8 +175,13 @@
   sws_scale(CONTEXT,srcData,srcStride,0,srcHeight,dstData,dstStride);
   if(toColor==ADM_COLOR_BGR32A)
   {
-     swapRGB(dstWidth,dstHeight,to);
+     swapRGB32(dstWidth,dstHeight,to);
   }
+  if(toColor==ADM_COLOR_BGR24)
+  {
+     swapRGB24(dstWidth,dstHeight,to);
+  }
+  
   return true;
   
 }
@@ -299,8 +322,13 @@
     if(false==convertPlanes(srcPitch,dstPitch,srcPlanes,dstPlanes)) return false;
     if(toColor==ADM_COLOR_BGR32A)
     {
-             swapRGB(dstWidth,dstHeight,to);
+             swapRGB32(dstWidth,dstHeight,to);
     }
+    if(toColor==ADM_COLOR_BGR24)
+    {
+             swapRGB24(dstWidth,dstHeight,to);
+    }
+
     return true;
 }
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2010-06-04 18:09:43 UTC (rev 6307)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/src/ADM_imageSave.cpp	2010-06-05 10:21:00 UTC (rev 6308)
@@ -81,7 +81,7 @@
             return 0;
         }
         ADMColorScalerSimple converter(bmph.biWidth, bmph.biHeight, ADM_COLOR_YV12,ADM_COLOR_BGR24);
-
+        converter.convertImage(this,out);
         uint32_t ww=bmph.biWidth;
         uint32_t hh=bmph.biHeight;
         uint8_t swap[ww*3];



From mean at mail.berlios.de  Sat Jun  5 12:21:39 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:21:39 +0200
Subject: [Avidemux-svn-commit] r6309 - in branches/avidemux_2.6_branch_mean:
	autononreg/py/gui avidemux/common/ADM_script2/include
	avidemux/common/ADM_script2/py avidemux/common/ADM_script2/src
Message-ID: <201006051021.o55ALdhI022426@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:21:14 +0200 (Sat, 05 Jun 2010)
New Revision: 6309

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayError.py
   branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayInfo.py
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp
Log:
[py] Add displayError/displayInfo

Added: branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayError.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayError.py	2010-06-05 10:21:00 UTC (rev 6308)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayError.py	2010-06-05 10:21:14 UTC (rev 6309)
@@ -0,0 +1,2 @@
+gui=Gui()
+gui.displayError("oops","something went wrong!")

Added: branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayInfo.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayInfo.py	2010-06-05 10:21:00 UTC (rev 6308)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/gui/pyDisplayInfo.py	2010-06-05 10:21:14 UTC (rev 6309)
@@ -0,0 +1,2 @@
+gui=Gui()
+gui.displayInfo("Hey","Hello World")

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h	2010-06-05 10:21:00 UTC (rev 6308)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptGui.h	2010-06-05 10:21:14 UTC (rev 6309)
@@ -21,6 +21,8 @@
 char *scriptFileSelRead(const char *title);
 char *scriptFileSelWrite(const char *title);
 char *scriptDirSelect(const char *title);
+void scriptDisplayError(const char *one, const char *two);
+void scriptDisplayInfo(const char *one, const char *two);
 
 
 #ifdef __cplusplus

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-05 10:21:00 UTC (rev 6308)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-05 10:21:14 UTC (rev 6309)
@@ -4,4 +4,6 @@
 /* METHOD */ str scriptDirSelect:dirSelect(str) 
 /* METHOD */ str scriptFileSelRead:fileReadSelect(str) 
 /* METHOD */ str scriptFileSelWrite:fileWriteSelect(str) 
+/* METHOD */ void scriptDisplayError:displayError(str,str) 
+/* METHOD */ void scriptDisplayInfo:displayInfo(str,str) 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp	2010-06-05 10:21:00 UTC (rev 6308)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI_gen.cpp	2010-06-05 10:21:14 UTC (rev 6309)
@@ -13,6 +13,17 @@
   ADM_dealloc(r);
   return o;
 }
+// displayError -> void scriptDisplayError (str str ) 
+static tp_obj zzpy_displayError(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  const char *p0= pm.asString();
+  const char *p1= pm.asString();
+  scriptDisplayError(p0,p1); 
+
+}
 // dirSelect -> str scriptDirSelect (str ) 
 static tp_obj zzpy_dirSelect(TP)
  {
@@ -27,6 +38,17 @@
   ADM_dealloc(r);
   return o;
 }
+// displayInfo -> void scriptDisplayInfo (str str ) 
+static tp_obj zzpy_displayInfo(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_GUI);
+  const char *p0= pm.asString();
+  const char *p1= pm.asString();
+  scriptDisplayInfo(p0,p1); 
+
+}
 // fileReadSelect -> str scriptFileSelRead (str ) 
 static tp_obj zzpy_fileReadSelect(TP)
  {
@@ -51,10 +73,18 @@
   {
      return tp_method(vm,self,zzpy_fileWriteSelect);
   }
+  if (!strcmp(key, "displayError"))
+  {
+     return tp_method(vm,self,zzpy_displayError);
+  }
   if (!strcmp(key, "dirSelect"))
   {
      return tp_method(vm,self,zzpy_dirSelect);
   }
+  if (!strcmp(key, "displayInfo"))
+  {
+     return tp_method(vm,self,zzpy_displayInfo);
+  }
   if (!strcmp(key, "fileReadSelect"))
   {
      return tp_method(vm,self,zzpy_fileReadSelect);
@@ -87,7 +117,9 @@
 static tp_obj zzpy__pyGui_help(TP)
  {
   jsLog("fileWriteSelect(str)");
+  jsLog("displayError(str,str)");
   jsLog("dirSelect(str)");
+  jsLog("displayInfo(str,str)");
   jsLog("fileReadSelect(str)");
 };
 tp_obj initClasspyGui(tp_vm *vm)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp	2010-06-05 10:21:00 UTC (rev 6308)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptGui.cpp	2010-06-05 10:21:14 UTC (rev 6309)
@@ -18,6 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_default.h"
+#include "DIA_coreToolkit.h"
 #include "ADM_scriptCommon.h"
 #include "ADM_scriptIf.h"
 #include "ADM_scriptGui.h"
@@ -51,4 +52,19 @@
         return NULL;
     return ADM_strdup(me);
 }
+/**
+
+*/
+void scriptDisplayError(const char *one, const char *two)
+{
+    GUI_Error_HIG(one,two);
+}
+/**
+
+*/
+void scriptDisplayInfo(const char *one, const char *two)
+{
+    GUI_Info_HIG(ADM_LOG_INFO,one,two);
+}
+
 //EOF



From mean at mail.berlios.de  Sat Jun  5 12:21:55 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:21:55 +0200
Subject: [Avidemux-svn-commit] r6310 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py
Message-ID: <201006051021.o55ALt17022458@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:21:41 +0200 (Sat, 05 Jun 2010)
New Revision: 6310

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
Log:
[py] Add saveAudio

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-05 10:21:14 UTC (rev 6309)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-05 10:21:41 UTC (rev 6310)
@@ -21,6 +21,10 @@
 /* METHOD */ int scriptSetContainer:setContainer(str,couples) 
 /* METHOD */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
 #
+#  Audio
+#
+/* METHOD */ int A_audioSave:saveAudio(str) 
+#
 #       Variables
 #
 /* ATTRIBUTES */ double markerA:scriptSetMarkerA,scriptGetMarkerA

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-05 10:21:14 UTC (rev 6309)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-05 10:21:41 UTC (rev 6310)
@@ -93,6 +93,16 @@
   int r=  scriptGetFps1000(); 
   return tp_number(r);
 }
+// saveAudio -> int A_audioSave (str ) 
+static tp_obj zzpy_saveAudio(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
+  const char *p0= pm.asString();
+  int r=  A_audioSave(p0); 
+  return tp_number(r);
+}
 // videoCodec -> int scriptSetVideoCodec (str couples ) 
 static tp_obj zzpy_videoCodec(TP)
  {
@@ -223,6 +233,10 @@
   {
      return tp_method(vm,self,zzpy_getFps1000);
   }
+  if (!strcmp(key, "saveAudio"))
+  {
+     return tp_method(vm,self,zzpy_saveAudio);
+  }
   if (!strcmp(key, "videoCodec"))
   {
      return tp_method(vm,self,zzpy_videoCodec);
@@ -305,6 +319,7 @@
   jsLog("appendVideo(str )");
   jsLog("audioMixer(str )");
   jsLog("getFps1000(void)");
+  jsLog("saveAudio(str)");
   jsLog("videoCodec(str,couples)");
   jsLog("getWidth(void)");
   jsLog("addSegment(int ,float , float )");



From mean at mail.berlios.de  Sat Jun  5 12:22:00 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:22:00 +0200
Subject: [Avidemux-svn-commit] r6311 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: . ADM_toolkit
Message-ID: <201006051022.o55AM0nZ022474@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:21:57 +0200 (Sat, 05 Jun 2010)
New Revision: 6311

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
Log:
[A_function] Cleanup

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-06-05 10:21:41 UTC (rev 6310)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-06-05 10:21:57 UTC (rev 6311)
@@ -1,12 +1,8 @@
 /***************************************************************************
-                          automation.cpp  -  description
-                             -------------------
-    begin                : Thu Oct 10 2002
-    copyright            : (C) 2002 by mean
-    email                : fixounet at free.fr
+    \file    automation.cpp  
+    \author  (C) 2002 by mean fixounet at free.fr
+    \brief   This file reads the command line and do the corresponding command
 
-    This file reads the command line and do the corresponding command
-
  ***************************************************************************/
 
 /***************************************************************************
@@ -46,16 +42,8 @@
 #include "ADM_coreVideoEncoder.h"
 #include "ADM_videoEncoderApi.h"
 #include "ADM_audioFilter/include/ADM_audioFilterInterface.h"
-//extern void filterListAll(void );
 
-//extern uint8_t loadVideoCodecConf( const char *name);
-extern int A_saveJpg (char *name);
-//extern void filterLoadXml(const char *n);
-extern int A_appendAvi (const char *name);
-extern void A_saveAudioCopy(char *name);
 extern int A_loadNone( void );
-extern void A_saveAudioProcessed(char *name);
-extern uint8_t A_SaveAudioNVideo(char *name);
 extern void GUI_Quiet( void);
 extern void GUI_Verbose( void);
 extern void audioFilter_SetBitrate( int i);
@@ -64,6 +52,17 @@
 extern void updateLoaded( void );
 extern void setPostProc(int v,int s);
 extern void HandleAction(Action action) ;
+extern void show_info(char *p);
+extern const char *getStrFromAudioCodec( uint32_t codec);
+extern void frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm, uint16_t * ss, uint16_t * ms);
+extern uint8_t ADM_aviSetSplitSize(uint32_t size);
+extern void updateLoaded(void );
+extern uint8_t A_rebuildKeyFrame (void);
+extern uint8_t scriptAddVar(char *var,char *value);
+
+/*#
+#
+#*/
 static void call_buildtimemap( char *p);
 static void call_quit(char *p) ;
 static void setBegin(char *p)   ;
@@ -84,22 +83,11 @@
 static void call_setPP(char *v,char *s);
 //static void call_v2v(char *a,char *b,char *c);
 static void call_probePat(char *p);
-extern void updateLoaded(void );
 static void save(char*name);
-extern void show_info(char *p);
-extern const char *getStrFromAudioCodec( uint32_t codec);
-extern void frame2time(uint32_t frame, uint32_t fps, uint16_t * hh, uint16_t * mm, uint16_t * ss, uint16_t * ms);
-extern uint8_t ADM_aviSetSplitSize(uint32_t size);
-extern uint8_t ogmSave(const char *fd);
 static void set_autoindex(char *p);
-extern int A_saveDVDPS(char *name);
-extern void A_saveWorkbench (const char *name);
-extern uint8_t A_rebuildKeyFrame (void);
 //extern uint8_t A_setContainer(const char *cont);
-uint8_t scriptAddVar(char *var,char *value);
-//extern void ADM_dumpJSHooks(void);
-extern uint8_t ADM_vob2vobsub(char *nameVob, char *nameVobSub, char *nameIfo);
 
+
 #ifdef __WIN32
 	extern int ansiStringToUtf8(const char *ansiString, int ansiStringLength, char *utf8String);
 #endif
@@ -139,64 +127,46 @@
 {
         //{"js",                  0,"Dump the javascript functions",(one_arg_type)ADM_dumpJSHooks},
         {"nogui",               0,"Run in silent mode",		(one_arg_type)GUI_Quiet}   ,
-//        {"listfilters",		0,"list all filters by name",		(one_arg_type)filterListAll}   ,
         {"run",			1,"load and run a script",		(one_arg_type)A_parseECMAScript},
         {"runpy",			1,"load and run a pyScript",		(one_arg_type)A_parseTinyPyScript},
         {"audio-normalize",	1,"activate normalization",		call_normalize},
         {"audio-resample",	1,"resample to x hz",			call_resample},
-//        {"filters",		1,"load a filter preset",		(one_arg_type)filterLoadXml}   ,
-//        {"codec-conf",		1,"load a codec configuration",		(one_arg_type )loadVideoCodecConf}   ,
-//        {"vcd-res",		0,"set VCD resolution",			(one_arg_type)setVCD}              ,
-//        {"svcd-res",		0,"set SVCD resolution",		(one_arg_type)setSVCD}              ,
-//        {"dvd-res",		0,"set DVD resolution",			(one_arg_type)setDVD}  ,
-//        {"halfd1-res",		0,"set 1/2 DVD resolution",		(one_arg_type)setHalfD1} ,
         {"save-jpg",		1,"save a jpeg",			(one_arg_type)A_saveJpg}        ,
-        {"begin",		1,"set start frame",			setBegin},
-        {"end",			1,"set end frame",			setEnd},
-//        {"save-unpacked-vop",	1,"save avi, unpacking vop",(one_arg_type)A_SaveUnpackedVop},
-//        {"save-packed-vop",	1,"save avi, packing vop",(one_arg_type)A_SavePackedVop},
-//        {"save-ogm",		1,"save as ogm file ",			(one_arg_type)ogmSave},
-        {"save-raw-audio",	1,"save audio as-is ",			        A_saveAudioCopy},
-//        {"save-raw-video",	1,"save raw video stream (mpeg/... ) ",	(one_arg_type)ADM_saveRaw},
-        {"save-uncompressed-audio",1,"save uncompressed audio",A_saveAudioProcessed},
+        {"begin",		1,"set start frame",			(one_arg_type)setBegin},
+
+        {"end",			1,"set end frame",			(one_arg_type)setEnd},
+        {"save-raw-audio",	1,"save audio as-is ",			 (one_arg_type)       A_saveAudioCopy},
+        {"save-uncompressed-audio",1,"save uncompressed audio",(one_arg_type)A_saveAudioProcessed},
         {"load",		1,"load video or workbench", (one_arg_type)A_openAvi},
+
         {"load-workbench",	1,"load workbench file", (one_arg_type)A_openAvi},
         {"append",		1,"append video",			(one_arg_type)A_appendAvi},
-        {"save",		1,"save avi",				save},
+        {"save",		1,"save avi",				(one_arg_type)save},
         {"save-workbench",	1,"save workbench file",		(one_arg_type)A_saveWorkbench},
 
         {"force-b-frame",	0,"Force detection of bframe in next loaded file", (one_arg_type)call_bframe},
         {"force-alt-h264",	0,"Force use of alternate read mode for h264", (one_arg_type)call_x264},
-//        {"force-unpack",	0,"Force detection of packed vop in next loaded file"
-//                                                          ,(one_arg_type)call_packedvop},
-        {"force-smart",   	0,"Engage smart copy mode with CQ=3 at next save"
-                                                          ,(one_arg_type)call_forcesmart},
-        {"audio-delay",		1,"set audio time shift in ms (+ or -)",	call_setAudio},
-        {"audio-map",		0,"build audio map (MP3 VBR)",	call_buildtimemap},
-        {"audio-bitrate",	1,"set audio encoding bitrate",	call_audiobitrate},
-        {"fps",	                1,"set frames per second",	call_fps},
-        {"audio-codec",		1,"set audio codec (MP2/MP3/AC3/NONE (WAV PCM)/TWOLAME/COPY)",call_audiocodec},
 
+
+        {"audio-delay",		1,"set audio time shift in ms (+ or -)",	(one_arg_type)call_setAudio},
+        {"audio-map",		0,"build audio map (MP3 VBR)",	(one_arg_type)call_buildtimemap},
+        {"audio-bitrate",	1,"set audio encoding bitrate",	(one_arg_type)call_audiobitrate},
+        {"audio-codec",		1,"set audio codec (MP2/MP3/AC3/NONE (WAV PCM)/TWOLAME/COPY)",(one_arg_type)call_audiocodec},
         {"video-codec",		1,"set video codec (Divx/Xvid/FFmpeg4/VCD/SVCD/DVD/XVCD/XSVCD/COPY)",				call_videocodec},
+
         {"video-conf",		1	,"set video codec conf (cq=q|cbr=br|2pass=size)[,mbr=br][,matrix=(0|1|2|3)]",				call_videoconf},
-        {"reuse-2pass-log",	0	,"reuse 2pass logfile if it exists",	set_reuse_2pass_log},
-        {"set-pp",		2	,"set post processing default value, value(1=hdeblok|2=vdeblock|4=dering) and strength (0-5)",
-                                              (one_arg_type )	call_setPP},
-//        {"vobsub",              3       ,"Create vobsub file (vobfile vosubfile ifofile)",  (one_arg_type ) call_v2v},
+        {"reuse-2pass-log",	0	,"reuse 2pass logfile if it exists",	(one_arg_type)set_reuse_2pass_log},
+        {"autosplit",		1	,"split every N MBytes",(one_arg_type)call_autosplit},
+        {"info",		0	,"show information about loaded video and audio streams", (one_arg_type)show_info},
+        {"autoindex",		0	,"try to generate required index files", (one_arg_type)set_autoindex},
 
-        {"autosplit",		1	,"split every N MBytes",call_autosplit},
-        {"info",		0	,"show information about loaded video and audio streams", show_info},
-        {"autoindex",		0	,"try to generate required index files", set_autoindex},
         {"output-format",	1	,"set output format (AVI|OGM|ES|PS|AVI_DUAL|AVI_UNP|...)", (one_arg_type )set_output_format},
-
         {"rebuild-index",       0       ,"rebuild index with correct frame type", (one_arg_type)A_rebuildKeyFrame},
-
         {"var",                 1       ,"set var (--var myvar=3)", (one_arg_type)setVar},
-        {"help",		0,"print this",		call_help},
-        {"quit",		0,"exit avidemux",	call_quit},
+        {"help",		0,"print this",		(one_arg_type)call_help},
+        {"quit",		0,"exit avidemux",	(one_arg_type)call_quit},
         {"probePat",		1,"Probe for PAT//PMT..",	(one_arg_type)call_probePat}
 
-
 }  ;
 #define NB_AUTO (sizeof(reaction_table)/sizeof(AUTOMATON))
 //_________________________________________________________________________
@@ -688,10 +658,4 @@
 void set_reuse_2pass_log(char *p){
    prefs->set(FEATURE_REUSE_2PASS_LOG,1);
 }
-#if BAZOOKA
-void call_v2v(char *a,char *b,char *c)
-{
-         ADM_vob2vobsub(a,b,c); //char *nameVob, char *nameVobSub, char *nameIfo);
-}
-#endif
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2010-06-05 10:21:41 UTC (rev 6310)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2010-06-05 10:21:57 UTC (rev 6311)
@@ -17,8 +17,7 @@
 void    A_Resync(void);
 void    A_addJob(void);
 void    A_audioTrack(void);
-int     A_Save(const char *name);
-int     A_SaveWrapper( char *name);
+
 bool    A_parseECMAScript(const char *name);
 bool    A_parseTinyPyScript(const char *name);
 
@@ -34,4 +33,16 @@
 void 			A_saveAVI		(char *name);
 void 			A_playAvi		(void);
 
+void A_saveAudioCopy (const char *name);
+int  A_saveJpg (const char *name);
+void A_saveBunchJpg(const char *name);
+void A_saveImg (const char *name);
+uint8_t ADM_saveRaw (const char *name);
+void A_saveWorkbench (const char *name);
+void A_savePyProject (const char *name);
+int  A_audioSave(const char *name);
+int  A_SaveWrapper(const char *name);
+void A_saveAudioProcessed (const char *name);
+int     A_Save(const char *name);
+
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-05 10:21:41 UTC (rev 6310)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-05 10:21:57 UTC (rev 6311)
@@ -32,17 +32,7 @@
 #include "DIA_working.h"
 #include "ADM_preview.h"
 // Local prototypes
-void A_saveAudioCopy (char *name);
-int  A_saveJpg (char *name);
-void A_saveBunchJpg(const char *name);
-void A_saveImg (const char *name);
-uint8_t ADM_saveRaw (const char *name);
-void A_saveWorkbench (const char *name);
-void A_savePyProject (const char *name);
-int  A_audioSave(char *name);
-int  A_SaveWrapper(char *name);
-void A_saveAudioProcessed (char *name);
-
+#include "A_functions.h"
 int      A_Save(const char *name);
 uint8_t  GUI_getFrameContent(ADMImage *image, uint32_t frame);
 
@@ -112,7 +102,7 @@
     \brief Save audio track
 */
 
-int A_audioSave(char *name)
+int A_audioSave(const char *name)
 {
     ADM_audioStream *stream;
     if(false==video_body->getAudioStream( &stream)) 
@@ -138,7 +128,7 @@
     \brief Save current stream (generally avi...)
      in decoded mode (assuming MP3)
 */
-void A_saveAudioProcessed (char *name)
+void A_saveAudioProcessed (const char *name)
 {
 #if 0
 // debug audio seek
@@ -266,7 +256,7 @@
         \fn A_saveAudioCopy
         \brief Save current stream (generally avi...)     in raw mode
 */
-void A_saveAudioCopy (char *name)
+void A_saveAudioCopy (const char *name)
 { 
   uint32_t written, max;
   uint64_t dts;
@@ -332,8 +322,9 @@
         }
         if(cur_sample>tgt_sample)
             break;
-        work->update(cur_sample>>10, tgt_sample>>10);
         if(!work->isAlive()) break;
+        work->update(cur_sample>>10, tgt_sample>>10);
+        
     };
   if(hold)
   {
@@ -352,7 +343,7 @@
         \fn A_saveJpg
         \brief Save a Jpg image from current display buffer
 */
-int A_saveJpg (char *name)
+int A_saveJpg (const char *name)
 {
   uint8_t fl;
     ADMImage *image=admPreview::getBuffer();
@@ -461,7 +452,7 @@
     \fn A_SaveWrapper
 
 */
-int A_SaveWrapper(char *name)
+int A_SaveWrapper(const char *name)
 {
 
         if(A_Save(name))



From mean at mail.berlios.de  Sat Jun  5 12:22:03 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:22:03 +0200
Subject: [Avidemux-svn-commit] r6312 - in
	branches/avidemux_2.6_branch_mean/autononreg/py: . avidemux
Message-ID: <201006051022.o55AM3KQ022484@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:22:01 +0200 (Sat, 05 Jun 2010)
New Revision: 6312

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py
Log:
[py] Test case for saveAudio()

Added: branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py	2010-06-05 10:21:57 UTC (rev 6311)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py	2010-06-05 10:22:01 UTC (rev 6312)
@@ -0,0 +1,7 @@
+adm=Avidemux()
+if(0==adm.loadVideo("/work/samples/avi/2mn.avi")):
+   throw("cannot load file")
+if(0==adm.saveAudio("/tmp/audio.mp3")):
+   throw("cannot save audio")
+
+



From mean at mail.berlios.de  Sat Jun  5 12:22:06 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:22:06 +0200
Subject: [Avidemux-svn-commit] r6313 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006051022.o55AM6lZ022498@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:22:04 +0200 (Sat, 05 Jun 2010)
New Revision: 6313

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[QT4] Set application icon

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-05 10:22:01 UTC (rev 6312)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-05 10:22:04 UTC (rev 6313)
@@ -291,6 +291,8 @@
 	this->setFocus(Qt::OtherFocusReason);
 
 	setAcceptDrops(true);
+    setWindowIcon(QIcon(":/new/prefix1/pics/avidemux_icon_small.png"));
+    
 }
 /**
 \fn     custom
@@ -555,6 +557,7 @@
 */
 int UI_Init(int nargc,char **nargv)
 {
+    ADM_info("Starting QT4 GUI...\n");
 	initTranslator();
 
 	global_argc=nargc;



From mean at mail.berlios.de  Sat Jun  5 12:22:09 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 12:22:09 +0200
Subject: [Avidemux-svn-commit] r6314 -
	branches/avidemux_2.6_branch_mean/autononreg/py/avidemux
Message-ID: <201006051022.o55AM9xo022508@sheep.berlios.de>

Author: mean
Date: 2010-06-05 12:22:07 +0200 (Sat, 05 Jun 2010)
New Revision: 6314

Modified:
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py
Log:
[py] Better saveAudio test

Modified: branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py	2010-06-05 10:22:04 UTC (rev 6313)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pySaveAudio.py	2010-06-05 10:22:07 UTC (rev 6314)
@@ -1,7 +1,9 @@
 adm=Avidemux()
+gui=Gui()
 if(0==adm.loadVideo("/work/samples/avi/2mn.avi")):
    throw("cannot load file")
+#adm.audioCodec("Lame",128)
 if(0==adm.saveAudio("/tmp/audio.mp3")):
    throw("cannot save audio")
+gui.displayInfo("Ok","Done")
 
-



From mean at mail.berlios.de  Sat Jun  5 13:35:51 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 13:35:51 +0200
Subject: [Avidemux-svn-commit] r6315 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat
Message-ID: <201006051135.o55BZpdK031962@sheep.berlios.de>

Author: mean
Date: 2010-06-05 13:35:47 +0200 (Sat, 05 Jun 2010)
New Revision: 6315

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c
Log:
[ff] Add some debug to file.c

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c	2010-06-05 10:22:07 UTC (rev 6314)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/file.c	2010-06-05 11:35:47 UTC (rev 6315)
@@ -81,7 +81,11 @@
 		hFile = CreateFileW(wcFile, access, 0, NULL, creation, 0, NULL);
 
 		if (hFile == INVALID_HANDLE_VALUE)
+        {
+            wprintf("Error in ADM_open_1 for file <%s>\n",wcFile);
+            printf("was  <%s>\n",path);
 			return -1;
+        }
 		else
 			CloseHandle(hFile);
 	}
@@ -89,7 +93,11 @@
 	hFile = CreateFileW(wcFile, access, FILE_SHARE_READ, NULL, creation, 0, NULL);
 
 	if (hFile == INVALID_HANDLE_VALUE)
-		return -1;
+    {
+            wprintf("Error in ADM_open_2 for file <%s>\n",wcFile);
+            printf("was  <%s>\n",path);
+            return -1;
+    }
 	else
 		return _open_osfhandle((intptr_t)hFile, oflag);
 }



From mean at mail.berlios.de  Sat Jun  5 15:31:12 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 15:31:12 +0200
Subject: [Avidemux-svn-commit] r6316 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat
Message-ID: <201006051331.o55DVCGB009125@sheep.berlios.de>

Author: mean
Date: 2010-06-05 15:30:59 +0200 (Sat, 05 Jun 2010)
New Revision: 6316

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/avio.c
Log:
[lavformat] print out proto (debug)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/avio.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/avio.c	2010-06-05 11:35:47 UTC (rev 6315)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/avio.c	2010-06-05 13:30:59 UTC (rev 6316)
@@ -144,11 +144,16 @@
 
     up = first_protocol;
     while (up != NULL) {
+// MEANX
+#undef printf
+        printf("While looking for proto %s, check %s\n",proto_str,up->name);
+// /MEANX
         if (!strcmp(proto_str, up->name))
             return url_open_protocol (puc, up, filename, flags);
         up = up->next;
     }
     *puc = NULL;
+    printf("proto %s not found\n",proto_str);
     return AVERROR(ENOENT);
 }
 



From mean at mail.berlios.de  Sat Jun  5 15:46:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 15:46:08 +0200
Subject: [Avidemux-svn-commit] r6317 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat
Message-ID: <201006051346.o55Dk80J009790@sheep.berlios.de>

Author: mean
Date: 2010-06-05 15:46:04 +0200 (Sat, 05 Jun 2010)
New Revision: 6317

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
Log:
[lavformat] Add HAVE_DOS_PATHS to libavformat

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2010-06-05 13:30:59 UTC (rev 6316)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2010-06-05 13:46:04 UTC (rev 6317)
@@ -9,7 +9,9 @@
         mpegenc.c
         movenchint.c sdp.c adtsenc.c flacenc.c flacenc_header.c vorbiscomment.c
 )
-
+if(win32)
+  add_definitions(-DHAVE_DOS_PATHS)
+endif(win32)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6 ADM_libavcodec6)
 



From mean at mail.berlios.de  Sat Jun  5 16:03:15 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 16:03:15 +0200
Subject: [Avidemux-svn-commit] r6318 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat
Message-ID: <201006051403.o55E3FfH011019@sheep.berlios.de>

Author: mean
Date: 2010-06-05 16:03:12 +0200 (Sat, 05 Jun 2010)
New Revision: 6318

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
Log:
[lavformat] Add HAVE_DOS_PATHS to libavformat (take2)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2010-06-05 13:46:04 UTC (rev 6317)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavformat/CMakeLists.txt	2010-06-05 14:03:12 UTC (rev 6318)
@@ -9,9 +9,9 @@
         mpegenc.c
         movenchint.c sdp.c adtsenc.c flacenc.c flacenc_header.c vorbiscomment.c
 )
-if(win32)
-  add_definitions(-DHAVE_DOS_PATHS)
-endif(win32)
+IF(WIN32)
+  ADD_DEFINITIONS(-DHAVE_DOS_PATHS=1)
+ENDIF(WIN32)
 ADD_LIBRARY(${ADM_LIB} SHARED ${${ADM_LIB}_SRCS})
 TARGET_LINK_LIBRARIES(${ADM_LIB} ADM_core6 ADM_libavutil6 ADM_libavcodec6)
 



From mean at mail.berlios.de  Sat Jun  5 19:47:15 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 5 Jun 2010 19:47:15 +0200
Subject: [Avidemux-svn-commit] r6319 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxer/include
	avidemux_core/ADM_coreDemuxer/src
	avidemux_core/ADM_coreDemuxerMpeg/src
	avidemux_plugins/ADM_demuxers/Asf
	avidemux_plugins/ADM_demuxers/AvsProxy
	avidemux_plugins/ADM_demuxers/Flv
	avidemux_plugins/ADM_demuxers/Matroska
	avidemux_plugins/ADM_demuxers/Mp4
	avidemux_plugins/ADM_demuxers/MpegPS
	avidemux_plugins/ADM_demuxers/MpegTS
	avidemux_plugins/ADM_demuxers/OpenDml
	avidemux_plugins/ADM_demuxers/Pictures
Message-ID: <201006051747.o55HlF42032710@sheep.berlios.de>

Author: mean
Date: 2010-06-05 19:47:01 +0200 (Sat, 05 Jun 2010)
New Revision: 6319

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/AvsProxy/ADM_avsPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_picPlugin.cpp
Log:
[demuxer] Add a priority field so that TS demuxer is tried before PS

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_demuxerInternal.h	2010-06-05 17:47:01 UTC (rev 6319)
@@ -33,14 +33,16 @@
         const char    *name;
         const char    *descriptor;
         uint32_t      apiVersion;
+        uint32_t      priority;
 
         ADM_demuxer(const char *file) : ADM_LibWrapper()
         {
         const char   *(*getDescriptor)();
         uint32_t     (*getApiVersion)();
+        uint32_t     (*getPriority)();
         const char  *(*getDemuxerName)();
 
-			initialised = (loadLibrary(file) && getSymbols(7,
+			initialised = (loadLibrary(file) && getSymbols(8,
 				&createdemuxer, "create",
 				&deletedemuxer, "destroy",
 				&probe,         "probe",
@@ -48,10 +50,12 @@
 				&getDemuxerName, "getName",
 				&getApiVersion,  "getApiVersion",
 				&getVersion,     "getVersion",
+                &getPriority,    "getPriority",
 				&getDescriptor,  "getDescriptor"));
                 if(initialised)
                 {
                     name=getDemuxerName();
+                    priority=getPriority();
                     apiVersion=getApiVersion();
                     descriptor=getDescriptor();
                     printf("[Demuxer]Name :%s ApiVersion :%d Description :%s\n",name,apiVersion,descriptor);
@@ -62,7 +66,7 @@
         }
 };
 
-#define ADM_DEMUXER_BEGIN( Class,maj,mn,pat,name,desc) \
+#define ADM_DEMUXER_BEGIN( Class,prio,maj,mn,pat,name,desc) \
 extern "C" {\
 vidHeader   *create(void){ return new Class; } \
 void         destroy(vidHeader *h){ Class *z=(Class *)h;delete z;} \
@@ -70,6 +74,7 @@
 uint32_t     getApiVersion(void) {return ADM_DEMUXER_API_VERSION;} \
 const char  *getName(void) {return name;} \
 const char  *getDescriptor(void) {return desc;} \
+uint32_t     getPriority(void) {return prio;} \
 }
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/src/ADM_dynaDemuxer.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -86,9 +86,23 @@
 
 	for(int i=0;i<nbFile;i++)
 		tryLoadingDemuxerPlugin(files[i]);
-
-	printf("[ADM_av_plugin] Scanning done\n");
-
+    int nb=ListOfDemuxers.size();
+	
+    // Now sort them according to priority
+    
+    for(int i=0;i<nb;i++)
+        for(int j=i+1;j<nb;j++) // sub optimal, but who cares
+        {
+            if(ListOfDemuxers[i]->priority<ListOfDemuxers[j]->priority)
+                {
+                        ADM_demuxer *a=ListOfDemuxers[i];
+                        ListOfDemuxers[i]=ListOfDemuxers[j];
+                        ListOfDemuxers[j]=a;
+                }
+        }
+    for(int i=0;i<nb;i++)
+        ADM_info("Demuxer plugin : %s, priority :%d\n",ListOfDemuxers[i]->name,(int)ListOfDemuxers[i]->priority);
+    printf("[ADM_dm_plugin] Scanning done, %d demuxers found\n",(int)nb);
 	return 1;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmxPSPacket.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -143,6 +143,7 @@
         if(len>     maxSize)
         {
                 printf("[DmxPS] Packet too big %d vs %d\n",len,maxSize);
+                goto _again2;
         }
         if(!_file->read32(len,buffer)) return false;
         return true;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Asf/ADM_asfPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -17,7 +17,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( asfHeader,
+ADM_DEMUXER_BEGIN( asfHeader, 50,
                     1,0,0,
                     "asf",
                     "asf/wmv demuxer plugin (c) Mean 2007/2009"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/AvsProxy/ADM_avsPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/AvsProxy/ADM_avsPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/AvsProxy/ADM_avsPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -17,7 +17,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( avsHeader,
+ADM_DEMUXER_BEGIN( avsHeader, 50,
                     1,0,0,
                     "avs",
                     "avsProxy demuxer plugin (c) Mean 2007/2010"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flvPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -18,7 +18,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( flvHeader,
+ADM_DEMUXER_BEGIN( flvHeader, 50,
                     1,0,0,
                     "flv",
                     "flash demuxer plugin (c) Mean 2007/2007"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -18,7 +18,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( mkvHeader,
+ADM_DEMUXER_BEGIN( mkvHeader, 50,
                     1,0,0,
                     "mkv",
                     "Matroska demuxer plugin (c) Mean 2007/2008"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Mp4/ADM_mp4Plugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -19,7 +19,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( MP4Header,
+ADM_DEMUXER_BEGIN( MP4Header, 50,
                     1,0,0,
                     "mp4",
                     "Mp4/Mov/3GP demuxer plugin (c) Mean 2007/2008"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -19,7 +19,7 @@
 #include "fourcc.h"
 #include "avidemutils.h"
 
-ADM_DEMUXER_BEGIN( psHeader,
+ADM_DEMUXER_BEGIN( psHeader, 10,
                     1,0,0,
                     "ps",
                     "mpeg ps demuxer plugin (c) Mean 2007/2008"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -19,7 +19,7 @@
 #include "fourcc.h"
 #include "avidemutils.h"
 #include "ADM_tsPatPmt.h"
-ADM_DEMUXER_BEGIN( tsHeader,
+ADM_DEMUXER_BEGIN( tsHeader, 90,
                     1,0,0,
                     "ts",
                     "mpeg ts demuxer plugin (c) Mean 2007/2009"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/OpenDml/ADM_openDMLPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -19,7 +19,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( OpenDMLHeader,
+ADM_DEMUXER_BEGIN( OpenDMLHeader, 50,
                     1,0,0,
                     "openDml",
                     "AVI/OpenDML demuxer plugin (c) Mean 2007/2007"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_picPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_picPlugin.cpp	2010-06-05 14:03:12 UTC (rev 6318)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Pictures/ADM_picPlugin.cpp	2010-06-05 17:47:01 UTC (rev 6319)
@@ -18,7 +18,7 @@
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
 
-ADM_DEMUXER_BEGIN( picHeader,
+ADM_DEMUXER_BEGIN( picHeader, 50,
                     1,0,0,
                     "picture",
                     "Picture demuxer plugin (c) Mean 2007/2008"



From mean at mail.berlios.de  Sun Jun  6 19:08:41 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 6 Jun 2010 19:08:41 +0200
Subject: [Avidemux-svn-commit] r6320 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv
Message-ID: <201006061708.o56H8f1B008805@sheep.berlios.de>

Author: mean
Date: 2010-06-06 19:08:41 +0200 (Sun, 06 Jun 2010)
New Revision: 6320

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
Log:
[flv] Read mixed array

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2010-06-05 17:47:01 UTC (rev 6319)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_flv/ADM_flv.cpp	2010-06-06 17:08:41 UTC (rev 6320)
@@ -181,7 +181,21 @@
                                         ;break;
                 case AMF_DATA_TYPE_STRING: {int r=read16();Skip(r);}break;
                 case AMF_DATA_TYPE_BOOL: read8();break;
-                
+                case AMF_DATA_TYPE_MIXEDARRAY:
+                                            {
+                                                read32();
+                                                 while(ftello(_fd)<endPos-4)
+                                                {
+                                                            char *o=readFlvString();
+                                                            if(!o) break;
+                                                            printf("\t MixedArray:%s",o);
+                                                            if(false==parseOneMeta(o,endPos)) return false;
+                                                            
+                                                }
+                                                if(read8()!=AMF_END_OF_OBJECT) return false;
+
+                                             }
+                                            break;
                 default : printf("\n");ADM_assert(0);
             }
             printf("\n");



From gruntster at mail.berlios.de  Mon Jun  7 00:45:02 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 00:45:02 +0200
Subject: [Avidemux-svn-commit] r6321 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport
Message-ID: <201006062245.o56Mj286011052@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 00:44:56 +0200 (Mon, 07 Jun 2010)
New Revision: 6321

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
Log:
[i18n] make time function translatable

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2010-06-06 17:08:41 UTC (rev 6320)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_osSupport/ADM_misc.cpp	2010-06-06 22:44:56 UTC (rev 6321)
@@ -7,18 +7,18 @@
 {
 	uint32_t mm, ss;
 #define ADM_MAX_STRING 256
-#define LU "u"
+
 	static char string[ADM_MAX_STRING+1];
 
 	mm = (uint32_t)floor(ms / 60000.);
 	
 	if (mm > 1)
 	{
-		snprintf(string, ADM_MAX_STRING,QT_TR_NOOP("%"LU" minutes"), mm);
+		snprintf(string, ADM_MAX_STRING,QT_TR_NOOP("%u minutes"), mm);
 	}
 	else if (mm == 1)
 	{
-		snprintf(string,ADM_MAX_STRING, QT_TR_NOOP("%"LU" minute"), mm);
+		snprintf(string,ADM_MAX_STRING, QT_TR_NOOP("%u minute"), mm);
 	}
 	else
 	{
@@ -26,11 +26,11 @@
 
 		if (ss == 1)
 		{
-			snprintf(string,ADM_MAX_STRING, QT_TR_NOOP("%"LU" second"), ss);
+			snprintf(string,ADM_MAX_STRING, QT_TR_NOOP("%u second"), ss);
 		}
 		else
 		{
-			snprintf(string,ADM_MAX_STRING, QT_TR_NOOP("%"LU" seconds"), ss);
+			snprintf(string,ADM_MAX_STRING, QT_TR_NOOP("%u seconds"), ss);
 		}
 	}
     string[ADM_MAX_STRING]=0;



From gruntster at mail.berlios.de  Mon Jun  7 01:04:33 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 01:04:33 +0200
Subject: [Avidemux-svn-commit] r6322 - in
	branches/avidemux_2.5_branch_gruntster/avidemux:
	ADM_UIs/ADM_QT4/src ADM_userInterfaces/ADM_QT4
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_filters
	ADM_userInterfaces/ADM_QT4/ADM_gui
	ADM_userInterfaces/ADM_QT4/ADM_ocr
Message-ID: <201006062304.o56N4XmI003750@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 01:04:21 +0200 (Mon, 07 Jun 2010)
New Revision: 6322

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_glypheditor.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
Log:
[i18n] let Qt dialogs take care of themselves for i18n

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_bitrate.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -1,264 +1,261 @@
-/***************************************************************************
-  FAC_toggle.cpp
-  Handle dialog factory element : Toggle
-  (C) 2006 Mean Fixounet at free.fr 
-***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "T_bitrate.h"
-#include "ADM_default.h"
-#include "DIA_factory.h"
-#include "ADM_dialogFactoryQt4.h"
-
-#undef QT_TR_NOOP
-#include "ADM_plugin/ADM_plugin_translate.h"
-
-namespace ADM_Qt4Factory
-{
-class diaElemBitrate : public diaElemBitrateBase
-{
-public:
-  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
-  virtual ~diaElemBitrate() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  void setMaxQz(uint32_t qz);
-  void setMinQz(uint32_t qz);
-  int getRequiredLayout(void);
-  void updateMe(void);
-};
-
-ADM_Qbitrate::ADM_Qbitrate(COMPRES_PARAMS *p,uint32_t minQ, uint32_t mq,QGridLayout *layout,int line)
-{
-	compress=p;
-	combo=new QComboBox();
-
-	_minQ=minQ;
-	maxQ=mq;
-	int index=0,set=-1;
-#define add(x,z,y) if(compress->capabilities & ADM_ENC_CAP_##x) {combo->addItem(QString::fromUtf8(y), COMPRESS_##z);\
-	if(p->mode==COMPRESS_##z) set=index;\
-	index++;}
-
-	add(CBR,CBR,QT_TR_NOOP("Constant Bitrate"));
-	add(CQ,CQ,QT_TR_NOOP("Constant Quantiser"));
-	add(SAME,SAME,QT_TR_NOOP("Same Quantiser as Input"));
-	add(AQ,AQ,QT_TR_NOOP("Constant Rate Factor"));
-	add(2PASS,2PASS,QT_TR_NOOP("Two Pass - Video Size"));
-	add(2PASS_BR,2PASS_BITRATE,QT_TR_NOOP("Two Pass - Average Bitrate"));
-
-	text1=new QLabel( QString::fromUtf8(QT_TR_NOOP("Encoding mode")));
-	text1->setBuddy(combo);
-
-	box=new QSpinBox();
-
-	text2=new QLabel( QString::fromUtf8(QT_TR_NOOP("Bitrate")));
-	text2->setBuddy(combo);
-
-	QHBoxLayout *hboxLayout = new QHBoxLayout();
-	QHBoxLayout *hboxLayout2 = new QHBoxLayout();
-	QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
-	QSpacerItem *spacer2 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
-
-	hboxLayout->addWidget(combo);
-	hboxLayout->addItem(spacer);
-
-	layout->addWidget(text1,line,0);
-	layout->addItem(hboxLayout,line,1);
-
-	hboxLayout2->addWidget(box);
-	hboxLayout2->addItem(spacer2);
-
-	layout->addWidget(text2,line+1,0);
-	layout->addItem(hboxLayout2,line+1,1);
-
-	if(set!=-1) 
-	{
-		combo->setCurrentIndex(set);
-		comboChanged(set);
-	}
-	connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
-
-
-}
-
-/**
- * 	\fn 	readPullDown
- * \brief 	Convert the raw read of the combox into the actual compression mode
- */
-static COMPRESSION_MODE readPulldown(COMPRES_PARAMS *copy,int rank)
-{
-	int index=0;
-	COMPRESSION_MODE mode=COMPRESS_MAX;
-	
-#undef LOOKUP
-#define LOOKUP(A,B) \
-  if(copy->capabilities & ADM_ENC_CAP_##A) \
-  { \
-	  if(rank==index) mode=COMPRESS_##B; \
-	  index++; \
-  } 
-  
-  LOOKUP(CBR,CBR);
-  LOOKUP(CQ,CQ);
-  LOOKUP(SAME,SAME);
-  LOOKUP(AQ,AQ);
-  LOOKUP(2PASS,2PASS);
-  LOOKUP(2PASS_BR,2PASS_BITRATE);
-  
-	ADM_assert(mode!=COMPRESS_MAX);
-	return mode;
-}
-
-void ADM_Qbitrate::readBack(void)
-{
-#define Mx(x) compress->mode=x
-#define Vx(x) compress->x=box->value();
-	COMPRESSION_MODE mode=readPulldown(compress,combo->currentIndex());
-  switch(mode)
-  {
-    case COMPRESS_CBR: Mx(COMPRESS_CBR);Vx(bitrate);break;
-    case COMPRESS_CQ: Mx(COMPRESS_CQ);Vx(qz);break;
-    case COMPRESS_2PASS: Mx(COMPRESS_2PASS);Vx(finalsize);break;
-    case COMPRESS_2PASS_BITRATE: Mx(COMPRESS_2PASS_BITRATE);Vx(avg_bitrate);break;
-    case COMPRESS_SAME: Mx(COMPRESS_SAME);break;
-    case COMPRESS_AQ: Mx(COMPRESS_AQ);Vx(qz);break;
-    default :
-          ADM_assert(0);
-  }
-}
-
-void ADM_Qbitrate::updateMe()
-{
-	updateCombo(compress->mode);
-}
-
-void ADM_Qbitrate::updateCombo(COMPRESSION_MODE mode)
-{
-#define P(x) text2->setText(QString::fromUtf8(x))
-#define M(x,y) box->setMinimum  (x);box->setMaximum  (y);
-#define S(x)   box->setValue(x);
-
-	for (int i = 0; i < combo->count(); i++)
-	{
-		if (combo->itemData(i).toInt() == mode)
-		{
-			if (combo->currentIndex() != i)
-				combo->setCurrentIndex(i);
-
-			break;
-		}
-	}
-
-	switch(mode)
-	{
-		case COMPRESS_CBR: //CBR
-			P(QT_TR_NOOP("Target bitrate (kb/s)"));
-			M(0,20000);
-			S(compress->bitrate);
-			break; 
-		case COMPRESS_CQ:// CQ
-			P(QT_TR_NOOP("Quantiser"));
-			M(_minQ,maxQ);
-			S(compress->qz);
-			break;
-		case COMPRESS_2PASS : // 2pass Filesize
-			P(QT_TR_NOOP("Target video size (MB)"));
-			M(1,8000);
-			S(compress->finalsize);
-			break;
-		case COMPRESS_2PASS_BITRATE : // 2pass Avg
-			P(QT_TR_NOOP("Average bitrate (kb/s)"));
-			M(0,20000);
-			S(compress->avg_bitrate);
-			break;
-		case COMPRESS_SAME : // Same Qz as input
-			P(QT_TR_NOOP("-"));
-			M(0,0);
-			break;
-		case COMPRESS_AQ : // AQ
-			P(QT_TR_NOOP("Quantiser"));
-			M(_minQ,maxQ);
-			S(compress->qz);
-			break;
-		default:
-			ADM_assert(0);
-	}
-}
-
-void ADM_Qbitrate::comboChanged(int i)
-{
-	updateCombo(readPulldown(compress,i));
-}
-
-ADM_Qbitrate::~ADM_Qbitrate() {}
-
-//**********************************
-diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-  : diaElemBitrateBase()
-{
- 
-  param=(void *)p;
-  memcpy(&copy,p,sizeof(copy));
-  paramTitle=NULL;
-  this->tip=tip;
-  setSize(2);
-  minQ=2;
-  maxQ=31;
-}
-
-void diaElemBitrate::setMinQz(uint32_t qz)
-{
-  minQ=qz;
-}
-
-void diaElemBitrate::setMaxQz(uint32_t qz)
-{
-  maxQ=qz; 
-}
-
-diaElemBitrate::~diaElemBitrate() {};
-
-void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
-{
-  QGridLayout *layout=(QGridLayout*) opaque;
-  
-  ADM_Qbitrate *b=new ADM_Qbitrate((COMPRES_PARAMS *)&copy,minQ,maxQ,layout,line);
-  myWidget=(void *)b;
-  
-}
-void diaElemBitrate::getMe(void)
-{
-  ((ADM_Qbitrate *)myWidget)->readBack();
-  memcpy(param,&copy,sizeof(copy));
-}
-
-int diaElemBitrate::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
-
-void diaElemBitrate::updateMe(void)
-{
-	memcpy(&copy, param, sizeof(copy));
-	((ADM_Qbitrate*)myWidget)->updateMe();
-}
-} // End of namespace
-//****************************Hoook*****************
-
-diaElem  *qt4CreateBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
-{
-	return new  ADM_Qt4Factory::diaElemBitrate(p,toggleTitle,tip);
-}
-void qt4DestroyBitrate(diaElem *e)
-{
-	ADM_Qt4Factory::diaElemBitrate *a=(ADM_Qt4Factory::diaElemBitrate *)e;
-	delete a;
-}
-//EOF
-
+/***************************************************************************
+  FAC_toggle.cpp
+  Handle dialog factory element : Toggle
+  (C) 2006 Mean Fixounet at free.fr 
+***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "T_bitrate.h"
+#include "ADM_default.h"
+#include "DIA_factory.h"
+#include "ADM_dialogFactoryQt4.h"
+
+namespace ADM_Qt4Factory
+{
+class diaElemBitrate : public diaElemBitrateBase
+{
+public:
+  diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip=NULL);
+  virtual ~diaElemBitrate() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  void setMaxQz(uint32_t qz);
+  void setMinQz(uint32_t qz);
+  int getRequiredLayout(void);
+  void updateMe(void);
+};
+
+ADM_Qbitrate::ADM_Qbitrate(COMPRES_PARAMS *p,uint32_t minQ, uint32_t mq,QGridLayout *layout,int line)
+{
+	compress=p;
+	combo=new QComboBox();
+
+	_minQ=minQ;
+	maxQ=mq;
+	int index=0,set=-1;
+#define add(x,z,y) if(compress->capabilities & ADM_ENC_CAP_##x) {combo->addItem(y, COMPRESS_##z);\
+	if(p->mode==COMPRESS_##z) set=index;\
+	index++;}
+
+	add(CBR,CBR,tr("Constant Bitrate"));
+	add(CQ,CQ,tr("Constant Quantiser"));
+	add(SAME,SAME,tr("Same Quantiser as Input"));
+	add(AQ,AQ,tr("Constant Rate Factor"));
+	add(2PASS,2PASS,tr("Two Pass - Video Size"));
+	add(2PASS_BR,2PASS_BITRATE,tr("Two Pass - Average Bitrate"));
+
+	text1=new QLabel(tr("Encoding mode"));
+	text1->setBuddy(combo);
+
+	box=new QSpinBox();
+
+	text2=new QLabel(tr("Bitrate"));
+	text2->setBuddy(combo);
+
+	QHBoxLayout *hboxLayout = new QHBoxLayout();
+	QHBoxLayout *hboxLayout2 = new QHBoxLayout();
+	QSpacerItem *spacer = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+	QSpacerItem *spacer2 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
+
+	hboxLayout->addWidget(combo);
+	hboxLayout->addItem(spacer);
+
+	layout->addWidget(text1,line,0);
+	layout->addItem(hboxLayout,line,1);
+
+	hboxLayout2->addWidget(box);
+	hboxLayout2->addItem(spacer2);
+
+	layout->addWidget(text2,line+1,0);
+	layout->addItem(hboxLayout2,line+1,1);
+
+	if(set!=-1) 
+	{
+		combo->setCurrentIndex(set);
+		comboChanged(set);
+	}
+	connect(combo, SIGNAL(currentIndexChanged(int )), this, SLOT(comboChanged(int )));
+
+
+}
+
+/**
+ * 	\fn 	readPullDown
+ * \brief 	Convert the raw read of the combox into the actual compression mode
+ */
+static COMPRESSION_MODE readPulldown(COMPRES_PARAMS *copy,int rank)
+{
+	int index=0;
+	COMPRESSION_MODE mode=COMPRESS_MAX;
+	
+#undef LOOKUP
+#define LOOKUP(A,B) \
+  if(copy->capabilities & ADM_ENC_CAP_##A) \
+  { \
+	  if(rank==index) mode=COMPRESS_##B; \
+	  index++; \
+  } 
+  
+  LOOKUP(CBR,CBR);
+  LOOKUP(CQ,CQ);
+  LOOKUP(SAME,SAME);
+  LOOKUP(AQ,AQ);
+  LOOKUP(2PASS,2PASS);
+  LOOKUP(2PASS_BR,2PASS_BITRATE);
+  
+	ADM_assert(mode!=COMPRESS_MAX);
+	return mode;
+}
+
+void ADM_Qbitrate::readBack(void)
+{
+#define Mx(x) compress->mode=x
+#define Vx(x) compress->x=box->value();
+	COMPRESSION_MODE mode=readPulldown(compress,combo->currentIndex());
+  switch(mode)
+  {
+    case COMPRESS_CBR: Mx(COMPRESS_CBR);Vx(bitrate);break;
+    case COMPRESS_CQ: Mx(COMPRESS_CQ);Vx(qz);break;
+    case COMPRESS_2PASS: Mx(COMPRESS_2PASS);Vx(finalsize);break;
+    case COMPRESS_2PASS_BITRATE: Mx(COMPRESS_2PASS_BITRATE);Vx(avg_bitrate);break;
+    case COMPRESS_SAME: Mx(COMPRESS_SAME);break;
+    case COMPRESS_AQ: Mx(COMPRESS_AQ);Vx(qz);break;
+    default :
+          ADM_assert(0);
+  }
+}
+
+void ADM_Qbitrate::updateMe()
+{
+	updateCombo(compress->mode);
+}
+
+void ADM_Qbitrate::updateCombo(COMPRESSION_MODE mode)
+{
+#define P(x) text2->setText(x)
+#define M(x,y) box->setMinimum  (x);box->setMaximum  (y);
+#define S(x)   box->setValue(x);
+
+	for (int i = 0; i < combo->count(); i++)
+	{
+		if (combo->itemData(i).toInt() == mode)
+		{
+			if (combo->currentIndex() != i)
+				combo->setCurrentIndex(i);
+
+			break;
+		}
+	}
+
+	switch(mode)
+	{
+		case COMPRESS_CBR: //CBR
+			P(tr("Target bitrate (kb/s)"));
+			M(0,20000);
+			S(compress->bitrate);
+			break; 
+		case COMPRESS_CQ:// CQ
+			P(tr("Quantiser"));
+			M(_minQ,maxQ);
+			S(compress->qz);
+			break;
+		case COMPRESS_2PASS : // 2pass Filesize
+			P(tr("Target video size (MB)"));
+			M(1,8000);
+			S(compress->finalsize);
+			break;
+		case COMPRESS_2PASS_BITRATE : // 2pass Avg
+			P(tr("Average bitrate (kb/s)"));
+			M(0,20000);
+			S(compress->avg_bitrate);
+			break;
+		case COMPRESS_SAME : // Same Qz as input
+			P(tr("-"));
+			M(0,0);
+			break;
+		case COMPRESS_AQ : // AQ
+			P(tr("Quantiser"));
+			M(_minQ,maxQ);
+			S(compress->qz);
+			break;
+		default:
+			ADM_assert(0);
+	}
+}
+
+void ADM_Qbitrate::comboChanged(int i)
+{
+	updateCombo(readPulldown(compress,i));
+}
+
+ADM_Qbitrate::~ADM_Qbitrate() {}
+
+//**********************************
+diaElemBitrate::diaElemBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+  : diaElemBitrateBase()
+{
+ 
+  param=(void *)p;
+  memcpy(&copy,p,sizeof(copy));
+  paramTitle=NULL;
+  this->tip=tip;
+  setSize(2);
+  minQ=2;
+  maxQ=31;
+}
+
+void diaElemBitrate::setMinQz(uint32_t qz)
+{
+  minQ=qz;
+}
+
+void diaElemBitrate::setMaxQz(uint32_t qz)
+{
+  maxQ=qz; 
+}
+
+diaElemBitrate::~diaElemBitrate() {};
+
+void diaElemBitrate::setMe(void *dialog, void *opaque,uint32_t line)
+{
+  QGridLayout *layout=(QGridLayout*) opaque;
+  
+  ADM_Qbitrate *b=new ADM_Qbitrate((COMPRES_PARAMS *)&copy,minQ,maxQ,layout,line);
+  myWidget=(void *)b;
+  
+}
+void diaElemBitrate::getMe(void)
+{
+  ((ADM_Qbitrate *)myWidget)->readBack();
+  memcpy(param,&copy,sizeof(copy));
+}
+
+int diaElemBitrate::getRequiredLayout(void) { return FAC_QT_GRIDLAYOUT; }
+
+void diaElemBitrate::updateMe(void)
+{
+	memcpy(&copy, param, sizeof(copy));
+	((ADM_Qbitrate*)myWidget)->updateMe();
+}
+} // End of namespace
+//****************************Hoook*****************
+
+diaElem  *qt4CreateBitrate(COMPRES_PARAMS *p,const char *toggleTitle,const char *tip)
+{
+	return new  ADM_Qt4Factory::diaElemBitrate(p,toggleTitle,tip);
+}
+void qt4DestroyBitrate(diaElem *e)
+{
+	ADM_Qt4Factory::diaElemBitrate *a=(ADM_Qt4Factory::diaElemBitrate *)e;
+	delete a;
+}
+//EOF
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_configMenu.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -21,9 +21,6 @@
 #include "ADM_files.h"
 #include "DIA_coreToolkit.h"
 
-#undef QT_TR_NOOP
-#include "ADM_plugin/ADM_plugin_translate.h"
-
 extern "C"
 {
 #include "ADM_plugin/ADM_vidEnc_plugin.h"
@@ -46,10 +43,10 @@
 		this->controls = controls;
 		this->controlCount = controlCount;
 
-		label = new QLabel(QString::fromUtf8(QT_TR_NOOP("Configuration:")), widget);
+		label = new QLabel(tr("Configuration:"), widget);
 		combobox = new QComboBox(widget);
-		saveAsButton = new QPushButton(QString::fromUtf8(QT_TR_NOOP("Save As")), widget);
-		deleteButton = new QPushButton(QString::fromUtf8(QT_TR_NOOP("Delete")), widget);
+		saveAsButton = new QPushButton(tr("Save As"), widget);
+		deleteButton = new QPushButton(tr("Delete"), widget);
 
 		QSpacerItem *spacer1 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
 		QSpacerItem *spacer2 = new QSpacerItem(20, 20, QSizePolicy::Expanding, QSizePolicy::Minimum);
@@ -120,8 +117,8 @@
 			configs.insert(QFileInfo(list[item]).completeBaseName(), CONFIG_MENU_SYSTEM);
 
 		combobox->clear();
-		combobox->addItem(QT_TR_NOOP("<default>"), CONFIG_MENU_DEFAULT);
-		combobox->addItem(QT_TR_NOOP("<custom>"), CONFIG_MENU_CUSTOM);
+		combobox->addItem(tr("<default>"), CONFIG_MENU_DEFAULT);
+		combobox->addItem(tr("<custom>"), CONFIG_MENU_CUSTOM);
 
 		QMap<QString, int>::const_iterator mapIterator = configs.constBegin();
 
@@ -181,7 +178,7 @@
 			QString configFileName = QFileInfo(QString(this->userConfigDir), combobox->currentText() + ".xml").filePath();
 			QFile configFile(configFileName);
 
-			if (GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected configuration?")) && configFile.exists())
+			if (GUI_Question(tr("Are you sure you wish to delete the selected configuration?").toUtf8().constData()) && configFile.exists())
 			{
 				configFile.remove();
 				combobox->removeItem(combobox->currentIndex());
@@ -196,7 +193,7 @@
 		{
 			ADM_mkdir(this->userConfigDir);
 
-			QString configFileName = QFileDialog::getSaveFileName(this, QT_TR_NOOP("Save As"), this->userConfigDir, QT_TR_NOOP("Configuration File (*.xml)"));
+			QString configFileName = QFileDialog::getSaveFileName(this, tr("Save As"), this->userConfigDir, tr("Configuration File (*.xml)"));
 
 			if (!configFileName.isNull())
 			{

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_UIs/ADM_QT4/src/T_threadCount.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -17,9 +17,6 @@
 #include "DIA_factory.h"
 #include "ADM_dialogFactoryQt4.h"
 
-#undef QT_TR_NOOP
-#include "ADM_plugin/ADM_plugin_translate.h"
-
 extern const char* shortkey(const char*);
 
 namespace ADM_qt4Factory
@@ -45,9 +42,9 @@
 
 ADM_QthreadCount::ADM_QthreadCount(QWidget *widget, const char *title, uint32_t value, QGridLayout *layout, int line) : QWidget(widget) 
 {
-	radiobutton1 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP("Disabled")), widget);
-	radiobutton2 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP("Auto-detect")), widget);
-	radiobutton3 = new QRadioButton(QString::fromUtf8(QT_TR_NOOP("Custom")), widget);
+	radiobutton1 = new QRadioButton(tr("Disabled"), widget);
+	radiobutton2 = new QRadioButton(tr("Auto-detect"), widget);
+	radiobutton3 = new QRadioButton(tr("Custom"), widget);
 
 	buttonGroup = new QButtonGroup;
 	buttonGroup->addButton(radiobutton1);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -24,10 +24,6 @@
 #include "../ADM_gui/ADM_qtray.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
 extern void UI_iconify(void);
 extern void UI_deiconify(void);
 extern void UI_purge(void);
@@ -47,7 +43,7 @@
 	}
 #endif
 
-	ui.buttonBox->button(QDialogButtonBox::Cancel)->setText(QString::fromUtf8(QT_TR_NOOP("Pause / Abort")));
+	ui.buttonBox->button(QDialogButtonBox::Cancel)->setText(tr("Pause / Abort"));
 
 	connect(ui.checkBoxShutdown, SIGNAL(stateChanged(int)), this, SLOT(shutdownChanged(int)));
 	connect(ui.buttonBox, SIGNAL(rejected()), this, SLOT(buttonPressed()));
@@ -108,7 +104,7 @@
 		ui.comboBoxPriority->setCurrentIndex(2);
 		connect(ui.checkBoxShutdown, SIGNAL(currentIndexChanged(int)), this, SLOT(priorityChanged(int)));
 
-		GUI_Error_HIG(QT_TR_NOOP("Privileges Required"), QT_TR_NOOP( "Root privileges are required to perform this operation."));
+		GUI_Error_HIG(tr("Privileges Required").toUtf().constData(), tr("Root privileges are required to perform this operation.").toUtf().constData());
 
 		return;
 	}
@@ -126,7 +122,7 @@
 		ui.checkBoxShutdown->setCheckState(Qt::Unchecked);
 		connect(ui.checkBoxShutdown, SIGNAL(stateChanged(int)), this, SLOT(shutdownChanged(int)));
 
-		GUI_Error_HIG(QT_TR_NOOP("Privileges Required"), QT_TR_NOOP( "Root privileges are required to perform this operation."));
+		GUI_Error_HIG(tr("Privileges Required").toUtf().constData(), tr("Root privileges are required to perform this operation.").toUtf().constData());
 	}
 #endif
 }
@@ -209,7 +205,7 @@
 
 	if (shutdownRequired && !stopReq)
 	{
-		DIA_working *work=new DIA_working(QT_TR_NOOP("Shutting down"));
+		DIA_working *work=new DIA_working(encodingWindow::tr("Shutting down").toUtf8().constData());
 		bool performShutdown=true;
 
 		for(int i = 0; i <= 30; i++)
@@ -501,8 +497,8 @@
 
         if(stopReq)
         {
-          if(GUI_Alternate((char*)QT_TR_NOOP("The encoding is paused. Do you want to resume or abort?"),
-                              (char*)QT_TR_NOOP("Resume"),(char*)QT_TR_NOOP("Abort")))
+          if(GUI_Alternate((char*)encodingWindow::tr("The encoding is paused. Do you want to resume or abort?").toUtf8().constData(),
+                              (char*)encodingWindow::tr("Resume").toUtf8().constData(), (char*)encodingWindow::tr("Abort").toUtf8().constData()))
                  {
                          stopReq=0;
                  }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -7,13 +7,9 @@
 #include "DIA_coreToolkit.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
 static void updateStatus(void);
 extern bool parseECMAScript(const char *name);
-static const char *StringStatus[]={QT_TR_NOOP("Ready"),QT_TR_NOOP("Succeeded"),QT_TR_NOOP("Failed"),QT_TR_NOOP("Deleted"),QT_TR_NOOP("Running")};
+static QString StringStatus[]={jobsWindow::tr("Ready"), jobsWindow::tr("Succeeded"), jobsWindow::tr("Failed"), jobsWindow::tr("Deleted"), jobsWindow::tr("Running")};
 
 ADM_Job_Descriptor::ADM_Job_Descriptor(void) 
 {
@@ -37,7 +33,7 @@
 
 	// Set headers
 	QStringList headers;
-	headers << QT_TR_NOOP("Job Name") << QT_TR_NOOP("Status") << QT_TR_NOOP("Start Time") << QT_TR_NOOP("End Time"); 
+	headers << tr("Job Name") << tr("Status") << tr("Start Time") << tr("End Time"); 
 
 	ui.tableWidget->setVerticalHeaderLabels(headers);
 	updateRows();
@@ -56,15 +52,12 @@
 {
 	delete [] desc;
 }
- /*
-    There is maybe a huge mem leak here
- */
-static void ADM_setText(const char *txt,uint32_t col, uint32_t row,QTableWidget *w)
+ 
+static void ADM_setText(QString txt,uint32_t col, uint32_t row,QTableWidget *w)
 {
-	QString str = QString::fromUtf8(txt);
-        QTableWidgetItem *newItem = new QTableWidgetItem(str);//GetFileName(_jobsName[i]));
-        w->setItem(row, col, newItem);
-  
+	QTableWidgetItem *newItem = new QTableWidgetItem(txt);
+
+	w->setItem(row, col, newItem);  
 }
  /**
       \fn updateRaw
@@ -78,14 +71,10 @@
    for(int i=0;i<_nbJobs;i++)
    {
       j=&(desc[i]);
-      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,ui.tableWidget);
+      ADM_setText(QString(ADM_GetFileName(_jobsName[i])),0,i,ui.tableWidget);
       ADM_setText(StringStatus[j->status],1,i,ui.tableWidget);
-      
-      sprintf(str,"%02u:%02u:%02u",j->startDate.hours,j->startDate.minutes,j->startDate.seconds);
-      ADM_setText(str,2,i,ui.tableWidget);
-      
-      sprintf(str,"%02u:%02u:%02u",j->endDate.hours,j->endDate.minutes,j->endDate.seconds);
-      ADM_setText(str,3,i,ui.tableWidget);
+      ADM_setText(tr("%1:%2:%3").arg((uint)j->startDate.hours, 2, 10, QLatin1Char('0')).arg((uint)j->startDate.minutes, 2, 10, QLatin1Char('0')).arg((uint)j->startDate.seconds, 2, 10, QLatin1Char('0')), 2, i, ui.tableWidget);
+	  ADM_setText(tr("%1:%2:%3").arg((uint)j->endDate.hours, 2, 10, QLatin1Char('0')).arg((uint)j->endDate.minutes, 2, 10, QLatin1Char('0')).arg((uint)j->endDate.seconds, 2, 10, QLatin1Char('0')), 3, i, ui.tableWidget);
    }
 }
 
@@ -101,7 +90,7 @@
 
 	if (sel >= 0 && sel < _nbJobs)
 	{
-		if (GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"), QT_TR_NOOP("Delete job"), QT_TR_NOOP("Are you sure you want to delete %s job?"), ADM_GetFileName(_jobsName[sel])))
+		if (GUI_Confirmation_HIG(tr("Sure!").toUtf8().constData(), tr("Delete job").toUtf8().constData(), tr("Are you sure you want to delete %s job?").toUtf8().constData(), ADM_GetFileName(_jobsName[sel])))
 		{
 			desc[sel].status = STATUS_DELETED;
 			unlink(_jobsName[sel]);
@@ -115,7 +104,7 @@
 */
 void jobsWindow::DeleteAll(bool b)
 {
-	if (GUI_Confirmation_HIG(QT_TR_NOOP("Sure!"), QT_TR_NOOP("Delete *all* job"), QT_TR_NOOP("Are you sure you want to delete ALL jobs?")))
+	if (GUI_Confirmation_HIG(tr("Sure!").toUtf8().constData(), tr("Delete *all* job").toUtf8().constData(), tr("Are you sure you want to delete ALL jobs?").toUtf8().constData()))
 	{
 		for(int sel = 0; sel < _nbJobs; sel++)
 		{
@@ -139,7 +128,7 @@
 	if(sel >= 0 && sel < _nbJobs)
 	{
 		if(desc[sel].status == STATUS_SUCCEED)
-			GUI_Info_HIG(ADM_LOG_INFO,QT_TR_NOOP("Already done"),QT_TR_NOOP("This script has already been successfully executed."));
+			GUI_Info_HIG(ADM_LOG_INFO,tr("Already done").toUtf8().constData(),tr("This script has already been successfully executed.").toUtf8().constData());
 		else
 		{
 			desc[sel].status=STATUS_RUNNING;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -19,15 +19,11 @@
 #include "ADM_default.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
 Ui_licenseWindow::Ui_licenseWindow(QWidget *parent) : QDialog(parent)
 {
 	ui.setupUi(this);
 
-	ui.licenseTextEdit->setHtml(QString::fromUtf8(QT_TR_NOOP("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">" \
+	ui.licenseTextEdit->setHtml(tr("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">" \
 	"" \
 	"<html>" \
 	"<head>" \
@@ -698,7 +694,7 @@
 	"    <span style='font-size:10.0pt; font-family:Arial'> </span></p>" \
 	"  </div>" \
 	"</body>" \
-	"</html>")));
+	"</html>"));
 }
 
 uint8_t DIA_license(void)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -20,11 +20,7 @@
 #include "ADM_video/ADM_vidMisc.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
-static const char *yesno[2]={QT_TR_NOOP("No"),QT_TR_NOOP("Yes")};
+static QString yesno[2] = {propWindow::tr("No"), propWindow::tr("Yes")};
 extern const char *getStrFromAudioCodec( uint32_t codec);
 
 propWindow::propWindow(QWidget *parent) : QDialog(parent)
@@ -34,11 +30,9 @@
  uint32_t info=0;
  uint32_t war,har;
  uint16_t hh, mm, ss, ms;
- char text[80];
  const char *s;
   
-    text[0] = 0;
-    if (!avifileinfo)
+     if (!avifileinfo)
         return;
   
         // Fetch info
@@ -47,56 +41,52 @@
         qpel=!!(info & ADM_QPEL_ON);
         gmc=!!(info & ADM_GMC_ON);
 
-#define FILLTEXT(a,b,c) {snprintf(text,79,b,c);ui.a->setText(QString::fromUtf8(text));}
-#define FILLTEXT4(a,b,c,d) {snprintf(text,79,b,c,d);ui.a->setText(QString::fromUtf8(text));}
-#define FILLTEXT5(a,b,c,d,e) {snprintf(text,79,b,c,d,e);ui.a->setText(QString::fromUtf8(text));}
-        
-        FILLTEXT4(labeImageSize,QT_TR_NOOP("%lu x %lu"), avifileinfo->width,avifileinfo->height);
-        FILLTEXT(labelFrameRate, QT_TR_NOOP("%2.3f fps"), (float) avifileinfo->fps1000 / 1000.F);
-        FILLTEXT(labelNbOfFrames,QT_TR_NOOP("%ld frames"), avifileinfo->nb_frames);
-        FILLTEXT(label4CC, "%s",      fourCC::tostring(avifileinfo->fcc));
-        if (avifileinfo->nb_frames)
-          {
-                frame2time(avifileinfo->nb_frames, avifileinfo->fps1000,
-                          &hh, &mm, &ss, &ms);
-                snprintf(text,79, QT_TR_NOOP("%02d:%02d:%02d.%03d"), hh, mm, ss, ms);
-                ui.labelVideoDuration->setText(QString::fromUtf8(text));
-          }
+		ui.labeImageSize->setText(tr("%1 x %2").arg(avifileinfo->width).arg(avifileinfo->height));
+		ui.labelFrameRate->setText(tr("%1 fps").arg(avifileinfo->fps1000 / 1000.F, 2, 'f', 3));
+        ui.labelNbOfFrames->setText(tr("%1 frames").arg(avifileinfo->nb_frames));
+        ui.label4CC->setText(fourCC::tostring(avifileinfo->fcc));
+
+		if (avifileinfo->nb_frames)
+		{
+			frame2time(avifileinfo->nb_frames, avifileinfo->fps1000,
+				&hh, &mm, &ss, &ms);
+
+			ui.labelVideoDuration->setText(tr("%1:%2:%3.%4").arg(hh, 2, 10, QLatin1Char('0')).arg(mm, 2, 10, QLatin1Char('0')).arg(ss, 2, 10, QLatin1Char('0')).arg(ms, 3, 10, QLatin1Char('0')));
+		}
+
         war=video_body->getPARWidth();
         har=video_body->getPARHeight();
         getAspectRatioFromAR(war,har, &s);
-		FILLTEXT5(LabelAspectRatio,QT_TR_NOOP("%s (%u:%u)"), s,war,har);
-#define SET_YES(a,b) ui.a->setText(QString::fromUtf8(yesno[b]))
-#define FILLQT_TR_NOOP(q) ui.q->setText(QString::fromUtf8(text));
+		ui.LabelAspectRatio->setText(tr("%1 (%2:%3)").arg(s).arg(war).arg(har));
+
+#define SET_YES(a,b) ui.a->setText(yesno[b])
+
         SET_YES(LabelPackedBitstream,vop);
         SET_YES(LabelQuarterPixel,qpel);
         SET_YES(LabelGMC,gmc);
         
          WAVHeader *wavinfo=NULL;
         if (currentaudiostream) wavinfo=currentaudiostream->getInfo();
-          if(wavinfo)
-          {
-              
-              switch (wavinfo->channels)
-                {
-                case 1:
-		  sprintf(text, "%s", QT_TR_NOOP("Mono"));
-                    break;
-                case 2:
-                    sprintf(text, "%s", QT_TR_NOOP("Stereo"));
-                    break;
-                default:
-                    sprintf(text, "%d",wavinfo->channels);
-                    break;
-                }
 
-                FILLQT_TR_NOOP(labelChannels);
-                FILLTEXT(labelFrequency, QT_TR_NOOP("%lu Hz"), wavinfo->frequency);
-                FILLTEXT4(labelBitrate, QT_TR_NOOP("%lu Bps / %lu kbps"), wavinfo->byterate,wavinfo->byterate * 8 / 1000);
-                
-                sprintf(text, "%s", getStrFromAudioCodec(wavinfo->encoding));
-                FILLQT_TR_NOOP(labelACodec);
+		if (wavinfo)
+		{              
+			switch (wavinfo->channels)
+			{
+				case 1:
+					ui.labelChannels->setText(tr("Mono"));
+					break;
+				case 2:
+					ui.labelChannels->setText(tr("Stereo"));
+					break;
+				default:
+					ui.labelChannels->setText(QString("%1").arg(wavinfo->channels));
+					break;
+				}
 
+                ui.labelFrequency->setText(tr("%1 Hz").arg(wavinfo->frequency));
+                ui.labelBitrate->setText(tr("%1 Bps / %2 kbps").arg(wavinfo->byterate).arg(wavinfo->byterate * 8 / 1000));
+                ui.labelACodec->setText(getStrFromAudioCodec(wavinfo->encoding));
+
                 // Duration in seconds too
                 if(currentaudiostream && wavinfo->byterate>1)
                 {
@@ -107,11 +97,8 @@
                         du/=wavinfo->byterate;
                         ms2time((uint32_t)floor(du), &hh, &mm, &ss, &ms);
 
-						sprintf(text, QT_TR_NOOP("%02d:%02d:%02d.%03d"), hh, mm, ss, ms);
-						FILLQT_TR_NOOP(labelAudioDuration);
-
-						sprintf(text, QT_TR_NOOP("%.2f MB"), l / 1048576.F);
-						FILLQT_TR_NOOP(labelFileSize);
+						ui.labelAudioDuration->setText(tr("%1:%2:%3.%4").arg(hh, 2, 10, QLatin1Char('0')).arg(mm, 2, 10, QLatin1Char('0')).arg(ss, 2, 10, QLatin1Char('0')).arg(ms, 3, 10, QLatin1Char('0')));
+						ui.labelFileSize->setText(tr("%1 MB").arg(l / 1048576.F, 0, 'f', 2));
                 }
 
                 SET_YES(labelVBR,currentaudiostream->isVBR());

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -20,10 +20,6 @@
 #include "DIA_fileSel.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
 //
 //	Video is in YV12 Colorspace
 //
@@ -89,7 +85,7 @@
 {
 	char fileIdx[1024];
 	
-	if(FileSel_SelectRead(QT_TR_NOOP("Select Idx File"),fileIdx,1023, NULL) && ADM_fileExist(fileIdx))
+	if(FileSel_SelectRead(tr("Select Idx File").toUtf8().constData(),fileIdx,1023, NULL) && ADM_fileExist(fileIdx))
 	{
 		// Set entry
 		ui.lineEditIdx->setText(fileIdx);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -28,10 +28,6 @@
 #include "ADM_video/ADM_vidMisc.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
 extern void UI_purge( void );
 
 void Ui_iDialog::setupUi(QDialog *Dialog)
@@ -68,9 +64,8 @@
 
 void Ui_iDialog::retranslateUi(QDialog *Dialog)
 {
-	Dialog->setWindowTitle(QApplication::translate("Dialog", "Indexing", 0, QApplication::UnicodeUTF8));
-	labelTimeLeft->setText(QApplication::translate("Dialog", "Time Left : Infinity", 0, QApplication::UnicodeUTF8));
-	labelImages->setText(QApplication::translate("Dialog", "# Images :", 0, QApplication::UnicodeUTF8));
+	Dialog->setWindowTitle(QApplication::translate("IndexDialog", "Indexing", 0, QApplication::UnicodeUTF8));
+	labelTimeLeft->setText(QApplication::translate("IndexDialog", "Time Left:", 0, QApplication::UnicodeUTF8));
 
 	Q_UNUSED(Dialog);
 }
@@ -115,18 +110,13 @@
 	tim=clock.getElapsedMS();
 	if(tim>_nextUpdate)
 	{
-        char string[256];
         double f;
         	uint32_t   tom,zhh,zmm,zss;
 
 		_nextUpdate=tim+GUI_UPDATE_RATE;
-        sprintf(string,"%02d:%02d:%02d",hh,mm,ss);
-        dialog->setTime(string);
-        
+        dialog->setTime(QString(QApplication::translate("IndexDialog", "%1:%2:%3").arg(hh, 2, 10, QLatin1Char('0')).arg(mm, 2, 10, QLatin1Char('0')).arg(ss, 2, 10, QLatin1Char('0'))));
+		dialog->setImage(QString(QApplication::translate("IndexDialog", "# Images: %1")).arg(nbImage));
 
-        sprintf(string,QT_TR_NOOP("# Images :%0lu"),nbImage);
-        dialog->setImage(string);
-
         f=done;
         f/=total;
 
@@ -142,8 +132,8 @@
         if(tim>tom) return 1;
         tom=tom-tim;
         ms2time(tom,&zhh,&zmm,&zss);
-        sprintf(string,QT_TR_NOOP("Time Left :%02d:%02d:%02d"),zhh,zmm,zss);
-        dialog->setETA(string);
+
+        dialog->setETA(QString(QApplication::translate("IndexDialog", "Time Left: %1:%2:%3")).arg(zhh, 2, 10, QLatin1Char('0')).arg(zmm, 2, 10, QLatin1Char('0')).arg(zss, 2, 10, QLatin1Char('0')));
         UI_purge();
         }
         return 1;
@@ -158,26 +148,20 @@
 {
     
 }
-void Ui_indexingDialog::setTime(const char *f)
+void Ui_indexingDialog::setTime(QString f)
 {
-    //printf("Time:%s\n",f);
+
 }
-void Ui_indexingDialog::setImage(const char *f)
+void Ui_indexingDialog::setImage(QString f)
 {
-	dialog->ui.labelImages->setText(QString::fromUtf8(f));
+	dialog->ui.labelImages->setText(f);
 }
 
-void Ui_indexingDialog::setETA(const char *f)
+void Ui_indexingDialog::setETA(QString f)
 {
-   // printf("Eta:%s\n",f);
-  dialog->ui.labelTimeLeft->setText(QString::fromUtf8(f));
+  dialog->ui.labelTimeLeft->setText(f);
 }
 void Ui_indexingDialog::setPercent(float f)
 {
     dialog->ui.progressBar->setValue((int)(100.*f));
-    
 }
-
-
-
-// EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.h	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.h	2010-06-06 23:04:21 UTC (rev 6322)
@@ -36,9 +36,9 @@
 	Ui_iDialog ui;
 	Ui_indexingDialog(QWidget *parent, const char *name);
 	~Ui_indexingDialog();
-	void setTime(const char *f);
-	void setImage(const char *f);
-	void setETA(const char *f);
+	void setTime(QString f);
+	void setImage(QString f);
+	void setETA(QString f);
 	void setPercent(float f);    
 };
 #endif	// T_index_pg_h

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -21,10 +21,6 @@
 #include "prefs.h"
 #include "ADM_toolkitQt.h"
 
-#undef QT_TR_NOOP
-extern const char* translate(const char *__domainname, const char *__msgid);
-#define QT_TR_NOOP(x) translate("", x)
-
 static int beQuiet=0;
 extern QWidget *QuiMainWindows;
 namespace ADM_Qt4CoreUIToolkit
@@ -33,7 +29,7 @@
 void            GUI_Alert(const char *alertstring)
 {
     QMessageBox::StandardButton reply;
-              reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Alert")),
+              reply = QMessageBox::critical(qtLastRegisteredDialog(), QObject::tr("Alert"),
                                         QString::fromUtf8(alertstring),
                                         QMessageBox::Ok );
 }
@@ -41,7 +37,7 @@
 void            GUI_Info(const char *alertstring)
 {
     QMessageBox::StandardButton reply;
-              reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
+              reply = QMessageBox::information(qtLastRegisteredDialog(), QObject::tr("Info"),
                                         QString::fromUtf8(alertstring),
                                         QMessageBox::Ok );
 }
@@ -70,7 +66,7 @@
 
 	QMessageBox::StandardButton reply;
 
-	reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
+	reply = QMessageBox::information(qtLastRegisteredDialog(), QObject::tr("Info"),
 		alertString, QMessageBox::Ok);
 }
 //****************************************************************************************************
@@ -97,7 +93,7 @@
 
 	QMessageBox::StandardButton reply;
 
-	reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Info")),
+	reply = QMessageBox::critical(qtLastRegisteredDialog(), QObject::tr("Info"),
 		alertString, QMessageBox::Ok);
 }
 //****************************************************************************************************
@@ -121,7 +117,7 @@
 
 	QMessageBox::StandardButton reply;
 
-	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Confirmation")),
+	reply = QMessageBox::question(qtLastRegisteredDialog(), QObject::tr("Confirmation"),
 		alertString, QMessageBox::Yes | QMessageBox::No);
 
 	if (reply == QMessageBox::Yes)
@@ -151,7 +147,7 @@
 
 	QMessageBox::StandardButton reply;
 
-	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Confirmation")),
+	reply = QMessageBox::question(qtLastRegisteredDialog(), QObject::tr("Confirmation"),
 		alertString, QMessageBox::Yes | QMessageBox::No);
 
 	if (reply == QMessageBox::Yes)
@@ -168,7 +164,7 @@
                       printf("Question: %s\n", alertstring);
                       return 0;
               }
-          reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP("Question")),
+          reply = QMessageBox::question(qtLastRegisteredDialog(), QObject::tr("Question"),
                                     QString::fromUtf8(alertstring),
                                     QMessageBox::Yes | QMessageBox::No );
           if(reply==QMessageBox::Yes) return 1;
@@ -189,14 +185,14 @@
 
 	QMessageBox box(qtLastRegisteredDialog());
 
-	box.setWindowTitle(QString::fromUtf8(QT_TR_NOOP("Question ?")));
+	box.setWindowTitle(QObject::tr("Question?"));
 	box.addButton(QString::fromUtf8(choice1),QMessageBox::YesRole);
 	box.addButton(QString::fromUtf8(choice2),QMessageBox::NoRole);
 
 	if (title)
 		box.setText(QString::fromUtf8(title));
 	else
-		box.setText(QString::fromUtf8(QT_TR_NOOP("Question")));
+		box.setText(QObject::tr("Question"));
 
 	box.setIcon(QMessageBox::Question);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -24,6 +24,7 @@
  ***************************************************************************/
 
 #include <vector>
+#include <QtCore/QObject>
 
 #include "Q_mainfilter.h"
 #include "ADM_default.h"
@@ -493,7 +494,7 @@
         conf = videofilters[itag].conf;
         if (videofilters[itag].tag == VF_PARTIAL_FILTER)	// cannot recurse
         {
-            GUI_Error_HIG (QT_TR_NOOP("The filter is already partial"), NULL);
+            GUI_Error_HIG (QObject::tr("The filter is already partial").toUtf8().constData(), NULL);
             return;
         }
 
@@ -530,7 +531,7 @@
 
 	closePreview();
 
-	GUI_FileSelRead (QT_TR_NOOP("Load set of filters"), filterLoadXml);
+	GUI_FileSelRead (QObject::tr("Load set of filters").toUtf8().constData(), filterLoadXml);
 
 	getFirstVideoFilter ();
 	buildActiveFilterList ();
@@ -544,10 +545,10 @@
 {
 	if (nb_active_filter < 2)
 	{
-		GUI_Error_HIG (QT_TR_NOOP("Nothing to save"), NULL);
+		GUI_Error_HIG (QObject::tr("Nothing to save").toUtf8().constData(), NULL);
 	}
 	else
-		GUI_FileSelWrite(QT_TR_NOOP("Save set of filters"), filterSaveXml);
+		GUI_FileSelWrite(QObject::tr("Save set of filters").toUtf8().constData(), filterSaveXml);
 }
 
 /**
@@ -709,12 +710,12 @@
          uint32_t fmax=previous->getInfo()->nb_frames;
          if(fmax) fmax--;
          
-         diaElemUInteger  start(PX(_start),QT_TR_NOOP("Partial Start Frame:"),0,fmax);
-         diaElemUInteger  end(PX(_end),QT_TR_NOOP("Partial End Frame:"),0,fmax);
-         diaElemButton    button(QT_TR_NOOP("Configure child"), partialCb,params);
+         diaElemUInteger  start(PX(_start),QObject::tr("Partial Start Frame:").toUtf8().constData(),0,fmax);
+         diaElemUInteger  end(PX(_end),QObject::tr("Partial End Frame:").toUtf8().constData(),0,fmax);
+         diaElemButton    button(QObject::tr("Configure child").toUtf8().constData(), partialCb,params);
          
          diaElem *tabs[]={&start,&end,&button};
-        return diaFactoryRun(QT_TR_NOOP("Partial Video Filter"),3,tabs);
+        return diaFactoryRun(QObject::tr("Partial Video Filter").toUtf8().constData(),3,tabs);
 }
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -12,6 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
+#undef QT_TR_NOOP
 
 #include <QtCore/QUrl>
 #include <QtCore/QDir>
@@ -381,11 +382,11 @@
 */
 void MainWindow::buttonPressed(void)
 {
-	// Receveid a key press Event, look into table..
-    QObject *obj=sender();
-    if(!obj) return;
-    QString me(obj->objectName());
-    Action action=searchTranslationTable(qPrintable(me));
+	// Receveid a key press Event, look into table..
+    QObject *obj=sender();
+    if(!obj) return;
+    QString me(obj->objectName());
+    Action action=searchTranslationTable(qPrintable(me));
 
 	if(action!=ACT_DUMMY)
 		HandleAction (action);
@@ -1013,9 +1014,8 @@
 	default:c='?';break;
 
 	}
-	sprintf(string,QT_TR_NOOP("%c (%02d)"),c,qp);
-	WIDGET(label_8)->setText(QString::fromUtf8(string));
 
+	WIDGET(label_8)->setText(MainWindow::tr("%1 (%2)").arg(c).arg(qp, 2, 10, QLatin1Char('0')));
 }
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_glypheditor.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_glypheditor.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_ocr/Q_glypheditor.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -148,7 +148,7 @@
 			} 
 		}
 
-		GUI_Error_HIG(QT_TR_NOOP("Head reached"), QT_TR_NOOP("No more glyphs"));
+		GUI_Error_HIG(GlyphEditorWindow::tr("Head reached").toUtf8().constData(), GlyphEditorWindow::tr("No more glyphs").toUtf8().constData());
 		break;
 	}
 }
@@ -167,7 +167,7 @@
 		}
 		else 
 		{
-			GUI_Error_HIG(QT_TR_NOOP("End reached"), QT_TR_NOOP("No more glyphs"));
+			GUI_Error_HIG(GlyphEditorWindow::tr("End reached").toUtf8().constData(), GlyphEditorWindow::tr("No more glyphs").toUtf8().constData());
 			break;
 		}
 	}
@@ -182,10 +182,10 @@
 void GlyphEditorWindow::findButton_clicked(bool checked)
 {
 	char *tomatch = NULL;
-	diaElemText txt(&tomatch, QT_TR_NOOP("String"), NULL);
+	diaElemText txt(&tomatch, GlyphEditorWindow::tr("String").toUtf8().constData(), NULL);
 	diaElem *elems[] = {&txt};
 
-	if (!diaFactoryRun(QT_TR_NOOP("Search string"), 1, elems))
+	if (!diaFactoryRun(GlyphEditorWindow::tr("Search string").toUtf8().constData(), 1, elems))
 		return;
 
 	printf("Searched string <%s>\n", tomatch);
@@ -209,7 +209,7 @@
 	delete [] tomatch;
 
 	if (!currentGlyph->next)
-		GUI_Error_HIG(QT_TR_NOOP("End reached"), QT_TR_NOOP("No more glyphs"));
+		GUI_Error_HIG(GlyphEditorWindow::tr("End reached").toUtf8().constData(), GlyphEditorWindow::tr("No more glyphs").toUtf8().constData());
 }
 
 void GlyphEditorWindow::deleteButton_clicked(bool checked)
@@ -245,7 +245,7 @@
 	uint8_t ret = 0;
 
 	// First select a file
-	GUI_FileSelRead(QT_TR_NOOP("Select GlyphFile to edit"), &glyphName);
+	GUI_FileSelRead(GlyphEditorWindow::tr("Select GlyphFile to edit").toUtf8().constData(), &glyphName);
 
 	if (!glyphName)
 		return 0;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2010-06-06 22:44:56 UTC (rev 6321)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2010-06-06 23:04:21 UTC (rev 6322)
@@ -153,21 +153,21 @@
 	switch (paintEngineType)
 	{
 		case QPaintEngine::X11:
-			return QT_TR_NOOP("Qt (X11)");
+			return "Qt (X11)";
 		case QPaintEngine::Windows:
-			return QT_TR_NOOP("Qt (MS Windows GDI)");
+			return "Qt (MS Windows GDI)";
 		case QPaintEngine::CoreGraphics:
-			return QT_TR_NOOP("Qt (Mac OS X Quartz 2D)");
+			return "Qt (Mac OS X Quartz 2D)";
 		case QPaintEngine::QuickDraw:
-			return QT_TR_NOOP("Qt (Mac OS X QuickDraw)");
+			return "Qt (Mac OS X QuickDraw)";
 		case QPaintEngine::OpenGL:
-			return QT_TR_NOOP("Qt (OpenGL)");
+			return "Qt (OpenGL)";
 #if QT_VERSION >= 0x040400
 		case QPaintEngine::Direct3D:
-			return QT_TR_NOOP("Qt (MS Windows Direct3D)");
+			return "Qt (MS Windows Direct3D)";
 #endif
 		case QPaintEngine::Raster:
-			return QT_TR_NOOP("Qt (Default Raster)");
+			return "Qt";
 	}
 
 	return "Qt";



From gruntster at mail.berlios.de  Mon Jun  7 01:07:46 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 01:07:46 +0200
Subject: [Avidemux-svn-commit] r6323 - in
	branches/avidemux_2.5_branch_gruntster/plugins:
	ADM_videoEncoder/ADM_vidEnc_x264/qt4
	ADM_videoEncoder/ADM_vidEnc_xvid/qt4
	ADM_videoFilters/AvisynthResize/qt4
	ADM_videoFilters/MplayerResize/qt4
Message-ID: <201006062307.o56N7kY2021800@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 01:07:37 +0200 (Mon, 07 Jun 2010)
New Revision: 6323

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.cpp
Log:
[i18n] let Qt plugins take care of themselves for i18n

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -163,8 +163,8 @@
 		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_SYSTEM);
 
 	ui.configurationComboBox->clear();
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<default>"), PLUGIN_CONFIG_DEFAULT);
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<custom>"), PLUGIN_CONFIG_CUSTOM);
+	ui.configurationComboBox->addItem(tr("<default>"), PLUGIN_CONFIG_DEFAULT);
+	ui.configurationComboBox->addItem(tr("<custom>"), PLUGIN_CONFIG_CUSTOM);
 
 	QMap<QString, int>::const_iterator mapIterator = configs.constBegin();
 
@@ -291,7 +291,7 @@
 
 	ADM_mkdir(configDirectory);
 
-	QString configFileName = QFileDialog::getSaveFileName(this, QT_TR_NOOP("Save As"), configDirectory, QT_TR_NOOP("x264 Configuration File (*.xml)"));
+	QString configFileName = QFileDialog::getSaveFileName(this, tr("Save As"), configDirectory, tr("x264 Configuration File (*.xml)"));
 
 	if (!configFileName.isNull())
 	{
@@ -326,7 +326,7 @@
 
 	delete [] configDir;
 
-	if (GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected configuration?")) && configFile.exists())
+	if (GUI_Question(tr("Are you sure you wish to delete the selected configuration?").toUtf8().constData()) && configFile.exists())
 	{
 		disableGenericSlots = true;
 		configFile.remove();
@@ -344,26 +344,26 @@
 	switch (index)
 	{
 		case 0:
-			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Target Bitrate:"));
-			ui.targetRateControlLabel2->setText(QT_TR_NOOP("kbit/s"));
+			ui.targetRateControlLabel1->setText(tr("Target Bitrate:"));
+			ui.targetRateControlLabel2->setText(tr("kbit/s"));
 			ui.targetRateControlSpinBox->setValue(lastBitrate);
 			break;
 		case 1: // Constant Quality - 1 pass
-			ui.quantiserLabel2->setText(QT_TR_NOOP("Quantiser:"));
+			ui.quantiserLabel2->setText(tr("Quantiser:"));
 			enable = true;
 			break;
 		case 2: // Average Quantiser - 1 pass
-			ui.quantiserLabel2->setText(QT_TR_NOOP("Quality:"));
+			ui.quantiserLabel2->setText(tr("Quality:"));
 			enable = true;
 			break;
 		case 3: // Video Size - 2 pass
-			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Target Video Size:"));
-			ui.targetRateControlLabel2->setText(QT_TR_NOOP("MB"));
+			ui.targetRateControlLabel1->setText(tr("Target Video Size:"));
+			ui.targetRateControlLabel2->setText(tr("MB"));
 			ui.targetRateControlSpinBox->setValue(lastVideoSize);
 			break;
 		case 4: // Average Bitrate - 2 pass
-			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Average Bitrate:"));
-			ui.targetRateControlLabel2->setText(QT_TR_NOOP("kbit/s"));
+			ui.targetRateControlLabel1->setText(tr("Average Bitrate:"));
+			ui.targetRateControlLabel2->setText(tr("kbit/s"));
 			ui.targetRateControlSpinBox->setValue(lastBitrate);
 			break;
 	}
@@ -401,7 +401,7 @@
 {
 	if (!disableGenericSlots && checked && !ui.aqVarianceCheckBox->isChecked())
 	{
-		if (GUI_Question(QT_TR_NOOP("Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Variance Adaptive Quantisation will automatically be enabled.\n\nDo you wish to continue?")))
+		if (GUI_Question(tr("Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Variance Adaptive Quantisation will automatically be enabled.\n\nDo you wish to continue?").toUtf8().constData()))
 			ui.aqVarianceCheckBox->setChecked(true);
 		else
 			ui.mbTreeCheckBox->setChecked(false);
@@ -448,7 +448,7 @@
 {
 	if (!disableGenericSlots && !checked && ui.trellisCheckBox->isChecked())
 	{
-		if (GUI_Question(QT_TR_NOOP("Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n\n Do you wish to continue?")))
+		if (GUI_Question(tr("Trellis optimisation isn't possible without CABAC coding enabled.  Trellis optimisation will automatically be disabled.\n\nDo you wish to continue?").toUtf8().constData()))
 			ui.trellisCheckBox->setChecked(false);
 		else
 			ui.cabacCheckBox->setChecked(true);
@@ -460,7 +460,7 @@
 {
 	if (!disableGenericSlots && checked && !ui.cabacCheckBox->isChecked())
 	{
-		if (GUI_Question(QT_TR_NOOP("Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n\nDo you wish to continue?")))
+		if (GUI_Question(tr("Trellis optimisation requires CABAC coding to be enabled.  CABAC coding will automatically be enabled.\n\nDo you wish to continue?").toUtf8().constData()))
 			ui.cabacCheckBox->setChecked(true);
 		else
 			ui.trellisCheckBox->setChecked(false);
@@ -483,7 +483,7 @@
 {
 	if (!disableGenericSlots && !checked && ui.mbTreeCheckBox->isChecked())
 	{
-		if (GUI_Question(QT_TR_NOOP("Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Macroblock-Tree optimisation will automatically be disabled.\n\nDo you wish to continue?")))
+		if (GUI_Question(tr("Macroblock-Tree optimisation requires Variance Adaptive Quantisation to be enabled.  Macroblock-Tree optimisation will automatically be disabled.\n\nDo you wish to continue?").toUtf8().constData()))
 			ui.mbTreeCheckBox->setChecked(false);
 		else
 			ui.aqVarianceCheckBox->setChecked(true);
@@ -507,7 +507,7 @@
 
 void x264ConfigDialog::zoneDeleteButton_pressed()
 {
-	if (ui.zoneTableView->currentIndex().row() >= 0 && GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected zone?")))
+	if (ui.zoneTableView->currentIndex().row() >= 0 && GUI_Question(tr("Are you sure you wish to delete the selected zone?").toUtf8().constData()))
 	{
 		zoneTableModel.removeRows(ui.zoneTableView->currentIndex().row(), 1, QModelIndex());
 		ui.configurationComboBox->setCurrentIndex(1);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264CustomMatrixDialog.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -46,7 +46,7 @@
 	uint8_t inter4x4Luma[16], inter4x4Chroma[16];
 	uint8_t intra8x8Luma[64], inter8x8Luma[64];
 
-	if (FileSel_SelectRead(QT_TR_NOOP("Select Matrix File"), cqmFileName, 1023, NULL) && ADM_fileExist(cqmFileName))
+	if (FileSel_SelectRead(tr("Select Matrix File").toUtf8().constData(), cqmFileName, 1023, NULL) && ADM_fileExist(cqmFileName))
 	{
 		if (x264_cqm_parse_file(cqmFileName, intra4x4Luma, intra4x4Chroma, inter4x4Luma, inter4x4Chroma, intra8x8Luma, inter8x8Luma) == 0)
 		{
@@ -58,7 +58,7 @@
 			setInter8x8Luma(inter8x8Luma);
 		}
 		else
-			GUI_Error_HIG(QT_TR_NOOP("Read Error"), QT_TR_NOOP("Error reading custom matrix file."));
+			GUI_Error_HIG(tr("Read Error").toUtf8().constData(), tr("Error reading custom matrix file.").toUtf8().constData());
 	}
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableDelegate.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -48,8 +48,8 @@
 		case 2:
 			comboBox = new QComboBox(parent);
 
-			comboBox->addItem(QT_TR_NOOP("Quantiser"));
-			comboBox->addItem(QT_TR_NOOP("Bitrate Factor"));
+			comboBox->addItem(tr("Quantiser"));
+			comboBox->addItem(tr("Bitrate Factor"));
 
 			return comboBox;
 		case 3:

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ZoneTableModel.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -73,9 +73,9 @@
 				switch (zoneOptions->getZoneMode())
 				{
 					case ZONE_MODE_QUANTISER:
-						return QT_TR_NOOP("Quantiser");
+						return tr("Quantiser");
 					case ZONE_MODE_BITRATE_FACTOR:
-						return QT_TR_NOOP("Bitrate Factor");
+						return tr("Bitrate Factor");
 				}
 			}
 			else if (role == Qt::EditRole)
@@ -107,13 +107,13 @@
 		switch (section)
 		{
 			case 0:
-				return QT_TR_NOOP("Frame Start");    
+				return tr("Frame Start");    
 			case 1:
-				return QT_TR_NOOP("Frame End");
+				return tr("Frame End");
 			case 2:
-				return QT_TR_NOOP("Mode");
+				return tr("Mode");
 			case 3:
-				return QT_TR_NOOP("Value");
+				return tr("Value");
 			default:
 				return QVariant();
 		}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidConfigDialog.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -115,8 +115,8 @@
 		configs.insert(QFileInfo(list[item]).completeBaseName(), PLUGIN_CONFIG_SYSTEM);
 
 	ui.configurationComboBox->clear();
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<default>"), PLUGIN_CONFIG_DEFAULT);
-	ui.configurationComboBox->addItem(QT_TR_NOOP("<custom>"), PLUGIN_CONFIG_CUSTOM);
+	ui.configurationComboBox->addItem(tr("<default>"), PLUGIN_CONFIG_DEFAULT);
+	ui.configurationComboBox->addItem(tr("<custom>"), PLUGIN_CONFIG_CUSTOM);
 
 	QMap<QString, int>::const_iterator mapIterator = configs.constBegin();
 
@@ -213,7 +213,7 @@
 
 	ADM_mkdir(configDirectory);
 
-	QString configFileName = QFileDialog::getSaveFileName(this, QT_TR_NOOP("Save As"), configDirectory, QT_TR_NOOP("Xvid Configuration File (*.xml)"));
+	QString configFileName = QFileDialog::getSaveFileName(this, tr("Save As"), configDirectory, tr("Xvid Configuration File (*.xml)"));
 
 	if (!configFileName.isNull())
 	{
@@ -248,7 +248,7 @@
 
 	delete [] configDir;
 
-	if (GUI_Question(QT_TR_NOOP("Are you sure you wish to delete the selected configuration?")) && configFile.exists())
+	if (GUI_Question(tr("Are you sure you wish to delete the selected configuration?").toUtf8().constData()) && configFile.exists())
 	{
 		disableGenericSlots = true;
 		configFile.remove();
@@ -268,28 +268,28 @@
 		case 0: // Constant Bitrate - 1 pass
 			ui.singlePassTab->setEnabled(true);
 			ui.twoPassTab->setEnabled(false);
-			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Target Bitrate:"));
-			ui.targetRateControlLabel2->setText(QT_TR_NOOP("kbit/s"));
+			ui.targetRateControlLabel1->setText(tr("Target Bitrate:"));
+			ui.targetRateControlLabel2->setText(tr("kbit/s"));
 			ui.targetRateControlSpinBox->setValue(lastBitrate);
 			break;
 		case 1: // Constant Quantiser - 1 pass
 			ui.singlePassTab->setEnabled(true);
 			ui.twoPassTab->setEnabled(false);
-			ui.quantiserLabel2->setText(QT_TR_NOOP("Quantiser:"));
+			ui.quantiserLabel2->setText(tr("Quantiser:"));
 			enable = true;
 			break;
 		case 2: // Video Size - 2 pass
 			ui.singlePassTab->setEnabled(false);
 			ui.twoPassTab->setEnabled(true);
-			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Target Video Size:"));
-			ui.targetRateControlLabel2->setText(QT_TR_NOOP("MB"));
+			ui.targetRateControlLabel1->setText(tr("Target Video Size:"));
+			ui.targetRateControlLabel2->setText(tr("MB"));
 			ui.targetRateControlSpinBox->setValue(lastVideoSize);
 			break;
 		case 3: // Average Bitrate - 2 pass
 			ui.singlePassTab->setEnabled(false);
 			ui.twoPassTab->setEnabled(true);
-			ui.targetRateControlLabel1->setText(QT_TR_NOOP("Average Bitrate:"));
-			ui.targetRateControlLabel2->setText(QT_TR_NOOP("kbit/s"));
+			ui.targetRateControlLabel1->setText(tr("Average Bitrate:"));
+			ui.targetRateControlLabel2->setText(tr("kbit/s"));
 			ui.targetRateControlSpinBox->setValue(lastBitrate);
 			break;
 	}

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_xvid/qt4/xvidCustomMatrixDialog.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -38,7 +38,7 @@
 	char cqmFileName[1024];
 	unsigned char intra8x8Luma[64], inter8x8Luma[64];
 
-	if (FileSel_SelectRead(QT_TR_NOOP("Select Matrix File"), cqmFileName, 1023, NULL) && ADM_fileExist(cqmFileName))
+	if (FileSel_SelectRead(tr("Select Matrix File").toUtf8().constData(), cqmFileName, 1023, NULL) && ADM_fileExist(cqmFileName))
 	{
 		if (parseCqmFile(cqmFileName, intra8x8Luma, inter8x8Luma) == 0)
 		{
@@ -46,7 +46,7 @@
 			setInter8x8Luma(inter8x8Luma);
 		}
 		else
-			GUI_Error_HIG(QT_TR_NOOP("Read Error"), QT_TR_NOOP("Error reading custom matrix file."));
+			GUI_Error_HIG(tr("Read Error").toUtf8().constData(), tr("Error reading custom matrix file.").toUtf8().constData());
 	}
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/AvisynthResize/qt4/Q_resize.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -243,7 +243,7 @@
 void resizeWindow::okButtonClicked()
 {
 	if (ui.spinBoxWidth->value() & 1 || ui.spinBoxHeight->value() & 1)
-		GUI_Error_HIG(QT_TR_NOOP("Width and height cannot be odd"), NULL);
+		GUI_Error_HIG(tr("Width and height cannot be odd").toUtf8().constData(), NULL);
 	else
 		accept();
 }

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.cpp	2010-06-06 23:04:21 UTC (rev 6322)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/MplayerResize/qt4/Q_resize.cpp	2010-06-06 23:07:37 UTC (rev 6323)
@@ -243,7 +243,7 @@
 void resizeWindow::okButtonClicked()
 {
 	if (ui.spinBoxWidth->value() & 1 || ui.spinBoxHeight->value() & 1)
-		GUI_Error_HIG(QT_TR_NOOP("Width and height cannot be odd"), NULL);
+		GUI_Error_HIG(tr("Width and height cannot be odd").toUtf8().constData(), NULL);
 	else
 		accept();
 }



From gruntster at mail.berlios.de  Mon Jun  7 01:12:44 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 01:12:44 +0200
Subject: [Avidemux-svn-commit] r6324 - in
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters:
	ASharp ChromaShift
Message-ID: <201006062312.o56NCi9w014928@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 01:12:37 +0200 (Mon, 07 Jun 2010)
New Revision: 6324

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp
Log:
[i18n] disable Qt i18n functions for asharp and chroma shift plugins since they're UI neutral

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp	2010-06-06 23:07:37 UTC (rev 6323)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ASharp/ADM_vidAsharp.cpp	2010-06-06 23:12:37 UTC (rev 6324)
@@ -23,10 +23,11 @@
         Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 */
 
-#include "ADM_plugin_translate.h"
 #include "DIA_flyDialog.h"
 #include "ADM_videoFilterDynamic.h"
 #include "ADM_vidASharp_param.h"
+#undef QT_TR_NOOP
+#include "ADM_plugin_translate.h"
 
 class ASharp : public AVDMGenericVideoStream
 {

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp	2010-06-06 23:07:37 UTC (rev 6323)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/ChromaShift/ADM_vidChromaShift.cpp	2010-06-06 23:12:37 UTC (rev 6324)
@@ -17,10 +17,11 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_plugin_translate.h"
 #include "DIA_flyDialog.h"
 #include "ADM_videoFilterDynamic.h"
 #include "ADM_vidChromaShift.h"
+#undef QT_TR_NOOP
+#include "ADM_plugin_translate.h"
 
 static FILTER_PARAM cshiftParam={2,{"u","v"}};
 /*



From gruntster at mail.berlios.de  Mon Jun  7 01:25:51 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 01:25:51 +0200
Subject: [Avidemux-svn-commit] r6325 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <201006062325.o56NPpAV031095@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 01:25:46 +0200 (Mon, 07 Jun 2010)
New Revision: 6325

Modified:
   branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt
Log:
[i18n] exclude UI strings from duplicate checking and skip Qt aware source files from filtering

Modified: branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt	2010-06-06 23:12:37 UTC (rev 6324)
+++ branches/avidemux_2.5_branch_gruntster/po/qt_filter_context.xslt	2010-06-06 23:25:46 UTC (rev 6325)
@@ -1,6 +1,8 @@
 <?xml version="1.0" encoding="utf-8" ?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
-  <xsl:output method="xml" encoding="utf-8" indent="yes" doctype-public=""/>
+  <xsl:output method="xml" encoding="utf-8" indent="yes"/>
+  <xsl:key name="messageKey" match="source[not(../location[substring(@filename, string-length(@filename) - 2) = '.ui' or contains(@filename, '/qt4/') or contains(@filename, '/ADM_QT4/')]) and not(../translation/@type = 'obsolete')]" use="."/>
+
   <xsl:template match="TS">
     <TS>
       <xsl:copy-of select="@*"/>
@@ -11,22 +13,20 @@
   </xsl:template>
 
   <xsl:template name="processContext">
-    <xsl:variable name="hasUiNodes" select="count(message/location[substring(@filename, string-length(@filename) - 2) = '.ui']) > 0"/>
-
     <context>
-      <xsl:for-each select="name">
-        <name>
-          <xsl:if test="$hasUiNodes = 'true'">
-            <xsl:value-of select="../name"/>
-          </xsl:if>
-        </name>
-      </xsl:for-each>
-
-      <xsl:for-each select="message[not(source = preceding::message/source) or $hasUiNodes = 'true']">
-        <message>
+      <xsl:choose>
+        <xsl:when test="message/location[substring(@filename, string-length(@filename) - 2) = '.ui' or contains(@filename, '/qt4/') or contains(@filename, '/ADM_QT4/')]">
           <xsl:copy-of select="*"/>
-        </message>
-      </xsl:for-each>
+        </xsl:when>
+        <xsl:otherwise>
+          <name/>
+          <xsl:for-each select="message/source[generate-id() = generate-id(key('messageKey', .))]">
+            <message>
+              <xsl:copy-of select="../*"/>
+            </message>
+          </xsl:for-each>
+        </xsl:otherwise>
+      </xsl:choose>
     </context>
   </xsl:template>
 </xsl:stylesheet>



From mean at mail.berlios.de  Mon Jun  7 07:44:51 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 07:44:51 +0200
Subject: [Avidemux-svn-commit] r6326 - in branches/avidemux_2.6_branch_mean:
	autononreg/py/avidemux avidemux/common
	avidemux/common/ADM_script2/py
Message-ID: <201006070544.o575ipJ5003399@sheep.berlios.de>

Author: mean
Date: 2010-06-07 07:44:49 +0200 (Mon, 07 Jun 2010)
New Revision: 6326

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyBmp.py
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyJpeg.py
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
Log:
[py] Bind saveJpeg, saveBmp + cleanup return type

Added: branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyBmp.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyBmp.py	2010-06-06 23:25:46 UTC (rev 6325)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyBmp.py	2010-06-07 05:44:49 UTC (rev 6326)
@@ -0,0 +1,9 @@
+adm=Avidemux()
+gui=Gui()
+if(0==adm.loadVideo("/work/samples/avi/2mn.avi")):
+   throw("cannot load file")
+#adm.audioCodec("Lame",128)
+if(0==adm.saveBmp("/tmp/foo.bmp")):
+   throw("cannot save bmp")
+gui.displayInfo("Ok","Done")
+

Added: branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyJpeg.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyJpeg.py	2010-06-06 23:25:46 UTC (rev 6325)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyJpeg.py	2010-06-07 05:44:49 UTC (rev 6326)
@@ -0,0 +1,9 @@
+adm=Avidemux()
+gui=Gui()
+if(0==adm.loadVideo("/work/samples/avi/2mn.avi")):
+   throw("cannot load file")
+#adm.audioCodec("Lame",128)
+if(0==adm.saveJpeg("/tmp/foo.jpeg")):
+   throw("cannot save jpeg")
+gui.displayInfo("Ok","Done")
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-06 23:25:46 UTC (rev 6325)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-07 05:44:49 UTC (rev 6326)
@@ -1,6 +1,7 @@
 #           name    cookie id
 /* CLASS */ pyAdm : void : ADM_PYID_AVIDEMUX
 #              cname:pyname
+# Basic action load, handle seg, getInfo
 /* METHOD */ int scriptLoadVideo:loadVideo          (str ) 
 /* METHOD */ int scriptClearSegments:clearSegments  (void) 
 /* METHOD */ int scriptAppendVideo:appendVideo      (str ) 
@@ -16,15 +17,23 @@
 #
 #
 #              cname:pyname
+#  Codec, container
 /* METHOD */ int scriptSetVideoCodec:videoCodec(str,couples) 
 /* METHOD */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
 /* METHOD */ int scriptSetContainer:setContainer(str,couples) 
 /* METHOD */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
 #
-#  Audio
+#  Save audio, video, images
 #
 /* METHOD */ int A_audioSave:saveAudio(str) 
+/* METHOD */ int A_Save:save(str) 
+/* METHOD */ int A_saveJpg:saveJpeg(str) 
+/* METHOD */ int A_saveImg:saveBmp(str) 
 #
+#
+# Seek
+#/* METHOD */ int A_saveImg:saveBmp(str) 
+#
 #       Variables
 #
 /* ATTRIBUTES */ double markerA:scriptSetMarkerA,scriptGetMarkerA

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-06 23:25:46 UTC (rev 6325)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm_gen.cpp	2010-06-07 05:44:49 UTC (rev 6326)
@@ -12,6 +12,16 @@
   int r=  scriptSetAudioCodec(p0,p1,p2); 
   return tp_number(r);
 }
+// saveBmp -> int A_saveImg (str ) 
+static tp_obj zzpy_saveBmp(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
+  const char *p0= pm.asString();
+  int r=  A_saveImg(p0); 
+  return tp_number(r);
+}
 // addVideoFilter -> int scriptAddVideoFilter (str couples ) 
 static tp_obj zzpy_addVideoFilter(TP)
  {
@@ -64,6 +74,16 @@
   int r=  scriptSetPostProc(p0,p1,p2); 
   return tp_number(r);
 }
+// save -> int A_Save (str ) 
+static tp_obj zzpy_save(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
+  const char *p0= pm.asString();
+  int r=  A_Save(p0); 
+  return tp_number(r);
+}
 // appendVideo -> int scriptAppendVideo (str  ) 
 static tp_obj zzpy_appendVideo(TP)
  {
@@ -145,6 +165,16 @@
   int r=  scriptClearVideoFilters(); 
   return tp_number(r);
 }
+// saveJpeg -> int A_saveJpg (str ) 
+static tp_obj zzpy_saveJpeg(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_AVIDEMUX);
+  const char *p0= pm.asString();
+  int r=  A_saveJpg(p0); 
+  return tp_number(r);
+}
 // setContainer -> int scriptSetContainer (str couples ) 
 static tp_obj zzpy_setContainer(TP)
  {
@@ -201,6 +231,10 @@
   {
      return tp_method(vm,self,zzpy_audioCodec);
   }
+  if (!strcmp(key, "saveBmp"))
+  {
+     return tp_method(vm,self,zzpy_saveBmp);
+  }
   if (!strcmp(key, "addVideoFilter"))
   {
      return tp_method(vm,self,zzpy_addVideoFilter);
@@ -221,6 +255,10 @@
   {
      return tp_method(vm,self,zzpy_setPostProc);
   }
+  if (!strcmp(key, "save"))
+  {
+     return tp_method(vm,self,zzpy_save);
+  }
   if (!strcmp(key, "appendVideo"))
   {
      return tp_method(vm,self,zzpy_appendVideo);
@@ -253,6 +291,10 @@
   {
      return tp_method(vm,self,zzpy_clearVideoFilters);
   }
+  if (!strcmp(key, "saveJpeg"))
+  {
+     return tp_method(vm,self,zzpy_saveJpeg);
+  }
   if (!strcmp(key, "setContainer"))
   {
      return tp_method(vm,self,zzpy_setContainer);
@@ -311,11 +353,13 @@
 static tp_obj zzpy__pyAdm_help(TP)
  {
   jsLog("audioCodec(str,int,couples)");
+  jsLog("saveBmp(str)");
   jsLog("addVideoFilter(str,couples)");
   jsLog("loadVideo(str )");
   jsLog("clearSegments(void)");
   jsLog("getHeight(void)");
   jsLog("setPostProc(int ,int , int )");
+  jsLog("save(str)");
   jsLog("appendVideo(str )");
   jsLog("audioMixer(str )");
   jsLog("getFps1000(void)");
@@ -324,6 +368,7 @@
   jsLog("getWidth(void)");
   jsLog("addSegment(int ,float , float )");
   jsLog("clearVideoFilters(void)");
+  jsLog("saveJpeg(str)");
   jsLog("setContainer(str,couples)");
   jsLog("audioReset(void)");
   jsLog("getVideoCodec(void)");

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2010-06-06 23:25:46 UTC (rev 6325)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2010-06-07 05:44:49 UTC (rev 6326)
@@ -33,16 +33,16 @@
 void 			A_saveAVI		(char *name);
 void 			A_playAvi		(void);
 
-void A_saveAudioCopy (const char *name);
+int  A_saveAudioCopy (const char *name);
 int  A_saveJpg (const char *name);
-void A_saveBunchJpg(const char *name);
-void A_saveImg (const char *name);
-uint8_t ADM_saveRaw (const char *name);
+int  A_saveBunchJpg(const char *name);
+int  A_saveImg (const char *name);
+int  ADM_saveRaw (const char *name);
 void A_saveWorkbench (const char *name);
 void A_savePyProject (const char *name);
 int  A_audioSave(const char *name);
 int  A_SaveWrapper(const char *name);
-void A_saveAudioProcessed (const char *name);
-int     A_Save(const char *name);
+int  A_saveAudioProcessed (const char *name);
+int  A_Save(const char *name);
 
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-06 23:25:46 UTC (rev 6325)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-07 05:44:49 UTC (rev 6326)
@@ -76,10 +76,10 @@
       break;
 
     case ACT_SaveBunchJPG:
-      GUI_FileSelWrite (QT_TR_NOOP("Select JPEG Sequence to Save"), A_saveBunchJpg);
+      GUI_FileSelWrite (QT_TR_NOOP("Select JPEG Sequence to Save"), (SELFILE_CB *)A_saveBunchJpg);
     	break;
     case ACT_SaveImg:
-      GUI_FileSelWrite (QT_TR_NOOP("Select BMP to Save"), A_saveImg);
+      GUI_FileSelWrite (QT_TR_NOOP("Select BMP to Save"), (SELFILE_CB *)A_saveImg);
       //GUI_FileSelWrite ("Select Jpg to save ", A_saveJpg);
       break;
     case ACT_SaveJPG :
@@ -128,7 +128,7 @@
     \brief Save current stream (generally avi...)
      in decoded mode (assuming MP3)
 */
-void A_saveAudioProcessed (const char *name)
+int A_saveAudioProcessed (const char *name)
 {
 #if 0
 // debug audio seek
@@ -151,14 +151,14 @@
   if (!(out = ADM_fopen (name, "wb")))
     {
       GUI_Error_HIG (QT_TR_NOOP("File error"), QT_TR_NOOP("Cannot open \"%s\" for writing."), name);
-      return;
+      return false;
     }
 
   outbuffer = (uint8_t *) ADM_alloc (2 * OUTCHUNK);	// 1Meg cache;
   if (!outbuffer)
     {
       GUI_Error_HIG (QT_TR_NOOP("Memory Error"), NULL);
-      return;
+      return false;
     }
 
 
@@ -186,7 +186,7 @@
 		{
 			fclose(out);
 			ADM_dealloc(outbuffer);
-			return;
+			return false;
 		}
 
     	DIA_working *work=new DIA_working(QT_TR_NOOP("Saving audio"));
@@ -249,14 +249,15 @@
 //  currentaudiostream->endDecompress ();
   printf ("AudioSave: actually written %u\n", written);
   printf ("Audiosave: target sample:%llu, got :%llu\n",sampleTarget,sampleCurrent);
-
+#else
+  return 0;
 #endif
 }
 /**
         \fn A_saveAudioCopy
         \brief Save current stream (generally avi...)     in raw mode
 */
-void A_saveAudioCopy (const char *name)
+int A_saveAudioCopy (const char *name)
 { 
   uint32_t written, max;
   uint64_t dts;
@@ -269,12 +270,12 @@
   if(false==video_body->getAudioStream( &stream)) 
     {
         printf("[A_audioSave] No stream\n");
-        return ;
+        return false;
     }
 
 
   out = ADM_fopen (name, "wb");
-  if (!out) return;
+  if (!out) return false;
 
   work=createWorking(QT_TR_NOOP("Saving audio"));
 
@@ -334,8 +335,8 @@
   fclose (out);
   delete work;
   delete[] buffer;
-  printf ("\n wanted %"LLU" samples, goto %"LLU" samples, written %"LU" bytes\n", tgt_sample,cur_sample, written);
-
+  ADM_info ("\n wanted %"LLU" samples, goto %"LLU" samples, written %"LU" bytes\n", tgt_sample,cur_sample, written);
+  return true;
 }
 
 
@@ -367,7 +368,7 @@
       \brief Save the selection  as a bunch of jpeg 95% qual
 
 */
-void A_saveBunchJpg(const char *name)
+int A_saveBunchJpg(const char *name)
 {
   ADMImage *src=NULL;
   uint32_t curImg;
@@ -379,7 +380,7 @@
         if(frameStart>frameEnd)
                 {
                   GUI_Error_HIG(QT_TR_NOOP("Mark A > B"), QT_TR_NOOP("Set your markers correctly."));
-                        return;
+                        return 0;
                 }
         // Split name into base + extension
         ADM_PathSplit(name,&baseName,&ext);
@@ -409,7 +410,7 @@
             GUI_Error_HIG(QT_TR_NOOP("Error"),QT_TR_NOOP( "Could not save all images."));
         delete working	;
         delete src;
-        return ;
+        return success;
 
 
 }
@@ -417,17 +418,20 @@
       \fn A_saveImg
       \brief Save current displayed image as a BMP file
 */
-void A_saveImg (const char *name)
+int A_saveImg (const char *name)
 {
   ADMImage *image=admPreview::getBuffer();
     if(!image)
     {
-        printf("[SaveJpeg] No image\n");
-        return ;
+        ADM_warning("[SaveJpeg] No image\n");
+        return 0;
 
     }
-  if(!image->saveAsBmp(name))
+    int r=image->saveAsBmp(name);
+    if(!r)
         GUI_Error_HIG (QT_TR_NOOP("BMP op failed"),QT_TR_NOOP( "Saving %s as a BMP file failed."), ADM_GetFileName(name));
+    return r;
+
 }
 
 /**



From mean at mail.berlios.de  Mon Jun  7 07:44:56 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 07:44:56 +0200
Subject: [Avidemux-svn-commit] r6327 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv
Message-ID: <201006070544.o575iu8d003449@sheep.berlios.de>

Author: mean
Date: 2010-06-07 07:44:53 +0200 (Mon, 07 Jun 2010)
New Revision: 6327

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp
Log:
[Flv] Fix mixedarray reading in flash metadata

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp	2010-06-07 05:44:49 UTC (rev 6326)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Flv/ADM_flv.cpp	2010-06-07 05:44:53 UTC (rev 6327)
@@ -179,7 +179,21 @@
                                         ;break;
                 case AMF_DATA_TYPE_STRING: {int r=read16();Skip(r);}break;
                 case AMF_DATA_TYPE_BOOL: read8();break;
-                
+                case AMF_DATA_TYPE_MIXEDARRAY:
+                                            {
+                                                read32();
+                                                 while(ftello(_fd)<endPos-4)
+                                                {
+                                                            char *o=readFlvString();
+                                                            if(!o) break;
+                                                            printf("\t MixedArray:%s",o);
+                                                            if(false==parseOneMeta(o,endPos)) return false;
+                                                            
+                                                }
+                                                if(read8()!=AMF_END_OF_OBJECT) return false;
+
+                                             }
+                                            break;
                 default : printf("\n");ADM_assert(0);
             }
             printf("\n");



From mean at mail.berlios.de  Mon Jun  7 07:44:58 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 07:44:58 +0200
Subject: [Avidemux-svn-commit] r6328 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006070544.o575iwj1003474@sheep.berlios.de>

Author: mean
Date: 2010-06-07 07:44:57 +0200 (Mon, 07 Jun 2010)
New Revision: 6328

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
Log:
[Editor] Compute missing DTS/PTS when none is complete.

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-06-07 05:44:53 UTC (rev 6327)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-06-07 05:44:57 UTC (rev 6328)
@@ -258,8 +258,54 @@
 */
 bool updatePtsAndDts(vidHeader *hdr,uint64_t timeIncrementUs,uint64_t *delay)
 {
+    aviInfo info;
+    uint64_t offset,pts,dts;
+    uint32_t nbFrames;
     *delay=0;
-    ADM_error("SetPtsFromDts not implemented\n");
-    return true;
+
+    hdr->getVideoInfo(&info);
+    nbFrames=info.nb_frames;
+    // Search valid DTS
+    int index=-1;
+    for(int i=0;i<nbFrames;i++)
+    {
+        hdr->getPtsDts(i,&pts,&dts);
+        if(dts!=ADM_NO_PTS) 
+        {
+            index=i;
+            break;
+        }
+    }
+    if(index==-1)
+    {
+        ADM_info("No dts found, aborting\n");
+        return false;
+    }
+    if(index*timeIncrementUs > dts)
+    {
+        *delay=index*timeIncrementUs-dts;
+    }
+    dts=dts+*delay-index*timeIncrementUs;
+    uint64_t curDts=dts;
+
+    ADM_info("Computing missing DTS\n");
+
+    int updated=0;
+    for(int i=0;i<nbFrames;i++)
+    {
+        hdr->getPtsDts(i,&pts,&dts);
+        if(dts==ADM_NO_PTS) 
+        {
+            dts=curDts;
+            hdr->setPtsDts(i,pts,dts);
+            updated++;
+        }
+        curDts=dts+timeIncrementUs;
+    }
+    ADM_info("Updated %d Dts, now computing PTS\n",updated);
+    uint64_t myDelay=*delay;
+    bool r= setPtsFromDts(hdr,timeIncrementUs,delay);
+    *delay+=myDelay;
+    return r;
 }
 //EOF



From gruntster at mail.berlios.de  Mon Jun  7 09:02:10 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 09:02:10 +0200
Subject: [Avidemux-svn-commit] r6329 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <201006070702.o5772AV7018358@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 09:02:05 +0200 (Mon, 07 Jun 2010)
New Revision: 6329

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
Log:
[i18n] unix compilation fix

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-07 05:44:57 UTC (rev 6328)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-07 07:02:05 UTC (rev 6329)
@@ -104,7 +104,7 @@
 		ui.comboBoxPriority->setCurrentIndex(2);
 		connect(ui.checkBoxShutdown, SIGNAL(currentIndexChanged(int)), this, SLOT(priorityChanged(int)));
 
-		GUI_Error_HIG(tr("Privileges Required").toUtf().constData(), tr("Root privileges are required to perform this operation.").toUtf().constData());
+		GUI_Error_HIG(tr("Privileges Required").toUtf8().constData(), tr("Root privileges are required to perform this operation.").toUtf8().constData());
 
 		return;
 	}
@@ -122,7 +122,7 @@
 		ui.checkBoxShutdown->setCheckState(Qt::Unchecked);
 		connect(ui.checkBoxShutdown, SIGNAL(stateChanged(int)), this, SLOT(shutdownChanged(int)));
 
-		GUI_Error_HIG(tr("Privileges Required").toUtf().constData(), tr("Root privileges are required to perform this operation.").toUtf().constData());
+		GUI_Error_HIG(tr("Privileges Required").toUtf8().constData(), tr("Root privileges are required to perform this operation.").toUtf8().constData());
 	}
 #endif
 }



From gruntster at mail.berlios.de  Mon Jun  7 19:43:11 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 19:43:11 +0200
Subject: [Avidemux-svn-commit] r6330 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlendRemover
Message-ID: <201006071743.o57HhBnn018450@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 19:43:07 +0200 (Mon, 07 Jun 2010)
New Revision: 6330

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp
Log:
[i18n] fix double quotes in blend remover plugin

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp	2010-06-07 07:02:05 UTC (rev 6329)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoFilters/BlendRemover/ADM_vidHardIvtcRemoval.cpp	2010-06-07 17:43:07 UTC (rev 6330)
@@ -63,7 +63,7 @@
 
 VF_DEFINE_FILTER ( vidHardPDRemoval,field_unblend_template,
                    hardivtcremove,
-                   QT_TR_NOOP ( ""Hard pulldown removal"" ),
+                   QT_TR_NOOP ( "Hard pulldown removal" ),
                    1,
                    VF_ITERLACING,
                    QT_TR_NOOP ( "Remove IVTC that has been analog captured or resized.") );



From gruntster at mail.berlios.de  Mon Jun  7 20:12:00 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 20:12:00 +0200
Subject: [Avidemux-svn-commit] r6331 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
Message-ID: <201006071812.o57IC0l1020174@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 20:11:55 +0200 (Mon, 07 Jun 2010)
New Revision: 6331

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
Log:
[js] make QT_TR_NOOP function available to javascript

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2010-06-07 17:43:07 UTC (rev 6330)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSFunctions.cpp	2010-06-07 18:11:55 UTC (rev 6331)
@@ -87,8 +87,8 @@
 JSBool facSlider(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool assertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool translate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 
-
 static JSFunctionSpec adm_functions[] = {
   /*    name          native          nargs    */
   {"displayError",      displayError,         1},
@@ -124,6 +124,7 @@
   {"dialogFactoryThreadCount", facThreadCount,		  0},
   {"crashTest",               crashTest,          0},
   {"assertTest",               assertTest,        0},
+  {"QT_TR_NOOP",               translate,        1},
   {0}
 };
 
@@ -881,4 +882,16 @@
   return JS_TRUE;
 }
 
+JSBool translate(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
+	if (argc == 1 && JSVAL_IS_STRING(argv[0]))
+	{
+		*rval = STRING_TO_JSVAL(JS_NewStringCopyZ(cx, QT_TR_NOOP(JS_GetStringBytes(JSVAL_TO_STRING(argv[0])))));
+
+		return JS_TRUE;
+	}
+
+	return JS_FALSE;
+}
+
 //EOF 



From gruntster at mail.berlios.de  Mon Jun  7 20:14:32 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 20:14:32 +0200
Subject: [Avidemux-svn-commit] r6332 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
Message-ID: <201006071814.o57IEWGJ020455@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 20:14:28 +0200 (Mon, 07 Jun 2010)
New Revision: 6332

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
Log:
[i18n] make translation context of Qt main filter dialog more appropriate

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2010-06-07 18:11:55 UTC (rev 6331)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters/Q_mainfilter.cpp	2010-06-07 18:14:28 UTC (rev 6332)
@@ -494,7 +494,7 @@
         conf = videofilters[itag].conf;
         if (videofilters[itag].tag == VF_PARTIAL_FILTER)	// cannot recurse
         {
-            GUI_Error_HIG (QObject::tr("The filter is already partial").toUtf8().constData(), NULL);
+            GUI_Error_HIG (filtermainWindow::tr("The filter is already partial").toUtf8().constData(), NULL);
             return;
         }
 
@@ -531,7 +531,7 @@
 
 	closePreview();
 
-	GUI_FileSelRead (QObject::tr("Load set of filters").toUtf8().constData(), filterLoadXml);
+	GUI_FileSelRead (filtermainWindow::tr("Load set of filters").toUtf8().constData(), filterLoadXml);
 
 	getFirstVideoFilter ();
 	buildActiveFilterList ();
@@ -545,10 +545,10 @@
 {
 	if (nb_active_filter < 2)
 	{
-		GUI_Error_HIG (QObject::tr("Nothing to save").toUtf8().constData(), NULL);
+		GUI_Error_HIG (filtermainWindow::tr("Nothing to save").toUtf8().constData(), NULL);
 	}
 	else
-		GUI_FileSelWrite(QObject::tr("Save set of filters").toUtf8().constData(), filterSaveXml);
+		GUI_FileSelWrite(filtermainWindow::tr("Save set of filters").toUtf8().constData(), filterSaveXml);
 }
 
 /**
@@ -710,12 +710,12 @@
          uint32_t fmax=previous->getInfo()->nb_frames;
          if(fmax) fmax--;
          
-         diaElemUInteger  start(PX(_start),QObject::tr("Partial Start Frame:").toUtf8().constData(),0,fmax);
-         diaElemUInteger  end(PX(_end),QObject::tr("Partial End Frame:").toUtf8().constData(),0,fmax);
-         diaElemButton    button(QObject::tr("Configure child").toUtf8().constData(), partialCb,params);
+         diaElemUInteger  start(PX(_start),filtermainWindow::tr("Partial Start Frame:").toUtf8().constData(),0,fmax);
+         diaElemUInteger  end(PX(_end),filtermainWindow::tr("Partial End Frame:").toUtf8().constData(),0,fmax);
+         diaElemButton    button(filtermainWindow::tr("Configure child").toUtf8().constData(), partialCb,params);
          
          diaElem *tabs[]={&start,&end,&button};
-        return diaFactoryRun(QObject::tr("Partial Video Filter").toUtf8().constData(),3,tabs);
+        return diaFactoryRun(filtermainWindow::tr("Partial Video Filter").toUtf8().constData(),3,tabs);
 }
 
 /**



From mean at mail.berlios.de  Mon Jun  7 20:20:57 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 20:20:57 +0200
Subject: [Avidemux-svn-commit] r6333 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006071820.o57IKvNK021121@sheep.berlios.de>

Author: mean
Date: 2010-06-07 20:20:56 +0200 (Mon, 07 Jun 2010)
New Revision: 6333

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
Log:
[Editor] Take into the account the delay we introduce when 1st frame has no dts

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-06-07 18:14:28 UTC (rev 6332)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-06-07 18:20:56 UTC (rev 6333)
@@ -261,6 +261,7 @@
     aviInfo info;
     uint64_t offset,pts,dts;
     uint32_t nbFrames;
+    uint64_t myDelay=0;
     *delay=0;
 
     hdr->getVideoInfo(&info);
@@ -283,10 +284,10 @@
     }
     if(index*timeIncrementUs > dts)
     {
-        *delay=index*timeIncrementUs-dts;
+        myDelay=index*timeIncrementUs-dts;
     }
-    dts=dts+*delay-index*timeIncrementUs;
-    uint64_t curDts=dts;
+    dts=dts+myDelay-index*timeIncrementUs;
+    uint64_t curDts=dts; // First DTS...
 
     ADM_info("Computing missing DTS\n");
 
@@ -294,16 +295,19 @@
     for(int i=0;i<nbFrames;i++)
     {
         hdr->getPtsDts(i,&pts,&dts);
+        //printf("Frame %d dts=%"LLU,i,dts);
+        if(dts!=ADM_NO_PTS) dts+=myDelay;
         if(dts==ADM_NO_PTS) 
         {
             dts=curDts;
-            hdr->setPtsDts(i,pts,dts);
             updated++;
         }
+        hdr->setPtsDts(i,pts,dts);
+        //printf("new dts=%"LLU"\n",dts);
         curDts=dts+timeIncrementUs;
     }
     ADM_info("Updated %d Dts, now computing PTS\n",updated);
-    uint64_t myDelay=*delay;
+    
     bool r= setPtsFromDts(hdr,timeIncrementUs,delay);
     *delay+=myDelay;
     return r;



From mean at mail.berlios.de  Mon Jun  7 20:20:58 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 20:20:58 +0200
Subject: [Avidemux-svn-commit] r6334 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006071820.o57IKwV9021131@sheep.berlios.de>

Author: mean
Date: 2010-06-07 20:20:58 +0200 (Mon, 07 Jun 2010)
New Revision: 6334

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
Log:
[Cache] Try to workaround stream with same DTS twice (Direct8.ts)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2010-06-07 18:20:56 UTC (rev 6333)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2010-06-07 18:20:58 UTC (rev 6334)
@@ -194,7 +194,13 @@
         {
             index++;
             index%=_nbImage;
-            return _elem[index].image;
+            ADMImage *candidate=_elem[index].image;
+            if(candidate->Pts<=pts)
+            {
+                ADM_error("The next frame has a PTS <= the one we started from, ignoring\n");
+                continue;
+            }
+            return candidate;
         }
     }
     aADM_warning("Cannot find image after %"LLU" ms in cache\n",pts/1000);



From gruntster at mail.berlios.de  Mon Jun  7 20:31:38 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 20:31:38 +0200
Subject: [Avidemux-svn-commit] r6335 -
	branches/avidemux_2.5_branch_gruntster/po
Message-ID: <201006071831.o57IVcil021614@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 20:31:33 +0200 (Mon, 07 Jun 2010)
New Revision: 6335

Modified:
   branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh
   branches/avidemux_2.5_branch_gruntster/po/update_pot.bash
Log:
[i18n] include auto scripts in translation file generation

Modified: branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh	2010-06-07 18:20:58 UTC (rev 6334)
+++ branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh	2010-06-07 18:31:33 UTC (rev 6335)
@@ -5,24 +5,25 @@
 
 echo "Finding HEADERS..."
 echo "HEADERS = \\" > avidemux.pro
-find ../avidemux -iname '*.h' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "%p \\\ \n" >> avidemux.pro
-find ../plugins -iname '*.h' -not -iwholename '*gtk*' -printf "%p \\\ \n" >> avidemux.pro
+find ../avidemux -iname '*.h' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "\"%p\" \\\ \n" >> avidemux.pro
+find ../plugins -iname '*.h' -not -iwholename '*gtk*' -printf "\"%p\" \\\ \n" >> avidemux.pro
 echo "" >> avidemux.pro
 
 echo "Finding SOURCES..."
 echo "SOURCES = \\" >> avidemux.pro
-find ../avidemux -iname '*.cpp' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "%p \\\ \n" >> avidemux.pro
-find ../plugins -iname '*.cpp' -not -iwholename '*gtk*' -printf "%p \\\ \n" >> avidemux.pro
+find ../avidemux -iname '*.cpp' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "\"%p\" \\\ \n" >> avidemux.pro
+find ../plugins -iname '*.cpp' -not -iwholename '*gtk*' -printf "\"%p\" \\\ \n" >> avidemux.pro
+find ../scripts -iname '*.js' -printf "\"%p\" \\\ \n" >> avidemux.pro
 echo "" >> avidemux.pro
 
 echo "Finding FORMS..."
 echo "FORMS = \\" >> avidemux.pro
-find ../avidemux -iname '*.ui' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "%p \\\ \n" >> avidemux.pro
-find ../plugins -iname '*.ui' -not -iwholename '*gtk*' -printf "%p \\\ \n" >> avidemux.pro
+find ../avidemux -iname '*.ui' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "\"%p\" \\\ \n" >> avidemux.pro
+find ../plugins -iname '*.ui' -not -iwholename '*gtk*' -printf "\"%p\" \\\ \n" >> avidemux.pro
 echo "" >> avidemux.pro
 
 echo "Finding TRANSLATIONS..."
 echo "TRANSLATIONS = \\" >> avidemux.pro
-find . -iname 'avidemux_*.ts' -printf "%p \\\ \n" >> avidemux.pro
+find . -iname 'avidemux_*.ts' -printf "\"%p\" \\\ \n" >> avidemux.pro
 
 echo "DONE."

Modified: branches/avidemux_2.5_branch_gruntster/po/update_pot.bash
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/update_pot.bash	2010-06-07 18:20:58 UTC (rev 6334)
+++ branches/avidemux_2.5_branch_gruntster/po/update_pot.bash	2010-06-07 18:31:33 UTC (rev 6335)
@@ -7,6 +7,7 @@
 echo "Finding SOURCES..."
 find ./avidemux -iname '*.cpp' -not -iwholename '*ADM_QT4*' >> po/POTFILES.in
 find ./plugins -iname '*.cpp' -not -iwholename '*ADM_QT4*' -not -iwholename '*qt4*' >> po/POTFILES.in
+find ./scripts -iname '*.js' >> po/POTFILES.in
 
 cd po
 echo "Generating pot file..."



From mean at mail.berlios.de  Mon Jun  7 20:31:40 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 20:31:40 +0200
Subject: [Avidemux-svn-commit] r6336 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006071831.o57IVePa021644@sheep.berlios.de>

Author: mean
Date: 2010-06-07 20:31:40 +0200 (Mon, 07 Jun 2010)
New Revision: 6336

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
Log:
[Cache] cosmetic

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2010-06-07 18:31:33 UTC (rev 6335)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2010-06-07 18:31:40 UTC (rev 6336)
@@ -198,9 +198,8 @@
             if(candidate->Pts<=pts)
             {
                 ADM_error("The next frame has a PTS <= the one we started from, ignoring\n");
-                continue;
-            }
-            return candidate;
+            }else
+                return candidate;
         }
     }
     aADM_warning("Cannot find image after %"LLU" ms in cache\n",pts/1000);



From mean at mail.berlios.de  Mon Jun  7 20:35:31 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 7 Jun 2010 20:35:31 +0200
Subject: [Avidemux-svn-commit] r6337 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006071835.o57IZVCW021831@sheep.berlios.de>

Author: mean
Date: 2010-06-07 20:35:31 +0200 (Mon, 07 Jun 2010)
New Revision: 6337

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
Log:
[cache] Dont look in the cache if it is empty

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2010-06-07 18:31:40 UTC (rev 6336)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edCache.cpp	2010-06-07 18:35:31 UTC (rev 6337)
@@ -186,6 +186,7 @@
 */
 ADMImage    *EditorCache::getAfter(uint64_t pts)
 {
+    if(!writeIndex) return NULL;
     for(uint32_t i=readIndex;i<writeIndex-1;i++)
 	{
         int index=i%_nbImage;



From gruntster at mail.berlios.de  Mon Jun  7 20:42:36 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 20:42:36 +0200
Subject: [Avidemux-svn-commit] r6338 - in
	branches/avidemux_2.5_branch_gruntster/scripts: auto
	auto/Apple auto/Optical Disc video
Message-ID: <201006071842.o57IganC022149@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 20:42:29 +0200 (Mon, 07 Jun 2010)
New Revision: 6338

Modified:
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPhone.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod 5.5G.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js
   branches/avidemux_2.5_branch_gruntster/scripts/video/autoWizard.js
   branches/avidemux_2.5_branch_gruntster/scripts/video/functions.js
Log:
[i18n] translate strings in auto wizards

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPhone.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPhone.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPhone.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -5,10 +5,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Apple iPhone Auto Wizard", [[320, 240], [640, 480]]);
+    var result = videoAutoWizard(QT_TR_NOOP("Apple iPhone Auto Wizard"), [[320, 240], [640, 480]]);
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod 5.5G.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod 5.5G.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod 5.5G.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -5,10 +5,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Apple iPod 5.5G Auto Wizard", [[320, 240], [640, 480]]);
+    var result = videoAutoWizard(QT_TR_NOOP("Apple iPod 5.5G Auto Wizard"), [[320, 240], [640, 480]]);
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/Apple iPod.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -5,10 +5,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Apple iPod Auto Wizard", [[320, 240]]);
+    var result = videoAutoWizard(QT_TR_NOOP("Apple iPod Auto Wizard"), [[320, 240]]);
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -5,10 +5,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Microsoft Zune Auto Wizard", [[320, 240], [640, 480]]);
+    var result = videoAutoWizard(QT_TR_NOOP("Microsoft Zune Auto Wizard"), [[320, 240], [640, 480]]);
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/DVD.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -6,10 +6,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("DVD Auto Wizard");
+    var result = videoAutoWizard(QT_TR_NOOP("DVD Auto Wizard"));
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Super Video CD.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -6,10 +6,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Super Video CD Auto Wizard");
+    var result = videoAutoWizard(QT_TR_NOOP("Super Video CD Auto Wizard"));
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/Video CD.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -6,10 +6,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Video CD Auto Wizard");
+    var result = videoAutoWizard(QT_TR_NOOP("Video CD Auto Wizard"));
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -5,10 +5,10 @@
 var app = new Avidemux();
 
 if (app.video == null)
-    displayError("A video file must be open to use this Auto Wizard.");
+    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
 else
 {
-    var result = videoAutoWizard("Sony PSP Auto Wizard", [[480, 272], [720, 480]]);
+    var result = videoAutoWizard(QT_TR_NOOP("Sony PSP Auto Wizard"), [[480, 272], [720, 480]]);
 
     if (result)
     {

Modified: branches/avidemux_2.5_branch_gruntster/scripts/video/autoWizard.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/video/autoWizard.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/video/autoWizard.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -1,9 +1,9 @@
 function videoAutoWizard(title, resolutions, codecs)
 {
     var aspectRatios = [[1, 1], [4, 3], [16, 9]];
-    var mnuResolution = new DFMenu("Resolution:");
-    var mnuSourceRatio = new DFMenu("Source Aspect Ratio:");
-    var mnuDestinationRatio = new DFMenu("Destination Aspect Ratio:");
+    var mnuResolution = new DFMenu(QT_TR_NOOP("Resolution:"));
+    var mnuSourceRatio = new DFMenu(QT_TR_NOOP("Source Aspect Ratio:"));
+    var mnuDestinationRatio = new DFMenu(QT_TR_NOOP("Destination Aspect Ratio:"));
     var dlgWizard = new DialogFactory(title);
     var i;
 
@@ -21,7 +21,7 @@
     
     if (codecs != null)
     {
-        var mnuCodec = new DFMenu("Codec:");
+        var mnuCodec = new DFMenu(QT_TR_NOOP("Codec:"));
                
         dlgWizard.addControl(mnuCodec);
         

Modified: branches/avidemux_2.5_branch_gruntster/scripts/video/functions.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/video/functions.js	2010-06-07 18:35:31 UTC (rev 6337)
+++ branches/avidemux_2.5_branch_gruntster/scripts/video/functions.js	2010-06-07 18:42:29 UTC (rev 6338)
@@ -24,16 +24,16 @@
 }
 
 function getColourEncodingSystem(fps1000)
-{
-    var encodingSystem = "Unknown";
-
-    if (fps1000 > 24700 && fps1000 < 25300)
-        encodingSystem = "PAL";
-    else if (fps1000 > 23676 && fps1000 < 24276)
-        encodingSystem = "FILM";
-    else if (fps1000 > 29670 && fps1000 < 30270)
-        encodingSystem = "NTSC";
-
+{
+    var encodingSystem = "Unknown";
+
+    if (fps1000 > 24700 && fps1000 < 25300)
+        encodingSystem = "PAL";
+    else if (fps1000 > 23676 && fps1000 < 24276)
+        encodingSystem = "FILM";
+    else if (fps1000 > 29670 && fps1000 < 30270)
+        encodingSystem = "NTSC";
+
     return encodingSystem;
 }
 



From gruntster at mail.berlios.de  Mon Jun  7 21:36:18 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 21:36:18 +0200
Subject: [Avidemux-svn-commit] r6339 - in
	branches/avidemux_2.5_branch_gruntster: avidemux
	avidemux/ADM_codecs avidemux/ADM_core/include
	avidemux/ADM_coreImage/src avidemux/ADM_encoder
	avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi
	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
	avidemux/ADM_userInterfaces/ADM_commonUI
	avidemux/ADM_videoFilter cmake cmake/patches
Message-ID: <201006071936.o57JaIhZ027618@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 21:36:07 +0200 (Mon, 07 Jun 2010)
New Revision: 6339

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
Log:
[ffmpeg] update FFmpeg to r23514 & libswscale to r31344

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -18,15 +18,15 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
+#include "ADM_default.h"
 
-
 #ifdef USE_FFMPEG
 extern "C"
 {
 #include "ADM_lavcodec.h"
 };
 #endif
-#include "ADM_default.h"
+
 #ifdef BIG_ENDIAN
 #undef BIG_ENDIAN
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2010-06-07 19:36:07 UTC (rev 6339)
@@ -19,11 +19,6 @@
 #ifndef ADM_DEFAULT_H
 #define ADM_DEFAULT_H
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-
-#include "ADM_coreConfig.h"
 #include "ADM_inttype.h"
 #include "ADM_assert.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2010-06-07 19:36:07 UTC (rev 6339)
@@ -11,11 +11,6 @@
 
 #include "ADM_coreConfig.h"
 
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include <unistd.h>
-
 /*
    	The maximum width/height is MAXIMUM_SIZE 768*768 for now
 */
@@ -24,6 +19,8 @@
 typedef unsigned char ADM_filename;
 
 #ifdef HAVE_STDINT_H
+#define __STDC_LIMIT_MACROS
+#define __STDC_CONSTANT_MACROS
 #include <stdint.h>
 #define GOT_TYPES
 #endif
@@ -67,4 +64,8 @@
 #define ADM_OK 	1
 #define ADM_IGN 2
 
+#include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <unistd.h>
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -17,11 +17,10 @@
 // strength between 0 and 5
 
 
-#include "ADM_lavcodec.h"
 #include "ADM_default.h"
+#include "ADM_lavcodec.h"
 #include "ADM_pp.h"
 
-
 #define aprintf printf
 
 void deletePostProc(ADM_PP *pp)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -16,9 +16,9 @@
  ***************************************************************************/
 #include "config.h"
 
+#include "ADM_assert.h"
 #include "ADM_lavcodec.h"
 
-#include "ADM_assert.h"
 #include "fourcc.h"
 #include "ADM_osSupport/ADM_quota.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -21,10 +21,7 @@
 #define __STDC_LIMIT_MACROS
 
 #include "config.h"
-#include <stdio.h>
-#include <stdlib.h>
-#include <math.h>
-#include <string.h>
+#include "ADM_default.h"
 
 extern "C"
 {
@@ -35,7 +32,6 @@
 #undef realloc
 #undef free
 
-#include "ADM_default.h"
 #include "DIA_coreToolkit.h"
 
 #include "ADM_audiofilter/audioprocess.hxx"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -17,6 +17,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
+#include "ADM_default.h"
 
 extern "C"
 {
@@ -28,7 +29,7 @@
 #undef printf
 }
 
-#include "ADM_default.h"
+
 #include "ADM_threads.h"
 
 #include "fourcc.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -16,6 +16,8 @@
  ***************************************************************************/
 
 #include "config.h"
+#undef QT_TR_NOOP
+
 #include "Q_about.h"
 #include "ADM_inttype.h"
 #include "ADM_toolkitQt.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -5,15 +5,10 @@
 */
 #include "config.h"
 
-
-#include "ADM_lavcodec.h"
-
 #include "ADM_default.h"
-
+#include "ADM_lavcodec.h"
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_encoder/ADM_vidEncode.hxx"
-
-  
 #include "DIA_factory.h"
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -16,17 +16,14 @@
  ***************************************************************************/
 #include "config.h"
 
-#include <math.h>
-
-#include "ADM_lavcodec.h"
 #include "ADM_default.h"
+#include "ADM_lavcodec.h"
 
 #include "DIA_fileSel.h"
 #include "DIA_factory.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h"
 #include "ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.h"
 
-
 #include "ADM_codecs/ADM_codec.h"
 #include "ADM_codecs/ADM_ffmp43.h"
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -21,17 +21,11 @@
 
 
 #include "config.h"
-
-#include <stdio.h>
-#include <stdlib.h>
-#include <string.h>
-#include "ADM_lavcodec.h"
-#include "ADM_assert.h"
 #include "ADM_default.h"
+#include "ADM_lavcodec.h"
 #include "ADM_videoFilterDynamic.h"
 #include "fourcc.h"
 
-
 #include "ADM_videoFilter.h"
 #include "ADM_colorspace.h"
 #include "ADM_codecs/ADM_codec.h"

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -24,10 +24,10 @@
 #include <sys/time.h>
 #include <errno.h>
 
+#include "ADM_assert.h"
 #include "ADM_lavcodec.h"
 #include "fourcc.h"
 #include "avi_vars.h"
-#include "ADM_assert.h"
 #include "DIA_fileSel.h"
 #include "prototype.h"
 #include "DIA_coreToolkit.h"

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,7 +1,7 @@
 include(admFFmpegUtil)
 
-set(FFMPEG_VERSION 22831)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=887b9ab184ed849001bbf9c5bad60d52d92e688c;sf=tgz
-set(SWSCALE_VERSION 31028)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=a9639b0b6c96c6b0c30ec1ef6f737f1204a2697a;sf=tgz
+set(FFMPEG_VERSION 23514)	# http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=e98e85c1eb2e0b00e95714d98c61ffa55be349d4;sf=tgz
+set(SWSCALE_VERSION 31344)	# http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=0eac904069b4398edd7d57784eb56883b26ee380;sf=tgz
 
 set(LIBRARY_SOURCE_DIR "${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries")
 set(FFMPEG_SOURCE_DIR "${LIBRARY_SOURCE_DIR}/ffmpeg")

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,19 +1,19 @@
-*** libavcodec/avcodec.h.old	Sun Apr 11 11:34:06 2010
---- libavcodec/avcodec.h	Sun Apr 11 11:34:06 2010
+*** libavcodec/avcodec.h.old	Mon Jun  7 19:34:55 2010
+--- libavcodec/avcodec.h	Mon Jun  7 19:34:55 2010
 ***************
-*** 597,602 ****
---- 597,604 ----
-  #define CODEC_FLAG2_MBTREE        0x00040000 ///< Use macroblock tree ratecontrol (x264 only)
+*** 599,604 ****
+--- 599,606 ----
   #define CODEC_FLAG2_PSY           0x00080000 ///< Use psycho visual optimizations.
   #define CODEC_FLAG2_SSIM          0x00100000 ///< Compute SSIM during encoding, error[] values are undefined.
+  #define CODEC_FLAG2_INTRA_REFRESH 0x00200000 ///< Use periodic insertion of intra blocks instead of keyframes.
 + //MEANX: NEVER EVER USE CLOSED GOP ?
 + #define CODEC_FLAG2_32_PULLDOWN   0x80000000
   
   /* Unsupported options :
    *              Syntax Arithmetic coding (SAC)
 ***************
-*** 1467,1472 ****
---- 1469,1475 ----
+*** 1474,1479 ****
+--- 1476,1482 ----
        * - decoding: unused
        */
       int rc_max_rate;
@@ -22,8 +22,8 @@
       /**
        * minimum bitrate
 ***************
-*** 1481,1486 ****
---- 1484,1491 ----
+*** 1488,1493 ****
+--- 1491,1498 ----
        * - decoding: unused
        */
       int rc_buffer_size;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,5 +1,5 @@
-*** libavcodec/h263dec.c.old	Sat Mar 27 20:05:34 2010
---- libavcodec/h263dec.c	Sat Mar 27 20:05:34 2010
+*** libavcodec/h263dec.c.old	Mon Jun  7 19:34:58 2010
+--- libavcodec/h263dec.c	Mon Jun  7 19:34:58 2010
 ***************
 *** 119,124 ****
 --- 119,143 ----
@@ -44,8 +44,8 @@
       if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
   
 ***************
-*** 707,712 ****
---- 732,745 ----
+*** 709,714 ****
+--- 734,747 ----
   
   assert(s->current_picture.pict_type == s->current_picture_ptr->pict_type);
   assert(s->current_picture.pict_type == s->pict_type);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,8 +1,8 @@
-*** libavcodec/h264.c.old	Sun Apr 11 11:34:08 2010
---- libavcodec/h264.c	Sun Apr 11 11:34:08 2010
+*** libavcodec/h264.c.old	Mon Jun  7 19:34:59 2010
+--- libavcodec/h264.c	Mon Jun  7 19:34:59 2010
 ***************
-*** 3146,3151 ****
---- 3146,3164 ----
+*** 3381,3386 ****
+--- 3381,3399 ----
       return 0;
   }
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,7 +1,7 @@
-*** libavcodec/mpegvideo.c.old	Sat Mar 27 20:05:38 2010
---- libavcodec/mpegvideo.c	Sat Mar 27 20:05:39 2010
+*** libavcodec/mpegvideo.c.old	Mon Jun  7 19:35:02 2010
+--- libavcodec/mpegvideo.c	Mon Jun  7 19:35:02 2010
 ***************
-*** 646,652 ****
+*** 641,647 ****
       FF_ALLOCZ_OR_GOTO(s->avctx, s->prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
   
       s->parse_context.state= -1;
@@ -9,7 +9,7 @@
          s->visualization_buffer[0] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
          s->visualization_buffer[1] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
          s->visualization_buffer[2] = av_malloc((s->mb_width*16 + 2*EDGE_WIDTH) * s->mb_height*16 + 2*EDGE_WIDTH);
---- 646,656 ----
+--- 641,651 ----
       FF_ALLOCZ_OR_GOTO(s->avctx, s->prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
   
       s->parse_context.state= -1;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,5 +1,5 @@
-*** libavcodec/utils.c.old	Sun Apr 11 11:34:10 2010
---- libavcodec/utils.c	Sun Apr 11 11:34:10 2010
+*** libavcodec/utils.c.old	Mon Jun  7 19:35:04 2010
+--- libavcodec/utils.c	Mon Jun  7 19:35:04 2010
 ***************
 *** 643,652 ****
 --- 643,654 ----
@@ -16,7 +16,7 @@
           *frame_size_ptr < avctx->channels * avctx->frame_size * sizeof(int16_t)){
               av_log(avctx, AV_LOG_ERROR, "buffer %d too small\n", *frame_size_ptr);
 ***************
-*** 1085,1091 ****
+*** 1091,1097 ****
           return -1;
       }
   #if !HAVE_MKSTEMP
@@ -24,7 +24,7 @@
   #else
       snprintf(*filename, len, "/tmp/%sXXXXXX", prefix);
       fd = mkstemp(*filename);
---- 1087,1093 ----
+--- 1093,1099 ----
           return -1;
       }
   #if !HAVE_MKSTEMP

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,7 +1,7 @@
-*** libavformat/isom.c.old	Sun Jan 17 19:05:32 2010
---- libavformat/isom.c	Sun Jan 17 19:05:32 2010
+*** libavformat/isom.c.old	Mon Jun  7 19:35:06 2010
+--- libavformat/isom.c	Mon Jun  7 19:35:06 2010
 ***************
-*** 205,211 ****
+*** 213,219 ****
       { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
       { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
@@ -9,7 +9,7 @@
       { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
   
   /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at http://heroinewarrior.com/xmovie.php3 use this tag */
---- 205,214 ----
+--- 213,222 ----
       { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
       { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,8 +1,8 @@
-*** libavformat/matroskaenc.c.old	Sat Mar 27 20:05:45 2010
---- libavformat/matroskaenc.c	Sat Mar 27 20:05:45 2010
+*** libavformat/matroskaenc.c.old	Mon Jun  7 19:35:07 2010
+--- libavformat/matroskaenc.c	Mon Jun  7 19:35:07 2010
 ***************
-*** 403,408 ****
---- 403,409 ----
+*** 408,413 ****
+--- 408,414 ----
   
   static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecContext *codec)
   {
@@ -11,8 +11,8 @@
       int header_len[3];
       int first_header_size;
 ***************
-*** 427,432 ****
---- 428,455 ----
+*** 432,437 ****
+--- 433,460 ----
           put_buffer(pb, header_start[j], header_len[j]);
   
       return 0;
@@ -42,10 +42,10 @@
   
   static void get_aac_sample_rates(AVFormatContext *s, AVCodecContext *codec, int *sample_rate, int *output_sample_rate)
 ***************
-*** 546,551 ****
---- 569,592 ----
+*** 550,555 ****
+--- 573,596 ----
+          put_ebml_uint (pb, MATROSKA_ID_TRACKUID        , i + 1);
           put_ebml_uint (pb, MATROSKA_ID_TRACKFLAGLACING , 0);    // no lacing (yet)
-          put_ebml_float(pb, MATROSKA_ID_TRACKTIMECODESCALE, 1.0);
   
 +  		/**  MEANX : Add a default duration for video **/
 +  		if(codec->codec_type==CODEC_TYPE_VIDEO)



From gruntster at mail.berlios.de  Mon Jun  7 21:38:28 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 7 Jun 2010 21:38:28 +0200
Subject: [Avidemux-svn-commit] r6340 -
	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux
Message-ID: <201006071938.o57JcSiL027707@sheep.berlios.de>

Author: gruntster
Date: 2010-06-07 21:38:23 +0200 (Mon, 07 Jun 2010)
New Revision: 6340

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
Log:
[win32] package additional header file in win32 sdk

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat	2010-06-07 19:36:07 UTC (rev 6339)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat	2010-06-07 19:38:23 UTC (rev 6340)
@@ -75,6 +75,7 @@
 copy "%sourceDir%\avidemux\ADM_encoder\ADM_vidEncode.hxx" ADM_encoder
 copy "%sourceDir%\avidemux\ADM_libraries\ffmpeg\libavutil\pixfmt.h" libavutil
 copy "%sourceDir%\avidemux\ADM_plugin\ADM_vidEnc_plugin.h"
+copy "%sourceDir%\avidemux\ADM_plugin\ADM_plugin_translate.h"
 
 cd "%sourceDir%\po"
 svn revert -R .

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2010-06-07 19:36:07 UTC (rev 6339)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Package Notes.xml	2010-06-07 19:38:23 UTC (rev 6340)
@@ -1,5 +1,9 @@
 <?xml version="1.0"?>
 <log>
+  <buildentry revision="6303" date="2010-06-04">
+  </buildentry>
+  <buildentry revision="6288" date="2010-06-01">
+  </buildentry>
   <buildentry revision="6261" date="2010-05-27">
     <comment>Updated x264 to r1613.</comment>
   </buildentry>



From mean at mail.berlios.de  Tue Jun  8 07:49:02 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 8 Jun 2010 07:49:02 +0200
Subject: [Avidemux-svn-commit] r6341 - in branches/avidemux_2.6_branch_mean:
	autononreg/py/avidemux avidemux/common/ADM_script2/src
Message-ID: <201006080549.o585n2vj029578@sheep.berlios.de>

Author: mean
Date: 2010-06-08 07:49:01 +0200 (Tue, 08 Jun 2010)
New Revision: 6341

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyWidth.py
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp
Log:
[py] getVideoCodec + test case

Added: branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyWidth.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyWidth.py	2010-06-07 19:38:23 UTC (rev 6340)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/avidemux/pyWidth.py	2010-06-08 05:49:01 UTC (rev 6341)
@@ -0,0 +1,18 @@
+adm=Avidemux()
+gui=Gui()
+file="/work/samples/avi/2mn.avi"
+goodwidth=512
+goodheight=384
+goodfcc="DIV3"
+if(adm.loadVideo(file)==0):
+   displayError("Cannot load file")
+
+
+if(adm.getWidth()!=goodwidth):
+   gui.displayError("BadWidth ",str(goodwidth)+" vs "+str(adm.getWidth()))
+if(adm.getHeight()!=goodheight):
+   gui.displayError("BadWidth ",str(goodheight)+" vs "+str(adm.getHeight()))
+if(adm.getVideoCodec()!=goodfcc):
+   gui.displayError("BadFcc ",str(goodfcc)+" vs "+str(adm.getVideoCodec()))
+
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp	2010-06-07 19:38:23 UTC (rev 6340)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp	2010-06-08 05:49:01 UTC (rev 6341)
@@ -54,6 +54,6 @@
 aviInfo info;
         video_body->getVideoInfo(&info);
         fcc=info.fcc;
-        return fourCC::tostring(fcc);
+        ADM_strdup(fourCC::tostring(fcc));
 }
 // EOF



From gruntster at mail.berlios.de  Tue Jun  8 20:14:51 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 8 Jun 2010 20:14:51 +0200
Subject: [Avidemux-svn-commit] r6342 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <201006081814.o58IEpRO005540@sheep.berlios.de>

Author: gruntster
Date: 2010-06-08 20:14:47 +0200 (Tue, 08 Jun 2010)
New Revision: 6342

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
Log:
[i18n] remove static translation of yes/no for properties window - happens too early

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-08 05:49:01 UTC (rev 6341)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-08 18:14:47 UTC (rev 6342)
@@ -20,11 +20,12 @@
 #include "ADM_video/ADM_vidMisc.h"
 #include "ADM_toolkitQt.h"
 
-static QString yesno[2] = {propWindow::tr("No"), propWindow::tr("Yes")};
 extern const char *getStrFromAudioCodec( uint32_t codec);
 
 propWindow::propWindow(QWidget *parent) : QDialog(parent)
  {
+	 QString yesno[2] = {propWindow::tr("No"), propWindow::tr("Yes")};
+
      ui.setupUi(this);
      uint8_t gmc, qpel,vop;
  uint32_t info=0;



From gruntster at mail.berlios.de  Tue Jun  8 20:16:42 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 8 Jun 2010 20:16:42 +0200
Subject: [Avidemux-svn-commit] r6343 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4
Message-ID: <201006081816.o58IGgXZ005664@sheep.berlios.de>

Author: gruntster
Date: 2010-06-08 20:16:38 +0200 (Tue, 08 Jun 2010)
New Revision: 6343

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
Log:
[i18n] load avidemux translation before qt translation so avidemux translation takes precedence

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2010-06-08 18:14:47 UTC (rev 6342)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2010-06-08 18:16:38 UTC (rev 6343)
@@ -83,8 +83,9 @@
 	QString appdir = ADM_getInstallRelativePath("share","avidemux","i18n");
 #endif
 
+	loadTranslation(&avidemuxTranslator, appdir + "avidemux_" + QLocale::system().name());
 	loadTranslation(&qtTranslator, appdir + "qt_" + QLocale::system().name());
-	loadTranslation(&avidemuxTranslator, appdir + "avidemux_" + QLocale::system().name());
+
 	translatorLoaded = true;
 
 	// Re-translate existing map (to take care of global strings already allocated)



From mean at mail.berlios.de  Tue Jun  8 20:24:05 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 8 Jun 2010 20:24:05 +0200
Subject: [Avidemux-svn-commit] r6344 - in branches/avidemux_2.6_branch_mean:
	autononreg/py autononreg/py/helpers
	avidemux/common/ADM_script2/include
	avidemux/common/ADM_script2/js avidemux/common/ADM_script2/py
	avidemux/common/ADM_script2/src
Message-ID: <201006081824.o58IO5u5006107@sheep.berlios.de>

Author: mean
Date: 2010-06-08 20:24:04 +0200 (Tue, 08 Jun 2010)
New Revision: 6344

Added:
   branches/avidemux_2.6_branch_mean/autononreg/py/helpers/
   branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyAssert.py
   branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyCrash.py
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptUtils.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.idl
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp
Log:
[py] Add assert and crash testcase

Added: branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyAssert.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyAssert.py	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyAssert.py	2010-06-08 18:24:04 UTC (rev 6344)
@@ -0,0 +1 @@
+testAssert()

Added: branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyCrash.py
===================================================================
--- branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyCrash.py	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/autononreg/py/helpers/pyCrash.py	2010-06-08 18:24:04 UTC (rev 6344)
@@ -0,0 +1 @@
+testCrash()

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptUtils.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptUtils.h	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptUtils.h	2010-06-08 18:24:04 UTC (rev 6344)
@@ -13,6 +13,14 @@
  ***************************************************************************/
 #ifndef ADM_SCRIPT_UTIL_H
 #define ADM_SCRIPT_UTIL_H
+#ifdef __cplusplus
 int scriptSetContainer(const char *container, CONFcouple *conf);
+extern "C" {
+#endif
+int scriptTestCrash(void);
+int scriptTestAssert(void);
+#ifdef __cplusplus
+}
+#endif
 
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2010-06-08 18:24:04 UTC (rev 6344)
@@ -20,27 +20,6 @@
 #include "ADM_scriptTestFactory.h"
 #include "DIA_encoding.h"
 
-/**
-    \fn crashTest
-    \brief Force a crash
-*/
-int jsTestCrash(void)
-{
-  
-  int *foobar=NULL;
-  *foobar=0; // CRASH!
-  return true;
-}
-/**
-    \fn assertTest
-    \brief Force a crash
-*/
-int jsTestAssert(void)
-{
-  
-  ADM_assert(0);
-  return true;
-}
 
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.c	2010-06-08 18:24:04 UTC (rev 6344)
@@ -16,6 +16,7 @@
 #include "stdio.h"
 #include "ADM_jsAvidemux.h"
 #include "ADM_scriptTestFactory.h"
+#include "ADM_scriptUtils.h"
 
 #ifdef HAVE_ALLOCA_H
 #include <alloca.h>
@@ -567,7 +568,7 @@
     var134 = JS_FALSE;
     var135 = obj;
     var139 = argc;
-    jsTestCrash();
+    scriptTestCrash();
     var134 = JS_TRUE;
     return var134;
 }
@@ -582,7 +583,7 @@
     var140 = JS_FALSE;
     var141 = obj;
     var145 = argc;
-    jsTestAssert();
+    scriptTestAssert();
     var140 = JS_TRUE;
     return var140;
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.idl
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.idl	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory_js.idl	2010-06-08 18:24:04 UTC (rev 6344)
@@ -1,7 +1,8 @@
 %{
 #include "stdio.h"
 #include "ADM_jsAvidemux.h"
-#include "ADM_jsTestFactory.h"
+#include "ADM_scriptTestFactory.h"
+#include "ADM_scriptUtils.h"
 %}
 /*
 ###############################################################
@@ -27,8 +28,8 @@
 function int admTestFacThreadCount:  jsTestFacThreadCount   (void  ) <static>;
 function int admTestFacSlider  :  jsTestFacSlider  (void  ) <static>;
 function int admTestEncoding   :  jsTestFacEncoding  (void  ) <static>;
-function void admTestCrash     :  jsTestCrash      (void  ) <static>;
-function void admTestAssert    :  jsTestAssert     (void  ) <static>;
+function void admTestCrash     :  scriptTestCrash      (void  ) <static>;
+function void admTestAssert    :  scriptTestAssert     (void  ) <static>;
 
 %<
 JSFunctionSpec  *jsGetTestFunctions(void)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-08 18:24:04 UTC (rev 6344)
@@ -45,6 +45,8 @@
 #include "editor_gen.cpp"
 #include "GUI_gen.cpp"
 
+#include "pyHelpers_gen.cpp"
+
 #include "pyDFToggle_gen.cpp"
 #include "pyDFInteger_gen.cpp"
 #include "pyDFMenu_gen.cpp"
@@ -73,6 +75,9 @@
     py->registerClass("DFInteger",initClasspyDFInteger);
     py->registerClass("DFMenu",initClasspyDFMenu);
     py->registerClass("DialogFactory",initClasspyDialogFactory);
+
+    py->registerFuncs("test",pyHelpers_functions);
+
     tinyPy::registerLogger(pyLogger);
     return true;
 }

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc	2010-06-08 18:24:04 UTC (rev 6344)
@@ -0,0 +1,4 @@
+# Basic action load, handle seg, getInfo
+/* FUNC */ int scriptTestAssert:testAssert          (void ) 
+/* FUNC */ int scriptTestCrash:testCrash           (void ) 
+

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.cpp	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.cpp	2010-06-08 18:24:04 UTC (rev 6344)
@@ -0,0 +1,17 @@
+//int  scriptTestAssert <void >
+tp_obj zzpy_testAssert(TP)
+{
+int r=scriptTestAssert(); 
+return tp_number(r);
+}
+//int  scriptTestCrash <void >
+tp_obj zzpy_testCrash(TP)
+{
+int r=scriptTestCrash(); 
+return tp_number(r);
+}
+pyFuncs pyHelpers_functions[]={
+{"testAssert",zzpy_testAssert},
+{"testCrash",zzpy_testCrash},
+{NULL,NULL}
+};

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.h	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers_gen.h	2010-06-08 18:24:04 UTC (rev 6344)
@@ -0,0 +1,2 @@
+int  testAssert (void );
+int  testCrash (void );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp	2010-06-08 18:24:04 UTC (rev 6344)
@@ -54,6 +54,6 @@
 aviInfo info;
         video_body->getVideoInfo(&info);
         fcc=info.fcc;
-        ADM_strdup(fourCC::tostring(fcc));
+        return ADM_strdup(fourCC::tostring(fcc));
 }
 // EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp	2010-06-08 18:16:38 UTC (rev 6343)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp	2010-06-08 18:24:04 UTC (rev 6344)
@@ -35,4 +35,26 @@
     if(conf) delete conf;
     return r;
 }
+
+/**
+    \fn scriptTestCrash
+    \brief Force a crash
+*/
+int scriptTestCrash(void)
+{
+  
+  int *foobar=NULL;
+  *foobar=0; // CRASH!
+  return true;
+}
+/**
+    \fn scriptTestAssert
+    \brief Force a crash
+*/
+int scriptTestAssert(void)
+{
+  
+  ADM_assert(0);
+  return true;
+}
 //EOF



From mean at mail.berlios.de  Tue Jun  8 20:24:07 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 8 Jun 2010 20:24:07 +0200
Subject: [Avidemux-svn-commit] r6345 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog
Message-ID: <201006081824.o58IO7Xj006119@sheep.berlios.de>

Author: mean
Date: 2010-06-08 20:24:06 +0200 (Tue, 08 Jun 2010)
New Revision: 6345

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp
Log:
[Qt4] Replace CR by <br> in info and error _HIG function

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp	2010-06-08 18:24:04 UTC (rev 6344)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/alert_qt4.cpp	2010-06-08 18:24:06 UTC (rev 6345)
@@ -65,9 +65,11 @@
          {
         	 snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,secondary_format);
          }
+        QString info=QString::fromUtf8(alertstring);
+        QString info2=info.replace("\n","<br>");
         QMessageBox::StandardButton reply;
-          reply = QMessageBox::information(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Info")),
-                                    QString::fromUtf8(alertstring),
+        reply = QMessageBox::information(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Info")),
+                                    info,
                                     QMessageBox::Ok );
 
 }
@@ -95,8 +97,10 @@
         	 snprintf(alertstring,1024,"<big><b>%s</b></big><br><br>%s",primary,secondary_format);
          }
           QMessageBox::StandardButton reply;
+          QString info=QString::fromUtf8(alertstring);
+          QString info2=info.replace("\n","<br>");
           reply = QMessageBox::critical(QuiMainWindows, QString::fromUtf8(QT_TR_NOOP("Info")),
-                                    QString::fromUtf8(alertstring),
+                                    info2,
                                     QMessageBox::Ok );
 }
 //****************************************************************************************************



From mean at mail.berlios.de  Tue Jun  8 20:24:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 8 Jun 2010 20:24:08 +0200
Subject: [Avidemux-svn-commit] r6346 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src
Message-ID: <201006081824.o58IO8HY006129@sheep.berlios.de>

Author: mean
Date: 2010-06-08 20:24:08 +0200 (Tue, 08 Jun 2010)
New Revision: 6346

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_crashdump.cpp
Log:
[core/crashDump] Use string to prepare calltrack, more dangerous as c++ might be borked but ease readibility

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_crashdump.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_crashdump.cpp	2010-06-08 18:24:06 UTC (rev 6345)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/src/ADM_crashdump.cpp	2010-06-08 18:24:08 UTC (rev 6346)
@@ -20,7 +20,7 @@
 #include <string.h>
 #include <unistd.h>
 #include <math.h>
-
+#include <string>
 #ifdef __MINGW32__
 #include <windows.h>
 #include <excpt.h>
@@ -30,7 +30,7 @@
 #endif
 
 #include "ADM_default.h"
-
+using namespace std;
 // Our callback to give UI formatted informations....
 static ADM_saveFunction *mysaveFunction=NULL;
 static ADM_fatalFunction *myFatalFunction=NULL;
@@ -313,7 +313,7 @@
 void ADM_backTrack(const char *info,int lineno,const char *file)
 {
 	char wholeStuff[2048];
-    char buffer[2048];
+    char buffer[4096];
     char in[2048];
 	void *stack[20];
 	char **functions;
@@ -329,7 +329,8 @@
 
 	count = backtrace(stack, 20);
 	functions = backtrace_symbols(stack, count);
-	sprintf(wholeStuff,"%s\n at line %d, file %s",info,lineno,file);
+	sprintf(wholeStuff,"%s\n at line %d, file %s",info,lineno,file);
+    string guiOut(wholeStuff); 
     int status;
     size_t size=2047;
     // it looks like that xxxx (functionName+0x***) XXXX
@@ -346,15 +347,14 @@
             if(status) strcpy(buffer,in);
         }else       
             strcpy(buffer,functions[i]);
-        printf("%s:%d:<%s>:%d\n",functions[i],i,buffer,status);
-		strcat(wholeStuff,buffer);
-		strcat(wholeStuff,"\n");
+        printf("%s:%d:<%s>:%d\n",functions[i],i,buffer,status);
+        guiOut+=string(buffer)+string("\n");
+		
 	}
-
 	printf("*********** BACKTRACK **************\n");
 
 	if(myFatalFunction)
-		myFatalFunction("Crash", wholeStuff); // FIXME
+		myFatalFunction("Crash", guiOut.c_str()); // FIXME
 #endif	//__CYGWIN__
 
 	exit(-1); // _exit(1) ???



From mean at mail.berlios.de  Tue Jun  8 20:24:12 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 8 Jun 2010 20:24:12 +0200
Subject: [Avidemux-svn-commit] r6347 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006081824.o58IOCm7006143@sheep.berlios.de>

Author: mean
Date: 2010-06-08 20:24:09 +0200 (Tue, 08 Jun 2010)
New Revision: 6347

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[Qt4] Hook the backTrack and saveProjectOnCrash

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-08 18:24:08 UTC (rev 6346)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-08 18:24:09 UTC (rev 6347)
@@ -33,6 +33,8 @@
 #include "ADM_coreVideoEncoderInternal.h"
 #include "ADM_muxerProto.h"
 #include "T_vumeter.h"
+#include "DIA_coreToolkit.h"
+
 extern int global_argc;
 extern char **global_argv;
 
@@ -71,7 +73,7 @@
 QWidget *QuiMainWindows=NULL;
 QGraphicsView *drawWindow=NULL;
 uint8_t UI_updateRecentMenu( void );
-
+extern void saveCrashProject(void);
 extern uint8_t AVDM_setVolume(int volume);
 
 #define WIDGET(x)  (((MainWindow *)QuiMainWindows)->ui.x)
@@ -639,6 +641,13 @@
 			WIDGET(actionPreviewInput)->setChecked(true);
 	}
 }
+/**
+        \fn FatalFunctionQt
+*/
+static void FatalFunctionQt(const char *title, const char *info)
+{
+	GUI_Info_HIG(ADM_LOG_IMPORTANT, title, info);
+}
 
 /**
     \fn UI_RunApp(void)
@@ -648,6 +657,7 @@
 {
 	
 	setupMenus();
+    ADM_setCrashHook(&saveCrashProject, &FatalFunctionQt);
 	checkCrashFile();
 
 	if (global_argc >= 2)



From gruntster at mail.berlios.de  Tue Jun  8 20:53:34 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 8 Jun 2010 20:53:34 +0200
Subject: [Avidemux-svn-commit] r6348 - in
	branches/avidemux_2.5_branch_gruntster:
	avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2
	avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui po scripts/auto
	scripts/auto/Apple scripts/auto/Optical Disc
Message-ID: <201006081853.o58IrYJo008244@sheep.berlios.de>

Author: gruntster
Date: 2010-06-08 20:53:26 +0200 (Tue, 08 Jun 2010)
New Revision: 6348

Added:
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/translate_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/translate_dummy.cpp
   branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh
   branches/avidemux_2.5_branch_gruntster/po/update_pot.bash
Log:
[i18n] use dummy strings to translate auto wizard menu - this should probably be automatically generated but it will do for now

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_gui2/GUI_bindings.cpp	2010-06-08 18:53:26 UTC (rev 6348)
@@ -674,7 +674,7 @@
 
 		if (g_file_test(path, G_FILE_TEST_IS_DIR))
 		{
-			GtkWidget *menuItem = gtk_menu_item_new_with_mnemonic(display_name);
+			GtkWidget *menuItem = gtk_menu_item_new_with_mnemonic(QT_TR_NOOP(display_name));
 			gtk_widget_show(menuItem);
 			gtk_container_add(GTK_CONTAINER(parentMenu), menuItem);
 
@@ -690,7 +690,7 @@
 			*(strrchr(display_name, '.')) = 0;
 			autoWizardStack.push(pathCopy);
 
-			GtkWidget *menuItem = gtk_menu_item_new_with_mnemonic(display_name);
+			GtkWidget *menuItem = gtk_menu_item_new_with_mnemonic(QT_TR_NOOP(display_name));
 			gtk_widget_show(menuItem);
 			gtk_container_add(GTK_CONTAINER(parentMenu), menuItem);
 			gtk_signal_connect(GTK_OBJECT(menuItem), "activate", GTK_SIGNAL_FUNC(autoMenuCallback), (gpointer)pathCopy);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/Q_gui2.cpp	2010-06-08 18:53:26 UTC (rev 6348)
@@ -629,7 +629,7 @@
 
 				if (fileList[x].isDir())
 				{
-					menu = parentMenu->addMenu(QDir(fileList[x].filePath()).dirName());
+					menu = parentMenu->addMenu(tr(QDir(fileList[x].filePath()).dirName().toUtf8().constData()));
 
 					addDirEntryToMenu(menu, fileList[x].filePath() + QDir::separator());
 				}
@@ -640,7 +640,7 @@
 	}
 	else
 	{
-		QAction *action = new QAction(info.completeBaseName(), parentMenu);
+		QAction *action = new QAction(tr(info.completeBaseName().toUtf8().constData()), parentMenu);
 
 		parentMenu->addAction(action);
 		connect(action, SIGNAL(triggered()), this, SLOT(autoMenuHandler()));

Modified: branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/po/qt_update_pro.sh	2010-06-08 18:53:26 UTC (rev 6348)
@@ -14,6 +14,7 @@
 find ../avidemux -iname '*.cpp' -not -iwholename '*ADM_GTK*' -not -iwholename '*ADM_NONE*' -printf "\"%p\" \\\ \n" >> avidemux.pro
 find ../plugins -iname '*.cpp' -not -iwholename '*gtk*' -printf "\"%p\" \\\ \n" >> avidemux.pro
 find ../scripts -iname '*.js' -printf "\"%p\" \\\ \n" >> avidemux.pro
+find ../scripts -iname '*.cpp' -printf "\"%p\" \\\ \n" >> avidemux.pro
 echo "" >> avidemux.pro
 
 echo "Finding FORMS..."

Modified: branches/avidemux_2.5_branch_gruntster/po/update_pot.bash
===================================================================
--- branches/avidemux_2.5_branch_gruntster/po/update_pot.bash	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/po/update_pot.bash	2010-06-08 18:53:26 UTC (rev 6348)
@@ -8,6 +8,7 @@
 find ./avidemux -iname '*.cpp' -not -iwholename '*ADM_QT4*' >> po/POTFILES.in
 find ./plugins -iname '*.cpp' -not -iwholename '*ADM_QT4*' -not -iwholename '*qt4*' >> po/POTFILES.in
 find ./scripts -iname '*.js' >> po/POTFILES.in
+find ./scripts -iname '*.cpp' >> po/POTFILES.in
 
 cd po
 echo "Generating pot file..."

Added: branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/translate_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/translate_dummy.cpp	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/translate_dummy.cpp	2010-06-08 18:53:26 UTC (rev 6348)
@@ -0,0 +1,7 @@
+MainWindow::TranslateMe
+{
+	QT_TR_NOOP("Apple");
+	QT_TR_NOOP("Apple iPhone");
+	QT_TR_NOOP("Apple iPod 5.5G");
+	QT_TR_NOOP("Apple iPod");
+}
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/translate_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/translate_dummy.cpp	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Optical Disc/translate_dummy.cpp	2010-06-08 18:53:26 UTC (rev 6348)
@@ -0,0 +1,7 @@
+MainWindow::TranslateMe
+{
+	QT_TR_NOOP("Optical Disc");
+	QT_TR_NOOP("DVD");
+	QT_TR_NOOP("Super Video CD");
+	QT_TR_NOOP("Video CD");
+}
\ No newline at end of file

Added: branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp	2010-06-08 18:53:26 UTC (rev 6348)
@@ -0,0 +1,5 @@
+MainWindow::TranslateMe
+{
+	QT_TR_NOOP("Microsoft Zune");
+	QT_TR_NOOP("Sony PlayStation Portable");
+}
\ No newline at end of file



From gruntster at mail.berlios.de  Wed Jun  9 20:22:49 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 9 Jun 2010 20:22:49 +0200
Subject: [Avidemux-svn-commit] r6351 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4
Message-ID: <201006091822.o59IMn7L014220@sheep.berlios.de>

Author: gruntster
Date: 2010-06-09 20:22:45 +0200 (Wed, 09 Jun 2010)
New Revision: 6351

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
Log:
[i18n] make Custom labels independently translatable for Qt

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2010-06-08 19:04:36 UTC (rev 6350)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2010-06-09 18:22:45 UTC (rev 6351)
@@ -531,7 +531,7 @@
               <item>
                <widget class="QRadioButton" name="threadCustomRadioButton" >
                 <property name="text" >
-                 <string>Custom:</string>
+                 <string comment="multithreading" >Custom:</string>
                 </property>
                </widget>
               </item>
@@ -3588,7 +3588,7 @@
             <item row="0" column="0" >
              <widget class="QRadioButton" name="sarCustomRadioButton" >
               <property name="text" >
-               <string>Custom:</string>
+               <string comment="PAR" >Custom:</string>
               </property>
               <property name="checked" >
                <bool>true</bool>



From gruntster at mail.berlios.de  Wed Jun  9 22:54:21 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Wed, 9 Jun 2010 22:54:21 +0200
Subject: [Avidemux-svn-commit] r6352 - in
	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts:
	. avidemux
Message-ID: <201006092054.o59KsLUp023335@sheep.berlios.de>

Author: gruntster
Date: 2010-06-09 22:54:13 +0200 (Wed, 09 Jun 2010)
New Revision: 6352

Modified:
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1a. Pre-build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Perform Build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2. Create Packages.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat
   branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat
Log:
[win32] tweak build scripts

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/Set Common Environment Variables.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -1,5 +1,3 @@
- at echo off
-
 set ProgramFiles32=%ProgramFiles%
 if "%PROCESSOR_ARCHITECTURE%" == "AMD64" for /D %%d in ("%ProgramFiles(x86)%") do set ProgramFiles32=%%~fsd
 set nsisDir=%ProgramFiles32%\NSIS
@@ -84,6 +82,6 @@
 goto end
 
 :error
-set ERRORLEVEL=1
+exit /b 1
 
 :end
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1a. Pre-build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1a. Pre-build.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1a. Pre-build.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -1,26 +1,32 @@
 cd "%sourceDir%"
 echo Cleaning build directory (%CD%\%BuildFolder%)
-rmdir /s /q %buildFolder% 2> NUL
+rmdir /s /q "%buildFolder%" 2> NUL
 
-cd "%sourceDir%\plugins"
-echo Cleaning plugin build directory (%CD%\%BuildFolder%)
-rmdir /s /q %buildFolder% 2> NUL
+echo Cleaning plugin build directory (%CD%\%buildPluginFolder%)
+rmdir /s /q "%buildPluginFolder%" 2> NUL
 
-if exist %buildFolder% goto removalFailure
-cd "%sourceDir%"
-if exist %buildFolder% goto removalFailure
+echo Cleaning SDK directory (%sdkBuildDir%)
+rmdir /s /q "%sdkBuildDir%" 2> NUL
 
-mkdir %buildFolder%
-mkdir plugins\%buildFolder%
+if exist "%buildFolder%" goto removalFailure
+if exist "%buildPluginFolder%" goto removalFailure
+if exist "%sdkBuildDir%" goto removalFailure
 
+mkdir "%buildFolder%"
+mkdir "%buildPluginFolder%"
+mkdir "%sdkBuildDir%"
+
+echo.
 echo Performing Subversion update
 svn up .
+echo.
 
 goto :EOF
 
 :removalFailure
+echo.
 echo ERROR - build directories could not be fully deleted.
 echo Aborting.
 
 :error
-set ERRORLEVEL=1
\ No newline at end of file
+exit /b 1
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Perform Build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Perform Build.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1b. Perform Build.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -5,8 +5,8 @@
 pause
 
 set msysSourceDir=%sourceDir:\=/%
-cd "%sourceDir%\plugins\%buildFolder%"
-cmake -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX="%buildDir%" -DAVIDEMUX_CORECONFIG_DIR="%msysSourceDir%/%buildFolder%/config" -DAVIDEMUX_INSTALL_PREFIX="%buildDir%" -DAVIDEMUX_SOURCE_DIR="%msysSourceDir%" -DCMAKE_EXE_LINKER_FLAGS="-shared-libgcc" -DCMAKE_SHARED_LINKER_FLAGS="-shared-libgcc" %DebugFlags% ..
+cd "%sourceDir%\%buildPluginFolder%"
+cmake -G"MSYS Makefiles" -DCMAKE_INSTALL_PREFIX="%buildDir%" -DAVIDEMUX_CORECONFIG_DIR="%msysSourceDir%/%buildFolder%/config" -DAVIDEMUX_INSTALL_PREFIX="%buildDir%" -DAVIDEMUX_SOURCE_DIR="%msysSourceDir%" -DCMAKE_EXE_LINKER_FLAGS="-shared-libgcc" -DCMAKE_SHARED_LINKER_FLAGS="-shared-libgcc" %DebugFlags% ../plugins
 
 if errorlevel 1 goto error
 pause
@@ -16,7 +16,7 @@
 
 if errorlevel 1 goto error
 
-cd "%sourceDir%\plugins\%buildFolder%"
+cd "%sourceDir%\%buildPluginFolder%"
 rmdir /s /q "%buildDir%\plugins" 2> NUL
 make install
 
@@ -24,4 +24,4 @@
 goto :EOF
 
 :error
-set ERRORLEVEL=1
\ No newline at end of file
+exit /b 1
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/1c. Post-build.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -1,5 +1,3 @@
-rmdir /s/q "%sdkBuildDir%"
-mkdir "%sdkBuildDir%"
 mkdir "%sdkBuildDir%\lib"
 move "%buildDir%\lib\*.a" "%sdkBuildDir%\lib"
 del /s "%buildDir%\*.a"

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2. Create Packages.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2. Create Packages.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2. Create Packages.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -43,7 +43,7 @@
 goto end
 
 :error
-set ERRORLEVEL 1
+exit /b 1
 
 :end
 pause
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/2a. Update Notes.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -14,7 +14,7 @@
 goto end
 
 :error
-set ERRORLEVEL=1
+exit /b 1
 
 :end
 pause
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat
===================================================================
--- branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat	2010-06-09 18:22:45 UTC (rev 6351)
+++ branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux/Set Avidemux Environment Variables.bat	2010-06-09 20:54:13 UTC (rev 6352)
@@ -33,9 +33,14 @@
 	goto error
 )
 
-if "%BuildBits%" == "32" (set buildFolder=build)
-if "%BuildBits%" == "64" (set buildFolder=build64)
+if "%BuildBits%" == "32" (
+	set buildFolder=build
+	set buildPluginFolder=buildPlugins)
 
+if "%BuildBits%" == "64" (
+	set buildFolder=build64
+	set buildPluginFolder=buildPlugins64)
+
 set buildDir=%devDir%\avidemux_2.5_%buildFolder%
 set sdkBuildDir=%devDir%\avidemux_2.5_%buildFolder%_sdk
 
@@ -58,6 +63,6 @@
 goto end
 
 :error
-set ERRORLEVEL=1
+exit /b 1
 
 :end
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Jun 10 20:48:46 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Jun 2010 20:48:46 +0200
Subject: [Avidemux-svn-commit] r6353 -
	branches/avidemux_2.5_branch_gruntster/scripts/auto
Message-ID: <201006101848.o5AImkuR005125@sheep.berlios.de>

Author: gruntster
Date: 2010-06-10 20:48:38 +0200 (Thu, 10 Jun 2010)
New Revision: 6353

Removed:
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Apple/
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js
   branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp
Log:
[auto] drop dead auto wizards

Deleted: branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js	2010-06-09 20:54:13 UTC (rev 6352)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Microsoft Zune.js	2010-06-10 18:48:38 UTC (rev 6353)
@@ -1,41 +0,0 @@
-//AD
-include("video/autoWizard.js");
-include("video/filter.js");
-
-var app = new Avidemux();
-
-if (app.video == null)
-    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
-else
-{
-    var result = videoAutoWizard(QT_TR_NOOP("Microsoft Zune Auto Wizard"), [[320, 240], [640, 480]]);
-
-    if (result)
-    {
-        var targetX = result[0][0];
-        var targetY = result[0][1];
-        var sourceRatio = result[1][0] + ":" + result[1][1];
-        var destinationRatio = result[2][0] + ":" + result[2][1];
-
-        resizeAndFillVideo(targetX, targetY, sourceRatio, destinationRatio);
-
-        app.video.codecPlugin("32BCB447-21C9-4210-AE9A-4FCE6C8588AE", "x264", "2PASSBITRATE=1000", "<?xml version='1.0'?><x264Config><presetConfiguration><name>Microsoft Zune</name><type>system</type></presetConfiguration><x264Options></x264Options></x264Config>");
-
-        if (app.audio.targetTrackInfo.length > 0)
-        {
-            if (app.audio.targetTrackInfo[0].codec == "AAC" && app.audio.targetTrackInfo[0].channelCount == 2)
-                app.video.codec("Copy", "CQ=4", "0 ");
-            else
-            {
-                app.audio.codec("Faac", 128, 4, "80 00 00 00 ");
-
-                if (app.audio.targetTrackInfo[0].channelCount == 2)
-                    app.audio.mixer = "NONE";
-                else
-                    app.audio.mixer = "STEREO";
-            }
-        }
-
-        app.setContainer("MP4");
-    }
-}
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js	2010-06-09 20:54:13 UTC (rev 6352)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/Sony PlayStation Portable.js	2010-06-10 18:48:38 UTC (rev 6353)
@@ -1,41 +0,0 @@
-//AD
-include("video/autoWizard.js");
-include("video/filter.js");
-
-var app = new Avidemux();
-
-if (app.video == null)
-    displayError(QT_TR_NOOP("A video file must be open to use this Auto Wizard."));
-else
-{
-    var result = videoAutoWizard(QT_TR_NOOP("Sony PSP Auto Wizard"), [[480, 272], [720, 480]]);
-
-    if (result)
-    {
-        var targetX = result[0][0];
-        var targetY = result[0][1];
-        var sourceRatio = result[1][0] + ":" + result[1][1];
-        var destinationRatio = result[2][0] + ":" + result[2][1];
-
-        resizeAndFillVideo(targetX, targetY, sourceRatio, destinationRatio);
-
-        app.video.codecPlugin("32BCB447-21C9-4210-AE9A-4FCE6C8588AE", "x264", "2PASSBITRATE=1000", "<?xml version='1.0'?><x264Config><presetConfiguration><name>Sony PlayStation Portable</name><type>system</type></presetConfiguration><x264Options></x264Options></x264Config>");
-
-        if (app.audio.targetTrackInfo.length > 0)
-        {
-            if (app.audio.targetTrackInfo[0].codec == "AAC" && app.audio.targetTrackInfo[0].channelCount == 2)
-                app.video.codec("Copy", "CQ=4", "0 ");
-            else
-            {
-                app.audio.codec("Faac", 128, 4, "80 00 00 00 ");
-
-                if (app.audio.targetTrackInfo[0].channelCount == 2)
-                    app.audio.mixer = "NONE";
-                else
-                    app.audio.mixer = "STEREO";
-            }
-        }
-
-        app.setContainer("PSP");
-    }
-}
\ No newline at end of file

Deleted: branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp	2010-06-09 20:54:13 UTC (rev 6352)
+++ branches/avidemux_2.5_branch_gruntster/scripts/auto/translate_dummy.cpp	2010-06-10 18:48:38 UTC (rev 6353)
@@ -1,5 +0,0 @@
-MainWindow::TranslateMe
-{
-	QT_TR_NOOP("Microsoft Zune");
-	QT_TR_NOOP("Sony PlayStation Portable");
-}
\ No newline at end of file



From gruntster at mail.berlios.de  Thu Jun 10 21:35:41 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Jun 2010 21:35:41 +0200
Subject: [Avidemux-svn-commit] r6354 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs
	ADM_inputs/ADM_openDML
Message-ID: <201006101935.o5AJZfNb007392@sheep.berlios.de>

Author: gruntster
Date: 2010-06-10 21:35:35 +0200 (Thu, 10 Jun 2010)
New Revision: 6354

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
Log:
[dib] flip DIB video when required (fixes #67)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-10 18:48:38 UTC (rev 6353)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-10 19:35:35 UTC (rev 6354)
@@ -389,7 +389,7 @@
   if (fcc == 0 || fourCC::check(fcc, (uint8_t *) "RGB ") || fourCC::check(fcc, (uint8_t *) "DIB "))
   {
 	  printf ("\n using Rawvideo codec, BPP: %d\n", bpp);
-	  return (decoders *) (new decoderFFRaw(w, h, bpp));
+	  return (decoders *) (new decoderFFRaw(w, h, bpp, extraLen, extraData));
   }
 
   if (isMpeg12Compatible (fcc))

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2010-06-10 18:48:38 UTC (rev 6353)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2010-06-10 19:35:35 UTC (rev 6354)
@@ -563,8 +563,10 @@
 	WRAP_Open (CODEC_ID_BMP);
 }
 
-decoderFFRaw::decoderFFRaw(uint32_t w, uint32_t h, uint32_t bpp) : decoderFF (w, h)
+decoderFFRaw::decoderFFRaw(uint32_t w, uint32_t h, uint32_t bpp, uint32_t l, uint8_t *d) : decoderFF (w, h)
 {
+	_context->extradata_size = (int) l;
+	_context->extradata = (uint8_t *) d;
 	_context->bits_per_coded_sample = bpp;
 	WRAP_Open (CODEC_ID_RAWVIDEO);
 }

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h	2010-06-10 18:48:38 UTC (rev 6353)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h	2010-06-10 19:35:35 UTC (rev 6354)
@@ -261,7 +261,7 @@
 class decoderFFRaw : public decoderFF
 {
 public:
-	decoderFFRaw(uint32_t w, uint32_t h, uint32_t bpp);
+	decoderFFRaw(uint32_t w, uint32_t h, uint32_t bpp, uint32_t l, uint8_t *d);
 };
 
 class decoderFFPng : public decoderFF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2010-06-10 18:48:38 UTC (rev 6353)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_openDML/ADM_openDML.cpp	2010-06-10 19:35:35 UTC (rev 6354)
@@ -475,12 +475,25 @@
                                                 track->extraDataLen,track->extraData);
                         }
                 }
-                if(!_video_bih.biCompression && fourCC::check(_videostream.fccHandler,(uint8_t*)"DIB "))
-                  {
-                        _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t*)"DIB ");
-                  }
-                else
-                _videostream.fccHandler=_video_bih.biCompression;
+
+				if (!_video_bih.biCompression && fourCC::check(_videostream.fccHandler,(uint8_t*)"DIB "))
+				{
+					// flip video
+					uint8_t *extraData = new uint8_t[_videoExtraLen + 9];
+
+					memcpy(extraData, _videoExtraData, _videoExtraLen);
+					memcpy(extraData + _videoExtraLen, "BottomUp", 9);
+										
+					delete [] _videoExtraData;
+
+					_videoExtraLen += 9;
+					_videoExtraData = extraData;
+
+					_videostream.fccHandler = _video_bih.biCompression = fourCC::get((uint8_t*)"DIB ");
+				}
+				else				
+					_videostream.fccHandler=_video_bih.biCompression;
+
                 printf("\nOpenDML file successfully read..\n");
                 return ret;
 }



From gruntster at mail.berlios.de  Thu Jun 10 22:05:37 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Jun 2010 22:05:37 +0200
Subject: [Avidemux-svn-commit] r6355 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
Message-ID: <201006102005.o5AK5bve010923@sheep.berlios.de>

Author: gruntster
Date: 2010-06-10 22:05:33 +0200 (Thu, 10 Jun 2010)
New Revision: 6355

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp
Log:
[js] pass file handle instead of file name to Spidermonkey so Avidemux file funcs are used (fixes #86)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp	2010-06-10 19:35:35 UTC (rev 6354)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp	2010-06-10 20:05:33 UTC (rev 6355)
@@ -164,7 +164,11 @@
 	uintN lineno = 0;
 	g_bJSSuccess = 0;
 	printf("Spidermonkey compiling \"%s\"...",name);
-	JSScript *pJSScript = JS_CompileFile(g_pCx, g_pObject, name);
+
+	FILE *file = fopen(name, "r");
+	JSScript *pJSScript = JS_CompileFileHandle(g_pCx, g_pObject, name, file);;
+
+	fclose(file);
 	printf("Done.\n");
 
 	if(pJSScript != NULL)



From gruntster at mail.berlios.de  Thu Jun 10 23:01:38 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Thu, 10 Jun 2010 23:01:38 +0200
Subject: [Avidemux-svn-commit] r6356 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
Message-ID: <201006102101.o5AL1cOj013859@sheep.berlios.de>

Author: gruntster
Date: 2010-06-10 23:01:33 +0200 (Thu, 10 Jun 2010)
New Revision: 6356

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.h
Log:
[qt] prompt to abort encoding if encoding window is closed (fixes #73)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-10 20:05:33 UTC (rev 6355)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-10 21:01:33 UTC (rev 6356)
@@ -13,6 +13,7 @@
  ***************************************************************************/
 #include <math.h>
 #include <QtGui/QPushButton>
+#include <QtGui/QCloseEvent>
 
 #include "Q_encoding.h"
 #include "prefs.h"
@@ -30,7 +31,7 @@
 static int stopReq=0;
 
 encodingWindow::encodingWindow(QWidget *parent, bool useTray) : QDialog(parent, Qt::WindowTitleHint | Qt::WindowSystemMenuHint | Qt::WindowMinimizeButtonHint)
- {
+{
 	this->useTray = useTray;
 	ui.setupUi(this);
 
@@ -89,10 +90,24 @@
 	}
 }
 
+void encodingWindow::closeEvent(QCloseEvent *event)
+{
+	if (GUI_Alternate((char*)encodingWindow::tr("The encoding is paused. Do you want to resume or abort?").toUtf8().constData(),
+		(char*)encodingWindow::tr("Resume").toUtf8().constData(), (char*)encodingWindow::tr("Abort").toUtf8().constData()))
+	{
+		stopReq = 0;
+		event->ignore();
+	}
+	else
+	{
+		stopReq = 1;
+		event->accept();
+	}
+}
+
 void encodingWindow::buttonPressed(void)
 {
-	printf("StopReq\n");
-	stopReq=1;
+	this->close();
 }
 
 void encodingWindow::priorityChanged(int priorityLevel)
@@ -493,20 +508,10 @@
 */
 uint8_t DIA_encoding::isAlive( void )
 {
-        updateUI();
+	if (!stopReq)
+		updateUI();
 
-        if(stopReq)
-        {
-          if(GUI_Alternate((char*)encodingWindow::tr("The encoding is paused. Do you want to resume or abort?").toUtf8().constData(),
-                              (char*)encodingWindow::tr("Resume").toUtf8().constData(), (char*)encodingWindow::tr("Abort").toUtf8().constData()))
-                 {
-                         stopReq=0;
-                 }
-        }
-
-        if(!stopReq) return 1;		
-
-        return 0;
+	return !stopReq;
 }
 
 //********************************************

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.h	2010-06-10 20:05:33 UTC (rev 6355)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.h	2010-06-10 21:01:33 UTC (rev 6356)
@@ -12,6 +12,7 @@
 
  protected:
 	void changeEvent(QEvent *event);
+	void closeEvent(QCloseEvent *event);
 
  public:
      encodingWindow(QWidget *parent, bool useTray);



From mean at mail.berlios.de  Fri Jun 11 20:08:21 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Jun 2010 20:08:21 +0200
Subject: [Avidemux-svn-commit] r6357 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_script2 avidemux/common/ADM_script2/binding
	avidemux/common/ADM_script2/py cmake
Message-ID: <201006111808.o5BI8L0d008680@sheep.berlios.de>

Author: mean
Date: 2010-06-11 20:08:20 +0200 (Fri, 11 Jun 2010)
New Revision: 6357

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/GUI.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFInteger.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFMenu.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFToggle.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDialogFactory.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyHelpers.admPyFunc
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
   branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
   branches/avidemux_2.6_branch_mean/cmake/admPyFunc.pl
Log:
[py] move descriptor in their own subdirs

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/GUI.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/GUI.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,9 @@
+#           name    cookie id
+/* CLASS */ pyGui : void : ADM_PYID_GUI
+#              cname:pyname
+/* METHOD */ str scriptDirSelect:dirSelect(str) 
+/* METHOD */ str scriptFileSelRead:fileReadSelect(str) 
+/* METHOD */ str scriptFileSelWrite:fileWriteSelect(str) 
+/* METHOD */ void scriptDisplayError:displayError(str,str) 
+/* METHOD */ void scriptDisplayInfo:displayInfo(str,str) 
+

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/adm.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,41 @@
+#           name    cookie id
+/* CLASS */ pyAdm : void : ADM_PYID_AVIDEMUX
+#              cname:pyname
+# Basic action load, handle seg, getInfo
+/* METHOD */ int scriptLoadVideo:loadVideo          (str ) 
+/* METHOD */ int scriptClearSegments:clearSegments  (void) 
+/* METHOD */ int scriptAppendVideo:appendVideo      (str ) 
+/* METHOD */ int scriptAddSegment:addSegment        (int ,float , float ) 
+/* METHOD */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
+/* METHOD */ int scriptGetWidth:getWidth            (void) 
+/* METHOD */ int scriptGetHeight:getHeight          (void) 
+/* METHOD */ int scriptGetFps1000:getFps1000        (void) 
+/* METHOD */ str scriptGetVideoCodec:getVideoCodec(void) 
+/* METHOD */ int scriptAudioReset:audioReset        (void) 
+/* METHOD */ int scriptAudioMixer:audioMixer        (str ) 
+/* METHOD */ int scriptClearVideoFilters:clearVideoFilters   (void) 
+#
+#
+#              cname:pyname
+#  Codec, container
+/* METHOD */ int scriptSetVideoCodec:videoCodec(str,couples) 
+/* METHOD */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
+/* METHOD */ int scriptSetContainer:setContainer(str,couples) 
+/* METHOD */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
+#
+#  Save audio, video, images
+#
+/* METHOD */ int A_audioSave:saveAudio(str) 
+/* METHOD */ int A_Save:save(str) 
+/* METHOD */ int A_saveJpg:saveJpeg(str) 
+/* METHOD */ int A_saveImg:saveBmp(str) 
+#
+#
+# Seek
+#/* METHOD */ int A_saveImg:saveBmp(str) 
+#
+#       Variables
+#
+/* ATTRIBUTES */ double markerA:scriptSetMarkerA,scriptGetMarkerA
+/* ATTRIBUTES */ double markerB:scriptSetMarkerB,scriptGetMarkerB
+/* ATTRIBUTES */ int    audioResample:scriptSetResample,scriptGetResample

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,6 @@
+#              cname:pyname
+/* CLASS */ pyEditor : void : ADM_PYID_EDITOR
+/* METHOD */ int jsPrintTiming:printTiming      (int ) 
+/* METHOD */ int jsDumpSegments:dumpSegment     (void) 
+/* METHOD */ int jsDumpRefVideos:dumpRefVideo   (void) 
+

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFInteger.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFInteger.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,7 @@
+#           name    cookie id
+/* CLASS */ pyDFInteger : ADM_scriptDFIntegerHelper : ADM_PYID_DF_INTEGER
+#              cname:pyname
+/* CTOR */   (str,int,int) 
+#
+/* ATTRIBUTES */ int value:setValue,value
+#

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFMenu.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFMenu.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,8 @@
+#           name    cookie id
+/* CLASS */ pyDFMenu : ADM_scriptDFMenuHelper :  ADM_PYID_DF_INTEGER 
+#              cname:pyname
+/* CTOR */   (str) 
+#
+/* ATTRIBUTES */ int index:setIndex,index
+/* METHOD */ void addItem:addItem(str)
+#

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFToggle.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDFToggle.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,7 @@
+#           name    cookie id
+/* CLASS */ pyDFToggle : ADM_scriptDFToggleHelper : ADM_PYID_DF_TOGGLE
+#              cname:pyname
+/* CTOR */   (str) 
+#
+/* ATTRIBUTES */ int value:setValue,value
+#

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDialogFactory.admPyClass (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyDialogFactory.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,8 @@
+#           name    cookie id
+/* CLASS */ pyDialogFactory : ADM_scriptDialogFactoryHelper : ADM_PYID_DIALOGF
+#              cname:pyname
+/* CTOR */   (str) 
+#
+/* METHOD */ int run:show(void) 
+/* METHOD */ void addControl:addControl(ptr at ADM_scriptDFBaseHelper) 
+#

Copied: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyHelpers.admPyFunc (from rev 6347, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc	2010-06-08 18:24:09 UTC (rev 6347)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/pyHelpers.admPyFunc	2010-06-11 18:08:20 UTC (rev 6357)
@@ -0,0 +1,4 @@
+# Basic action load, handle seg, getInfo
+/* FUNC */ int scriptTestAssert:testAssert          (void ) 
+/* FUNC */ int scriptTestCrash:testCrash           (void ) 
+

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/GUI.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,9 +0,0 @@
-#           name    cookie id
-/* CLASS */ pyGui : void : ADM_PYID_GUI
-#              cname:pyname
-/* METHOD */ str scriptDirSelect:dirSelect(str) 
-/* METHOD */ str scriptFileSelRead:fileReadSelect(str) 
-/* METHOD */ str scriptFileSelWrite:fileWriteSelect(str) 
-/* METHOD */ void scriptDisplayError:displayError(str,str) 
-/* METHOD */ void scriptDisplayInfo:displayInfo(str,str) 
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/adm.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,41 +0,0 @@
-#           name    cookie id
-/* CLASS */ pyAdm : void : ADM_PYID_AVIDEMUX
-#              cname:pyname
-# Basic action load, handle seg, getInfo
-/* METHOD */ int scriptLoadVideo:loadVideo          (str ) 
-/* METHOD */ int scriptClearSegments:clearSegments  (void) 
-/* METHOD */ int scriptAppendVideo:appendVideo      (str ) 
-/* METHOD */ int scriptAddSegment:addSegment        (int ,float , float ) 
-/* METHOD */ int scriptSetPostProc:setPostProc      (int ,int , int ) 
-/* METHOD */ int scriptGetWidth:getWidth            (void) 
-/* METHOD */ int scriptGetHeight:getHeight          (void) 
-/* METHOD */ int scriptGetFps1000:getFps1000        (void) 
-/* METHOD */ str scriptGetVideoCodec:getVideoCodec(void) 
-/* METHOD */ int scriptAudioReset:audioReset        (void) 
-/* METHOD */ int scriptAudioMixer:audioMixer        (str ) 
-/* METHOD */ int scriptClearVideoFilters:clearVideoFilters   (void) 
-#
-#
-#              cname:pyname
-#  Codec, container
-/* METHOD */ int scriptSetVideoCodec:videoCodec(str,couples) 
-/* METHOD */ int scriptSetAudioCodec:audioCodec(str,int,couples) 
-/* METHOD */ int scriptSetContainer:setContainer(str,couples) 
-/* METHOD */ int scriptAddVideoFilter:addVideoFilter(str,couples) 
-#
-#  Save audio, video, images
-#
-/* METHOD */ int A_audioSave:saveAudio(str) 
-/* METHOD */ int A_Save:save(str) 
-/* METHOD */ int A_saveJpg:saveJpeg(str) 
-/* METHOD */ int A_saveImg:saveBmp(str) 
-#
-#
-# Seek
-#/* METHOD */ int A_saveImg:saveBmp(str) 
-#
-#       Variables
-#
-/* ATTRIBUTES */ double markerA:scriptSetMarkerA,scriptGetMarkerA
-/* ATTRIBUTES */ double markerB:scriptSetMarkerB,scriptGetMarkerB
-/* ATTRIBUTES */ int    audioResample:scriptSetResample,scriptGetResample

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,6 +0,0 @@
-#              cname:pyname
-/* CLASS */ pyEditor : void : ADM_PYID_EDITOR
-/* METHOD */ int jsPrintTiming:printTiming      (int ) 
-/* METHOD */ int jsDumpSegments:dumpSegment     (void) 
-/* METHOD */ int jsDumpRefVideos:dumpRefVideo   (void) 
-

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFInteger.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,7 +0,0 @@
-#           name    cookie id
-/* CLASS */ pyDFInteger : ADM_scriptDFIntegerHelper : ADM_PYID_DF_INTEGER
-#              cname:pyname
-/* CTOR */   (str,int,int) 
-#
-/* ATTRIBUTES */ int value:setValue,value
-#

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFMenu.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,8 +0,0 @@
-#           name    cookie id
-/* CLASS */ pyDFMenu : ADM_scriptDFMenuHelper :  ADM_PYID_DF_INTEGER 
-#              cname:pyname
-/* CTOR */   (str) 
-#
-/* ATTRIBUTES */ int index:setIndex,index
-/* METHOD */ void addItem:addItem(str)
-#

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDFToggle.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,7 +0,0 @@
-#           name    cookie id
-/* CLASS */ pyDFToggle : ADM_scriptDFToggleHelper : ADM_PYID_DF_TOGGLE
-#              cname:pyname
-/* CTOR */   (str) 
-#
-/* ATTRIBUTES */ int value:setValue,value
-#

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyDialogFactory.admPyClass	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,8 +0,0 @@
-#           name    cookie id
-/* CLASS */ pyDialogFactory : ADM_scriptDialogFactoryHelper : ADM_PYID_DIALOGF
-#              cname:pyname
-/* CTOR */   (str) 
-#
-/* METHOD */ int run:show(void) 
-/* METHOD */ void addControl:addControl(ptr at ADM_scriptDFBaseHelper) 
-#

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/pyHelpers.admPyFunc	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,4 +0,0 @@
-# Basic action load, handle seg, getInfo
-/* FUNC */ int scriptTestAssert:testAssert          (void ) 
-/* FUNC */ int scriptTestCrash:testCrash           (void ) 
-

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/update.make	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,7 +1,12 @@
+OBJS1=pyHelpers_gen.cpp
 OBJS=adm_gen.cpp  editor_gen.cpp  pyDFInteger_gen.cpp  pyDFToggle_gen.cpp  pyDialogFactory_gen.cpp pyDFMenu_gen.cpp GUI_gen.cpp
-%_gen.cpp:%.admPyClass
-	perl ../../../../cmake/admPyClass.pl  $<
-all: $(OBJS)
 
+%_gen.cpp:../binding/%.admPyClass
+	perl ../../../../cmake/admPyClass.pl  $<  $@
+%_gen.cpp:../binding/%.admPyFunc
+	perl ../../../../cmake/admPyFunc.pl  $<  $@
+
+all: $(OBJS) $(OBJS1)
+
 clean:
 	rm -f $(OBJS)

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyClass.pl	2010-06-11 18:08:20 UTC (rev 6357)
@@ -544,17 +544,12 @@
 ##################################
 #  Main
 ##################################
-if(scalar(@ARGV)!=1)
+if(scalar(@ARGV)!=2)
 {
-        die("admPy inputfile\n");
+        die("admPy inputfile outputfile\n");
 }
 $input=$ARGV[0];
-$output=$input;
-$output=~s/\..*$//g;
-my $thisfile=$output;
-$thisfile=~s/^.*\///g;
-$headerFile=$output."_gen.h";
-$output=$output."_gen.cpp";
+$output=$ARGV[1];
 ##
 ## Main Loop
 ##

Modified: branches/avidemux_2.6_branch_mean/cmake/admPyFunc.pl
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admPyFunc.pl	2010-06-10 21:01:33 UTC (rev 6356)
+++ branches/avidemux_2.6_branch_mean/cmake/admPyFunc.pl	2010-06-11 18:08:20 UTC (rev 6357)
@@ -1,7 +1,6 @@
 use strict;
 my $input;
 my $output;
-my $headerFile;
 my $line;
 my $glueprefix="zzpy_";
 my $functionPrefix="";
@@ -99,7 +98,6 @@
         }
         print " New function : $retType,$func,<@params>\n";
         
-        print HEADER "$retType  $functionPrefix".$func." ($args);\n";
 
 
         for($i=0;$i<$nb;$i++)
@@ -129,17 +127,12 @@
 }
 
 
-if(scalar(@ARGV)!=1)
+if(scalar(@ARGV)!=2)
 {
-        die("admPy inputfile\n");
+        die("admPy inputfile outputfile\n");
 }
 $input=$ARGV[0];
-$output=$input;
-$output=~s/\..*$//g;
-my $thisfile=$output;
-$thisfile=~s/^.*\///g;
-$headerFile=$output."_gen.h";
-$output=$output."_gen.cpp";
+$output=$ARGV[1];
 print "Processing $input=>$output\n";
 open(OUTPUT,">$output") or die("Cannot open $output");
 ##
@@ -150,7 +143,6 @@
 close(INPUT);
 # Process them
 open(INPUT,$input) or die("Cannot open $input");
-open(HEADER,">$headerFile") or die("Cannot open $headerFile");
 while($line=<INPUT>)
 {
         chomp($line);
@@ -174,6 +166,10 @@
 # gen init array
 my $nbFunc=scalar(@allFuncs);
 my $i;
+my $thisfile=$input;
+$thisfile=~s/\.[a-zA-Z]*$//g;
+$thisfile=~s/^.*\///g;
+print "creating  $thisfile function table\n";
 print OUTPUT "pyFuncs ".$thisfile."_functions[]={\n";
 for($i=0;$i<$nbFunc;$i++)
 {
@@ -188,5 +184,4 @@
 print OUTPUT "{NULL,NULL}\n};\n";
 close(INPUT);
 close(OUTPUT);
-close(HEADER);
 print "done\n.";



From mean at mail.berlios.de  Fri Jun 11 20:08:22 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Jun 2010 20:08:22 +0200
Subject: [Avidemux-svn-commit] r6358 -
	branches/avidemux_2.6_branch_mean/avidemux/common
Message-ID: <201006111808.o5BI8MNu008690@sheep.berlios.de>

Author: mean
Date: 2010-06-11 20:08:22 +0200 (Fri, 11 Jun 2010)
New Revision: 6358

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
Log:
[playback] Handle better the case where there are no audio track

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-06-11 18:08:20 UTC (rev 6357)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-06-11 18:08:22 UTC (rev 6358)
@@ -349,7 +349,11 @@
     uint64_t startPts=firstPts;
 
     playbackAudio = createPlaybackFilter(startPts,0);
-    if(!playbackAudio) return false;
+    if(!playbackAudio) 
+    {
+        ADM_info("No audio\n");
+        return false;
+    }
 
     channels= playbackAudio->getInfo()->channels;
     frequency=playbackAudio->getInfo()->frequency;
@@ -416,7 +420,7 @@
 {
  uint64_t time=  ticktock.getElapsedMS();
     // Refresh vumeter every 50 ms
-
+    if(!playbackAudio)  return true;
     if(time>(vuMeterPts+50))
     {
         uint32_t stat[6];



From mean at mail.berlios.de  Fri Jun 11 20:08:23 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Jun 2010 20:08:23 +0200
Subject: [Avidemux-svn-commit] r6359 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska
Message-ID: <201006111808.o5BI8NPt008700@sheep.berlios.de>

Author: mean
Date: 2010-06-11 20:08:23 +0200 (Fri, 11 Jun 2010)
New Revision: 6359

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp
Log:
[Mkv] Support for VP8 tag

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp	2010-06-11 18:08:22 UTC (rev 6358)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/Matroska/ADM_mkvTrackType.cpp	2010-06-11 18:08:23 UTC (rev 6359)
@@ -49,6 +49,7 @@
   {"A_MPEG/L2",0,WAV_MP2,""},
   {"A_MPEG/L1",0,WAV_MP2,""},
   // Video
+  {"V_VP8",1,0,"VP8 "}, // Mpeg2
   {"V_MPEG2",1,0,"MPEG"}, // Mpeg2
   {"V_MPEG1",1,0,"MPEG"}, // Mpeg1
   {"V_MPEG4/MS/V3",1,0,"DIV3"}, // MS MPEG4 (Divx3)



From mean at mail.berlios.de  Fri Jun 11 20:08:25 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Jun 2010 20:08:25 +0200
Subject: [Avidemux-svn-commit] r6360 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_videoCodec/include
	avidemux/common/ADM_videoCodec/src avidemux/qt4 cmake
Message-ID: <201006111808.o5BI8PN3008711@sheep.berlios.de>

Author: mean
Date: 2010-06-11 20:08:25 +0200 (Fri, 11 Jun 2010)
New Revision: 6360

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp
   branches/avidemux_2.6_branch_mean/cmake/admCheckVpx.cmake
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/config.h.cmake
Log:
[vpx] decoder skeleton (hackish)

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-11 18:08:25 UTC (rev 6360)
@@ -0,0 +1,55 @@
+/***************************************************************************
+            \file  ADM_vpx.h
+            \brief I/f to libvpx (decoder)
+
+    The ffmpeg part is to preformat inputs for VDPAU
+    VDPAU is loaded dynamically to be able to make a binary
+        and have something working even if the target machine
+        does not have vdpau
+    Some part, especially get/buffer and ip_age borrowed from xbmc
+        as the api from ffmpeg is far from clear....
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VPX_H
+#define ADM_VPX_H
+#include "ADM_codec.h"
+/**
+    \class decoderVpx
+*/
+class decoderVPX:public decoders
+{
+protected:
+                    bool alive;
+                    void     *vpx;
+public:
+            // public API
+                    decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+                    ~decoderVPX();
+    virtual bool    uncompress (ADMCompressedImage * in, ADMImage * out);
+
+    virtual bool dontcopy (void)
+                      {
+                        return 0; // We cannot use ffmpeg internal buffer, they dont exist!
+                      }
+
+    virtual bool bFramePossible (void)
+      {
+        return 0;
+      }
+    virtual const char *getDecoderName(void) {return "LibVPX";}
+    virtual bool  initializedOk(void)        {return alive;};
+};
+
+#endif
+//EOF
+

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-11 18:08:25 UTC (rev 6360)
@@ -21,13 +21,19 @@
 #include "ADM_lavcodec.h"
 };
 #include "ADM_default.h"
-
+#include "config.h"
 #include "ADM_codec.h"
 #include "ADM_ffmp43.h"
 #include "avidemutils.h"
 #include "fourcc.h"
 #include "ADM_codecVdpau.h"
 #include "DIA_coreToolkit.h"
+
+#if defined(USE_VPX)
+#include "ADM_vpx.h"
+#endif
+
+
 extern bool vdpauUsable(void);
 
 /**
@@ -52,8 +58,19 @@
             }
         }
         
-#endif
+#endif // VDPAU
     }
+// VPX
+#if defined(USE_VPX)
+    if(fourCC::check(fcc,(const uint8_t *)"VP8 "))
+    {
+        decoderVPX *dec=new decoderVPX(w,h,fcc,extraLen,extraData,bpp);
+        if(dec->initializedOk())
+            return (decoders *) (dec);
+        GUI_Error_HIG("VPX","Cannot initialize libvpx.");
+        delete dec;
+    }
+#endif // VPX
     return ADM_coreCodecGetDecoder(fcc,w,h,extraLen,extraData,bpp);
 }
 //EOF

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-11 18:08:25 UTC (rev 6360)
@@ -0,0 +1,52 @@
+/***************************************************************************
+            \file              ADM_ffmpeg_vdpau.cpp  
+            \brief Decoder using half ffmpeg/half VDPAU
+
+    The ffmpeg part is to preformat inputs for VDPAU
+    VDPAU is loaded dynamically to be able to make a binary
+        and have something working even if the target machine
+        does not have vdpau
+    Some part, especially get/buffer and ip_age borrowed from xbmc
+        as the api from ffmpeg is far from clear....
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "config.h"
+#ifdef USE_VPX
+#include "ADM_vpx.h"
+
+/**
+    \fn ctor
+*/
+decoderVPX::decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
+        : decoders(  w,   h,  fcc,   extraDataLen,  extraData,  bpp)
+{   
+    alive=false;
+}
+/**
+    \fn dtor
+*/
+decoderVPX::~decoderVPX ()
+{
+
+}
+/**
+    \fn uncompress
+*/
+bool    decoderVPX::uncompress (ADMCompressedImage * in, ADMImage * out)
+{
+    return false;
+}
+#endif
+// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt	2010-06-11 18:08:25 UTC (rev 6360)
@@ -1,6 +1,7 @@
 SET(ADM_videoCodec_SRCS
         ADM_ffmpeg_vdpau.cpp
         ADM_videoCodec.cpp
+        ADM_vpx.cpp
 )
 
 ADD_LIBRARY(ADM_videocodec6 STATIC ${ADM_videoCodec_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-06-11 18:08:25 UTC (rev 6360)
@@ -17,10 +17,12 @@
 IF (NOT QT4_FOUND)
         MESSAGE(FATAL_ERROR "Qt4 NOT FOUND")
 ENDIF (NOT QT4_FOUND)
-
+include(admCheckVpx)
 ##########################################
 # Config
 ##########################################
+# LibVPX
+checkVpxDec()
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
 SET(UI_SUFFIX qt4)
@@ -121,6 +123,12 @@
         TARGET_LINK_LIBRARIES(avidemux3_qt4 ${SDL_LIBRARY})
 ENDIF (USE_SDL)
 
+# LibVPX
+IF (USE_VPX)
+        TARGET_LINK_LIBRARIES(avidemux3_qt4 ${VPX_LIBRARY_DIR})
+ENDIF (USE_VPX)
+
+
 ###########################################
 # UI Specific
 ###########################################

Added: branches/avidemux_2.6_branch_mean/cmake/admCheckVpx.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCheckVpx.cmake	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/cmake/admCheckVpx.cmake	2010-06-11 18:08:25 UTC (rev 6360)
@@ -0,0 +1,18 @@
+MACRO(checkVpxDec)
+		OPTION(VPXDEC "" ON)
+
+		MESSAGE(STATUS "Checking for Vpx")
+		MESSAGE(STATUS "*****************")
+
+		IF (VPXDEC)
+			FIND_HEADER_AND_LIB(VPX vpx/vpx_decoder.h vpx vpx_codec_dec_init_ver)
+			PRINT_LIBRARY_INFO("Vpx" VPX_FOUND "${VPX_INCLUDE_DIR}" "${VPX_LIBRARY_DIR}")
+                        IF(VPX_FOUND)
+                                SET(USE_VPX 1)
+		                MESSAGE(STATUS "Linking to vpx decoder library ")
+                        ENDIF(VPX_FOUND)
+		ELSE (VPXDEC)
+			MESSAGE("${MSG_DISABLE_OPTION}")
+		ENDIF (VPXDEC)
+		MESSAGE("")
+ENDMACRO(checkVpxDec)

Modified: branches/avidemux_2.6_branch_mean/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/config.h.cmake	2010-06-11 18:08:23 UTC (rev 6359)
+++ branches/avidemux_2.6_branch_mean/cmake/config.h.cmake	2010-06-11 18:08:25 UTC (rev 6360)
@@ -37,6 +37,9 @@
 /* libpng is available */
 #cmakedefine USE_PNG
 
+/* libvpx is available */
+#cmakedefine USE_VPX
+
 /* use libsamplerate */
 #cmakedefine USE_SRC
 



From mean at mail.berlios.de  Fri Jun 11 20:08:27 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 11 Jun 2010 20:08:27 +0200
Subject: [Avidemux-svn-commit] r6361 - in
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec:
	include src
Message-ID: <201006111808.o5BI8ROP008729@sheep.berlios.de>

Author: mean
Date: 2010-06-11 20:08:27 +0200 (Fri, 11 Jun 2010)
New Revision: 6361

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp
Log:
[vpx] Decoding VP8 through libvpx (hackish)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-11 18:08:25 UTC (rev 6360)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-11 18:08:27 UTC (rev 6361)
@@ -36,18 +36,13 @@
                     decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
                     ~decoderVPX();
     virtual bool    uncompress (ADMCompressedImage * in, ADMImage * out);
-
-    virtual bool dontcopy (void)
-                      {
-                        return 0; // We cannot use ffmpeg internal buffer, they dont exist!
-                      }
-
     virtual bool bFramePossible (void)
       {
         return 0;
       }
     virtual const char *getDecoderName(void) {return "LibVPX";}
     virtual bool  initializedOk(void)        {return alive;};
+    virtual bool dontcopy (void)             {return true;}
 };
 
 #endif

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-11 18:08:25 UTC (rev 6360)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-11 18:08:27 UTC (rev 6361)
@@ -25,7 +25,9 @@
 #include "config.h"
 #ifdef USE_VPX
 #include "ADM_vpx.h"
-
+#include "vpx/vpx_decoder.h"
+#include "vpx/vp8dx.h"
+#define VPX ((vpx_codec_ctx_t *)vpx)
 /**
     \fn ctor
 */
@@ -33,19 +35,80 @@
         : decoders(  w,   h,  fcc,   extraDataLen,  extraData,  bpp)
 {   
     alive=false;
+    vpx=NULL;
+    vpx_codec_dec_cfg_t cfg;
+    vpx_codec_flags_t flags=0; //VPX_CODEC_USE_POSTPROC
+    vpx_codec_ctx_t *instance=new vpx_codec_ctx_t;
+    const struct vpx_codec_iface *iface = &vpx_codec_vp8_dx_algo;
+    
+    memset(instance,0,sizeof(*instance));
+    memset(&cfg,0,sizeof(cfg));
+    cfg.threads=1;
+    cfg.w=w;
+    cfg.h=h;
+    if(VPX_CODEC_OK!=vpx_codec_dec_init(instance, iface, &cfg, flags))
+    {
+        delete instance;
+        ADM_warning("Vpx init ko\n");
+    }else
+    {
+        alive=true;
+        vpx=(void *)instance;
+        ADM_info("Vpx init ok\n");
+
+    }
 }
 /**
     \fn dtor
 */
 decoderVPX::~decoderVPX ()
 {
-
+    if(vpx)
+    {
+        vpx_codec_ctx_t *a=VPX;
+        delete a;
+        vpx=NULL;
+    }
+    ADM_info("Destroying VPX decoder\n");
 }
 /**
     \fn uncompress
 */
 bool    decoderVPX::uncompress (ADMCompressedImage * in, ADMImage * out)
 {
+    if (vpx_codec_decode(VPX, in->data, in->dataLength, NULL, 0) != VPX_CODEC_OK) 
+    {
+        ADM_warning("Error decoding VPX\n");
+        return false;
+    }
+    struct vpx_image *img;
+    const void *iter = NULL;
+    img = vpx_codec_get_frame(VPX, &iter);
+    if(img)
+    {
+            if (img->fmt != VPX_IMG_FMT_I420) 
+            {
+                ADM_warning("Wrong Colorspace\n");
+                return false;
+            }
+            ADMImageRef    *r=out->castToRef();
+            if(r)
+            {
+                    r->_planes[0]=img->planes[0];
+                    r->_planes[1]=img->planes[1];
+                    r->_planes[2]=img->planes[2];
+                    r->_planeStride[0]=img->stride[0];
+                    r->_planeStride[1]=img->stride[1];
+                    r->_planeStride[2]=img->stride[2];
+                    r->_colorspace=ADM_COLOR_YV12;
+                    r->Pts=in->demuxerPts;
+                    r->flags=in->flags;
+                    return true;
+            }
+                
+            ADM_warning("Only ref for VPX decoder\n");
+
+    }
     return false;
 }
 #endif



From mean at mail.berlios.de  Sat Jun 12 14:54:11 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 12 Jun 2010 14:54:11 +0200
Subject: [Avidemux-svn-commit] r6362 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml
Message-ID: <201006121254.o5CCsBqb026254@sheep.berlios.de>

Author: mean
Date: 2010-06-12 14:54:11 +0200 (Sat, 12 Jun 2010)
New Revision: 6362

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod.xml
Log:
[x264] Fix preset for ipod1

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod.xml	2010-06-11 18:08:27 UTC (rev 6361)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Apple iPod.xml	2010-06-12 12:54:11 UTC (rev 6362)
@@ -6,14 +6,18 @@
   </encodeOptions>
   <x264Options>
     <idcLevel>13</idcLevel>
+    <referenceFrames>1</referenceFrames>
+    <bFrames>0</bFrames>
     <cabac>false</cabac>
+    <cqmPreset>flat</cqmPreset>
     <analyse>
       <partitionI4x4>true</partitionI4x4>
       <partitionI8x8>false</partitionI8x8>
       <partitionP8x8>true</partitionP8x8>
       <partitionP4x4>true</partitionP4x4>
-      <partitionB8x8>true</partitionB8x8>
-      <motionEstimationMethod>multi-hexagonal</motionEstimationMethod>
+      <partitionB8x8>false</partitionB8x8>
+      <dct8x8>false</dct8x8>
+      <weightedPredictionPframes>none</weightedPredictionPframes>
       <motionVectorSearchRange>12</motionVectorSearchRange>
       <trellis>disabled</trellis>
     </analyse>
@@ -23,4 +27,4 @@
       <vbvBufferSize>768</vbvBufferSize>
     </rateControl>
   </x264Options>
-</x264Config>
\ No newline at end of file
+</x264Config>



From mean at mail.berlios.de  Sat Jun 12 17:44:00 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 12 Jun 2010 17:44:00 +0200
Subject: [Avidemux-svn-commit] r6363 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_commonUI
	avidemux/common/ADM_videoCodec/include
	avidemux/common/ADM_videoCodec/src avidemux/qt4
	avidemux_core/ADM_coreVideoCodec/include avidemux_plugins
	avidemux_plugins/ADM_videoDecoder
	avidemux_plugins/ADM_videoDecoder/vpx
Message-ID: <201006121544.o5CFi01i001513@sheep.berlios.de>

Author: mean
Date: 2010-06-12 17:43:59 +0200 (Sat, 12 Jun 2010)
New Revision: 6363

Added:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_coreVideoDecoderInternal.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/ADM_vpx.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/ADM_vpx.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/vpxPlugin.cpp
Removed:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
Log:
[videoDecoder] Add possibility to use plugin for video decoder

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_plugins.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -32,6 +32,8 @@
 bool     ADM_mx_getMuxerInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 bool     ADM_ve6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 uint32_t ADM_ve6_getNbEncoders(void);
+uint32_t ADM_vd6_getNbEncoders(void);
+bool     ADM_vd6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 #define QT_TR_NOOP(x) x
 
 /* /Functions */
@@ -48,6 +50,7 @@
     uint32_t dmNbPlugin=ADM_dm_getNbDemuxers();
     uint32_t mxNbPlugin=ADM_mx_getNbMuxers();
     uint32_t ve6NbPlugin=ADM_ve6_getNbEncoders();
+    uint32_t vd6NbPlugin=ADM_vd6_getNbEncoders();
 
     // Audio Plugins
 
@@ -107,7 +110,36 @@
 
     diaElem *diaVE[]={&frameVE};
     diaElemTabs tabVE(QT_TR_NOOP("Video Encoder"),1,diaVE);
+    // /Encoder
+// VideoDecoder
+    printf("[VideoDecoder6 Plugins] Found %u plugins\n",vd6NbPlugin);
+    diaElemReadOnlyText **vdText=new diaElemReadOnlyText *[vd6NbPlugin];
+    diaElemFrame frameVD(QT_TR_NOOP("Video Decoder Plugins"));
+        
+       
+    for(int i=0;i<vd6NbPlugin;i++)
+    {
+        const char *name;
+        uint32_t major,minor,patch;
+        char versionString[256];
+        char infoString[256];
+        char *end;
+            ADM_vd6_getEncoderInfo(i, &name,&major,&minor,&patch);
+            snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
+            strncpy(infoString,name,255);
+            if(strlen(infoString))
+            {
+                end=strlen(infoString)+infoString-1;
+                // Remove trailing line feed
+                while(*end==0x0a || *end==0x0d) *end--=0;
+            }
+            vdText[i]=new diaElemReadOnlyText(infoString,versionString);
+            frameVD.swallow(vdText[i]);
+    }
 
+    diaElem *diaVD[]={&frameVD};
+    diaElemTabs tabVD(QT_TR_NOOP("Video Decoder"),1,diaVD);
+    // /VideoDecoder
     // Audio Device
     printf("[AudioDevice Plugins] Found %u plugins\n",avNbPlugin);
     diaElemReadOnlyText **avText=new diaElemReadOnlyText *[avNbPlugin];
@@ -225,13 +257,15 @@
 
     // /muxer Encoder
 
-    diaElemTabs *tabs[]={&tabAudio,&tabVE,&tabAV,&tabAE,&tabDM,&tabMX};
-    diaFactoryRunTabs(QT_TR_NOOP("Plugins Info"),6,tabs);
+    diaElemTabs *tabs[]={&tabAudio,&tabVE,&tabVD,&tabAV,&tabAE,&tabDM,&tabMX};
+    diaFactoryRunTabs(QT_TR_NOOP("Plugins Info"),7,tabs);
 
     for(int i=0;i<aNbPlugin;i++)
         delete aText[i];
     for(int i=0;i<ve6NbPlugin;i++)
         delete veText[i];
+    for(int i=0;i<vd6NbPlugin;i++)
+        delete vdText[i];
     for(int i=0;i<avNbPlugin;i++)
         delete avText[i];
     for(int i=0;i<aeNbPlugin;i++)

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-12 15:43:59 UTC (rev 6363)
@@ -1,50 +0,0 @@
-/***************************************************************************
-            \file  ADM_vpx.h
-            \brief I/f to libvpx (decoder)
-
-    The ffmpeg part is to preformat inputs for VDPAU
-    VDPAU is loaded dynamically to be able to make a binary
-        and have something working even if the target machine
-        does not have vdpau
-    Some part, especially get/buffer and ip_age borrowed from xbmc
-        as the api from ffmpeg is far from clear....
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#ifndef ADM_VPX_H
-#define ADM_VPX_H
-#include "ADM_codec.h"
-/**
-    \class decoderVpx
-*/
-class decoderVPX:public decoders
-{
-protected:
-                    bool alive;
-                    void     *vpx;
-public:
-            // public API
-                    decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-                    ~decoderVPX();
-    virtual bool    uncompress (ADMCompressedImage * in, ADMImage * out);
-    virtual bool bFramePossible (void)
-      {
-        return 0;
-      }
-    virtual const char *getDecoderName(void) {return "LibVPX";}
-    virtual bool  initializedOk(void)        {return alive;};
-    virtual bool dontcopy (void)             {return true;}
-};
-
-#endif
-//EOF
-

Added: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_dynVideoDecoder.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1,192 @@
+/***************************************************************************
+    \file       ADM_dynVideoDecoder.cpp
+    \brief      Handle video decoder plugins
+    \author     mean/gruntster fixounet at free.fr (C) 2010
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include <vector>
+
+#include "DIA_fileSel.h"
+#include "ADM_coreVideoDecoderInternal.h"
+#include "ADM_dynamicLoading.h"
+
+/**
+    \class ADM_videoEncoder6
+    \brief Plugin Wrapper Class
+
+*/
+class ADM_videoDecoder6 :public ADM_LibWrapper
+{
+public:
+        int                  initialised;
+        ADM_videoDecoderDesc *desc;
+        ADM_videoDecoderDesc  *(*getInfo)();
+        ADM_videoDecoder6(const char *file) : ADM_LibWrapper()
+        {
+                initialised = (loadLibrary(file) && getSymbols(1,
+				&getInfo, "getInfo"));
+                if(initialised)
+                {
+                    desc=getInfo();
+                    printf("[videoDecoder6]Name :%s ApiVersion :%d Description :%s\n",
+                                                        desc->decoderName,
+                                                        desc->apiVersion,
+                                                        desc->description);
+                }else
+                {
+                    printf("[videoDecoder6]Symbol loading failed for %s\n",file);
+                }
+        }
+};
+
+std::vector <ADM_videoDecoder6 *> ListOfDecoders;
+// 
+
+/**
+        \fn ADM_vd6_getNbEncoders
+        \brief Returns the number of demuxers plugins except one
+*/
+uint32_t ADM_vd6_getNbEncoders(void)
+{
+    return ListOfDecoders.size();
+}
+/**
+    \fn     ADM_ve6_getEncoderInfo
+    \brief  Get Infos about the demuxer #th plugin
+*/
+bool     ADM_vd6_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+{
+    ADM_assert(filter<ListOfDecoders.size());
+    ADM_videoDecoderDesc *desc=ListOfDecoders[filter]->desc;
+    ADM_assert(desc);
+    *name=desc->menuName;
+    *major=desc->major;
+    *minor=desc->minor;
+    *patch=desc->patch;
+    return true;
+}
+/**
+    \fn tryLoadingFilterPlugin
+    \brief Try loading the file given as argument as an audio device plugin
+
+*/
+#define Fail(x) {printf("%s:"#x"\n",file);goto er;}
+static bool tryLoadingEncoderPlugin(const char *file)
+{
+	ADM_videoDecoder6 *dll=new ADM_videoDecoder6(file);
+    if(!dll->initialised) Fail(CannotLoad);
+    if(dll->desc->apiVersion!=ADM_VIDEO_DECODER_API_VERSION) Fail(WrongApiVersion);
+//fixme todo also check uiType    
+    ListOfDecoders.push_back(dll); // Needed for cleanup. FIXME TODO Delete it.
+    printf("[VideoDecoder6] Registered filter %s as  %s\n",file,dll->desc->description);
+    return true;
+	// Fail!
+er:
+	delete dll;
+	return false;
+
+}
+/**
+ * 	\fn ADM_vd6_loadPlugins
+ *  \brief load all video decoder plugins
+ */
+uint8_t ADM_vd6_loadPlugins(const char *path)
+{
+#define MAX_EXTERNAL_FILTER 100
+// FIXME Factorize
+
+	char *files[MAX_EXTERNAL_FILTER];
+	uint32_t nbFile;
+
+	memset(files,0,sizeof(char *)*MAX_EXTERNAL_FILTER);
+	printf("[ADM_vd6_plugin] Scanning directory %s\n",path);
+
+	if(!buildDirectoryContent(&nbFile, path, files, MAX_EXTERNAL_FILTER, SHARED_LIB_EXT))
+	{
+		printf("[ADM_vd6_plugin] Cannot parse plugin\n");
+		return 0;
+	}
+
+	for(int i=0;i<nbFile;i++)
+		tryLoadingEncoderPlugin(files[i]);
+    
+	printf("[ADM_vd6_plugin] Scanning done\n");
+
+	return 1;
+}
+/**
+        \fn ADM_ve6_cleanup
+        \brief Current device is no longer used, delete
+*/
+void ADM_vd6_cleanup(void)
+{
+        int nb=ListOfDecoders.size();
+        for(int i=0;i<nb;i++)
+                {
+                        if(ListOfDecoders[i]) delete ListOfDecoders[i];
+                        ListOfDecoders[i]=NULL;
+                }
+}
+
+/**
+    \fn ADM_vd6_getMenuName
+    \brief 
+*/
+const char *ADM_vd6_getMenuName(uint32_t i)
+{
+	 int nb=ListOfDecoders.size();
+
+	ADM_assert(i < nb);
+
+	return ListOfDecoders[i]->desc->menuName;
+}
+/**
+    \fn createVideoEncoder
+*/
+static decoders *createVideoDecoderFromIndex(int index,uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen,
+                    uint8_t *extra, uint32_t bpp)
+{
+    int nb=ListOfDecoders.size();
+	ADM_assert(index < nb);
+    ADM_videoDecoder6 *plugin=ListOfDecoders[index];
+
+    decoders *dec=plugin->desc->create(w,h,fcc,extraDataLen,extra,bpp);
+    return dec;
+}
+/**
+    \fn createVideoEncoderFromIndex
+    \brief Spawn a decoder. If not possible returns NULL.
+*/
+decoders *tryCreatingVideoDecoder(uint32_t w, uint32_t h, uint32_t fcc,uint32_t extraDataLen,
+                    uint8_t *extra, uint32_t bpp)
+{
+
+     int nb=ListOfDecoders.size();
+     for(int i=0;i<nb;i++)
+     {
+            ADM_videoDecoder6 *plugin=ListOfDecoders[i];
+            uint32_t *f=plugin->desc->fccs;
+            if(!f) continue;
+            while(*f)
+            {
+                if(fcc==*f)
+                {
+                    decoders *dec=createVideoDecoderFromIndex(i,w,h,fcc,extraDataLen,extra,bpp);
+                    if(dec) return dec;
+                }
+                f++;
+            }
+     }
+     ADM_info("No decoder found in plugin\n");
+     return false;
+}
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -21,7 +21,6 @@
 #include "ADM_lavcodec.h"
 };
 #include "ADM_default.h"
-#include "config.h"
 #include "ADM_codec.h"
 #include "ADM_ffmp43.h"
 #include "avidemutils.h"
@@ -35,13 +34,18 @@
 
 
 extern bool vdpauUsable(void);
-
+decoders *tryCreatingVideoDecoder(uint32_t w, uint32_t h, uint32_t fcc,uint32_t extraDataLen,
+                    uint8_t *extra, uint32_t bpp);
 /**
     \fn getDecoder
     \brief returns the correct decoder for a stream w,h,fcc,extraLen,extraData,bpp
 */
-decoders *ADM_getDecoder (uint32_t fcc, uint32_t w, uint32_t h, uint32_t extraLen, uint8_t * extraData,uint32_t bpp)
+decoders *ADM_getDecoder (uint32_t fcc, uint32_t w, uint32_t h, uint32_t extraLen, 
+            uint8_t * extraData,uint32_t bpp)
 {
+  decoders *fromPlugin=tryCreatingVideoDecoder(w,h,fcc,extraLen,extraData,bpp);
+  if(fromPlugin) return fromPlugin;
+
   ADM_info("Searching decoder in coreVideoCodec(%d x %d, extradataSize:%d)...\n",w,h,extraLen);
   if (isH264Compatible (fcc) || isMpeg12Compatible(fcc))
     {

Deleted: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -1,115 +0,0 @@
-/***************************************************************************
-            \file              ADM_ffmpeg_vdpau.cpp  
-            \brief Decoder using half ffmpeg/half VDPAU
-
-    The ffmpeg part is to preformat inputs for VDPAU
-    VDPAU is loaded dynamically to be able to make a binary
-        and have something working even if the target machine
-        does not have vdpau
-    Some part, especially get/buffer and ip_age borrowed from xbmc
-        as the api from ffmpeg is far from clear....
-
-
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include "ADM_default.h"
-#include "config.h"
-#ifdef USE_VPX
-#include "ADM_vpx.h"
-#include "vpx/vpx_decoder.h"
-#include "vpx/vp8dx.h"
-#define VPX ((vpx_codec_ctx_t *)vpx)
-/**
-    \fn ctor
-*/
-decoderVPX::decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
-        : decoders(  w,   h,  fcc,   extraDataLen,  extraData,  bpp)
-{   
-    alive=false;
-    vpx=NULL;
-    vpx_codec_dec_cfg_t cfg;
-    vpx_codec_flags_t flags=0; //VPX_CODEC_USE_POSTPROC
-    vpx_codec_ctx_t *instance=new vpx_codec_ctx_t;
-    const struct vpx_codec_iface *iface = &vpx_codec_vp8_dx_algo;
-    
-    memset(instance,0,sizeof(*instance));
-    memset(&cfg,0,sizeof(cfg));
-    cfg.threads=1;
-    cfg.w=w;
-    cfg.h=h;
-    if(VPX_CODEC_OK!=vpx_codec_dec_init(instance, iface, &cfg, flags))
-    {
-        delete instance;
-        ADM_warning("Vpx init ko\n");
-    }else
-    {
-        alive=true;
-        vpx=(void *)instance;
-        ADM_info("Vpx init ok\n");
-
-    }
-}
-/**
-    \fn dtor
-*/
-decoderVPX::~decoderVPX ()
-{
-    if(vpx)
-    {
-        vpx_codec_ctx_t *a=VPX;
-        delete a;
-        vpx=NULL;
-    }
-    ADM_info("Destroying VPX decoder\n");
-}
-/**
-    \fn uncompress
-*/
-bool    decoderVPX::uncompress (ADMCompressedImage * in, ADMImage * out)
-{
-    if (vpx_codec_decode(VPX, in->data, in->dataLength, NULL, 0) != VPX_CODEC_OK) 
-    {
-        ADM_warning("Error decoding VPX\n");
-        return false;
-    }
-    struct vpx_image *img;
-    const void *iter = NULL;
-    img = vpx_codec_get_frame(VPX, &iter);
-    if(img)
-    {
-            if (img->fmt != VPX_IMG_FMT_I420) 
-            {
-                ADM_warning("Wrong Colorspace\n");
-                return false;
-            }
-            ADMImageRef    *r=out->castToRef();
-            if(r)
-            {
-                    r->_planes[0]=img->planes[0];
-                    r->_planes[1]=img->planes[1];
-                    r->_planes[2]=img->planes[2];
-                    r->_planeStride[0]=img->stride[0];
-                    r->_planeStride[1]=img->stride[1];
-                    r->_planeStride[2]=img->stride[2];
-                    r->_colorspace=ADM_COLOR_YV12;
-                    r->Pts=in->demuxerPts;
-                    r->flags=in->flags;
-                    return true;
-            }
-                
-            ADM_warning("Only ref for VPX decoder\n");
-
-    }
-    return false;
-}
-#endif
-// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/CMakeLists.txt	2010-06-12 15:43:59 UTC (rev 6363)
@@ -1,7 +1,7 @@
 SET(ADM_videoCodec_SRCS
         ADM_ffmpeg_vdpau.cpp
         ADM_videoCodec.cpp
-        ADM_vpx.cpp
+        ADM_dynVideoDecoder.cpp
 )
 
 ADD_LIBRARY(ADM_videocodec6 STATIC ${ADM_videoCodec_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -68,6 +68,7 @@
 extern void getUIDescription(char*);
 extern uint8_t ADM_ad_loadPlugins(const char *path);
 extern uint8_t ADM_vf_loadPlugins(const char *path);
+extern uint8_t ADM_vd6_loadPlugins(const char *path);
 extern uint8_t ADM_av_loadPlugins(const char *path);
 extern uint8_t ADM_ae_loadPlugins(const char *path);
 extern uint8_t ADM_dm_loadPlugins(const char *path);
@@ -229,6 +230,7 @@
     char *dmPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","demuxers");    
     char *mxPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","muxers");    
     char *vePlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","videoEncoders");    
+    char *vdPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","videoDecoders");    
     char *vfPlugins = ADM_getInstallRelativePath(startDir,"ADM_plugins6","videoFilters");
 
     ADM_mx_loadPlugins(mxPlugins);
@@ -252,6 +254,10 @@
     ADM_vf_loadPlugins(vfPlugins);
     delete [] vfPlugins;
 
+    ADM_vd6_loadPlugins(vdPlugins);
+    delete [] vdPlugins;
+
+
     // load local audio decoder plugins
 	adPlugins=ADM_getHomeRelativePath("plugins6","audioDecoder");
 	ADM_ad_loadPlugins(adPlugins);

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-06-12 15:43:59 UTC (rev 6363)
@@ -17,12 +17,9 @@
 IF (NOT QT4_FOUND)
         MESSAGE(FATAL_ERROR "Qt4 NOT FOUND")
 ENDIF (NOT QT4_FOUND)
-include(admCheckVpx)
 ##########################################
 # Config
 ##########################################
-# LibVPX
-checkVpxDec()
 
 SET(CONFIG_HEADER_TYPE ADM_BUILD_QT4)
 SET(UI_SUFFIX qt4)
@@ -123,10 +120,6 @@
         TARGET_LINK_LIBRARIES(avidemux3_qt4 ${SDL_LIBRARY})
 ENDIF (USE_SDL)
 
-# LibVPX
-IF (USE_VPX)
-        TARGET_LINK_LIBRARIES(avidemux3_qt4 ${VPX_LIBRARY_DIR})
-ENDIF (USE_VPX)
 
 
 ###########################################

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_coreVideoDecoderInternal.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_coreVideoDecoderInternal.h	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_coreVideoDecoderInternal.h	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1,81 @@
+/**
+    \file  ADM_coreVideoDecoderInternal.h
+    \brief interface to video decoder plugins
+
+*/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef VIDEODECODERINTERNAL_H
+#define VIDEODECODERINTERNAL_H
+
+#define ADM_VIDEO_DECODER_API_VERSION 1
+#include "ADM_codec.h"
+
+/*!
+  This structure defines a video DECODER
+  \param DECODER DECODER attached to this descriptor
+  \param name The name of the codec
+  \param configure Function to call to configure the codec
+  \param param : An opaque structure that contains the codec specific configuration datas
+*/
+typedef struct
+{
+    const char   *decoderName;      // Internal name (tag)
+    const char   *menuName;         // Displayed name (in menu)
+    const char   *description;      // Short description
+
+    uint32_t     apiVersion;            // const
+    decoders     *(*create)(uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+    void         (*destroy)(decoders *codec);
+    bool         (*configure)(void);                                // Call UI to set it up
+    uint32_t     major,minor,patch;     // Version of the plugin
+    uint32_t     *fccs;                 // List of supported fourCCs ending by 0
+    void         *opaque;               // Hide stuff in here
+}ADM_videoDecoderDesc;
+
+// Macros to declare video decoder
+/**************************************************************************/
+#define ADM_DECLARE_VIDEO_DECODER_PREAMBLE(Class) \
+static decoders * create (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)\
+{ \
+  Class *r= new Class (w,h,fcc,extraDataLen,extraData,bpp); \
+  if(!r->initializedOk()) {delete r;return NULL;} \
+  return r;}\
+\
+static void destroy (decoders * in) \
+{\
+  Class *z = (Class *) in; \
+  delete z; \
+} 
+//******************************************************
+
+#define ADM_DECLARE_VIDEO_DECODER_MAIN(name,menuName,desc,fcc,configure,maj,minV,patch) \
+static ADM_videoDecoderDesc DECODERDesc={\
+    name,\
+    menuName,\
+    desc,\
+    ADM_VIDEO_DECODER_API_VERSION,\
+    &create,\
+    &destroy,\
+    configure,\
+    maj,minV,patch,\
+    fcc,\
+    NULL\
+};\
+extern "C" ADM_videoDecoderDesc *getInfo (void) \
+{ \
+  return &DECODERDesc; \
+}  
+
+#ifndef QT_TR_NOOP
+#define QT_TR_NOOP(x) x
+#endif
+#endif
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/CMakeLists.txt	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/CMakeLists.txt	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1 @@
+ADD_SUBDIRECTORY(vpx)

Copied: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/ADM_vpx.cpp (from rev 6361, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_vpx.cpp	2010-06-11 18:08:27 UTC (rev 6361)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/ADM_vpx.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1,112 @@
+/***************************************************************************
+            \file              ADM_ffmpeg_vdpau.cpp  
+            \brief Decoder using half ffmpeg/half VDPAU
+
+    The ffmpeg part is to preformat inputs for VDPAU
+    VDPAU is loaded dynamically to be able to make a binary
+        and have something working even if the target machine
+        does not have vdpau
+    Some part, especially get/buffer and ip_age borrowed from xbmc
+        as the api from ffmpeg is far from clear....
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_vpx.h"
+#include "vpx/vpx_decoder.h"
+#include "vpx/vp8dx.h"
+#define VPX ((vpx_codec_ctx_t *)vpx)
+/**
+    \fn ctor
+*/
+decoderVPX::decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
+        : decoders(  w,   h,  fcc,   extraDataLen,  extraData,  bpp)
+{   
+    alive=false;
+    vpx=NULL;
+    vpx_codec_dec_cfg_t cfg;
+    vpx_codec_flags_t flags=0; //VPX_CODEC_USE_POSTPROC
+    vpx_codec_ctx_t *instance=new vpx_codec_ctx_t;
+    const struct vpx_codec_iface *iface = &vpx_codec_vp8_dx_algo;
+    
+    memset(instance,0,sizeof(*instance));
+    memset(&cfg,0,sizeof(cfg));
+    cfg.threads=1;
+    cfg.w=w;
+    cfg.h=h;
+    if(VPX_CODEC_OK!=vpx_codec_dec_init(instance, iface, &cfg, flags))
+    {
+        delete instance;
+        ADM_warning("Vpx init ko\n");
+    }else
+    {
+        alive=true;
+        vpx=(void *)instance;
+        ADM_info("Vpx init ok\n");
+
+    }
+}
+/**
+    \fn dtor
+*/
+decoderVPX::~decoderVPX ()
+{
+    if(vpx)
+    {
+        vpx_codec_ctx_t *a=VPX;
+        delete a;
+        vpx=NULL;
+    }
+    ADM_info("Destroying VPX decoder\n");
+}
+/**
+    \fn uncompress
+*/
+bool    decoderVPX::uncompress (ADMCompressedImage * in, ADMImage * out)
+{
+    if (vpx_codec_decode(VPX, in->data, in->dataLength, NULL, 0) != VPX_CODEC_OK) 
+    {
+        ADM_warning("Error decoding VPX\n");
+        return false;
+    }
+    struct vpx_image *img;
+    const void *iter = NULL;
+    img = vpx_codec_get_frame(VPX, &iter);
+    if(img)
+    {
+            if (img->fmt != VPX_IMG_FMT_I420) 
+            {
+                ADM_warning("Wrong Colorspace\n");
+                return false;
+            }
+            ADMImageRef    *r=out->castToRef();
+            if(r)
+            {
+                    r->_planes[0]=img->planes[0];
+                    r->_planes[1]=img->planes[1];
+                    r->_planes[2]=img->planes[2];
+                    r->_planeStride[0]=img->stride[0];
+                    r->_planeStride[1]=img->stride[1];
+                    r->_planeStride[2]=img->stride[2];
+                    r->_colorspace=ADM_COLOR_YV12;
+                    r->Pts=in->demuxerPts;
+                    r->flags=in->flags;
+                    return true;
+            }
+                
+            ADM_warning("Only ref for VPX decoder\n");
+
+    }
+    return false;
+}
+// EOF

Copied: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/ADM_vpx.h (from rev 6361, branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h)
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/include/ADM_vpx.h	2010-06-11 18:08:27 UTC (rev 6361)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/ADM_vpx.h	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1,50 @@
+/***************************************************************************
+            \file  ADM_vpx.h
+            \brief I/f to libvpx (decoder)
+
+    The ffmpeg part is to preformat inputs for VDPAU
+    VDPAU is loaded dynamically to be able to make a binary
+        and have something working even if the target machine
+        does not have vdpau
+    Some part, especially get/buffer and ip_age borrowed from xbmc
+        as the api from ffmpeg is far from clear....
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VPX_H
+#define ADM_VPX_H
+#include "ADM_codec.h"
+/**
+    \class decoderVpx
+*/
+class decoderVPX:public decoders
+{
+protected:
+                    bool alive;
+                    void     *vpx;
+public:
+            // public API
+                    decoderVPX (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
+                    ~decoderVPX();
+    virtual bool    uncompress (ADMCompressedImage * in, ADMImage * out);
+    virtual bool bFramePossible (void)
+      {
+        return 0;
+      }
+    virtual const char *getDecoderName(void) {return "LibVPX";}
+    virtual bool  initializedOk(void)        {return alive;};
+    virtual bool dontcopy (void)             {return true;}
+};
+
+#endif
+//EOF
+

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/CMakeLists.txt	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/CMakeLists.txt	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1,19 @@
+INCLUDE(vd_plugin)
+include(admCheckVpx)
+# LibVPX
+checkVpxDec()
+IF (USE_VPX)
+
+SET(vpx_SRCS 
+        vpxPlugin.cpp
+        ADM_vpx.cpp
+)
+INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
+INCLUDE_DIRECTORIES(${VPX_INCLUDE_DIR} ${VPX_INCLUDE_DIR}/vpx)
+
+ADD_LIBRARY(ADM_vd_vpx SHARED ${vpx_SRCS})
+TARGET_LINK_LIBRARIES(ADM_vd_vpx ${VPX_LIBRARY_DIR})
+INIT_VIDEO_DECODER(ADM_vd_vpx)
+INSTALL_VIDEO_DECODER(ADM_vd_vpx)
+
+ENDIF (USE_VPX)

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/vpxPlugin.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/vpxPlugin.cpp	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_videoDecoder/vpx/vpxPlugin.cpp	2010-06-12 15:43:59 UTC (rev 6363)
@@ -0,0 +1,25 @@
+/***************************************************************************
+                          \fn     vpxPlugin
+                          \brief  Video decoder Plugin for libvpx
+                          \author mean fixounet at free.fr (C) 2010
+ ***************************************************************************/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_default.h"
+#include "ADM_coreVideoDecoderInternal.h"
+#include "ADM_vpx.h"
+static uint32_t fccs[]={MKFCC('V','P','8',' '),0};
+ADM_DECLARE_VIDEO_DECODER_PREAMBLE(decoderVPX);
+ADM_DECLARE_VIDEO_DECODER_MAIN("vpx",
+                               "VP8/WebmM",
+                               "Decoder using libvpx (c) mean 2010",
+                                fccs, // No configuration
+                                NULL,
+                                1,0,0
+);
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2010-06-12 12:54:11 UTC (rev 6362)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/CMakeLists.txt	2010-06-12 15:43:59 UTC (rev 6363)
@@ -148,6 +148,7 @@
     ADD_SUBDIRECTORY(ADM_audioDecoders)
     ADD_SUBDIRECTORY(ADM_audioDevices)
     ADD_SUBDIRECTORY(ADM_videoEncoder)
+    ADD_SUBDIRECTORY(ADM_videoDecoder)
     ADD_SUBDIRECTORY(ADM_audioEncoders)
     ADD_SUBDIRECTORY(ADM_demuxers)
     ADD_SUBDIRECTORY(ADM_muxers)



From mean at mail.berlios.de  Sat Jun 12 18:10:24 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 12 Jun 2010 18:10:24 +0200
Subject: [Avidemux-svn-commit] r6364 -
	branches/avidemux_2.6_branch_mean/cmake
Message-ID: <201006121610.o5CGAOBR003502@sheep.berlios.de>

Author: mean
Date: 2010-06-12 18:10:24 +0200 (Sat, 12 Jun 2010)
New Revision: 6364

Added:
   branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake
Log:
[cmake] vd_plugin file

Added: branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake	2010-06-12 15:43:59 UTC (rev 6363)
+++ branches/avidemux_2.6_branch_mean/cmake/vd_plugin.cmake	2010-06-12 16:10:24 UTC (rev 6364)
@@ -0,0 +1,19 @@
+#
+#  Macro to declare an video decoder plugin
+#
+SET(VD_PLUGIN_DIR "${CMAKE_INSTALL_PREFIX}/lib/ADM_plugins6/videoDecoders/")
+MACRO(INIT_VIDEO_DECODER _lib)
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_core/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreVideoCodec/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUI/include")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreUtils/include/")
+	INCLUDE_DIRECTORIES("${AVIDEMUX_TOP_SOURCE_DIR}/avidemux/ADM_coreImage/include/")
+    ADD_DEFINITIONS("-DADM_MINIMAL_UI_INTERFACE")
+
+ENDMACRO(INIT_VIDEO_DECODER)
+
+MACRO(INSTALL_VIDEO_DECODER _lib)
+	INSTALL(TARGETS ${_lib} DESTINATION "${VD_PLUGIN_DIR}")
+	TARGET_LINK_LIBRARIES(${_lib} ADM_core6 ADM_coreUI6 ADM_coreVideoCodec6 ADM_coreImage6 ADM_coreUtils6)
+ENDMACRO(INSTALL_VIDEO_DECODER)
+



From mean at mail.berlios.de  Sat Jun 12 22:37:33 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 12 Jun 2010 22:37:33 +0200
Subject: [Avidemux-svn-commit] r6365 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml
Message-ID: <201006122037.o5CKbXoa001969@sheep.berlios.de>

Author: mean
Date: 2010-06-12 22:37:33 +0200 (Sat, 12 Jun 2010)
New Revision: 6365

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml
Log:
[Auto] Working PSP

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml	2010-06-12 16:10:24 UTC (rev 6364)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/xml/Sony PlayStation Portable.xml	2010-06-12 20:37:33 UTC (rev 6365)
@@ -6,7 +6,7 @@
   </encodeOptions>
   <x264Options>
     <idcLevel>30</idcLevel>
-    <referenceFrames>3</referenceFrames>
+    <referenceFrames>2</referenceFrames>
     <bFrames>3</bFrames>
     <adaptiveBframeDecision>2</adaptiveBframeDecision>
     <analyse>
@@ -15,6 +15,7 @@
       <partitionP8x8>true</partitionP8x8>
       <partitionP4x4>false</partitionP4x4>
       <partitionB8x8>true</partitionB8x8>
+      <dct8x8>false</dct8x8>
       <weightedPrediction>true</weightedPrediction>
       <directPredictionMode>auto</directPredictionMode>
       <motionEstimationMethod>multi-hexagonal</motionEstimationMethod>
@@ -27,4 +28,4 @@
       <vbvBufferSize>10000</vbvBufferSize>
     </rateControl>
   </x264Options>
-</x264Config>
\ No newline at end of file
+</x264Config>



From mean at mail.berlios.de  Sat Jun 12 22:37:35 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 12 Jun 2010 22:37:35 +0200
Subject: [Avidemux-svn-commit] r6366 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script
Message-ID: <201006122037.o5CKbZBE001980@sheep.berlios.de>

Author: mean
Date: 2010-06-12 22:37:35 +0200 (Sat, 12 Jun 2010)
New Revision: 6366

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp
Log:
[JS] Avoid double fclose()

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp	2010-06-12 20:37:33 UTC (rev 6365)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_script/ADM_JSGlobal.cpp	2010-06-12 20:37:35 UTC (rev 6366)
@@ -167,8 +167,15 @@
 
 	FILE *file = fopen(name, "r");
 	JSScript *pJSScript = JS_CompileFileHandle(g_pCx, g_pObject, name, file);;
-
-	fclose(file);
+#warning potential leak here
+/*
+In normal operation the file is closed by 
+JS_CompileFileHandle (jsapi.c:3772)
+JS_CompileFileHandleForPrincipals (jsapi.c:3795)
+CompileTokenStream (jsapi.c:3609)
+js_CloseTokenStream (jsscan.c:322)
+*/
+	/* DOUBLE CLOSE fclose(file); */
 	printf("Done.\n");
 
 	if(pJSScript != NULL)



From mean at mail.berlios.de  Sun Jun 13 11:37:17 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 13 Jun 2010 11:37:17 +0200
Subject: [Avidemux-svn-commit] r6367 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers:
	MpegPS MpegTS
Message-ID: <201006130937.o5D9bHU2025766@sheep.berlios.de>

Author: mean
Date: 2010-06-13 11:37:17 +0200 (Sun, 13 Jun 2010)
New Revision: 6367

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
Log:
[TS/PTS] Return mostly good duration regardless of fps

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-12 20:37:35 UTC (rev 6366)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-13 09:37:17 UTC (rev 6367)
@@ -114,12 +114,27 @@
 */
 uint64_t psHeader::getVideoDuration(void)
 {
-    float f;
-        f=1000*1000*1000;
-        f/=_videostream.dwRate; // in uss
-        
-        f*=ListOfFrames.size();
-     return (uint64_t)f;
+    int index=ListOfFrames.size();
+    if(!index) return 0;
+    index--;
+    int offset=0;
+    do
+    {
+        if(ListOfFrames[index]->dts!=ADM_NO_PTS) break;
+        index--;
+        offset++;
+
+    }while(index);
+    if(!index)
+    {
+        ADM_error("Cannot find a valid DTS in the file\n");
+        return 0;
+    }
+    float f,g;
+    f=1000*1000*1000;
+    g=ListOfFrames[index]->dts;
+    g+=f*offset;
+    return (uint64_t)g;
 }
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-12 20:37:35 UTC (rev 6366)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-13 09:37:17 UTC (rev 6367)
@@ -118,12 +118,27 @@
 */
 uint64_t tsHeader::getVideoDuration(void)
 {
-    float f;
-        f=1000*1000*1000;
-        f/=_videostream.dwRate; // in uss
-        
-        f*=ListOfFrames.size();
-     return (uint64_t)f;
+    int index=ListOfFrames.size();
+    if(!index) return 0;
+    index--;
+    int offset=0;
+    do
+    {
+        if(ListOfFrames[index]->dts!=ADM_NO_PTS) break;
+        index--;
+        offset++;
+
+    }while(index);
+    if(!index)
+    {
+        ADM_error("Cannot find a valid DTS in the file\n");
+        return 0;
+    }
+    float f,g;
+    f=1000*1000*1000;
+    g=ListOfFrames[index]->dts;
+    g+=f*offset;
+    return (uint64_t)g;
 }
 /**
     \fn updateIdr



From mean at mail.berlios.de  Sun Jun 13 11:44:21 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 13 Jun 2010 11:44:21 +0200
Subject: [Avidemux-svn-commit] r6368 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska
Message-ID: <201006130944.o5D9iLcr026180@sheep.berlios.de>

Author: mean
Date: 2010-06-13 11:44:21 +0200 (Sun, 13 Jun 2010)
New Revision: 6368

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
Log:
[MKV] Recognize VP8 in mkv (from 2.6)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2010-06-13 09:37:17 UTC (rev 6367)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_matroska/ADM_mkvTrackType.cpp	2010-06-13 09:44:21 UTC (rev 6368)
@@ -54,6 +54,7 @@
   {"A_MPEG/L1",0,WAV_MP2,""},
   
   // Video
+  {"V_VP8",1,0,"VP8 "}, // VP8
   {"V_MPEG2",1,0,"MPEG"}, // Mpeg2
   {"V_MPEG1",1,0,"MPEG"}, // Mpeg1
   {"V_MPEG4/MS/V3",1,0,"DIV3"}, // MS MPEG4 (Divx3)



From mean at mail.berlios.de  Sun Jun 13 11:59:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 13 Jun 2010 11:59:08 +0200
Subject: [Avidemux-svn-commit] r6369 - in
	branches/avidemux_2.5_branch_gruntster: . avidemux
	avidemux/ADM_codecs cmake
Message-ID: <201006130959.o5D9x8X8027000@sheep.berlios.de>

Author: mean
Date: 2010-06-13 11:59:07 +0200 (Sun, 13 Jun 2010)
New Revision: 6369

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.h
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckVpx.cmake
Modified:
   branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
Log:
[Codec] quick n dirty vpx support (from 2.6)

Modified: branches/avidemux_2.5_branch_gruntster/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/CMakeLists.txt	2010-06-13 09:59:07 UTC (rev 6369)
@@ -145,6 +145,8 @@
 #INCLUDE(admCheckAudioCodecLibs)
 #INCLUDE(admCheckAudioDeviceLibs)
 INCLUDE(admCheckMiscLibs)
+INCLUDE(admCheckVpx)
+checkVpxDec()
 
 ########################################
 # Check functions and includes

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-13 09:59:07 UTC (rev 6369)
@@ -41,6 +41,11 @@
 #include "ADM_codecs/ADM_ffmp43.h"
 #endif
 
+#ifdef USE_VPX
+#include "ADM_codecs/ADM_vpx.h"
+#endif
+
+
 #include "ADM_assert.h"
 #include "prefs.h"
 
@@ -224,6 +229,12 @@
       return (decoders *) (new decoderFFFLV1 (w, h,extraLen, extraData));
     }
 
+#ifdef USE_VPX
+  if (fourCC::check (fcc, (uint8_t *) "VP8 "))
+    {
+      return (decoders *) (new decoderVPX (w, h));
+    }
+#endif
 
 #ifdef USE_FFMPEG
   if (fourCC::check (fcc, (uint8_t *) "H263"))

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.cpp	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.cpp	2010-06-13 09:59:07 UTC (rev 6369)
@@ -0,0 +1,117 @@
+/***************************************************************************
+            \file              ADM_ffmpeg_vdpau.cpp  
+            \brief Decoder using half ffmpeg/half VDPAU
+
+    The ffmpeg part is to preformat inputs for VDPAU
+    VDPAU is loaded dynamically to be able to make a binary
+        and have something working even if the target machine
+        does not have vdpau
+    Some part, especially get/buffer and ip_age borrowed from xbmc
+        as the api from ffmpeg is far from clear....
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h"
+#ifdef USE_VPX
+#include "ADM_default.h"
+#include "ADM_vpx.h"
+#include "vpx/vpx_decoder.h"
+#include "vpx/vp8dx.h"
+#define VPX ((vpx_codec_ctx_t *)vpx)
+
+#define ADM_warning printf
+#define ADM_info printf
+/**
+    \fn ctor
+*/
+decoderVPX::decoderVPX (uint32_t w, uint32_t h)
+        : decoders(  w,   h)
+{   
+    alive=false;
+    vpx=NULL;
+    vpx_codec_dec_cfg_t cfg;
+    vpx_codec_flags_t flags=0; //VPX_CODEC_USE_POSTPROC
+    vpx_codec_ctx_t *instance=new vpx_codec_ctx_t;
+    const struct vpx_codec_iface *iface = &vpx_codec_vp8_dx_algo;
+    
+    memset(instance,0,sizeof(*instance));
+    memset(&cfg,0,sizeof(cfg));
+    cfg.threads=1;
+    cfg.w=w;
+    cfg.h=h;
+    if(VPX_CODEC_OK!=vpx_codec_dec_init(instance, iface, &cfg, flags))
+    {
+        delete instance;
+        ADM_warning("Vpx init ko\n");
+    }else
+    {
+        alive=true;
+        vpx=(void *)instance;
+        ADM_info("Vpx init ok\n");
+
+    }
+}
+/**
+    \fn dtor
+*/
+decoderVPX::~decoderVPX ()
+{
+    if(vpx)
+    {
+        vpx_codec_ctx_t *a=VPX;
+        delete a;
+        vpx=NULL;
+    }
+    ADM_info("Destroying VPX decoder\n");
+}
+/**
+    \fn uncompress
+*/
+uint8_t    decoderVPX::uncompress (ADMCompressedImage * in, ADMImage * out)
+{
+    if (vpx_codec_decode(VPX, in->data, in->dataLength, NULL, 0) != VPX_CODEC_OK) 
+    {
+        ADM_warning("Error decoding VPX\n");
+        return false;
+    }
+    struct vpx_image *img;
+    const void *iter = NULL;
+    img = vpx_codec_get_frame(VPX, &iter);
+    if(img)
+    {
+            if (img->fmt != VPX_IMG_FMT_I420) 
+            {
+                ADM_warning("Wrong Colorspace\n");
+                return false;
+            }
+
+            if(out->isRef())
+            {
+                    out->_planes[0]=img->planes[0];
+                    out->_planes[1]=img->planes[1];
+                    out->_planes[2]=img->planes[2];
+                    out->_planeStride[0]=img->stride[0];
+                    out->_planeStride[1]=img->stride[1];
+                    out->_planeStride[2]=img->stride[2];
+                    out->_colorspace=ADM_COLOR_YV12;
+                    //out->Pts=in->demuxerPts;
+                    out->flags=in->flags;
+                    return true;
+            }
+                
+            ADM_warning("Only ref for VPX decoder\n");
+
+    }
+    return false;
+}
+#endif
+// EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.h	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_vpx.h	2010-06-13 09:59:07 UTC (rev 6369)
@@ -0,0 +1,50 @@
+/***************************************************************************
+            \file  ADM_vpx.h
+            \brief I/f to libvpx (decoder)
+
+    The ffmpeg part is to preformat inputs for VDPAU
+    VDPAU is loaded dynamically to be able to make a binary
+        and have something working even if the target machine
+        does not have vdpau
+    Some part, especially get/buffer and ip_age borrowed from xbmc
+        as the api from ffmpeg is far from clear....
+
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_VPX_H
+#define ADM_VPX_H
+#include "ADM_codec.h"
+/**
+    \class decoderVpx
+*/
+class decoderVPX:public decoders
+{
+protected:
+                    bool alive;
+                    void     *vpx;
+public:
+            // public API
+                    decoderVPX (uint32_t w, uint32_t h);
+                    ~decoderVPX();
+    virtual uint8_t    uncompress (ADMCompressedImage * in, ADMImage * out);
+    virtual uint8_t    bFramePossible (void)
+      {
+        return 0;
+      }
+    virtual const char *getDecoderName(void) {return "LibVPX";}
+    virtual bool        initializedOk(void)        {return alive;};
+    virtual uint8_t     dontcopy (void)             {return true;}
+};
+
+#endif
+//EOF
+

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/CMakeLists.txt	2010-06-13 09:59:07 UTC (rev 6369)
@@ -1,5 +1,7 @@
 SET(ADM_codecs_SRCS 
-	ADM_codecs.cpp  ADM_ffmp43.cpp  ADM_uyvy.cpp)
+	ADM_codecs.cpp  ADM_ffmp43.cpp  ADM_uyvy.cpp
+        ADM_vpx.cpp
+)
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_codecs ${ADM_codecs_SRCS})
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/CMakeLists.txt	2010-06-13 09:59:07 UTC (rev 6369)
@@ -391,6 +391,18 @@
 	ENDIF (ADM_UI_QT4)
 ENDIF (USE_XV)
 
+# VPX
+IF (USE_VPX)
+	IF (ADM_UI_GTK)
+		TARGET_LINK_LIBRARIES(avidemux2_gtk ${VPX_LIBRARY_DIR})
+	ENDIF (ADM_UI_GTK)
+
+	IF (ADM_UI_QT4)
+		TARGET_LINK_LIBRARIES(avidemux2_qt4 ${VPX_LIBRARY_DIR})
+	ENDIF (ADM_UI_QT4)
+	TARGET_LINK_LIBRARIES(avidemux2_cli ${VPX_LIBRARY_DIR})
+ENDIF (USE_VPX)
+
 # SDL
 IF (USE_SDL)
 	IF (ADM_UI_GTK)

Added: branches/avidemux_2.5_branch_gruntster/cmake/admCheckVpx.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckVpx.cmake	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckVpx.cmake	2010-06-13 09:59:07 UTC (rev 6369)
@@ -0,0 +1,18 @@
+MACRO(checkVpxDec)
+		OPTION(VPXDEC "" ON)
+
+		MESSAGE(STATUS "Checking for Vpx")
+		MESSAGE(STATUS "*****************")
+
+		IF (VPXDEC)
+			FIND_HEADER_AND_LIB(VPX vpx/vpx_decoder.h vpx vpx_codec_dec_init_ver)
+			PRINT_LIBRARY_INFO("Vpx" VPX_FOUND "${VPX_INCLUDE_DIR}" "${VPX_LIBRARY_DIR}")
+                        IF(VPX_FOUND)
+                                SET(USE_VPX 1)
+		                MESSAGE(STATUS "Linking to vpx decoder library ")
+                        ENDIF(VPX_FOUND)
+		ELSE (VPXDEC)
+			MESSAGE("${MSG_DISABLE_OPTION}")
+		ENDIF (VPXDEC)
+		MESSAGE("")
+ENDMACRO(checkVpxDec)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2010-06-13 09:44:21 UTC (rev 6368)
+++ branches/avidemux_2.5_branch_gruntster/cmake/config.h.cmake	2010-06-13 09:59:07 UTC (rev 6369)
@@ -64,6 +64,7 @@
 #cmakedefine USE_XV
 #endif
 
+#cmakedefine USE_VPX
 /* Version number of package */
 #define VERSION "${VERSION}"
 



From gruntster at mail.berlios.de  Sun Jun 13 20:11:34 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Sun, 13 Jun 2010 20:11:34 +0200
Subject: [Avidemux-svn-commit] r6370 -
	branches/avidemux_2.5_branch_gruntster/cmake
Message-ID: <201006131811.o5DIBYZC018897@sheep.berlios.de>

Author: gruntster
Date: 2010-06-13 20:11:27 +0200 (Sun, 13 Jun 2010)
New Revision: 6370

Modified:
   branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake
Log:
[qt] increase minimum Qt version to 4.5

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake	2010-06-13 09:59:07 UTC (rev 6369)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admCheckQt4.cmake	2010-06-13 18:11:27 UTC (rev 6370)
@@ -6,11 +6,7 @@
 		MESSAGE(STATUS "*****************")
 
 		IF (QT4)
-			IF (APPLE)
-				SET(QT_MIN_VERSION 4.4.0)
-			ELSE (APPLE)
-				SET(QT_MIN_VERSION 4.2.0)
-			ENDIF (APPLE)
+			SET(QT_MIN_VERSION 4.5.0)
 			
 			FIND_PACKAGE(Qt4)	
 			STRING(REGEX REPLACE "[\\]" "/" QT_INCLUDES "${QT_INCLUDES}")	# backslashes aren't taken care of properly on Windows



From gruntster at mail.berlios.de  Mon Jun 14 22:02:50 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Mon, 14 Jun 2010 22:02:50 +0200
Subject: [Avidemux-svn-commit] r6372 -
	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions
Message-ID: <201006142002.o5EK2otm015627@sheep.berlios.de>

Author: gruntster
Date: 2010-06-14 22:02:46 +0200 (Mon, 14 Jun 2010)
New Revision: 6372

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginXmlOptions.cpp
Log:
[vidEnc] plug memory leak when saving video encoder options

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginXmlOptions.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginXmlOptions.cpp	2010-06-14 18:12:04 UTC (rev 6371)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/common/pluginOptions/PluginXmlOptions.cpp	2010-06-14 20:02:46 UTC (rev 6372)
@@ -113,6 +113,7 @@
 	xml = new char[tempBufferSize + 1];
 	memcpy(xml, tempBuffer, tempBufferSize);
 	xml[tempBufferSize] = 0;
+	xmlFree(tempBuffer);
 
 	return xml;
 }



From mean at mail.berlios.de  Tue Jun 15 07:30:04 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 15 Jun 2010 07:30:04 +0200
Subject: [Avidemux-svn-commit] r6373 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006150530.o5F5U41j026734@sheep.berlios.de>

Author: mean
Date: 2010-06-15 07:30:03 +0200 (Tue, 15 Jun 2010)
New Revision: 6373

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h
Log:
[Qt] Catch exit event to force a kill

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-14 20:02:46 UTC (rev 6372)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-15 05:30:03 UTC (rev 6373)
@@ -541,6 +541,22 @@
 {
 	clearCustomMenu();
 }
+
+void MainWindow::closeEvent(QCloseEvent *event)
+{
+static bool first=true;
+    ADM_warning("Close event\n");
+    if(first)
+    {
+        first=false;
+        HandleAction(ACT_Exit);
+    }
+    event->accept();
+//         event->ignore();
+
+}
+
+
 static const UI_FUNCTIONS_T UI_Hooks=
     {
         ADM_RENDER_API_VERSION_NUMBER,

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h	2010-06-14 20:02:46 UTC (rev 6372)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h	2010-06-15 05:30:03 UTC (rev 6373)
@@ -42,6 +42,7 @@
 	bool eventFilter(QObject* watched, QEvent* event);
 	void mousePressEvent(QMouseEvent* event);
 	void dragEnterEvent(QDragEnterEvent *event);
-	void dropEvent(QDropEvent *event);
+	void dropEvent(QDropEvent *event);
+    void closeEvent ( QCloseEvent * event )  ;
 };
 #endif	// Q_gui2_h



From mean at mail.berlios.de  Tue Jun 15 07:30:07 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 15 Jun 2010 07:30:07 +0200
Subject: [Avidemux-svn-commit] r6374 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers:
	MpegPS MpegTS
Message-ID: <201006150530.o5F5U7pK026782@sheep.berlios.de>

Author: mean
Date: 2010-06-15 07:30:06 +0200 (Tue, 15 Jun 2010)
New Revision: 6374

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
Log:
[ts/pts] Oops, fix delay (in frameIncrement, not in 1000 sec)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-15 05:30:03 UTC (rev 6373)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-15 05:30:06 UTC (rev 6374)
@@ -132,6 +132,7 @@
     }
     float f,g;
     f=1000*1000*1000;
+    f/=_videostream.dwRate; 
     g=ListOfFrames[index]->dts;
     g+=f*offset;
     return (uint64_t)g;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-15 05:30:03 UTC (rev 6373)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-15 05:30:06 UTC (rev 6374)
@@ -136,6 +136,7 @@
     }
     float f,g;
     f=1000*1000*1000;
+    f/=_videostream.dwRate; 
     g=ListOfFrames[index]->dts;
     g+=f*offset;
     return (uint64_t)g;



From mean at mail.berlios.de  Tue Jun 15 07:30:09 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Tue, 15 Jun 2010 07:30:09 +0200
Subject: [Avidemux-svn-commit] r6375 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006150530.o5F5U9Vj026819@sheep.berlios.de>

Author: mean
Date: 2010-06-15 07:30:08 +0200 (Tue, 15 Jun 2010)
New Revision: 6375

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
Log:
[Editor] Verbose

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2010-06-15 05:30:06 UTC (rev 6374)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_segment.cpp	2010-06-15 05:30:08 UTC (rev 6375)
@@ -52,7 +52,17 @@
             ADM_warning("Updating firstFramePTS, The first frame has a PTS >0, adjusting to %"LLU" ms\n",pts/1000);
             ref->firstFramePts=pts;
         }
+    
     updateStartTime();
+    //
+    n=segments.size();
+    if(n)
+    {
+    _SEGMENT *seg=getSegment(n-1);
+    uint64_t dur=ref->_aviheader->getVideoDuration();
+    printf("Current duration %"LLU" ms real one %"LLU" ms\n",dur/1000,seg->_durationUs/1000);
+    }
+
     return true;
 }
 /**



From mean at mail.berlios.de  Wed Jun 16 07:29:41 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 16 Jun 2010 07:29:41 +0200
Subject: [Avidemux-svn-commit] r6376 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <201006160529.o5G5Tfif011726@sheep.berlios.de>

Author: mean
Date: 2010-06-16 07:29:39 +0200 (Wed, 16 Jun 2010)
New Revision: 6376

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp
Log:
[PsAudio] dont read too much audio, 2 packets should be enough

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp	2010-06-15 05:30:08 UTC (rev 6375)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudioProbe.cpp	2010-06-16 05:29:39 UTC (rev 6376)
@@ -71,19 +71,18 @@
         packetStats *stat=packet->getStat(i);
         if(stat->count)
         {
-            printf("[PsProbeAudo] Pid:%x count:%"LX" size:%"LD"\n",i,stat->count,stat->size);
-        }
-
-         if(stat->count>=PROBE_MIN_PACKET && stat->size>PROBE_MIN_SIZE)
-         {
+            ADM_info("[PsProbeAudo] Pid:%x count:%"LX" size:%"LD"\n",i,stat->count,stat->size);
+            if(stat->count>=PROBE_MIN_PACKET && stat->size>PROBE_MIN_SIZE)
+            {
                 packet->setPos(fileSize/2);
                 addAudioTrack(i,tracks,packet);
-         }
-
+            }else       
+                ADM_info("[PsProbeAudo] Not enough samples\n");
+        }
     }
 
 end:
-    printf("[PsDemux] Audio probe done, found %d tracks\n",(int)tracks->size());
+    ADM_info("[PsDemux] Audio probe done, found %d tracks\n",(int)tracks->size());
     delete packet;
 
     if(tracks->size()==0)
@@ -110,16 +109,24 @@
         if(masked!=MP2_AUDIO_VALUE &&  // MP2
             masked!=LPCM_AUDIO_VALUE && // PCM
             masked!=DTS_AC3_AUDIO_VALUE  // AC3 & DTS
-            ) return false;
+            ) 
+        {
+            ADM_info("Not a type we know %x\n",(int)masked);
+            return false;
+        }
 
         // Go back where we were
         p->changePid(pid);
         p->getPacketOfType(pid,PROBE_ANALYZE_SIZE, &packetSize,&pts,&dts,audioBuffer,&startAt);
         //Realign
         p->seek(startAt,0);
-        int rd=PROBE_ANALYZE_SIZE;
-        if(!p->read(PROBE_ANALYZE_SIZE,audioBuffer))
+        int rd=packetSize*2;
+        if(rd>PROBE_ANALYZE_SIZE) rd=PROBE_ANALYZE_SIZE;
+        if(!p->read(rd,audioBuffer))
+        {
+            ADM_info("Cannot read %d bytes of type %x\n",packetSize*2,pid);
             return false;
+        }
         psAudioTrackInfo *info=new psAudioTrackInfo;
         info->esID=pid;
         uint32_t fq,br,chan,off;



From mean at mail.berlios.de  Wed Jun 16 07:29:44 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 16 Jun 2010 07:29:44 +0200
Subject: [Avidemux-svn-commit] r6377 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006160529.o5G5TiJ9011816@sheep.berlios.de>

Author: mean
Date: 2010-06-16 07:29:43 +0200 (Wed, 16 Jun 2010)
New Revision: 6377

Added:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.hxx
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h
Log:
[UI] Add js/py custom menu

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-16 05:29:39 UTC (rev 6376)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-16 05:29:43 UTC (rev 6377)
@@ -52,7 +52,8 @@
 
 extern uint8_t UI_getPhysicalScreenSize(void* window, uint32_t *w,uint32_t *h);
 extern uint8_t GUI_jobs(void);
-extern const char * GUI_getCustomScript(uint32_t nb);
+extern const char * GUI_getCustomJsScript(uint32_t nb);
+extern const char * GUI_getCustomPyScript(uint32_t nb);
 
 extern uint8_t GUI_getFrameContent(ADMImage *image, uint32_t frame);
 extern int     GUI_handleVFilter (void);
@@ -110,13 +111,20 @@
   // independant load not loaded
 //------------------------------------------------
 int nw;
-  if(action>=ACT_CUSTOM_BASE && action <ACT_CUSTOM_END)
+  if(action>=ACT_CUSTOM_BASE_JS && action <ACT_CUSTOM_END_JS)
   {
-      int i=action-ACT_CUSTOM_BASE;
-      const char *custom=GUI_getCustomScript(i);
+      int i=action-ACT_CUSTOM_BASE_JS;
+      const char *custom=GUI_getCustomJsScript(i);
       A_parseECMAScript(custom);
       return ;
   }
+  if(action>=ACT_CUSTOM_BASE_PY && action <ACT_CUSTOM_END_PY)
+  {
+      int i=action-ACT_CUSTOM_BASE_PY;
+      const char *custom=GUI_getCustomPyScript(i);
+      A_parseTinyPyScript(custom);
+      return ;
+  }
   switch (action)
     {
         case ACT_PY_SHELL:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.hxx	2010-06-16 05:29:39 UTC (rev 6376)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_action.hxx	2010-06-16 05:29:43 UTC (rev 6377)
@@ -26,8 +26,10 @@
 #include "gui_action.names"
 #undef ACT
 
-ACT_CUSTOM_BASE,
-ACT_CUSTOM_END=ACT_CUSTOM_BASE+ADM_MAC_CUSTOM_SCRIPT,
+ACT_CUSTOM_BASE_JS,
+ACT_CUSTOM_END_JS=ACT_CUSTOM_BASE_JS+ADM_MAC_CUSTOM_SCRIPT,
+ACT_CUSTOM_BASE_PY,
+ACT_CUSTOM_END_PY=ACT_CUSTOM_BASE_PY+ADM_MAC_CUSTOM_SCRIPT,
 ACT_DUMMY
 };
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2010-06-16 05:29:39 UTC (rev 6376)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/CMakeLists.txt	2010-06-16 05:29:43 UTC (rev 6377)
@@ -6,6 +6,7 @@
 
 SET(${ADM_LIB}_SRCS
 	Q_gui2.cpp  
+	Q_gui2_menu.cpp  
         T_preview.cpp  
         T_vumeter.cpp  
         #stubs.cpp

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-16 05:29:39 UTC (rev 6376)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-16 05:29:43 UTC (rev 6377)
@@ -61,9 +61,6 @@
 static int shiftKeyHeld=0;
 static ADM_QSlider *slider=NULL;
 static int _upd_in_progres=0;
-static char     *customNames[ADM_MAC_CUSTOM_SCRIPT];
-static QAction  *customActions[ADM_MAC_CUSTOM_SCRIPT];
-static uint32_t ADM_nbCustom=0;
 static int currentFps = 0;
 static int frameCount = 0;
 static int currentFrame = 0;
@@ -283,6 +280,10 @@
 	connect(ui.currentTime, SIGNAL(editingFinished()), this, SLOT(currentTimeChanged()));
 
 	/* Build the custom menu */
+    jsMenu=new QMenu("javaScript");
+    pyMenu=new QMenu("tinyPython");
+    ui.menuCustom->addMenu(jsMenu);
+    ui.menuCustom->addMenu(pyMenu);
 	buildCustomMenu();
 
 	this->installEventFilter(this);
@@ -297,36 +298,6 @@
     
 }
 /**
-\fn     custom
-\brief  Invoked when one of the custom script has been called
-*/
-void MainWindow::custom(void)
-{
-	printf("[Custom] Invoked\n");
-	QObject *ptr=sender();
-	if(!ptr) return;
-	for(int i=0;i<ADM_nbCustom;i++)
-	{
-		if(customActions[i]==ptr)
-		{
-			printf("[Custom] %u/%u scripts\n",i,ADM_nbCustom);
-			HandleAction( (Action)(ACT_CUSTOM_BASE+i));
-			return; 
-		}
-	}
-	printf("[Custom] Not found\n");
-}
-/**
-    Get the custom entry 
-
-*/
-const char * GUI_getCustomScript(uint32_t nb)
-{
-	ADM_assert(nb<ADM_nbCustom);
-	return customNames[nb];
-
-}
-/**
     \fn timeChanged
     \brief Called whenever timeshift is on/off'ed or value changes
 */
@@ -485,58 +456,6 @@
 		HandleAction(ACT_NextKFrame);
 }
 
-void MainWindow::clearCustomMenu(void)
-{
-	if (ADM_nbCustom)
-	{
-		for(int i = 0; i < ADM_nbCustom; i++)
-		{
-			disconnect(customActions[i], SIGNAL(triggered()), this, SLOT(custom()));
-			delete customActions[i];
-			delete customNames[i];
-		}
-
-		ui.menuCustom->clear();
-		ADM_nbCustom = 0;
-	}
-}
-
-void MainWindow::buildCustomMenu(void)
-{
-	clearCustomMenu();
-
-	char *customdir = ADM_getCustomDir();
-
-	if (!customdir)
-	{
-		printf("No custom dir...\n");
-		return;
-	}
-
-	/* Collect the name */
-	if (! buildDirectoryContent(&ADM_nbCustom, customdir, customNames, ADM_MAC_CUSTOM_SCRIPT,".js"))
-	{
-		printf("Failed to build custom dir content");
-		return;
-	}
-
-	if(ADM_nbCustom)
-	{
-		printf("Found %u custom script(s), adding them\n", ADM_nbCustom);
-
-		for(int i=0; i < ADM_nbCustom; i++)
-		{
-			customActions[i] = new QAction(QString::fromUtf8(ADM_GetFileName(customNames[i])), NULL);
-			ui.menuCustom->addAction(customActions[i]);
-			connect(customActions[i], SIGNAL(triggered()), this, SLOT(custom()));
-		}
-	}
-	else
-		printf("No custom scripts\n");
-
-	printf("Custom menu built\n");
-}
-
 MainWindow::~MainWindow()
 {
 	clearCustomMenu();

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h	2010-06-16 05:29:39 UTC (rev 6376)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h	2010-06-16 05:29:43 UTC (rev 6377)
@@ -17,11 +17,14 @@
 	void buildCustomMenu(void);
 	
 	Ui_MainWindow ui;
-
+protected:
+    QMenu *jsMenu;
+    QMenu *pyMenu;
 public slots:
 	void timeChanged(int);
 	void buttonPressed(void);
-	void custom(void);
+	void customPy(void);
+    void customJs(void);
 	void toolButtonPressed(bool z);
 
 	void comboChanged(int z);

Added: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp	2010-06-16 05:29:39 UTC (rev 6376)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp	2010-06-16 05:29:43 UTC (rev 6377)
@@ -0,0 +1,174 @@
+/***************************************************************************
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h"
+#include "ADM_inttype.h"
+#include <string>
+#include <QtCore/QFileInfo>
+#include <QtCore/QUrl>
+#include <QtGui/QKeyEvent>
+#include <QtGui/QGraphicsView>
+
+#include "Q_gui2.h"
+#include "ADM_default.h"
+
+#include "gui_action.hxx"
+#include "DIA_fileSel.h"
+#include "ADM_vidMisc.h"
+#include "prefs.h"
+#include "avi_vars.h"
+
+#include "ADM_render/GUI_renderInternal.h"
+#include "ADM_coreVideoEncoderInternal.h"
+#include "ADM_muxerProto.h"
+#include "T_vumeter.h"
+#include "DIA_coreToolkit.h"
+
+using std::string;
+
+#define JS_CUSTOM 0
+#define PY_CUSTOM 1
+static char     *customNames[2][ADM_MAC_CUSTOM_SCRIPT];
+static QAction  *customActions[1][ADM_MAC_CUSTOM_SCRIPT];
+static uint32_t ADM_nbCustom[2]={0,0};
+/**
+    \fn clearCustomMenu
+*/
+void MainWindow::clearCustomMenu(void)
+{
+    for(int pool=0;pool<2;pool++)
+	if (ADM_nbCustom[pool])
+	{
+		for(int i = 0; i < ADM_nbCustom[pool]; i++)
+		{
+            if(pool==PY_CUSTOM)
+                disconnect(customActions[pool][i], SIGNAL(triggered()), this, SLOT(customPy()));
+            else
+                disconnect(customActions[pool][i], SIGNAL(triggered()), this, SLOT(customJs()));
+			delete customActions[pool][i];
+			delete customNames[pool][i];
+		}
+		ADM_nbCustom[pool] = 0;
+	}
+    pyMenu->clear();
+    jsMenu->clear();
+}
+/**
+    \fn buildCustomMenu
+*/
+void MainWindow::buildCustomMenu(void)
+{
+	clearCustomMenu();
+
+	char *customdir = ADM_getCustomDir();
+
+	if (!customdir)
+	{
+		printf("No custom dir...\n");
+		return;
+	}
+    string customFolder(customdir);
+    for(int pool=0;pool<2;pool++)
+    {
+        string myDir,subDir;
+        /* Collect the name */
+        if(JS_CUSTOM==pool) subDir=string("/js/");
+        else                subDir=string("/py/");
+        myDir=customFolder+subDir;
+        if (! buildDirectoryContent(&(ADM_nbCustom[pool]), myDir.c_str(), customNames[pool], ADM_MAC_CUSTOM_SCRIPT,".js"))
+        {
+            printf("Failed to build custom dir content");
+            return;
+        }
+
+        if(ADM_nbCustom[pool])
+        {
+            printf("Found %u custom script(s), adding them (%s)\n", ADM_nbCustom[pool],subDir.c_str());
+
+            for(int i=0; i < ADM_nbCustom[pool]; i++)
+            {
+                customActions[pool][i] = new QAction(QString::fromUtf8(ADM_GetFileName(customNames[pool][i])), NULL);
+                if(pool==JS_CUSTOM)
+                {
+                    jsMenu->addAction(customActions[pool][i]);
+                    connect(customActions[pool][i], SIGNAL(triggered()), this, SLOT(customJs()));
+                }
+                else
+                {
+                    pyMenu->addAction(customActions[pool][i]);
+                    connect(customActions[pool][i], SIGNAL(triggered()), this, SLOT(customPy()));
+                }
+            }
+        }
+        else
+            printf("No custom scripts\n");
+    }
+	printf("Custom menu built\n");
+}
+
+/**
+\fn     custom
+\brief  Invoked when one of the custom script has been called
+*/
+void MainWindow::customJs(void)
+{
+	printf("[Custom] Js Invoked\n");
+	QObject *ptr=sender();
+	if(!ptr) return;
+	for(int i=0;i<ADM_nbCustom[JS_CUSTOM];i++)
+	{
+		if(customActions[JS_CUSTOM][i]==ptr)
+		{
+			printf("[Custom] %u/%u scripts\n",i,ADM_nbCustom[JS_CUSTOM]);
+			HandleAction( (Action)(ACT_CUSTOM_BASE_JS+i));
+			return; 
+		}
+	}
+	printf("[Custom] Not found\n");
+}
+void MainWindow::customPy(void)
+{
+	printf("[Custom] Python Invoked\n");
+	QObject *ptr=sender();
+	if(!ptr) return;
+	for(int i=0;i<ADM_nbCustom[PY_CUSTOM];i++)
+	{
+		if(customActions[PY_CUSTOM][i]==ptr)
+		{
+			printf("[Custom] %u/%u scripts\n",i,ADM_nbCustom[PY_CUSTOM]);
+			HandleAction( (Action)(ACT_CUSTOM_BASE_PY+i));
+			return; 
+		}
+	}
+	printf("[Custom] Not found\n");
+}
+/**
+    Get the custom entry 
+
+*/
+
+const char * GUI_getCustomJsScript(uint32_t nb)
+{
+	ADM_assert(nb<ADM_nbCustom[JS_CUSTOM]);
+	return customNames[JS_CUSTOM][nb];
+
+}
+const char * GUI_getCustomPyScript(uint32_t nb)
+{
+	ADM_assert(nb<ADM_nbCustom[PY_CUSTOM]);
+	return customNames[PY_CUSTOM][nb];
+
+}
+
+//********************************************
+//EOF



From mean at mail.berlios.de  Wed Jun 16 07:29:47 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 16 Jun 2010 07:29:47 +0200
Subject: [Avidemux-svn-commit] r6378 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_script2/js gtk/ADM_userInterfaces/ADM_gui2
	qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006160529.o5G5TluT011896@sheep.berlios.de>

Author: mean
Date: 2010-06-16 07:29:46 +0200 (Wed, 16 Jun 2010)
New Revision: 6378

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp
Log:
[custom] submenu for py and js (end)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-16 05:29:43 UTC (rev 6377)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-16 05:29:46 UTC (rev 6378)
@@ -30,7 +30,7 @@
     {
         int64_t delta=0;
         if(pts!=ADM_NO_PTS && dts!=ADM_NO_PTS) delta=(int64_t)pts-(int64_t)dts;
-        jsLog("Frame %"LU" : Flags 0x%"LX" pts=%"LLD" dts=%"LLD" delta=%"LLD" ms",framenumber,flags,pts,dts,delta/1000LL);
+        jsLog("Frame %"LU" : Flags 0x%"LX" pts=%"LLD" dts=%"LLD" delta=%"LLD" ms\n",framenumber,flags,pts,dts,delta/1000LL);
     }else
     {
         jsLog("Cannot get info for frame %"LU,framenumber);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-16 05:29:43 UTC (rev 6377)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-16 05:29:46 UTC (rev 6378)
@@ -873,6 +873,7 @@
 */
 bool A_parseTinyPyScript(const char *name){
   bool ret;
+  ADM_info("Executing tinyPy script :%s\n",name);
   char *longname = ADM_PathCanonize(name);
    if (playing){
       GUI_PlayAvi();

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-06-16 05:29:43 UTC (rev 6377)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-06-16 05:29:46 UTC (rev 6378)
@@ -381,12 +381,15 @@
     Get the custom entry
 
 */
-const char * GUI_getCustomScript(uint32_t nb)
+const char * GUI_getCustomJsScript(uint32_t nb)
 {
     ADM_assert(nb<ADM_nbCustom);
     return customNames[nb];
-
 }
+const char * GUI_getCustomPyScript(uint32_t nb)
+{
+   return NULL;
+}
 /**
      \fn bindGUI
      \brief Bind the GUI to our handling functions/callbacks
@@ -647,7 +650,7 @@
     go = gtk_menu_item_new_with_mnemonic (ADM_GetFileName(customNames[i]));
     gtk_widget_show (go);
     gtk_container_add (GTK_CONTAINER (menu), go);
-    rank=ACT_CUSTOM_BASE+i;
+    rank=ACT_CUSTOM_BASE_JS+i;
     CALLBACK( go                 ,rank);
   }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h	2010-06-16 05:29:43 UTC (rev 6377)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.h	2010-06-16 05:29:46 UTC (rev 6378)
@@ -46,6 +46,7 @@
 	void mousePressEvent(QMouseEvent* event);
 	void dragEnterEvent(QDragEnterEvent *event);
 	void dropEvent(QDropEvent *event);
-    void closeEvent ( QCloseEvent * event )  ;
+    void closeEvent ( QCloseEvent * event )  ;
+    void customScript(int pool,int base,QObject *ptr);
 };
 #endif	// Q_gui2_h

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp	2010-06-16 05:29:43 UTC (rev 6377)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2_menu.cpp	2010-06-16 05:29:46 UTC (rev 6378)
@@ -1,6 +1,7 @@
 /***************************************************************************
-    copyright            : (C) 2001 by mean
-    email                : fixounet at free.fr
+    \file Q_gui2_menu.cpp
+    \brief Handle custom menus
+    \author mean/gruntster
  ***************************************************************************/
 
 /***************************************************************************
@@ -39,7 +40,7 @@
 #define JS_CUSTOM 0
 #define PY_CUSTOM 1
 static char     *customNames[2][ADM_MAC_CUSTOM_SCRIPT];
-static QAction  *customActions[1][ADM_MAC_CUSTOM_SCRIPT];
+static QAction  *customActions[2][ADM_MAC_CUSTOM_SCRIPT];
 static uint32_t ADM_nbCustom[2]={0,0};
 /**
     \fn clearCustomMenu
@@ -81,11 +82,20 @@
     for(int pool=0;pool<2;pool++)
     {
         string myDir,subDir;
+        string ext;
         /* Collect the name */
-        if(JS_CUSTOM==pool) subDir=string("/js/");
-        else                subDir=string("/py/");
+        if(JS_CUSTOM==pool) 
+        {
+            subDir=string("/js/");
+            ext=string(".js");
+        }
+        else
+        {
+            subDir=string("/py/");
+            ext=string(".py");
+        }
         myDir=customFolder+subDir;
-        if (! buildDirectoryContent(&(ADM_nbCustom[pool]), myDir.c_str(), customNames[pool], ADM_MAC_CUSTOM_SCRIPT,".js"))
+        if (! buildDirectoryContent(&(ADM_nbCustom[pool]), myDir.c_str(), customNames[pool], ADM_MAC_CUSTOM_SCRIPT,ext.c_str()))
         {
             printf("Failed to build custom dir content");
             return;
@@ -97,16 +107,17 @@
 
             for(int i=0; i < ADM_nbCustom[pool]; i++)
             {
-                customActions[pool][i] = new QAction(QString::fromUtf8(ADM_GetFileName(customNames[pool][i])), NULL);
+                QAction *action= new QAction(QString::fromUtf8(ADM_GetFileName(customNames[pool][i])), NULL);
+                customActions[pool][i] = action;
                 if(pool==JS_CUSTOM)
                 {
-                    jsMenu->addAction(customActions[pool][i]);
-                    connect(customActions[pool][i], SIGNAL(triggered()), this, SLOT(customJs()));
+                    jsMenu->addAction(action);
+                    connect(action, SIGNAL(triggered()), this, SLOT(customJs()));
                 }
                 else
                 {
-                    pyMenu->addAction(customActions[pool][i]);
-                    connect(customActions[pool][i], SIGNAL(triggered()), this, SLOT(customPy()));
+                    pyMenu->addAction(action);
+                    connect(action, SIGNAL(triggered()), this, SLOT(customPy()));
                 }
             }
         }
@@ -120,37 +131,34 @@
 \fn     custom
 \brief  Invoked when one of the custom script has been called
 */
-void MainWindow::customJs(void)
+void MainWindow::customScript(int pool,int base,QObject *ptr)
 {
-	printf("[Custom] Js Invoked\n");
-	QObject *ptr=sender();
-	if(!ptr) return;
-	for(int i=0;i<ADM_nbCustom[JS_CUSTOM];i++)
+	
+	for(int i=0;i<ADM_nbCustom[pool];i++)
 	{
-		if(customActions[JS_CUSTOM][i]==ptr)
+		if(customActions[pool][i]==ptr)
 		{
-			printf("[Custom] %u/%u scripts\n",i,ADM_nbCustom[JS_CUSTOM]);
-			HandleAction( (Action)(ACT_CUSTOM_BASE_JS+i));
+			printf("[Custom] %d/%d scripts\n",i,(int)ADM_nbCustom[pool]);
+			HandleAction( (Action)(base+i));
 			return; 
 		}
 	}
 	printf("[Custom] Not found\n");
+
 }
+void MainWindow::customJs(void)
+{
+	printf("[Custom] Js Invoked\n");
+	QObject *ptr=sender();
+	if(!ptr) return;
+    customScript(JS_CUSTOM,ACT_CUSTOM_BASE_JS,ptr);
+}
 void MainWindow::customPy(void)
 {
 	printf("[Custom] Python Invoked\n");
 	QObject *ptr=sender();
 	if(!ptr) return;
-	for(int i=0;i<ADM_nbCustom[PY_CUSTOM];i++)
-	{
-		if(customActions[PY_CUSTOM][i]==ptr)
-		{
-			printf("[Custom] %u/%u scripts\n",i,ADM_nbCustom[PY_CUSTOM]);
-			HandleAction( (Action)(ACT_CUSTOM_BASE_PY+i));
-			return; 
-		}
-	}
-	printf("[Custom] Not found\n");
+    customScript(PY_CUSTOM,ACT_CUSTOM_BASE_PY,ptr);
 }
 /**
     Get the custom entry 



From mean at mail.berlios.de  Wed Jun 16 07:34:40 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Wed, 16 Jun 2010 07:34:40 +0200
Subject: [Avidemux-svn-commit] r6379 -
	branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog
Message-ID: <201006160534.o5G5Yefo015675@sheep.berlios.de>

Author: mean
Date: 2010-06-16 07:34:39 +0200 (Wed, 16 Jun 2010)
New Revision: 6379

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
Log:
[py/js] Fix cli

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2010-06-16 05:29:46 UTC (rev 6378)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog/DIA_none.cpp	2010-06-16 05:34:39 UTC (rev 6379)
@@ -53,7 +53,8 @@
 uint8_t DIA_pipe(char **cmd,char **param) {return 0;}
 //uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}
-const char * GUI_getCustomScript(uint32_t nb) {return 0;}
+const char * GUI_getCustomJsScript(uint32_t nb) {return 0;}
+const char * GUI_getCustomPyScript(uint32_t nb) {return 0;}
 uint8_t DIA_RecentFiles( char **name ) {return 0;}
 uint8_t DIA_about( void ) {return 0;}
 void DIA_Calculator(uint32_t *sizeInMeg, uint32_t *avgBitrate ) {}



From mean at mail.berlios.de  Fri Jun 18 07:25:03 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 18 Jun 2010 07:25:03 +0200
Subject: [Avidemux-svn-commit] r6380 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers:
	MpegPS MpegTS
Message-ID: <201006180525.o5I5P31L029610@sheep.berlios.de>

Author: mean
Date: 2010-06-18 07:25:02 +0200 (Fri, 18 Jun 2010)
New Revision: 6380

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[Ps/Ts] Detect frame/field encoding type

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-06-16 05:34:39 UTC (rev 6379)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-06-18 05:25:02 UTC (rev 6380)
@@ -53,8 +53,8 @@
     uint32_t h;
     uint32_t fps;
     uint32_t interlaced;
-    uint32_t frameNumber;
-    uint32_t fieldNumber;
+    uint32_t frameCount;
+    uint32_t fieldCount;
     uint32_t ar;
 }PSVideo;
 
@@ -239,9 +239,9 @@
                                             //printf("Picture type %02x struct:%x\n",two,picture_structure);
                                             switch(picture_structure)
                                             {
-                                            case 3: video.frameNumber++;break;
+                                            case 3: video.frameCount++;break;
                                             case 1:
-                                            case 2:  video.fieldNumber++;break;
+                                            case 2:  video.fieldCount++;break;
                                             default: ADM_warning("frame type 0 met, this is illegal\n");
                                             }
                                         }
@@ -336,8 +336,8 @@
         Mark(&data,&info,markStart);
         
         qfprintf(index,"\n# Found %"LU" images \n",data.nbPics); // Size
-        qfprintf(index,"# Found %"LU" frame pictures\n",video.frameNumber); // Size
-        qfprintf(index,"# Found %"LU" field pictures\n",video.fieldNumber); // Size
+        qfprintf(index,"# Found %"LU" frame pictures\n",video.frameCount); // Size
+        qfprintf(index,"# Found %"LU" field pictures\n",video.fieldCount); // Size
         // Now write the header
         writeVideo(&video);
         writeAudio();

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-16 05:34:39 UTC (rev 6379)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-18 05:25:02 UTC (rev 6380)
@@ -58,13 +58,15 @@
 class TSVideo
 {
 public:
-    TSVideo(void) {w=h=fps=interlaced=ar=pid=0;}
+    TSVideo(void) {w=h=fps=interlaced=ar=pid=frameCount=fieldCount=0;}
     uint32_t w;
     uint32_t h;
     uint32_t fps;
     uint32_t interlaced;
     uint32_t ar;
     uint32_t pid;
+    uint32_t frameCount;
+    uint32_t fieldCount;
 };
 
 typedef enum
@@ -569,6 +571,36 @@
                           continue;
 
                           break;
+                    case 0xB5: //  extension
+                                { 
+                                    uint8_t id=pkt->readi8()>>4;
+                                    uint8_t two;
+                                    switch(id)
+                                    {
+                                        case 1: // Sequence extension
+                                            val=(val>>3)&1; // gop type progressive, unreliable, not used
+                                            break;
+                                        case 8: // picture coding extension (mpeg2)
+                                        {
+                                            // skip motion vector
+                                            uint8_t picture_structure;
+                                            pkt->forward(1); // 4*4 bits
+                                            two=pkt->readi8();
+                                            picture_structure=(two)&3;
+                                            
+                                            //printf("Picture type %02x struct:%x\n",two,picture_structure);
+                                            switch(picture_structure)
+                                            {
+                                            case 3: video.frameCount++;break;
+                                            case 1:
+                                            case 2:  video.fieldCount++;break;
+                                            default: ADM_warning("frame type 0 met, this is illegal\n");
+                                            }
+                                        }
+                                        default:break;
+                                    }
+                                }
+                                break;
                   case 0xb8: // GOP
                           // Update ui
                             {
@@ -629,6 +661,9 @@
         printf("\n");
         Mark(&data,&info,2);
         qfprintf(index,"\n[End]\n");
+        qfprintf(index,"\n# Found %"LU" images \n",data.nbPics); // Size
+        qfprintf(index,"# Found %"LU" frame pictures\n",video.frameCount); // Size
+        qfprintf(index,"# Found %"LU" field pictures\n",video.fieldCount); // Size
         qfclose(index);
         index=NULL;
         audioTracks=NULL;



From mean at mail.berlios.de  Fri Jun 18 07:25:05 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 18 Jun 2010 07:25:05 +0200
Subject: [Avidemux-svn-commit] r6381 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006180525.o5I5P5oB029746@sheep.berlios.de>

Author: mean
Date: 2010-06-18 07:25:05 +0200 (Fri, 18 Jun 2010)
New Revision: 6381

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS] Add support for indexer versioning

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-18 05:25:02 UTC (rev 6380)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-18 05:25:05 UTC (rev 6381)
@@ -37,7 +37,7 @@
     uint32_t append;
     char *type;
     uint64_t startDts;
-    
+    uint32_t version=0;
 
     sprintf(idxName,"%s.idx2",name);
     indexFile index;
@@ -57,6 +57,13 @@
         printf("[tsDemux] Incorrect or not found type\n");
         goto abt;
     }
+
+    version=index.getAsUint32("Version");
+    if(version!=ADM_INDEX_FILE_VERSION)
+    {
+        GUI_Error_HIG("Error","This file's index has been created with an older version of avidemux.\nPlease delete the idx2 file and reopen.");
+        goto abt;
+    }
     append=index.getAsUint32("Append");
     printf("[tsDemux] Append=%"LU"\n",append);
     if(append) appendType=FP_APPEND;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-18 05:25:02 UTC (rev 6380)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-18 05:25:05 UTC (rev 6381)
@@ -37,6 +37,7 @@
     uint64_t  startAt;
     uint32_t  index;
     uint8_t   type; // 1=I 2=P 3=B
+    uint32_t  pictureType; // 3=Frame, 1=Top, 2=Bottom
     uint64_t  pts;
     uint64_t  dts;
     uint32_t  len;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-18 05:25:02 UTC (rev 6380)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-18 05:25:05 UTC (rev 6381)
@@ -31,7 +31,7 @@
 #include "ADM_h264_tag.h"
 #include "ADM_clock.h"
 #include "ADM_getbits.h"
-
+#include "ADM_indexFile.h"
 #define zprintf(...) {}
 
 static const char Type[5]={'X','I','P','B','D'};
@@ -761,6 +761,7 @@
 {
     qfprintf(index,"PSD1\n");
     qfprintf(index,"[System]\n");
+    qfprintf(index,"Version=%d\n",ADM_INDEX_FILE_VERSION);
     qfprintf(index,"Type=T\n");
     qfprintf(index,"File=%s\n",filename);
     qfprintf(index,"Append=%d\n",append);



From mean at mail.berlios.de  Fri Jun 18 07:25:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 18 Jun 2010 07:25:08 +0200
Subject: [Avidemux-svn-commit] r6382 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxerMpeg/include
	avidemux_plugins/ADM_demuxers/MpegPS
Message-ID: <201006180525.o5I5P8aF029921@sheep.berlios.de>

Author: mean
Date: 2010-06-18 07:25:07 +0200 (Fri, 18 Jun 2010)
New Revision: 6382

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
Log:
[PS] add preliminary support for frame/field picture type

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2010-06-18 05:25:05 UTC (rev 6381)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/ADM_indexFile.h	2010-06-18 05:25:07 UTC (rev 6382)
@@ -22,6 +22,7 @@
     \class indexFile
     \brief Read a index file easily
 */
+#define ADM_INDEX_FILE_VERSION 2
 #define ADM_INDEX_BUFFER (20*1024)
 /**
     \class dmxToken

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-18 05:25:05 UTC (rev 6381)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-18 05:25:07 UTC (rev 6382)
@@ -37,6 +37,7 @@
     uint32_t append;
     char *type;
     uint64_t startDts;
+    uint32_t version=0;
 
     sprintf(idxName,"%s.idx2",name);
     indexFile index;
@@ -50,6 +51,13 @@
         printf("[psDemux] Cannot read system section\n");
         goto abt;
     }
+
+    version=index.getAsUint32("Version");
+    if(version!=ADM_INDEX_FILE_VERSION)
+    {
+        GUI_Error_HIG("Error","This file's index has been created with an older version of avidemux.\nPlease delete the idx2 file and reopen.");
+        goto abt;
+    }
     type=index.getAsString("Type");
     if(!type || type[0]!='P')
     {

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-06-18 05:25:05 UTC (rev 6381)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-06-18 05:25:07 UTC (rev 6382)
@@ -35,9 +35,11 @@
     uint64_t  startAt;
     uint32_t  index;
     uint8_t   type; // 1=I 2=P 3=B
+    uint32_t  pictureType; // 3=Frame, 1=Top, 2=Bottom
     uint64_t  pts;
     uint64_t  dts;
     uint32_t  len;
+    
 }dmxFrame;
 /**
     \struct ADM_psAudioSeekPoint

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-06-18 05:25:05 UTC (rev 6381)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-06-18 05:25:07 UTC (rev 6382)
@@ -25,8 +25,10 @@
 #include "ADM_quota.h"
 #include "ADM_psAudioProbe.h"
 #include "DIA_working.h"
+#include "ADM_indexFile.h"
 
-static const char Type[5]={'X','I','P','B','P'};
+static const char Type[5]={'X','I','P','B','P'};  // Frame type
+static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
 
 static const uint32_t FPS[16]={
                 0,                      // 0
@@ -63,15 +65,24 @@
     idx_startAtImage,
     idx_startAtGopOrSeq
 }indexerState;
+
+typedef enum
+{
+    pictureFrame=3,
+    pictureTopField=1, 
+    pictureBottomField=2
+}pictureStructure;
+
 typedef struct
 {
-    uint64_t pts,dts,startAt;
-    uint32_t offset;
-    uint32_t frameType;
-    uint32_t nbPics;
-    indexerState state;
+    uint64_t        pts,dts,startAt;
+    uint32_t        offset;
+    uint32_t        frameType;
+    pictureStructure picStructure;
+    uint32_t        nbPics;
+    indexerState    state;
     psPacketLinear *pkt;
-    int32_t        nextOffset;
+    int32_t         nextOffset;
 }indexerData;
 
 typedef enum
@@ -153,8 +164,10 @@
 PSVideo video;
 indexerData  data;    
 dmxPacketInfo info;
+    
     memset(&video,0,sizeof(video));
     memset(&data,0,sizeof(data));
+    data.picStructure=pictureFrame;
     char *indexName=(char *)alloca(strlen(file)+5);
     sprintf(indexName,"%s.idx2",file);
     index=qfopen(indexName,"wt");
@@ -239,9 +252,15 @@
                                             //printf("Picture type %02x struct:%x\n",two,picture_structure);
                                             switch(picture_structure)
                                             {
-                                            case 3: video.frameCount++;break;
-                                            case 1:
-                                            case 2:  video.fieldCount++;break;
+                                            case 3: video.frameCount++;
+                                                    data.picStructure=pictureFrame;
+                                                    break;
+                                            case 1:  data.picStructure=pictureTopField;
+                                                     video.fieldCount++;
+                                                     break;
+                                            case 2:  data.picStructure=pictureBottomField;
+                                                     video.fieldCount++;
+                                                     break;
                                             default: ADM_warning("frame type 0 met, this is illegal\n");
                                             }
                                         }
@@ -399,7 +418,7 @@
             data->nextOffset=-2;
         }
     
-        qfprintf(index,"%c",Type[data->frameType]);
+        qfprintf(index,"%c%c",Type[data->frameType],Structure[data->picStructure&3]);
     }
     if(update==markEnd || update==markNow)
     {
@@ -439,6 +458,7 @@
 {
     qfprintf(index,"PSD1\n");
     qfprintf(index,"[System]\n");
+    qfprintf(index,"Version=%d\n",ADM_INDEX_FILE_VERSION);
     qfprintf(index,"Type=P\n");
     qfprintf(index,"File=%s\n",filename);
     qfprintf(index,"Append=%d\n",append);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-06-18 05:25:05 UTC (rev 6381)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-06-18 05:25:07 UTC (rev 6382)
@@ -102,7 +102,7 @@
                     return false;
             }
             
-            char *start=strstr(buffer," I:");
+            char *start=strstr(buffer," I");
             if(!start) return true;
             start+=1;
             int count=0;
@@ -110,11 +110,14 @@
             {
                 char *cur=start;
                 char type=1;
+                char picStruct='F';
                 char *next;
                 uint32_t len;
                 type=*cur;
                 if(type==0x0a || type==0x0d || !type) break;
                 cur++;
+                picStruct=*cur;
+                cur++;
                 if(*(cur)!=':')
                 {
                     printf("[psDemux]  instead of : (%c %x %x):\n",*cur,*(cur-1),*cur);
@@ -148,6 +151,13 @@
                     case 'B': frame->type=3;break;
                     default: ADM_assert(0);
                 }
+                switch(picStruct)
+                {
+                        default: ADM_warning("Unknown picture structure %c\n",picStruct);
+                        case 'F': frame->pictureType=3;break;
+                        case 'T': frame->pictureType=1;break;
+                        case 'B': frame->pictureType=2;break;
+                }
                 frame->len=len;
                 ListOfFrames.push_back(frame);
                 count++;



From mean at mail.berlios.de  Fri Jun 18 07:25:10 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 18 Jun 2010 07:25:10 +0200
Subject: [Avidemux-svn-commit] r6383 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav
Message-ID: <201006180525.o5I5P9YI030114@sheep.berlios.de>

Author: mean
Date: 2010-06-18 07:25:09 +0200 (Fri, 18 Jun 2010)
New Revision: 6383

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
Log:
[avcodec] Set code type to audio

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2010-06-18 05:25:07 UTC (rev 6382)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_audioDecoders/ADM_ad_lav/ADM_ad_lav.cpp	2010-06-18 05:25:09 UTC (rev 6383)
@@ -98,6 +98,7 @@
     _contextVoid=(void *)avcodec_alloc_context();
     ADM_assert(_contextVoid);
     // Fills in some values...
+    _context->codec_type=AVMEDIA_TYPE_AUDIO;
     _context->sample_rate = info->frequency;
     _context->channels = info->channels;
     _blockalign=_context->block_align = info->blockalign;



From mean at mail.berlios.de  Fri Jun 18 07:25:11 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 18 Jun 2010 07:25:11 +0200
Subject: [Avidemux-svn-commit] r6384 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006180525.o5I5PBor030272@sheep.berlios.de>

Author: mean
Date: 2010-06-18 07:25:11 +0200 (Fri, 18 Jun 2010)
New Revision: 6384

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[Ts] Preliminary support for frame/field in mpeg TS (mpeg2 only ATM)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-18 05:25:09 UTC (rev 6383)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-18 05:25:11 UTC (rev 6384)
@@ -33,7 +33,7 @@
 #include "ADM_getbits.h"
 #include "ADM_indexFile.h"
 #define zprintf(...) {}
-
+static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
 static const char Type[5]={'X','I','P','B','D'};
 
 static const uint32_t FPS[16]={
@@ -75,11 +75,19 @@
     idx_startAtGopOrSeq
 }indexerState;
 
+typedef enum
+{
+    pictureFrame=3,
+    pictureTopField=1, 
+    pictureBottomField=2
+}pictureStructure;
+
 typedef struct
 {
     uint64_t pts,dts; //startAt;
     //uint32_t offset;
     uint32_t frameType;
+    pictureStructure picStructure;
     uint32_t nbPics;
     indexerState state;
     tsPacketLinear *pkt;
@@ -305,6 +313,8 @@
     video.pid=videoTrac[0].trackPid;
 
     memset(&data,0,sizeof(data));
+    data.picStructure=pictureFrame;
+
     char *indexName=(char *)alloca(strlen(file)+5);
     sprintf(indexName,"%s.idx2",file);
     index=qfopen(indexName,"wt");
@@ -514,8 +524,8 @@
     video.pid=videoTrac[0].trackPid;
 
     memset(&data,0,sizeof(data));
+    data.picStructure=pictureFrame;
 
-
     char *indexName=(char *)alloca(strlen(file)+5);
     sprintf(indexName,"%s.idx2",file);
     index=qfopen(indexName,"wt");
@@ -591,10 +601,16 @@
                                             //printf("Picture type %02x struct:%x\n",two,picture_structure);
                                             switch(picture_structure)
                                             {
-                                            case 3: video.frameCount++;break;
-                                            case 1:
-                                            case 2:  video.fieldCount++;break;
-                                            default: ADM_warning("frame type 0 met, this is illegal\n");
+                                                case 3: video.frameCount++;
+                                                        data.picStructure=pictureFrame;
+                                                        break;
+                                                case 1:  data.picStructure=pictureTopField;
+                                                         video.fieldCount++;
+                                                         break;
+                                                case 2:  data.picStructure=pictureBottomField;
+                                                         video.fieldCount++;
+                                                         break;
+                                                default: ADM_warning("frame type 0 met, this is illegal\n");
                                             }
                                         }
                                         default:break;
@@ -694,7 +710,10 @@
             if(data->beginDts==-1 || data->prevDts==-1) deltaDts=-1;
                 else deltaDts=data->prevDts-data->beginDts;
 
-            qfprintf(index," %c:%06"LX":%"LLD":%"LLD,Type[currentFrameType],consumed-beginConsuming,
+            qfprintf(index," %c%c:%06"LX":%"LLD":%"LLD,
+                                    Type[currentFrameType],
+                                    Structure[data->picStructure&3],
+                                    consumed-beginConsuming,
                                     deltaPts,deltaDts);
             beginConsuming=consumed;
         }else

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-18 05:25:09 UTC (rev 6383)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-18 05:25:11 UTC (rev 6384)
@@ -104,8 +104,8 @@
                     return false;
             }
             
-            char *start=strstr(buffer," I:");
-            if(!start) start=strstr(buffer," D:");
+            char *start=strstr(buffer," I");
+            if(!start) start=strstr(buffer," D");
             if(!start) return true;
             start+=1;
             int count=0;
@@ -113,11 +113,14 @@
             {
                 char *cur=start;
                 char type=1;
+                char picStruct='F';
                 char *next;
                 uint32_t len;
                 type=*cur;
                 if(type==0x0a || type==0x0d || !type) break;
                 cur++;
+                picStruct=*cur;
+                cur++;
                 if(*(cur)!=':')
                 {
                     printf("[TsDemuxer]  instead of : (%c %x %x):\n",*cur,*(cur-1),*cur);
@@ -159,6 +162,13 @@
                     case 'D': frame->type=4;break;
                     default: ADM_assert(0);
                 }
+                switch(picStruct)
+                {
+                        default: ADM_warning("Unknown picture structure %c\n",picStruct);
+                        case 'F': frame->pictureType=3;break;
+                        case 'T': frame->pictureType=1;break;
+                        case 'B': frame->pictureType=2;break;
+                }
                 frame->len=len;
                 ListOfFrames.push_back(frame);
                 count++;



From mean at mail.berlios.de  Sun Jun 20 19:43:23 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 20 Jun 2010 19:43:23 +0200
Subject: [Avidemux-svn-commit] r6385 - in
	branches/avidemux_2.6_branch_mean/avidemux: common
	common/ADM_commonUI common/ADM_editor
	gtk/ADM_userInterfaces/ADM_gui2
Message-ID: <201006201743.o5KHhNxf030985@sheep.berlios.de>

Author: mean
Date: 2010-06-20 19:43:21 +0200 (Sun, 20 Jun 2010)
New Revision: 6385

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
Log:
[all] AVI_KEY_FRAME and AVI_B_FRAME are flags, handle them  so

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp	2010-06-18 05:25:11 UTC (rev 6384)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp	2010-06-20 17:43:21 UTC (rev 6385)
@@ -89,17 +89,17 @@
 		changed++;
 		changed%=round;
         video_body->getFlags (k, &flags);
-        if(!flags) 
+        if(!(flags&(AVI_KEY_FRAME+AVI_B_FRAME)) 
         {
           nbPFrame++;
           curBFrame=0;
         }
-        if(flags==AVI_KEY_FRAME) 
+        if(flags&AVI_KEY_FRAME) 
         {
           nbIFrame++;
           curBFrame=0;
         }
-        if(flags==AVI_B_FRAME)
+        if(flags&AVI_B_FRAME)
         {
           nbBFrame++;
           curBFrame++;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2010-06-18 05:25:11 UTC (rev 6384)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2010-06-20 17:43:21 UTC (rev 6385)
@@ -498,7 +498,7 @@
 	ADM_assert(cache);
     // Make sure frame is an intra
     demuxer->getFlags(frame,&flags);
-    ADM_assert(flags==AVI_KEY_FRAME);
+    ADM_assert(flags&AVI_KEY_FRAME);
 
     bool found=false;
     vid->lastSentFrame=frame;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-18 05:25:11 UTC (rev 6384)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-20 17:43:21 UTC (rev 6385)
@@ -1344,8 +1344,8 @@
 
  diaElemHex binhex("*****",fullLen,buffer);
 
- if(flags==AVI_KEY_FRAME) sprintf(sType,"I");
-  else if(flags==AVI_B_FRAME) sprintf(sType,"B");
+ if(flags&AVI_KEY_FRAME) sprintf(sType,"I");
+  else if(flags&AVI_B_FRAME) sprintf(sType,"B");
     else sprintf(sType,"P");
  sprintf(sSize,"%d bytes",fullLen);
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-06-18 05:25:11 UTC (rev 6384)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/ADM_userInterfaces/ADM_gui2/GUI_bindings.cpp	2010-06-20 17:43:21 UTC (rev 6385)
@@ -740,7 +740,8 @@
 GtkLabel *wid=(GtkLabel *)glade.getWidget("labelFrameType");
 static char string[100];
 char	c='?';
-	switch(frametype)
+    uint32_t ftype=frametype &(AVI_KEY_FRAME + AVI_B_FRAME);
+	switch(ftype)
 	{
 		case AVI_KEY_FRAME: c='I';break;
 		case AVI_B_FRAME: c='B';break;



From mean at mail.berlios.de  Sun Jun 20 19:43:40 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 20 Jun 2010 19:43:40 +0200
Subject: [Avidemux-svn-commit] r6386 - in branches/avidemux_2.6_branch_mean:
	avidemux/qt4/ADM_userInterfaces/ADM_dialog po
Message-ID: <201006201743.o5KHheMs031062@sheep.berlios.de>

Author: mean
Date: 2010-06-20 19:43:26 +0200 (Sun, 20 Jun 2010)
New Revision: 6386

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/about.ui
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/encoding.ui
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/working.ui
   branches/avidemux_2.6_branch_mean/po/avidemux.pot
   branches/avidemux_2.6_branch_mean/po/avidemux_ca.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_cs.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_de.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_el.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_es.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_fr.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_it.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_ja.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_pt_BR.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_ru.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_sr.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_sr at latin.ts
   branches/avidemux_2.6_branch_mean/po/avidemux_tr.ts
   branches/avidemux_2.6_branch_mean/po/ca.po
   branches/avidemux_2.6_branch_mean/po/de.po
   branches/avidemux_2.6_branch_mean/po/el.po
   branches/avidemux_2.6_branch_mean/po/es.po
   branches/avidemux_2.6_branch_mean/po/ja.po
   branches/avidemux_2.6_branch_mean/po/pt_BR.po
   branches/avidemux_2.6_branch_mean/po/ru.po
   branches/avidemux_2.6_branch_mean/po/sr.po
   branches/avidemux_2.6_branch_mean/po/sr at latin.po
   branches/avidemux_2.6_branch_mean/po/tr.po
Log:
[ui] Surfer patch (housekeeping/copyright)

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/about.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/about.ui	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/about.ui	2010-06-20 17:43:26 UTC (rev 6386)
@@ -79,7 +79,6 @@
       <widget class="QLabel" name="versionLabel" >
        <property name="font" >
         <font>
-         <family>MS Shell Dlg 2</family>
          <pointsize>18</pointsize>
          <weight>75</weight>
          <italic>false</italic>
@@ -100,8 +99,6 @@
       <widget class="QLabel" name="label_2" >
        <property name="font" >
         <font>
-         <family>MS Shell Dlg 2</family>
-         <pointsize>10</pointsize>
          <weight>50</weight>
          <italic>false</italic>
          <bold>false</bold>
@@ -120,7 +117,7 @@
      <item>
       <widget class="QLabel" name="label_3" >
        <property name="text" >
-        <string>? 2001 - 2008  Mean</string>
+        <string>? 2001 - 2010  Mean</string>
        </property>
        <property name="alignment" >
         <set>Qt::AlignCenter</set>
@@ -131,8 +128,6 @@
       <widget class="QLabel" name="label_4" >
        <property name="font" >
         <font>
-         <family>MS Shell Dlg 2</family>
-         <pointsize>10</pointsize>
          <weight>50</weight>
          <italic>false</italic>
          <bold>false</bold>

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/encoding.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/encoding.ui	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/encoding.ui	2010-06-20 17:43:26 UTC (rev 6386)
@@ -112,7 +112,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Container:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -129,7 +129,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Audio Codec:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -187,7 +187,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Elapsed:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -197,7 +197,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Time Remaining:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -207,7 +207,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Frames/sec:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -251,7 +251,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Total Size:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -268,7 +268,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Audio Size:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -288,7 +288,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Video Size:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -325,7 +325,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Processed Frames:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -352,7 +352,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Average Bitrate:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>
@@ -369,7 +369,7 @@
             <property name="text">
              <string>&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
 p, li { white-space: pre-wrap; }
-&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:'MS Shell Dlg 2'; font-size:8.25pt; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
+&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-weight:400; font-style:normal; text-decoration:none;&quot;&gt;
 &lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:8pt; font-weight:600;&quot;&gt;Quantiser:&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</string>
             </property>
            </widget>

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/working.ui
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/working.ui	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/working.ui	2010-06-20 17:43:26 UTC (rev 6386)
@@ -66,8 +66,6 @@
         <widget class="QLabel" name="label_2" >
          <property name="font" >
           <font>
-           <family>MS Shell Dlg 2</family>
-           <pointsize>8</pointsize>
            <weight>75</weight>
            <italic>false</italic>
            <bold>true</bold>
@@ -90,8 +88,6 @@
          </property>
          <property name="font" >
           <font>
-           <family>MS Shell Dlg 2</family>
-           <pointsize>8</pointsize>
            <weight>75</weight>
            <italic>false</italic>
            <bold>true</bold>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux.pot
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux.pot	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux.pot	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2046,7 +2046,7 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
+msgid "? 2001-2010 Mean"
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_ca.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_ca.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_ca.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12689,7 +12689,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_cs.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_cs.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_cs.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -13078,7 +13078,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_de.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_de.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_de.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12700,7 +12700,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_el.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_el.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_el.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12899,7 +12899,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_es.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_es.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_es.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12906,7 +12906,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_fr.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_fr.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_fr.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -8886,8 +8886,8 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
-        <translation>? 2001 - 2008  Mean</translation>
+        <source>? 2001 - 2010  Mean</source>
+        <translation>? 2001 - 2010  Mean</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="144"/>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_it.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_it.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_it.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -8840,8 +8840,8 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
-        <translation>? 2001 - 2008  Mean</translation>
+        <source>? 2001 - 2010  Mean</source>
+        <translation>? 2001 - 2010  Mean</translation>
     </message>
     <message>
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="144"/>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_ja.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_ja.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_ja.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12826,7 +12826,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_pt_BR.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_pt_BR.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_pt_BR.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -14236,7 +14236,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_ru.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_ru.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_ru.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -13295,7 +13295,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_sr.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_sr.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_sr.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12691,7 +12691,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_sr at latin.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_sr at latin.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_sr at latin.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -12691,7 +12691,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/avidemux_tr.ts
===================================================================
--- branches/avidemux_2.6_branch_mean/po/avidemux_tr.ts	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/avidemux_tr.ts	2010-06-20 17:43:26 UTC (rev 6386)
@@ -13191,7 +13191,7 @@
     </message>
     <message encoding="UTF-8">
         <location filename="../avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/about.ui" line="123"/>
-        <source>? 2001 - 2008  Mean</source>
+        <source>? 2001 - 2010  Mean</source>
         <translation type="unfinished"></translation>
     </message>
     <message>

Modified: branches/avidemux_2.6_branch_mean/po/ca.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/ca.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/ca.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2071,8 +2071,8 @@
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
-msgstr "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
+msgstr "? 2001 - 2010 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"

Modified: branches/avidemux_2.6_branch_mean/po/de.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/de.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/de.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2093,8 +2093,8 @@
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
-msgstr "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
+msgstr "? 2001 - 2010 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"

Modified: branches/avidemux_2.6_branch_mean/po/el.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/el.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/el.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2941,8 +2941,8 @@
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
-msgstr "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
+msgstr "? 2001 - 2010 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"

Modified: branches/avidemux_2.6_branch_mean/po/es.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/es.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/es.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -3322,8 +3322,8 @@
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
-msgstr "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
+msgstr "? 2001 - 2010 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"

Modified: branches/avidemux_2.6_branch_mean/po/ja.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/ja.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/ja.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2079,7 +2079,7 @@
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68

Modified: branches/avidemux_2.6_branch_mean/po/pt_BR.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/pt_BR.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/pt_BR.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2046,7 +2046,7 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68

Modified: branches/avidemux_2.6_branch_mean/po/ru.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/ru.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/ru.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2912,7 +2912,7 @@
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68

Modified: branches/avidemux_2.6_branch_mean/po/sr.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/sr.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/sr.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2077,8 +2077,8 @@
 msgstr "????? ?????"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
-msgstr "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
+msgstr "? 2001 - 2010 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"

Modified: branches/avidemux_2.6_branch_mean/po/sr at latin.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/sr at latin.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/sr at latin.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2077,8 +2077,8 @@
 msgstr "Video koder"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
-msgstr "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
+msgstr "? 2001 - 2010 Mean"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68
 msgid "Multiplatform video editor"

Modified: branches/avidemux_2.6_branch_mean/po/tr.po
===================================================================
--- branches/avidemux_2.6_branch_mean/po/tr.po	2010-06-20 17:43:21 UTC (rev 6385)
+++ branches/avidemux_2.6_branch_mean/po/tr.po	2010-06-20 17:43:26 UTC (rev 6386)
@@ -2081,7 +2081,7 @@
 msgstr "Avidemux"
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:67
-msgid "? 2001-2007 Mean"
+msgid "? 2001 - 2010 Mean"
 msgstr ""
 
 #: avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_about.cpp:68



From mean at mail.berlios.de  Sun Jun 20 19:43:48 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 20 Jun 2010 19:43:48 +0200
Subject: [Avidemux-svn-commit] r6387 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxer/include
	avidemux_core/ADM_coreImage/include
	avidemux_core/ADM_coreUtils/include
	avidemux_plugins/ADM_demuxers/MpegPS
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006201743.o5KHhmbi031103@sheep.berlios.de>

Author: mean
Date: 2010-06-20 19:43:47 +0200 (Sun, 20 Jun 2010)
New Revision: 6387

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpeg.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt2.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_frameType.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[mpeg] Factorize some code between ps and ts

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpeg.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpeg.h	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpeg.h	2010-06-20 17:43:47 UTC (rev 6387)
@@ -0,0 +1,43 @@
+/***************************************************************************
+    \file   ADM_coreDemuxerMpeg.h
+    \brief  Common part for mpeg demuxer
+    \author (C) 2010 by mean  : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_CORE_DEMUXER_MPEG_H 
+#define ADM_CORE_DEMUXER_MPEG_H
+/**
+    \struct dmxFrame
+*/
+typedef struct 
+{
+    uint64_t  startAt;
+    uint32_t  index;
+    uint8_t   type; // 1=I 2=P 3=B
+    uint32_t  pictureType; // 3=Frame, 1=Top, 2=Bottom
+    uint64_t  pts;
+    uint64_t  dts;
+    uint32_t  len;
+    
+}dmxFrame;
+
+/**
+    \struct ADM_mpgAudioSeekPoint
+    \brief The dts are stored in rescaled us. Warning the low level getpacket is getting absolute 90 khzTick
+*/
+typedef struct
+{            
+      uint64_t position;
+      uint64_t dts;
+      uint32_t size;
+
+}ADM_mpgAudioSeekPoint;
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt2.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt2.h	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/avifmt2.h	2010-06-20 17:43:47 UTC (rev 6387)
@@ -34,16 +34,13 @@
         uint8_t 	bIndexType;			// must be AVI_INDEX_OF_CHUNKS
         uint32_t 	nEntriesInUse;		//
         uint32_t 	dwChunkId;			// ?##dc? or ?##db? or ?##wb? etc..
-        uint32_t        qw1,qw2;			// MN.
+        uint32_t    qw1,qw2;			// MN.
         uint32_t 	dwReserved3;				// must be 0
 	
 } AVISTDINDEX, * PAVISTDINDEX;
 
 
-
-#define AVI_KEY_FRAME   0x10
-#define AVI_B_FRAME	0x4000	 // hopefully it is not used..
-
+#include "ADM_imageFlags.h"
 #include "ADM_coreAudio.h"
 
 void Endian_AviMainHeader(MainAVIHeader *m);

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h	2010-06-20 17:43:47 UTC (rev 6387)
@@ -0,0 +1,32 @@
+/***************************************************************************
+    \file ADM_imageFlags.h
+    \brief Describe the flags field in image/demuxer
+    \author Mean (c) 2010 fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_IMAGEFLAGS_H
+#define ADM_IMAGEFLAGS_H
+
+
+#define AVI_KEY_FRAME   0x10
+#define AVI_B_FRAME	    0x4000	 
+#define AVI_P_FRAME     0x0
+#define AVI_FRAME_TYPE_MASK (AVI_KEY_FRAME+AVI_B_FRAME+AVI_P_FRAME)
+
+
+#define AVI_TOP_FIELD        0x1000
+#define AVI_BOTTOM_FIELD     0x2000
+#define AVI_FIELD_STRUCTURE  0x8000
+#define AVI_FRAME_STRUCTURE  0x0
+#define AVI_STRUCTURE_TYPE_MASK (AVI_TOP_FIELD+AVI_BOTTOM_FIELD+AVI_FIELD_STRUCTURE)
+
+#define AVI_ERR_FRAME   0x8888
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_frameType.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_frameType.h	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_frameType.h	2010-06-20 17:43:47 UTC (rev 6387)
@@ -15,12 +15,8 @@
  ***************************************************************************/
 #ifndef ADM_frameType_h
 #define ADM_frameType_h
+#include "ADM_imageFlags.h"
 
-#define AVI_KEY_FRAME	0x10
-#define AVI_B_FRAME	    0x4000	// hopefully it is not used..
-#define AVI_P_FRAME   	0x0
-#define AVI_ERR_FRAME   0x8888
-
 typedef int (*frameIdentifier)(uint32_t len,uint8_t *data);
 
 /// \fn    ADM_getFrameIdentifier

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -243,12 +243,15 @@
   uint8_t  psHeader::setFlag(uint32_t frame,uint32_t flags)
 {
    
+      if(frame>=ListOfFrames.size()) return 0;
      uint32_t f=2;
-     if(flags & AVI_KEY_FRAME) f=1;
-     if(flags & AVI_B_FRAME) f=3;
-     if(frame>=ListOfFrames.size()) return 0;
+     uint32_t intra=flags & AVI_FRAME_TYPE_MASK;
+     if(intra & AVI_KEY_FRAME) f=1;
+     if(intra & AVI_B_FRAME) f=3;
+     
       ListOfFrames[frame]->type=f;
-    return 1;
+      ListOfFrames[frame]->pictureType=flags & AVI_STRUCTURE_TYPE_MASK;
+    return true;
 }
 /**
     \fn getFlags
@@ -265,6 +268,7 @@
         case 2: *flags=0;break;
         case 3: *flags=AVI_B_FRAME;break;
     }
+    *flags=*flags+ListOfFrames[frame]->pictureType;
     return  1;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.h	2010-06-20 17:43:47 UTC (rev 6387)
@@ -26,33 +26,9 @@
 #include "ADM_indexFile.h"
 #include "dmxPSPacket.h"
 #include <vector>
+#include "ADM_coreDemuxerMpeg.h"
 using std::vector;
-/**
-    \struct dmxFrame
-*/
-typedef struct 
-{
-    uint64_t  startAt;
-    uint32_t  index;
-    uint8_t   type; // 1=I 2=P 3=B
-    uint32_t  pictureType; // 3=Frame, 1=Top, 2=Bottom
-    uint64_t  pts;
-    uint64_t  dts;
-    uint32_t  len;
-    
-}dmxFrame;
-/**
-    \struct ADM_psAudioSeekPoint
-    \brief The dts are stored in rescaled us. Warning the low level getpacket is getting absolute 90 khzTick
-*/
-typedef struct
-{            
-      uint64_t position;
-      uint64_t dts;
-      uint32_t size;
 
-}ADM_psAudioSeekPoint;
-
 /**
     \fn ADM_psAccess
 */
@@ -66,7 +42,7 @@
                 
 public:
                 bool            setTimeOffset(uint64_t of) {dtsOffset=of;return true;}
-                vector          <ADM_psAudioSeekPoint >seekPoints;
+                vector          <ADM_mpgAudioSeekPoint >seekPoints;
                                   ADM_psAccess(const char *name,uint8_t pid,bool append); 
                 virtual           ~ADM_psAccess();
                                     /// Hint, the stream is pure CBR (AC3,MP2,MP3)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psAudio.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -52,7 +52,7 @@
 */
 bool      ADM_psAccess::push(uint64_t at, uint64_t dts,uint32_t size)
 {
-ADM_psAudioSeekPoint s;
+ADM_mpgAudioSeekPoint s;
             s.position=at;
             s.dts=dts;
             s.size=size;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psComputeTimeStamp.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -39,7 +39,7 @@
         // at video
         for(int i=0;i<listOfAudioTracks.size();i++)
         {
-            vector          <ADM_psAudioSeekPoint > *seekPoints=&(listOfAudioTracks[i]->access->seekPoints);
+            vector          <ADM_mpgAudioSeekPoint > *seekPoints=&(listOfAudioTracks[i]->access->seekPoints);
             uint64_t secondDts=(*seekPoints)[0].dts;
             uint64_t secondSize=(*seekPoints)[0].size;
             if(secondSize && listOfAudioTracks[i]->header.byterate)
@@ -53,7 +53,7 @@
                             else firstDts=secondDts-firstDts;
 
                 // Now add our seek point
-                ADM_psAudioSeekPoint sk;
+                ADM_mpgAudioSeekPoint sk;
                 sk.dts=firstDts;
                 sk.size=0;
                 sk.position=ListOfFrames[0]->startAt;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psReadIndex.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -154,9 +154,9 @@
                 switch(picStruct)
                 {
                         default: ADM_warning("Unknown picture structure %c\n",picStruct);
-                        case 'F': frame->pictureType=3;break;
-                        case 'T': frame->pictureType=1;break;
-                        case 'B': frame->pictureType=2;break;
+                        case 'F': frame->pictureType=AVI_FRAME_STRUCTURE;break;
+                        case 'T': frame->pictureType=AVI_FIELD_STRUCTURE+AVI_TOP_FIELD;break;
+                        case 'B': frame->pictureType=AVI_FIELD_STRUCTURE+AVI_BOTTOM_FIELD;break;
                 }
                 frame->len=len;
                 ListOfFrames.push_back(frame);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -293,14 +293,16 @@
     \brief Returns timestamp in us of frame "frame" (PTS)
 */
 
-  uint8_t  tsHeader::setFlag(uint32_t frame,uint32_t flags)
+uint8_t  tsHeader::setFlag(uint32_t frame,uint32_t flags)
 {
-   
+    if(frame>=ListOfFrames.size()) return 0;
      uint32_t f=2;
-     if(flags & AVI_KEY_FRAME) f=1;
-     if(flags & AVI_B_FRAME) f=3;
-     if(frame>=ListOfFrames.size()) return 0;
+     uint32_t intra=flags & AVI_FRAME_TYPE_MASK;
+     if(intra & AVI_KEY_FRAME) f=1;
+     if(intra & AVI_B_FRAME) f=3;
+     
       ListOfFrames[frame]->type=f;
+      ListOfFrames[frame]->pictureType=flags & AVI_STRUCTURE_TYPE_MASK;
     return 1;
 }
 /**
@@ -318,6 +320,7 @@
         case 2: *flags=0;break;
         case 3: *flags=AVI_B_FRAME;break;
     }
+    *flags=*flags+ListOfFrames[frame]->pictureType;
     return  1;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-20 17:43:47 UTC (rev 6387)
@@ -26,34 +26,10 @@
 #include "ADM_indexFile.h"
 #include "dmxTSPacket.h"
 #include <vector>
+#include "ADM_coreDemuxerMpeg.h"
 
-
 using std::vector;
-/**
-    \struct dmxFrame
-*/
-typedef struct 
-{
-    uint64_t  startAt;
-    uint32_t  index;
-    uint8_t   type; // 1=I 2=P 3=B
-    uint32_t  pictureType; // 3=Frame, 1=Top, 2=Bottom
-    uint64_t  pts;
-    uint64_t  dts;
-    uint32_t  len;
-}dmxFrame;
-/**
-    \struct ADM_psAudioSeekPoint
-    \brief The dts are stored in rescaled us. Warning the low level getpacket is getting absolute 90 khzTick
-*/
-typedef struct
-{            
-      uint64_t position;
-      uint64_t dts;
-      uint32_t size;
 
-}ADM_tsAudioSeekPoint;
-
 /**
     \fn ADM_psAccess
 */
@@ -68,7 +44,7 @@
                 
 public:
                 bool            setTimeOffset(uint64_t of) {dtsOffset=of;return true;}
-                vector          <ADM_tsAudioSeekPoint >seekPoints;
+                vector          <ADM_mpgAudioSeekPoint >seekPoints;
                                   ADM_tsAccess(const char *name,uint32_t pid,bool append); 
                 virtual           ~ADM_tsAccess();
                                     /// Hint, the stream is pure CBR (AC3,MP2,MP3)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsAudio.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -55,7 +55,7 @@
 */
 bool      ADM_tsAccess::push(uint64_t at, uint64_t dts,uint32_t size)
 {
-ADM_tsAudioSeekPoint s;
+ADM_mpgAudioSeekPoint s;
             s.position=at;
             s.dts=dts;
             s.size=size;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsComputeTimeStamp.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -47,7 +47,7 @@
         // at video
         for(int i=0;i<listOfAudioTracks.size();i++)
         {
-            vector          <ADM_tsAudioSeekPoint > *seekPoints=&(listOfAudioTracks[i]->access->seekPoints);
+            vector          <ADM_mpgAudioSeekPoint > *seekPoints=&(listOfAudioTracks[i]->access->seekPoints);
             uint64_t secondDts=(*seekPoints)[0].dts;
             uint64_t secondSize=(*seekPoints)[0].size;
             if(secondSize && listOfAudioTracks[i]->header.byterate)
@@ -61,7 +61,7 @@
                             else firstDts=secondDts-firstDts;
 
                 // Now add our seek point
-                ADM_tsAudioSeekPoint sk;
+                ADM_mpgAudioSeekPoint sk;
                 sk.dts=firstDts;
                 sk.size=0;
                 sk.position=ListOfFrames[0]->startAt;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-20 17:43:26 UTC (rev 6386)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-20 17:43:47 UTC (rev 6387)
@@ -165,9 +165,10 @@
                 switch(picStruct)
                 {
                         default: ADM_warning("Unknown picture structure %c\n",picStruct);
-                        case 'F': frame->pictureType=3;break;
-                        case 'T': frame->pictureType=1;break;
-                        case 'B': frame->pictureType=2;break;
+                        case 'F': frame->pictureType=AVI_FRAME_STRUCTURE;break;
+                        case 'T': frame->pictureType=AVI_FIELD_STRUCTURE+AVI_TOP_FIELD;break;
+                        case 'B': frame->pictureType=AVI_FIELD_STRUCTURE+AVI_BOTTOM_FIELD;break;
+
                 }
                 frame->len=len;
                 ListOfFrames.push_back(frame);



From mean at mail.berlios.de  Sun Jun 20 19:43:54 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 20 Jun 2010 19:43:54 +0200
Subject: [Avidemux-svn-commit] r6388 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreDemuxer/include
	avidemux_plugins/ADM_demuxers/MpegPS
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006201743.o5KHhsC8031145@sheep.berlios.de>

Author: mean
Date: 2010-06-20 19:43:53 +0200 (Sun, 20 Jun 2010)
New Revision: 6388

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
Log:
[ts/pts] Factorize more code using #define (pseudo templates)

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp	2010-06-20 17:43:47 UTC (rev 6387)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp	2010-06-20 17:43:53 UTC (rev 6388)
@@ -0,0 +1,196 @@
+/***************************************************************************
+    \file   ADM_coreDemuxerMpegTemplate.cpp
+    \brief  Common part for mpeg demuxer, template like but using define
+    \author (C) 2010 by mean  : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef MY_CLASS
+    #error  MY_CLASS not defined
+#endif
+
+/**
+        \fn getVideoDuration
+        \brief Returns duration of video in us
+*/
+uint64_t MY_CLASS::getVideoDuration(void)
+{
+    int index=ListOfFrames.size();
+    if(!index) return 0;
+    index--;
+    int offset=0;
+    do
+    {
+        if(ListOfFrames[index]->dts!=ADM_NO_PTS) break;
+        index--;
+        offset++;
+
+    }while(index);
+    if(!index)
+    {
+        ADM_error("Cannot find a valid DTS in the file\n");
+        return 0;
+    }
+    float f,g;
+    f=1000*1000*1000;
+    f/=_videostream.dwRate; 
+    g=ListOfFrames[index]->dts;
+    g+=f*offset;
+    return (uint64_t)g;
+}
+
+/**
+    \fn getAudioInfo
+    \brief returns wav header for stream i (=0)
+*/
+WAVHeader *MY_CLASS::getAudioInfo(uint32_t i )
+{
+        if(!listOfAudioTracks.size()) return NULL;
+      ADM_assert(i<listOfAudioTracks.size());
+      return listOfAudioTracks[i]->stream->getInfo();
+      
+}
+
+/**
+   \fn getAudioStream
+*/
+
+uint8_t   MY_CLASS::getAudioStream(uint32_t i,ADM_audioStream  **audio)
+{
+    if(!listOfAudioTracks.size())
+    {
+            *audio=NULL;
+            return true;
+    }
+  ADM_assert(i<listOfAudioTracks.size());
+  *audio=listOfAudioTracks[i]->stream;
+  return true; 
+}
+
+/**
+    \fn getNbAudioStreams
+
+*/
+uint8_t   MY_CLASS::getNbAudioStreams(void)
+{
+ 
+  return listOfAudioTracks.size(); 
+}
+
+/**
+    \fn setFlag
+    \brief Returns timestamp in us of frame "frame" (PTS)
+*/
+
+uint8_t  MY_CLASS::setFlag(uint32_t frame,uint32_t flags)
+{
+    if(frame>=ListOfFrames.size()) return 0;
+     uint32_t f=2;
+     uint32_t intra=flags & AVI_FRAME_TYPE_MASK;
+     if(intra & AVI_KEY_FRAME) f=1;
+     if(intra & AVI_B_FRAME) f=3;
+     
+      ListOfFrames[frame]->type=f;
+      ListOfFrames[frame]->pictureType=flags & AVI_STRUCTURE_TYPE_MASK;
+    return 1;
+}
+/**
+    \fn getFlags
+    \brief Returns timestamp in us of frame "frame" (PTS)
+*/
+
+uint32_t MY_CLASS::getFlags(uint32_t frame,uint32_t *flags)
+{
+    if(frame>=ListOfFrames.size()) return 0;
+    uint32_t f=ListOfFrames[frame]->type;
+    switch(f)
+    {
+        case 1: *flags=AVI_KEY_FRAME;break;
+        case 2: *flags=0;break;
+        case 3: *flags=AVI_B_FRAME;break;
+    }
+    *flags=*flags+ListOfFrames[frame]->pictureType;
+    return  1;
+}
+
+/**
+    \fn getTime
+    \brief Returns timestamp in us of frame "frame" (PTS)
+*/
+uint64_t MY_CLASS::getTime(uint32_t frame)
+{
+   if(frame>=ListOfFrames.size()) return 0;
+    uint64_t pts=ListOfFrames[frame]->pts;
+    return pts;
+}
+
+/**
+    \fn timeConvert
+    \brief FIXME
+*/
+uint64_t MY_CLASS::timeConvert(uint64_t x)
+{
+    if(x==ADM_NO_PTS) return ADM_NO_PTS;
+    x=x-ListOfFrames[0]->dts;
+    x=x*1000;
+    x/=90;
+    return x;
+}
+
+/**
+        \fn getExtraHeaderData
+*/
+uint8_t  MY_CLASS::getExtraHeaderData(uint32_t *len, uint8_t **data)
+{
+                *len=0; //_tracks[0].extraDataLen;
+                *data=NULL; //_tracks[0].extraData;
+                return true;            
+}
+
+/**
+      \fn getFrameSize
+      \brief return the size of frame frame
+*/
+uint8_t MY_CLASS::getFrameSize (uint32_t frame, uint32_t * size)
+{
+    if(frame>=ListOfFrames.size()) return 0;
+    *size=ListOfFrames[frame]->len;
+    return true;
+}
+
+/**
+    \fn getPtsDts
+*/
+bool    MY_CLASS::getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts)
+{
+    if(frame>=ListOfFrames.size()) return false;
+    dmxFrame *pk=ListOfFrames[frame];
+
+    *dts=pk->dts;
+    *pts=pk->pts;
+    return true;
+}
+/**
+        \fn setPtsDts
+*/
+bool    MY_CLASS::setPtsDts(uint32_t frame,uint64_t pts,uint64_t dts)
+{
+      if(frame>=ListOfFrames.size()) return false;
+    dmxFrame *pk=ListOfFrames[frame];
+
+    pk->dts=dts;
+    pk->pts=pts;
+    return true;
+
+
+}
+
+// EOF
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-20 17:43:47 UTC (rev 6387)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-20 17:43:53 UTC (rev 6388)
@@ -21,6 +21,8 @@
 #include "ADM_ps.h"
 
 #include <math.h>
+#define MY_CLASS psHeader
+#include "ADM_coreDemuxerMpegTemplate.cpp"
 
 uint32_t ADM_UsecFromFps1000(uint32_t fps1000);
 
@@ -116,72 +118,9 @@
     printf("[psDemuxer] Loaded %d\n",r);
     return r;
 }
-/**
-        \fn getVideoDuration
-        \brief Returns duration of video in us
-*/
-uint64_t psHeader::getVideoDuration(void)
-{
-    int index=ListOfFrames.size();
-    if(!index) return 0;
-    index--;
-    int offset=0;
-    do
-    {
-        if(ListOfFrames[index]->dts!=ADM_NO_PTS) break;
-        index--;
-        offset++;
 
-    }while(index);
-    if(!index)
-    {
-        ADM_error("Cannot find a valid DTS in the file\n");
-        return 0;
-    }
-    float f,g;
-    f=1000*1000*1000;
-    f/=_videostream.dwRate; 
-    g=ListOfFrames[index]->dts;
-    g+=f*offset;
-    return (uint64_t)g;
-}
 
 
-/**
-    \fn getAudioInfo
-    \brief returns wav header for stream i (=0)
-*/
-WAVHeader *psHeader::getAudioInfo(uint32_t i )
-{
-        if(!listOfAudioTracks.size()) return NULL;
-      ADM_assert(i<listOfAudioTracks.size());
-      return listOfAudioTracks[i]->stream->getInfo();
-      
-}
-/**
-   \fn getAudioStream
-*/
-
-uint8_t   psHeader::getAudioStream(uint32_t i,ADM_audioStream  **audio)
-{
-    if(!listOfAudioTracks.size())
-    {
-            *audio=NULL;
-            return true;
-    }
-  ADM_assert(i<listOfAudioTracks.size());
-  *audio=listOfAudioTracks[i]->stream;
-  return true; 
-}
-/**
-    \fn getNbAudioStreams
-
-*/
-uint8_t   psHeader::getNbAudioStreams(void)
-{
- 
-  return listOfAudioTracks.size(); 
-}
 /*
     __________________________________________________________
 */
@@ -234,68 +173,7 @@
   close();
 }
 
-
 /**
-    \fn setFlag
-    \brief Returns timestamp in us of frame "frame" (PTS)
-*/
-
-  uint8_t  psHeader::setFlag(uint32_t frame,uint32_t flags)
-{
-   
-      if(frame>=ListOfFrames.size()) return 0;
-     uint32_t f=2;
-     uint32_t intra=flags & AVI_FRAME_TYPE_MASK;
-     if(intra & AVI_KEY_FRAME) f=1;
-     if(intra & AVI_B_FRAME) f=3;
-     
-      ListOfFrames[frame]->type=f;
-      ListOfFrames[frame]->pictureType=flags & AVI_STRUCTURE_TYPE_MASK;
-    return true;
-}
-/**
-    \fn getFlags
-    \brief Returns timestamp in us of frame "frame" (PTS)
-*/
-
-uint32_t psHeader::getFlags(uint32_t frame,uint32_t *flags)
-{
-    if(frame>=ListOfFrames.size()) return 0;
-    uint32_t f=ListOfFrames[frame]->type;
-    switch(f)
-    {
-        case 1: *flags=AVI_KEY_FRAME;break;
-        case 2: *flags=0;break;
-        case 3: *flags=AVI_B_FRAME;break;
-    }
-    *flags=*flags+ListOfFrames[frame]->pictureType;
-    return  1;
-}
-
-/**
-    \fn getTime
-    \brief Returns timestamp in us of frame "frame" (PTS)
-*/
-uint64_t psHeader::getTime(uint32_t frame)
-{
-   if(frame>=ListOfFrames.size()) return 0;
-    uint64_t pts=ListOfFrames[frame]->pts;
-    return pts;
-}
-/**
-    \fn timeConvert
-    \brief FIXME
-*/
-uint64_t psHeader::timeConvert(uint64_t x)
-{
-    if(x==ADM_NO_PTS) return ADM_NO_PTS;
-    x=x-ListOfFrames[0]->dts;
-    x=x*1000;
-    x/=90;
-    return x;
-
-}
-/**
         \fn getFrame
 */
 
@@ -332,53 +210,5 @@
     printf(" [PsDemux] lastFrame :%d this frame :%d\n",lastFrame,frame);
     return false;
 }
-/**
-        \fn getExtraHeaderData
-*/
-uint8_t  psHeader::getExtraHeaderData(uint32_t *len, uint8_t **data)
-{
-                *len=0; //_tracks[0].extraDataLen;
-                *data=NULL; //_tracks[0].extraData;
-                return true;            
-}
 
-/**
-      \fn getFrameSize
-      \brief return the size of frame frame
-*/
-uint8_t psHeader::getFrameSize (uint32_t frame, uint32_t * size)
-{
-    if(frame>=ListOfFrames.size()) return 0;
-    *size=ListOfFrames[frame]->len;
-    return true;
-}
-
-/**
-    \fn getPtsDts
-*/
-bool    psHeader::getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts)
-{
-    if(frame>=ListOfFrames.size()) return false;
-    dmxFrame *pk=ListOfFrames[frame];
-
-    *dts=pk->dts;
-    *pts=pk->pts;
-    return true;
-}
-/**
-        \fn setPtsDts
-*/
-bool    psHeader::setPtsDts(uint32_t frame,uint64_t pts,uint64_t dts)
-{
-      if(frame>=ListOfFrames.size()) return false;
-    dmxFrame *pk=ListOfFrames[frame];
-
-    pk->dts=dts;
-    pk->pts=pts;
-    return true;
-
-
-}
-
-
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-20 17:43:47 UTC (rev 6387)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-20 17:43:53 UTC (rev 6388)
@@ -16,12 +16,17 @@
 
 #include "ADM_default.h"
 #include "fourcc.h"
+#include <math.h>
 #include "DIA_coreToolkit.h"
 #include "ADM_indexFile.h"
 #include "ADM_ts.h"
 
-#include <math.h>
+#define MY_CLASS tsHeader
+#include "ADM_coreDemuxerMpegTemplate.cpp"
 
+
+
+
 uint32_t ADM_UsecFromFps1000(uint32_t fps1000);
 
 /**
@@ -119,35 +124,7 @@
     printf("[tsDemuxer] Loaded %d\n",r);
     return r;
 }
-/**
-        \fn getVideoDuration
-        \brief Returns duration of video in us
-*/
-uint64_t tsHeader::getVideoDuration(void)
-{
-    int index=ListOfFrames.size();
-    if(!index) return 0;
-    index--;
-    int offset=0;
-    do
-    {
-        if(ListOfFrames[index]->dts!=ADM_NO_PTS) break;
-        index--;
-        offset++;
 
-    }while(index);
-    if(!index)
-    {
-        ADM_error("Cannot find a valid DTS in the file\n");
-        return 0;
-    }
-    float f,g;
-    f=1000*1000*1000;
-    f/=_videostream.dwRate; 
-    g=ListOfFrames[index]->dts;
-    g+=f*offset;
-    return (uint64_t)g;
-}
 /**
     \fn updateIdr
     \brief if IDR are present, handle them as intra and I as P frame
@@ -191,41 +168,7 @@
     }
     return true;
 }
-/**
-    \fn getAudioInfo
-    \brief returns wav header for stream i (=0)
-*/
-WAVHeader *tsHeader::getAudioInfo(uint32_t i )
-{
-        if(!listOfAudioTracks.size()) return NULL;
-      ADM_assert(i<listOfAudioTracks.size());
-      return listOfAudioTracks[i]->stream->getInfo();
-      
-}
-/**
-   \fn getAudioStream
-*/
 
-uint8_t   tsHeader::getAudioStream(uint32_t i,ADM_audioStream  **audio)
-{
-    if(!listOfAudioTracks.size())
-    {
-            *audio=NULL;
-            return true;
-    }
-  ADM_assert(i<listOfAudioTracks.size());
-  *audio=listOfAudioTracks[i]->stream;
-  return true; 
-}
-/**
-    \fn getNbAudioStreams
-
-*/
-uint8_t   tsHeader::getNbAudioStreams(void)
-{
- 
-  return listOfAudioTracks.size(); 
-}
 /*
     __________________________________________________________
 */
@@ -289,65 +232,6 @@
 
 
 /**
-    \fn setFlag
-    \brief Returns timestamp in us of frame "frame" (PTS)
-*/
-
-uint8_t  tsHeader::setFlag(uint32_t frame,uint32_t flags)
-{
-    if(frame>=ListOfFrames.size()) return 0;
-     uint32_t f=2;
-     uint32_t intra=flags & AVI_FRAME_TYPE_MASK;
-     if(intra & AVI_KEY_FRAME) f=1;
-     if(intra & AVI_B_FRAME) f=3;
-     
-      ListOfFrames[frame]->type=f;
-      ListOfFrames[frame]->pictureType=flags & AVI_STRUCTURE_TYPE_MASK;
-    return 1;
-}
-/**
-    \fn getFlags
-    \brief Returns timestamp in us of frame "frame" (PTS)
-*/
-
-uint32_t tsHeader::getFlags(uint32_t frame,uint32_t *flags)
-{
-    if(frame>=ListOfFrames.size()) return 0;
-    uint32_t f=ListOfFrames[frame]->type;
-    switch(f)
-    {
-        case 1: *flags=AVI_KEY_FRAME;break;
-        case 2: *flags=0;break;
-        case 3: *flags=AVI_B_FRAME;break;
-    }
-    *flags=*flags+ListOfFrames[frame]->pictureType;
-    return  1;
-}
-
-/**
-    \fn getTime
-    \brief Returns timestamp in us of frame "frame" (PTS)
-*/
-uint64_t tsHeader::getTime(uint32_t frame)
-{
-   if(frame>=ListOfFrames.size()) return 0;
-    uint64_t pts=ListOfFrames[frame]->pts;
-    return pts;
-}
-/**
-    \fn timeConvert
-    \brief FIXME
-*/
-uint64_t tsHeader::timeConvert(uint64_t x)
-{
-    if(x==ADM_NO_PTS) return ADM_NO_PTS;
-    x=x-ListOfFrames[0]->dts;
-    x=x*1000;
-    x/=90;
-    return x;
-
-}
-/**
         \fn getFrame
 */
 
@@ -419,53 +303,6 @@
          getFlags(frame,&(img->flags));
          return r;
 }
-/**
-        \fn getExtraHeaderData
-*/
-uint8_t  tsHeader::getExtraHeaderData(uint32_t *len, uint8_t **data)
-{
-                *len=0; //_tracks[0].extraDataLen;
-                *data=NULL; //_tracks[0].extraData;
-                return true;            
-}
 
-/**
-      \fn getFrameSize
-      \brief return the size of frame frame
-*/
-uint8_t tsHeader::getFrameSize (uint32_t frame, uint32_t * size)
-{
-    if(frame>=ListOfFrames.size()) return 0;
-    *size=ListOfFrames[frame]->len;
-    return true;
-}
 
-/**
-    \fn getPtsDts
-*/
-bool    tsHeader::getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts)
-{
-    if(frame>=ListOfFrames.size()) return false;
-    dmxFrame *pk=ListOfFrames[frame];
-
-    *dts=pk->dts;
-    *pts=pk->pts;
-    return true;
-}
-/**
-        \fn setPtsDts
-*/
-bool    tsHeader::setPtsDts(uint32_t frame,uint64_t pts,uint64_t dts)
-{
-      if(frame>=ListOfFrames.size()) return false;
-    dmxFrame *pk=ListOfFrames[frame];
-
-    pk->dts=dts;
-    pk->pts=pts;
-    return true;
-
-
-}
-
-
 //EOF



From mean at mail.berlios.de  Mon Jun 21 07:33:51 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 21 Jun 2010 07:33:51 +0200
Subject: [Avidemux-svn-commit] r6389 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006210533.o5L5Xp0g017411@sheep.berlios.de>

Author: mean
Date: 2010-06-21 07:33:50 +0200 (Mon, 21 Jun 2010)
New Revision: 6389

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
Log:
[PTS/DTS] dont try to find missing PTS/DTS for field encoded video

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-06-20 17:43:53 UTC (rev 6388)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPtsDts.cpp	2010-06-21 05:33:50 UTC (rev 6389)
@@ -40,10 +40,15 @@
     uint32_t nDts=0,nPts=0;
     uint32_t nbB=0;
     uint64_t pts,dts;
+    uint32_t nbFields=0,nbFrames=0;
     // Look how much bframes + how much valid PTS/DTS we have....
     for(int i=0;i<info.nb_frames;i++)
     {
         hdr->getFlags(i,&flags);
+        if(flags & AVI_FIELD_STRUCTURE) 
+                    nbFields++;
+            else 
+                    nbFrames++;
         if(flags & AVI_B_FRAME)
                 nbB++;
         if(true!=hdr->getPtsDts(i,&pts,&dts))
@@ -58,6 +63,12 @@
 next:
         ADM_info("Out of %"LD" frames, we have %"LD" valid DTS and %"LD" valid PTS\n",info.nb_frames,nDts,nPts);
         ADM_info("We also have %"LD" bframes\n",nbB);
+        ADM_info("We have %"LU" fields and %"LU" frames\n",nbFields,nbFrames);
+        if(nbFields>2)
+        {
+            ADM_info("Cannot recompute PTS/DTS for field encoded picture.\n");
+            return true;
+        }
         // No b frames, PTS=DTS
         if(!nbB)
         {



From mean at mail.berlios.de  Mon Jun 21 19:27:16 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 21 Jun 2010 19:27:16 +0200
Subject: [Avidemux-svn-commit] r6390 - in
	branches/avidemux_2.6_branch_mean/avidemux_core:
	ADM_coreImage/include ADM_coreVideoCodec/src
Message-ID: <201006211727.o5LHRG4Z003919@sheep.berlios.de>

Author: mean
Date: 2010-06-21 19:27:14 +0200 (Mon, 21 Jun 2010)
New Revision: 6390

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
Log:
[Codec] Extract field/frame from lavcodec based decoders

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h	2010-06-21 05:33:50 UTC (rev 6389)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreImage/include/ADM_imageFlags.h	2010-06-21 17:27:14 UTC (rev 6390)
@@ -21,7 +21,10 @@
 #define AVI_P_FRAME     0x0
 #define AVI_FRAME_TYPE_MASK (AVI_KEY_FRAME+AVI_B_FRAME+AVI_P_FRAME)
 
-
+/**
+    For demuxers, it is the field type/frame
+    For decoders, the TOP/Bottom is a hint about TFF/BFF as we always get a full picture
+*/
 #define AVI_TOP_FIELD        0x1000
 #define AVI_BOTTOM_FIELD     0x2000
 #define AVI_FIELD_STRUCTURE  0x8000

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2010-06-21 05:33:50 UTC (rev 6389)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2010-06-21 17:27:14 UTC (rev 6390)
@@ -109,6 +109,7 @@
     //printf("[LAVC] Old pts :%"LLD" new pts :%"LLD"\n",out->Pts, (uint64_t)(src->reordered_opaque));
     //printf("[LAVC] pts: %"LLU"\n",src->pts);
     out->Pts= (uint64_t)(src->reordered_opaque);
+ 
     return 1;
 }
 /**
@@ -261,6 +262,15 @@
 //                              printf("\n OOops XXX frame ?\n");
       break;
     }
+    flag&=~AVI_STRUCTURE_TYPE_MASK;
+    if(target->interlaced_frame)
+    {
+        flag|=AVI_FIELD_STRUCTURE;
+        if(target->top_field_first)
+            flag|=AVI_TOP_FIELD;
+        else
+            flag|=AVI_BOTTOM_FIELD;
+    }
   return flag;
 }
 bool decoderFF::decodeHeaderOnly (void)



From mean at mail.berlios.de  Mon Jun 21 19:27:19 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 21 Jun 2010 19:27:19 +0200
Subject: [Avidemux-svn-commit] r6391 -
	branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui
Message-ID: <201006211727.o5LHRJOt003930@sheep.berlios.de>

Author: mean
Date: 2010-06-21 19:27:18 +0200 (Mon, 21 Jun 2010)
New Revision: 6391

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
Log:
[QT4] Display frame/field type

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-21 17:27:14 UTC (rev 6390)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_gui/Q_gui2.cpp	2010-06-21 17:27:18 UTC (rev 6391)
@@ -783,7 +783,8 @@
 {
 	char string[100];
 	char	c='?';
-	switch(frametype)
+    const char *f="???";
+	switch(frametype&AVI_FRAME_TYPE_MASK)
 	{
 	case AVI_KEY_FRAME: c='I';break;
 	case AVI_B_FRAME: c='B';break;
@@ -791,7 +792,16 @@
 	default:c='?';break;
 
 	}
-	sprintf(string,QT_TR_NOOP("%c (%02d)"),c,qp);
+    switch(frametype&AVI_STRUCTURE_TYPE_MASK)
+	{
+	case AVI_TOP_FIELD+AVI_FIELD_STRUCTURE: f="TFF";break;
+    case AVI_BOTTOM_FIELD+AVI_FIELD_STRUCTURE: f="BFF";break;
+    case AVI_FRAME_STRUCTURE: f="FRM";break;
+	default:f="???";
+
+                    break;
+	}
+	sprintf(string,QT_TR_NOOP("%c-%s (%02d)"),c,f,qp);
 	WIDGET(label_8)->setText(string);	
 
 }



From gruntster at mail.berlios.de  Tue Jun 22 08:30:45 2010
From: gruntster at mail.berlios.de (gruntster at mail.berlios.de)
Date: Tue, 22 Jun 2010 08:30:45 +0200
Subject: [Avidemux-svn-commit] r6392 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: .
	ADM_encoder ADM_libraries/ADM_utilities ADM_outputs/oplug_avi
	ADM_userInterfaces/ADM_GTK/ADM_dialog
	ADM_userInterfaces/ADM_NONE/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_dialog
	ADM_userInterfaces/ADM_QT4/ADM_gui ADM_userInterfaces/ADM_commonUI
Message-ID: <201006220630.o5M6Uj6L009530@sheep.berlios.de>

Author: gruntster
Date: 2010-06-22 08:30:27 +0200 (Tue, 22 Jun 2010)
New Revision: 6392

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pluginManager.ui
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.h
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
   branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
Log:
[qt] incomplete plugin manager for Qt

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_pluginLoad.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -14,18 +14,22 @@
  *                                                                         *
  ***************************************************************************/
 
+#include <locale>
+#include <vector>
+
 #include "config.h"
 #include "ADM_default.h"
-#include <list>
-#include <locale>
 
 #include "DIA_fileSel.h"
 #include "ADM_pluginLoad.h"
 #include "ADM_vidEncode.hxx"
+#include "ADM_userInterfaces/ADM_commonUI/UiPluginManager.h"
 
-struct COMPRES_PARAMS *AllVideoCodec = NULL;
-int AllVideoCodecCount = 0;
+using namespace std;
 
+vector<COMPRES_PARAMS> AllVideoCodec;
+int defaultVideoEncoder = 0;
+
 extern COMPRES_PARAMS *internalVideoCodec[];
 extern int getInternalVideoCodecCount();
 
@@ -61,7 +65,7 @@
 		&close, "vidEncClose"));
 }
 
-std::list<ADM_vidEnc_plugin *> ADM_videoEncoderPlugins;
+list<ADM_vidEnc_plugin *> ADM_videoEncoderPlugins;
 /**
     \fn ADM_ve_getNbEncoders
     \brief get the number of encoder plugin loaded
@@ -80,24 +84,40 @@
      @param major,minor,patch [out] Version number of the encoder
      @return true
 */
-bool     ADM_ve_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch)
+bool     ADM_ve_getEncoderInfo(int filter, const char **id, const char **name, const char **type, const char **desc, uint32_t *major, uint32_t *minor, uint32_t *patch)
 {
 	ADM_assert(filter >= 0 && filter < ADM_videoEncoderPlugins.size());
 
 	ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(filter);
 	int ma, mi, pa;
 
-	plugin->getEncoderVersion(0, &ma, &mi, &pa);
+	plugin->getEncoderVersion(plugin->encoderId, &ma, &mi, &pa);
 
-	*name = plugin->getEncoderDescription(plugin->encoderId);
-	*major = (uint32_t)ma;
-	*minor = (uint32_t)mi;
-	*patch = (uint32_t)pa;
+	if (id)
+		*id = plugin->getEncoderGuid(plugin->encoderId);
 
+	if (name)
+		*name = plugin->getEncoderName(plugin->encoderId);
+
+	if (type)
+		*type = plugin->getEncoderType(plugin->encoderId);
+
+	if (desc)
+		*desc = plugin->getEncoderDescription(plugin->encoderId);
+
+	if (major)
+		*major = (uint32_t)ma;
+
+	if (minor)
+		*minor = (uint32_t)mi;
+
+	if (patch)
+		*patch = (uint32_t)pa;
+
 	return true;
 }
 
-static int loadVideoEncoderPlugin(std::list<ADM_vidEnc_plugin*>* pluginList, int uiType, const char *file)
+static int loadVideoEncoderPlugin(list<ADM_vidEnc_plugin*>* pluginList, int uiType, const char *file)
 {
 	ADM_vidEnc_plugin *plugin = new ADM_vidEnc_plugin(file);
 	int* encoderIds;
@@ -208,6 +228,7 @@
 
 	char *files[MAX_EXTERNAL_FILTER];
 	uint32_t nbFile = 0;
+	set<string> pluginIds;
 
 	memset(files, 0, sizeof(char *)*MAX_EXTERNAL_FILTER);
 	printf("[ADM_vidEnc_plugin] Scanning directory %s\n", path);
@@ -223,78 +244,116 @@
 
 	printf("[ADM_vidEnc_plugin] Scanning done, found %d codec\n", ADM_videoEncoderPlugins.size());
 
-	AllVideoCodecCount = ADM_videoEncoderPlugins.size() + getInternalVideoCodecCount();
-	AllVideoCodec = new COMPRES_PARAMS[AllVideoCodecCount];
-
-	// Copy over internal codecs
+	// Get ranked list
 	int internalCodecCount = getInternalVideoCodecCount();
 
 	for (int i = 0; i < internalCodecCount; i++)
-		memcpy(&AllVideoCodec[i], internalVideoCodec[i], sizeof(COMPRES_PARAMS));
+		pluginIds.insert(internalVideoCodec[i]->tagName);
 
-	// Add external codecs
-	int counter = 0;
+	for (list<ADM_vidEnc_plugin*>::iterator it = ADM_videoEncoderPlugins.begin(); it != ADM_videoEncoderPlugins.end(); it++)
+	{
+		ADM_vidEnc_plugin *plugin = *it;
 
-	ADM_videoEncoderPlugins.sort(comparePlugins);
+		pluginIds.insert(plugin->getEncoderGuid(plugin->encoderId));
+	}
 
-	for (std::list<ADM_vidEnc_plugin*>::iterator it = ADM_videoEncoderPlugins.begin(); it != ADM_videoEncoderPlugins.end(); it++)
+	UiPluginManager manager;
+	list<UiPluginManager::UiPlugInfo> rankedList(manager.getRankedList(UiPluginManager::PLUGINTYPE_VIDEO_ENCODER, pluginIds));
+
+	// Build list according to rank
+	for (list<UiPluginManager::UiPlugInfo>::const_iterator itRankedPlugin = rankedList.begin(); itRankedPlugin != rankedList.end(); itRankedPlugin++)
 	{
-		ADM_vidEnc_plugin *plugin = *it;
-		ADM_assert(plugin);
+		bool found = false;
 
-		const char* codecName = plugin->getEncoderName(plugin->encoderId);
-		const char* codecType = plugin->getEncoderType(plugin->encoderId);
-		char* displayName;
-		const char *prevType, *nextType;
+		if (!itRankedPlugin->enabled)
+			continue;
 
-		if (it == ADM_videoEncoderPlugins.begin())
-			prevType = NULL;
-		else
-		{
-			*it--;
-			prevType = (*it)->getEncoderType((*it)->encoderId);
-			*it++;
+		if (itRankedPlugin->isDefault)
+			defaultVideoEncoder = AllVideoCodec.size();
+
+		// internal
+		for (int i = 0; i < internalCodecCount; i++)
+		{			
+			if (string(internalVideoCodec[i]->tagName) == itRankedPlugin->id)
+			{
+				COMPRES_PARAMS param;
+
+				param.codec = internalVideoCodec[i]->codec;
+				param.menuName = internalVideoCodec[i]->menuName;
+				param.tagName = internalVideoCodec[i]->tagName;
+				param.extra_param = internalVideoCodec[i]->extra_param;
+				param.extraSettings = internalVideoCodec[i]->extraSettings;
+				param.extraSettingsLen = internalVideoCodec[i]->extraSettingsLen;
+
+				AllVideoCodec.push_back(param);
+				found = true;
+
+				break;
+			}
 		}
 
-		*it++;
+		if (found)
+			continue;
 
-		if (it == ADM_videoEncoderPlugins.end())
-			nextType = NULL;
-		else
-			nextType = (*it)->getEncoderType((*it)->encoderId);
+		int counter = 0;
 
-		*it--;
+		// external
+		ADM_videoEncoderPlugins.sort(comparePlugins);
 
-		if ((prevType != NULL && strcmp(prevType, codecType) == 0) ||
-			(nextType != NULL && strcmp(nextType, codecType) == 0))
+		for (list<ADM_vidEnc_plugin*>::iterator it = ADM_videoEncoderPlugins.begin(); it != ADM_videoEncoderPlugins.end(); it++)
 		{
-			displayName = new char[strlen(codecName) + strlen(codecType) + 4];
-			sprintf(displayName, "%s (%s)", codecType, codecName);
-		}
-		else
-		{
-			displayName = new char[strlen(codecType) + 1];
-			sprintf(displayName, "%s", codecType);
-		}
+			ADM_vidEnc_plugin *plugin = *it;
 
-		COMPRES_PARAMS *param = &AllVideoCodec[internalCodecCount + counter];
+			if (plugin->getEncoderGuid(plugin->encoderId) == itRankedPlugin->id)
+			{
+				const char* codecName = plugin->getEncoderName(plugin->encoderId);
+				const char* codecType = plugin->getEncoderType(plugin->encoderId);
+				const char *prevType, *nextType;
 
-		param->codec = CodecExternal;
-		param->menuName = displayName;
-		param->tagName = codecName;
-		param->extra_param = counter;
-		param->extraSettings = NULL;
-		param->extraSettingsLen = 0;
+				if (it == ADM_videoEncoderPlugins.begin())
+					prevType = NULL;
+				else
+				{
+					*it--;
+					prevType = (*it)->getEncoderType((*it)->encoderId);
+					*it++;
+				}
 
-		int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
-		char *pluginOptions = new char[length + 1];
-		vidEncOptions encodeOptions;
+				*it++;
 
-		plugin->getOptions(plugin->encoderId, &encodeOptions, pluginOptions, length);
-		pluginOptions[length] = 0;
+				if (it == ADM_videoEncoderPlugins.end())
+					nextType = NULL;
+				else
+					nextType = (*it)->getEncoderType((*it)->encoderId);
 
-		updateCompressionParameters(param, encodeOptions.encodeMode, encodeOptions.encodeModeParameter, pluginOptions, length);
-		counter++;
+				*it--;
+
+				COMPRES_PARAMS param;
+
+				if ((prevType != NULL && strcmp(prevType, codecType) == 0) || (nextType != NULL && strcmp(nextType, codecType) == 0))
+					param.menuName = string(codecType) + " (" + string(codecName) + ")";
+				else
+					param.menuName = codecType;
+
+				param.codec = CodecExternal;
+				param.tagName = codecName;
+				param.extra_param = counter;
+				param.extraSettings = NULL;
+				param.extraSettingsLen = 0;
+
+				AllVideoCodec.push_back(param);
+				int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);
+				char *pluginOptions = new char[length + 1];
+				vidEncOptions encodeOptions;
+
+				plugin->getOptions(plugin->encoderId, &encodeOptions, pluginOptions, length);
+				pluginOptions[length] = 0;
+
+				updateCompressionParameters(&param, encodeOptions.encodeMode, encodeOptions.encodeModeParameter, pluginOptions, length);
+			}
+
+			counter++;
+		}
 	}
 
 	return 1;
@@ -394,7 +453,7 @@
 {
 	ADM_assert(index < ADM_videoEncoderPlugins.size());
 
-	std::list<ADM_vidEnc_plugin*>::iterator it = ADM_videoEncoderPlugins.begin();
+	list<ADM_vidEnc_plugin*>::iterator it = ADM_videoEncoderPlugins.begin();
 
 	if (index > 0)
 		advance(it, index);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/ADM_vidEncode.hxx	2010-06-22 06:30:27 UTC (rev 6392)
@@ -17,6 +17,8 @@
 #ifndef ADM_VIDENCODE
 #define ADM_VIDENCODE
 
+#include <string>
+
 typedef enum 
 {
   CodecCopy,
@@ -50,17 +52,17 @@
 
 struct COMPRES_PARAMS
 {
-  SelectCodecType codec;
-  const char *menuName;
-  const char *tagName;
-  const char *descriptor;
-  COMPRESSION_MODE mode;
-  uint32_t qz, bitrate, finalsize,avg_bitrate;  // avg_bitrate is in kb/s!!
-  uint32_t capabilities;
-  uint32_t extra_param;
-  void *extraSettings;
-  uint32_t extraSettingsLen;
-  uint8_t (*configure) (struct COMPRES_PARAMS * par);
+	SelectCodecType codec;
+	std::string menuName;
+	const char *tagName;
+	const char *descriptor;
+	COMPRESSION_MODE mode;
+	uint32_t qz, bitrate, finalsize,avg_bitrate;  // avg_bitrate is in kb/s!!
+	uint32_t capabilities;
+	uint32_t extra_param;
+	void *extraSettings;
+	uint32_t extraSettingsLen;
+	uint8_t (*configure) (struct COMPRES_PARAMS * par);
 };
 
 //typedef struct COMPRES_PARAMS;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -14,6 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <vector>
+
 #include "config.h"
 
 #include "ADM_assert.h"
@@ -34,8 +36,7 @@
 #define MODULE_NAME MODULE_ENCODER
 #include "ADM_osSupport/ADM_debug.h"
 
-extern struct COMPRES_PARAMS *AllVideoCodec;
-extern int AllVideoCodecCount;
+extern std::vector<COMPRES_PARAMS> AllVideoCodec;
 extern uint8_t DIA_videoCodec(int *codecIndex);
 extern void UI_setVideoCodec(int i);
 extern void getMainWindowHandles(intptr_t *handle, intptr_t *nativeHandle);
@@ -69,15 +70,20 @@
  */
 static COMPRES_PARAMS* getCodecParamFromTag(    SelectCodecType tag)
 {
-    if(tag==CodecExternal) return NULL;
-    for(int i=0;i<AllVideoCodecCount;i++)
-      {
-        COMPRES_PARAMS *r=&(AllVideoCodec[i]);
-        if(r->codec==tag) return r;
-      }
-    return NULL;
-  
+	if (tag == CodecExternal)
+		return NULL;
+
+	for (int i = 0; i < AllVideoCodec.size(); i++)
+	{
+		COMPRES_PARAMS *r = &(AllVideoCodec[i]);
+
+		if (r->codec == tag)
+			return r;
+	}
+
+	return NULL;
 }
+
 CodecFamilty videoCodecGetFamily(void)
 {
 	if (currentCodecType == CodecExternal && (
@@ -248,7 +254,7 @@
 // Used to know the # of menu entries
 int encoderGetEncoderCount(void)
 {
-	return AllVideoCodecCount;
+	return AllVideoCodec.size();
 }
 
 // Return the name of the encoder #i, as displayer by a menu/combo box
@@ -258,7 +264,7 @@
 
 	ADM_assert(i < nb);
 
-	return AllVideoCodec[i].menuName;
+	return AllVideoCodec[i].menuName.c_str();
 }
 
 void videoCodecChanged(int newCodecIndex)
@@ -274,11 +280,6 @@
 	UI_setVideoCodec(currentCodecIndex);
 }
 
-void saveEncoderConfig(void)
-{
-	prefs->set (CODECS_PREFERREDCODEC, AllVideoCodec[currentCodecIndex].tagName);
-}
-
 SelectCodecType videoCodecGetType(void)
 {
 	return currentCodecType;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.h	2010-06-22 06:30:27 UTC (rev 6392)
@@ -3,7 +3,6 @@
 
 #include "ADM_vidEncode.hxx"
 
-void saveEncoderConfig(void);
 void videoCodecSetCodec(int codecIndex);
 int videoCodecConfigure(char *cmdString, uint32_t optionSize, uint8_t * option);
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_libraries/ADM_utilities/prefs.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -54,27 +54,6 @@
 } opt_def;
 
 static opt_def opt_defs [] = {
-	{"codecs.svcd.enctype",		UINT,	"0",	NULL,	"0",	"99999"},
-	{"codecs.svcd.bitrate",		UINT,	"1500000",NULL,	"16000","2748000"},
-	{"codecs.svcd.quantizer",		UINT,	"4",	NULL,	"2",	"31"	},
-	{"codecs.svcd.finalsize",	UINT,	"700",	NULL,	"0",	"99999"},
-	{"codecs.svcd.interlaced",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"codecs.svcd.bff",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"codecs.svcd.widescreen",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"codecs.svcd.matrix",		UINT,	"0",	NULL,	"0",	"99999"},
-	{"codecs.svcd.gopsize",		UINT,	"12",	NULL,	"0",	"99999"},
-	{"codecs.svcd.maxbitrate",		UINT,	"2500",	NULL,	"0",	"2748"	},
-	{"codecs.dvd.enctype",		UINT,	"0",	NULL,	"0",	"99999"},
-	{"codecs.dvd.bitrate",		UINT,	"1500000",NULL,	"16000","9900000"},
-	{"codecs.dvd.quantizer",		UINT,	"4",	NULL,	"2",	"31"	},
-	{"codecs.dvd.finalsize",	UINT,	"700",	NULL,	"0",	"99999"},
-	{"codecs.dvd.interlaced",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"codecs.dvd.bff",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"codecs.dvd.widescreen",		UINT,	"0",	NULL,	"0",	"1"	},
-	{"codecs.dvd.matrix",		UINT,	"0",	NULL,	"0",	"99999"},
-	{"codecs.dvd.gopsize",		UINT,	"12",	NULL,	"0",	"99999"},
-	{"codecs.dvd.maxbitrate",		UINT,	"9000",	NULL,	"0",	"9900"	},
-	{"codecs.preferredcodec",		STRING,"FFmpeg4",NULL, NULL, NULL },
 #ifdef __WIN32
 	{"filters.subtitle.fontname",		FILENAME,"C:\\Windows\\Fonts\\arial.ttf",NULL, NULL, NULL },
 #else
@@ -137,10 +116,11 @@
 	{"feature.global_glyph.name",		STRING,"",	NULL, NULL, NULL },
 	{"priority.encoding",		UINT,	"3",	NULL,	"0",	"4"	},
 	{"priority.indexing",		UINT,	"3",	NULL,	"0",	"4"	},
-	{"priority.playback",		UINT,	"0",	NULL,	"0",	"4"	}
+	{"priority.playback",		UINT,	"0",	NULL,	"0",	"4"	},
+	{"plugin.order",	STRING,"<?xml version=\"1.0\"?><pluginOrder><videoEncoder><plugin id=\"Copy\" enabled=\"true\" default=\"true\"/><plugin id=\"32BCB447-21C9-4210-AE9A-4FCE6C8588AE\" enabled=\"true\" default=\"false\"/><plugin id=\"92B544BE-59A3-4720-86F0-6AD5A2526FD2\" enabled=\"true\" default=\"false\"/><plugin id=\"0E7C20E3-FF92-4bb2-A9A9-55B7F713C45A\" enabled=\"true\" default=\"false\"/><plugin id=\"DBAECD8B-CF29-4846-AF57-B596427FE7D3\" enabled=\"true\" default=\"false\"/><plugin id=\"C16E9CCE-D9B3-4fbe-B0C5-8B1BEBF2178E\" enabled=\"true\" default=\"false\"/><plugin id=\"REQUANT\" enabled=\"true\" default=\"false\"/><plugin id=\"85FC9CAC-CE6C-4aa6-9D5F-352D6349BA3E\" enabled=\"true\" default=\"false\"/><plugin id=\"056FE919-C1D3-4450-A812-A767EAB07786\" enabled=\"true\" default=\"false\"/><plugin id=\"075E8A4E-5B3D-47c6-9F70-853D6B855106\" enabled=\"true\" default=\"false\"/><plugin id=\"4279DF66-ECEF-4d3d-AFEA-1BFCCB79E219\" enabled=\"true\" default=\"false\"/><plugi!
 n id=\"134AA23B-A1FE-4d7b-AC99-85E440BA4595\" enabled=\"true\" default=\"false\"/><plugin id=\"D5118154-0B9A-4e9a-BEC6-95DA343E7215\" enabled=\"true\" default=\"false\"/><plugin id=\"970CB80B-5713-445c-A187-5C6F4A76FA76\" enabled=\"true\" default=\"false\"/><plugin id=\"E5D8EAC6-71C1-4f3e-A975-B655232271FB\" enabled=\"true\" default=\"false\"/><plugin id=\"4828D06D-B555-4d72-94EC-34F04F97E501\" enabled=\"true\" default=\"false\"/><plugin id=\"YV12\" enabled=\"true\" default=\"false\"/></videoEncoder></pluginOrder>",NULL, NULL, NULL }
 };
 
-int num_opts = 76;
+int num_opts = 56;
 // </prefs_gen>
 
 #ifdef USE_LIBXML2

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_savesmart.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -17,6 +17,7 @@
 
 #include <sstream>
 #include <string>
+#include <vector>
 
 #include "ADM_default.h"
 #include "ADM_threads.h"
@@ -45,8 +46,10 @@
 #define MODULE_NAME MODULE_SAVE_AVI
 #include "ADM_osSupport/ADM_debug.h"
 
-extern struct COMPRES_PARAMS *AllVideoCodec;
+using namespace std;
 
+extern vector<COMPRES_PARAMS> AllVideoCodec;
+
 GenericAviSaveSmart::GenericAviSaveSmart(uint32_t qf) : GenericAviSave()
 {
 	_cqReenc=qf;
@@ -336,14 +339,14 @@
 
 	if (isMpeg4Compatible(info.fcc))
 	{
-		std::stringstream out;
+		stringstream out;
 
 		out << "<?xml version='1.0'?><Mpeg4aspConfig><Mpeg4aspOptions><motionEstimationMethod>epzs</motionEstimationMethod><fourMotionVector>false</fourMotionVector><maximumBFrames>";
 		out << _hasBframe;
 		out << "</maximumBFrames><quarterPixel>false</quarterPixel><globalMotionCompensation>false</globalMotionCompensation><quantisationType>h263</quantisationType><macroblockDecisionMode>rateDistortion</macroblockDecisionMode><minimumQuantiser>2</minimumQuantiser><maximumQuantiser>31</maximumQuantiser><quantiserDifference>3</quantiserDifference><trellis>false</trellis><quantiserCompression>0.5</quantiserCompression><quantiserBlur>0.5</quantiserBlur></Mpeg4aspOptions></Mpeg4aspConfig>";
 		_encoderIndex = videoCodecPluginGetIndexByGuid("0E7C20E3-FF92-4bb2-A9A9-55B7F713C45A");
 
-		std::string settings = out.str();
+		string settings = out.str();
 		COMPRES_PARAMS *param = &AllVideoCodec[_encoderIndex];
 		ADM_vidEnc_plugin *plugin = getVideoEncoderPlugin(param->extra_param);
 		int length = plugin->getOptions(plugin->encoderId, NULL, NULL, 0);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2010-06-22 06:30:27 UTC (rev 6392)
@@ -1,27 +1,29 @@
 SET(ADM_LIB ADM_dialogGtk)
 
 SET(${ADM_LIB}_SRCS
-DIA_about.cpp    
- DIA_calculator.cpp  
- DIA_preview.cpp    
- DIA_acodec.cpp   
- DIA_encoding.cpp  
- DIA_ocr.cpp      
- DIA_properties.cpp 
- DIA_vcodec.cpp  
- DIA_idx_pg.cpp    
- DIA_partial.cpp  
- DIA_quota.cpp      
+ DIA_about.cpp 
+ DIA_calculator.cpp
+ DIA_preview.cpp
+ DIA_acodec.cpp
+ DIA_encoding.cpp
+ DIA_ocr.cpp
+ DIA_properties.cpp
+ DIA_vcodec.cpp
+ DIA_idx_pg.cpp
+ DIA_partial.cpp
+ DIA_quota.cpp
  DIA_vobsub.cpp
- DIA_jobs.cpp      
- DIA_pause.cpp    
- DIA_recent.cpp     
+ DIA_jobs.cpp
+ DIA_pause.cpp
+ DIA_recent.cpp
  DIA_working.cpp
- DIA_busy.cpp     
+ DIA_busy.cpp
  DIA_resize.cpp
  toolkit_dialog.cpp
  TLK_filesel.cpp
+ DIA_none.cpp
 )
+
 SET(OBSOLETE_SRCS
  DIA_threshold.cpp
  DIA_SwissArmyKnife.cpp

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_none.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_none.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -0,0 +1,3 @@
+#include "ADM_inttype.h"
+
+uint8_t DIA_pluginManager(void) { return 0; }
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog/DIA_none.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -21,15 +21,8 @@
 #include <stdlib.h>
 
 #include "ADM_default.h"
-
-#include "ADM_assert.h"
-
 #include "ADM_videoFilter.h"
-
-
 #include "ADM_video/ADM_vidPartial_param.h"
-
-
 #include "ADM_videoFilter/ADM_vobsubinfo.h"
 #include "ADM_videoFilter/ADM_vidVobSub.h"
 
@@ -40,6 +33,7 @@
 #include "ADM_ocr/ADM_ocr.h"
 #include "ADM_ocr/ADM_ocrInternal.h"
 #include "ADM_userInterfaces/ADM_render/GUI_renderInternal.h"
+
 extern int global_argc;
 extern char **global_argv;
 extern void initTranslator(void);
@@ -47,6 +41,7 @@
 
 int SliderIsShifted = 0;
 
+uint8_t DIA_pluginManager(void) { return 0; }
 uint8_t DIA_getPartial(PARTIAL_CONFIG *param,AVDMGenericVideoStream *son,AVDMGenericVideoStream *previous) {return 0;}
 uint8_t DIA_vobsub(vobSubParam *param) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/CMakeLists.txt	2010-06-22 06:30:27 UTC (rev 6392)
@@ -1,21 +1,21 @@
 SET(ADM_LIB ADM_dialogQt4)
 
 SET(uiFiles
-	about.ui  calculator.ui  encoding.ui  license.ui
-	jobs.ui  props.ui  vobsub.ui  working.ui)
+	about.ui  calculator.ui  encoding.ui  license.ui  jobs.ui
+	pluginManager.ui  props.ui  vobsub.ui  working.ui)
 
 SET(headers
-	Q_about.h  Q_calculator.h  Q_encoding.h
-	Q_license.h  Q_jobs.h  Q_props.h  Q_vobsub.h  Q_working.h  T_index_pg.h)
+	Q_about.h  Q_calculator.h  Q_encoding.h  Q_license.h  Q_jobs.h
+	Q_pluginManager.h  Q_props.h  Q_vobsub.h  Q_working.h  T_index_pg.h)
 
 QT4_WRAP_UI(${ADM_LIB}_headers ${uiFiles})
 QT4_WRAP_CPP(${ADM_LIB}_source ${headers})
 QT4_ADD_RESOURCES(${ADM_LIB}_resource  about.qrc)
 
 SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS}
-	${${ADM_LIB}_headers}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource}  Q_about.cpp  
-	Q_calculator.cpp  Q_encoding.cpp  Q_license.cpp
-	Q_jobs.cpp  Q_props.cpp   Q_vobsub.cpp  Q_working.cpp   T_index_pg.cpp
+	${${ADM_LIB}_headers}  ${${ADM_LIB}_source}  ${${ADM_LIB}_resource}
+	Q_about.cpp  Q_calculator.cpp  Q_encoding.cpp  Q_license.cpp  Q_jobs.cpp
+	Q_pluginManager.cpp  Q_props.cpp   Q_vobsub.cpp  Q_working.cpp  T_index_pg.cpp
 	alert_qt4.cpp  DIA_busy.cpp  DIA_none.cpp  OCR_none.cpp)
 
 ADD_DEFINITIONS(-DADM_SUBVERSION=${ADM_SUBVERSION})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/DIA_none.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -16,23 +16,8 @@
 #include "config.h"
 #include "ADM_default.h"
 #include "ADM_videoFilter.h"
-
-
-
-
-
 #include "ADM_encoder/ADM_vidEncode.hxx"
-//#include "ADM_audioEncoder/include/audioencoder_enum.h"
 
-
-#ifdef USE_XX_XVID 
-#include "xvid.h"
-int  DIA_getXvidCompressParams(COMPRESSION_MODE * mode, uint32_t * qz,
-		      uint32_t * br,uint32_t *fsize,xvidEncParam *param){return 0;}
-#endif
-
-
-
 uint8_t DIA_videoCodec(int *codecIndex) {return 0;}
 uint8_t DIA_audioCodec( int *codec ) {return 0;}
 uint8_t DIA_quota(char *) {return 0;}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -0,0 +1,258 @@
+/***************************************************************************
+                            Q_pluginManager.cpp
+                            -------------------
+
+    begin                : Fri June 11 2010
+    copyright            : (C) 2010 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h"
+#undef QT_TR_NOOP
+
+#include "Q_pluginManager.h"
+#include "ADM_inttype.h"
+#include "ADM_toolkitQt.h"
+#include "ADM_encoder/ADM_vidEncode.hxx"
+
+#define PLUGIN_ID           Qt::UserRole
+#define PLUGIN_IS_DEFAULT   Qt::UserRole + 1
+
+extern COMPRES_PARAMS *internalVideoCodec[];
+extern uint32_t ADM_ve_getNbEncoders(void);
+extern bool ADM_ve_getEncoderInfo(int filter, const char **id, const char **name, const char **type, const char **desc, uint32_t *major, uint32_t *minor, uint32_t *patch);
+extern int getInternalVideoCodecCount();
+
+Ui_pluginManagerWindow::Ui_pluginManagerWindow(QWidget* parent) : QDialog(parent)
+{
+	UiPluginManager manager;
+
+	ui.setupUi(this);
+
+	QStandardItemModel *model = new QStandardItemModel();
+	QStandardItem *nameItem = new QStandardItem(tr("Name"));
+	QStandardItem *versionItem = new QStandardItem(tr("Version"));
+	QStandardItem *descItem = new QStandardItem(tr("Description"));
+
+	nameItem->setTextAlignment(Qt::AlignLeft | Qt::AlignVCenter);
+	versionItem->setTextAlignment(Qt::AlignRight | Qt::AlignVCenter);
+	descItem->setTextAlignment(Qt::AlignLeft | Qt::AlignVCenter);
+
+	model->setHorizontalHeaderItem(0, nameItem);
+	model->setHorizontalHeaderItem(1, versionItem);
+	model->setHorizontalHeaderItem(2, descItem);
+
+	ui.pluginTableView->verticalHeader()->setVisible(false);
+	ui.pluginTableView->setModel(model);
+
+	connect(
+		ui.pluginTableView->selectionModel(), 
+		SIGNAL(currentRowChanged(const QModelIndex, const QModelIndex)), this, 
+		SLOT(pluginTableView_rowChanged(const QModelIndex, const QModelIndex)));
+
+	connect(ui.setDefaultButton, SIGNAL(clicked(bool)), this, SLOT(setDefaultButton_clicked(bool)));
+	connect(ui.enableAllButton, SIGNAL(clicked(bool)), this, SLOT(enableAllButton_clicked(bool)));
+	connect(ui.disableAllButton, SIGNAL(clicked(bool)), this, SLOT(disableAllButton_clicked(bool)));
+	connect(ui.moveUpButton, SIGNAL(clicked(bool)), this, SLOT(moveUpButton_clicked(bool)));
+	connect(ui.moveDownButton, SIGNAL(clicked(bool)), this, SLOT(moveDownButton_clicked(bool)));
+
+	fillVideoEncoderList(manager);
+	ui.pluginTableView->resizeColumnsToContents();
+}
+
+void Ui_pluginManagerWindow::fillVideoEncoderList(UiPluginManager manager)
+{
+	uint32_t pluginCount = ADM_ve_getNbEncoders();
+	set<string> pluginIds;
+	map<string, UiPlugVersionInfo> plugins;
+
+	for (int i = 0; i < getInternalVideoCodecCount(); i++)
+	{
+		UiPlugVersionInfo versionInfo;
+
+		versionInfo.name = internalVideoCodec[i]->menuName;
+		versionInfo.version = QString("%1.0.%2").arg(VERSION).arg(ADM_SUBVERSION).toUtf8().constData();
+		versionInfo.description = tr("Internal video encoder").toUtf8().constData();
+
+		pluginIds.insert(internalVideoCodec[i]->tagName);
+		plugins[internalVideoCodec[i]->tagName] = versionInfo;
+	}
+
+	for (int i = 0; i < pluginCount; i++)
+	{
+		const char *id, *name, *type, *desc;
+		uint32_t major, minor, patch;
+		UiPlugVersionInfo versionInfo;
+
+		ADM_ve_getEncoderInfo(i, &id, &name, &type, &desc, &major, &minor, &patch);
+
+		versionInfo.name = QString("%1 (%2)").arg(type).arg(name).toUtf8().constData();
+		versionInfo.version = QString("%1.%2.%3").arg(major).arg(minor, 2, 10, QLatin1Char('0')).arg(patch, 2, 10, QLatin1Char('0')).toUtf8().constData();
+		versionInfo.description = desc;
+
+		plugins[id] = versionInfo;
+		pluginIds.insert(id);
+	}
+
+	list<UiPluginManager::UiPlugInfo> rankedList = manager.getRankedList(UiPluginManager::PLUGINTYPE_VIDEO_ENCODER, pluginIds);
+	bool defaultSet = false;
+
+	for (list<UiPluginManager::UiPlugInfo>::const_iterator itRankedPlugin = rankedList.begin(); itRankedPlugin != rankedList.end(); itRankedPlugin++)
+	{
+		string id = itRankedPlugin->id;
+		map<string, UiPlugVersionInfo>::const_iterator itPlugin = plugins.find(id);
+
+		addRow(
+			QString(id.c_str()), QString(itPlugin->second.name.c_str()), QString(itPlugin->second.version.c_str()),
+			QString(itPlugin->second.description.c_str()), itRankedPlugin->enabled, itRankedPlugin->isDefault);
+
+		if (itRankedPlugin->isDefault)
+			defaultSet = true;
+	}
+
+	if (pluginIds.size())
+	{
+		ui.pluginTableView->selectRow(0);
+
+		if (!defaultSet)
+			setDefault(0);
+	}
+
+}
+
+void Ui_pluginManagerWindow::pluginTableView_rowChanged(const QModelIndex current, const QModelIndex previous)
+{
+	ui.moveUpButton->setEnabled(current.row() > 0);
+	ui.moveDownButton->setEnabled((current.row() + 1) != ui.pluginTableView->model()->rowCount());
+}
+
+void Ui_pluginManagerWindow::setDefaultButton_clicked(bool)
+{
+	QStandardItemModel *model = (QStandardItemModel*)ui.pluginTableView->model();
+	
+	setDefault(ui.pluginTableView->selectionModel()->currentIndex().row());
+}
+
+void Ui_pluginManagerWindow::enableAllButton_clicked(bool)
+{
+	checkAllItems(true);
+}
+
+void Ui_pluginManagerWindow::disableAllButton_clicked(bool)
+{
+	checkAllItems(false);
+}
+
+void Ui_pluginManagerWindow::moveUpButton_clicked(bool)
+{
+	moveSelectedItem(true);
+}
+
+void Ui_pluginManagerWindow::moveDownButton_clicked(bool)
+{
+	moveSelectedItem(false);
+}
+
+void Ui_pluginManagerWindow::addRow(QString id, QString name, QString version, QString desc, bool enabled, bool isDefault)
+{
+	QStandardItemModel *model = (QStandardItemModel*)ui.pluginTableView->model();
+	QStandardItem *nameItem = new QStandardItem(name);
+	QStandardItem *versionItem = new QStandardItem(version);
+	QStandardItem *descItem = new QStandardItem(desc);
+	int row = model->rowCount();
+
+	nameItem->setCheckable(true);
+	nameItem->setData(id, PLUGIN_ID);
+	versionItem->setTextAlignment(Qt::AlignRight | Qt::AlignVCenter);
+
+	if (enabled)
+		nameItem->setCheckState(Qt::Checked);
+
+	model->setItem(row, 0, nameItem);
+	model->setItem(row, 1, versionItem);
+	model->setItem(row, 2, descItem);
+
+	if (isDefault)
+		setDefault(row);
+}
+
+void Ui_pluginManagerWindow::setDefault(int defaultRow)
+{
+	QStandardItemModel *model = (QStandardItemModel*)ui.pluginTableView->model();
+
+	for (int row = 0; row < model->rowCount(); row++)
+	{
+		QStandardItem *item = model->item(row, 0);
+
+		item->setData(row == defaultRow, PLUGIN_IS_DEFAULT);
+
+		for (int column = 0; column < model->columnCount(); column++)
+		{
+			QStandardItem *item = model->item(row, column);
+			QFont font = item->font();
+		
+			font.setBold(row == defaultRow);
+			item->setFont(font);
+		}
+	}
+}
+
+void Ui_pluginManagerWindow::checkAllItems(bool checked)
+{
+	for (int i = 0; i < ui.pluginTableView->model()->rowCount(); i++)
+		((QStandardItemModel*)ui.pluginTableView->model())->item(i, 0)->setCheckState(checked ? Qt::Checked : Qt::Unchecked);
+}
+
+void Ui_pluginManagerWindow::moveSelectedItem(bool up)
+{
+	const int sourceRow = ui.pluginTableView->selectionModel()->currentIndex().row();
+	const int destRow = (up ? sourceRow - 1 : sourceRow);
+
+	QStandardItemModel *model = (QStandardItemModel*)ui.pluginTableView->model();
+	QList<QStandardItem*> sourceItems = model->takeRow(sourceRow);
+	QList<QStandardItem*> destItems = model->takeRow(destRow);
+
+	model->insertRow(destRow, sourceItems);
+	model->insertRow(sourceRow, destItems);
+
+	ui.pluginTableView->selectRow(up ? destRow : sourceRow + 1);
+}
+
+void Ui_pluginManagerWindow::save(void)
+{
+	UiPluginManager manager;
+	QStandardItemModel *model = (QStandardItemModel*)ui.pluginTableView->model();
+
+	for (int i = 0; i < model->rowCount(); i++)
+	{
+		QStandardItem *item = model->item(i, 0);
+
+		manager.addPlugin(
+			UiPluginManager::PLUGINTYPE_VIDEO_ENCODER,
+			item->data(PLUGIN_ID).toString().toUtf8().constData(),
+			item->checkState() == Qt::Checked,
+			item->data(PLUGIN_IS_DEFAULT).toBool());
+	}
+
+	manager.save();
+}
+
+uint8_t DIA_pluginManager(void)
+{
+	Ui_pluginManagerWindow dialog(qtLastRegisteredDialog());
+	qtRegisterDialog(&dialog);
+
+	if (dialog.exec() == QDialog::Accepted)
+		dialog.save();
+
+	qtUnregisterDialog(&dialog);
+
+	return 1;
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.h	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_pluginManager.h	2010-06-22 06:30:27 UTC (rev 6392)
@@ -0,0 +1,43 @@
+#ifndef Q_pluginManager_h
+#define Q_pluginManager_h
+
+#include <QtGui/QStandardItemModel>
+#include "ui_pluginManager.h"
+#include "UiPluginManager.h"
+
+using namespace std;
+
+class Ui_pluginManagerWindow : public QDialog
+{
+	Q_OBJECT
+
+private:
+	typedef struct
+	{
+		string name;
+		string version;
+		string description;
+	} UiPlugVersionInfo;
+
+	Ui_pluginManagerDialog ui;
+
+	void fillVideoEncoderList(UiPluginManager manager);
+	void addRow(QString id, QString name, QString version, QString desc, bool enabled, bool isDefault);
+	void checkAllItems(bool check);
+	void setDefault(int defaultRow);
+	void moveSelectedItem(bool up);
+
+public:
+	Ui_pluginManagerWindow(QWidget* parent);
+	void save(void);
+
+private slots:
+	void pluginTableView_rowChanged(const QModelIndex current, const QModelIndex previous);
+	void setDefaultButton_clicked(bool);
+	void enableAllButton_clicked(bool);
+	void disableAllButton_clicked(bool);
+	void moveUpButton_clicked(bool);
+	void moveDownButton_clicked(bool);
+};
+
+#endif	// Q_pluginManager_h

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pluginManager.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pluginManager.ui	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/pluginManager.ui	2010-06-22 06:30:27 UTC (rev 6392)
@@ -0,0 +1,223 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<ui version="4.0">
+ <class>pluginManagerDialog</class>
+ <widget class="QDialog" name="pluginManagerDialog">
+  <property name="geometry">
+   <rect>
+    <x>0</x>
+    <y>0</y>
+    <width>630</width>
+    <height>350</height>
+   </rect>
+  </property>
+  <property name="windowTitle">
+   <string>Plugin Manager</string>
+  </property>
+  <layout class="QVBoxLayout">
+   <property name="spacing">
+    <number>6</number>
+   </property>
+   <property name="margin">
+    <number>9</number>
+   </property>
+   <item>
+    <widget class="QTabWidget" name="tabWidget">
+     <property name="currentIndex">
+      <number>0</number>
+     </property>
+     <widget class="QWidget" name="tab">
+      <attribute name="title">
+       <string>&amp;Video Encoder</string>
+      </attribute>
+      <layout class="QHBoxLayout">
+       <property name="spacing">
+        <number>6</number>
+       </property>
+       <property name="margin">
+        <number>9</number>
+       </property>
+       <item>
+        <widget class="QTableView" name="pluginTableView">
+         <property name="selectionMode">
+          <enum>QAbstractItemView::SingleSelection</enum>
+         </property>
+         <property name="selectionBehavior">
+          <enum>QAbstractItemView::SelectRows</enum>
+         </property>
+        </widget>
+       </item>
+       <item>
+        <layout class="QVBoxLayout">
+         <property name="spacing">
+          <number>6</number>
+         </property>
+         <property name="margin">
+          <number>0</number>
+         </property>
+         <item>
+          <widget class="QPushButton" name="setDefaultButton">
+           <property name="text">
+            <string>&amp;Set As Default</string>
+           </property>
+          </widget>
+         </item>
+         <item>
+          <spacer>
+           <property name="orientation">
+            <enum>Qt::Vertical</enum>
+           </property>
+           <property name="sizeHint" stdset="0">
+            <size>
+             <width>20</width>
+             <height>40</height>
+            </size>
+           </property>
+          </spacer>
+         </item>
+         <item>
+          <layout class="QVBoxLayout">
+           <property name="spacing">
+            <number>6</number>
+           </property>
+           <property name="margin">
+            <number>0</number>
+           </property>
+           <item>
+            <widget class="QPushButton" name="enableAllButton">
+             <property name="text">
+              <string>&amp;Enable All</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <widget class="QPushButton" name="disableAllButton">
+             <property name="text">
+              <string>Disable &amp;All</string>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+         <item>
+          <spacer>
+           <property name="orientation">
+            <enum>Qt::Vertical</enum>
+           </property>
+           <property name="sizeHint" stdset="0">
+            <size>
+             <width>20</width>
+             <height>40</height>
+            </size>
+           </property>
+          </spacer>
+         </item>
+         <item>
+          <layout class="QVBoxLayout">
+           <property name="spacing">
+            <number>6</number>
+           </property>
+           <property name="margin">
+            <number>0</number>
+           </property>
+           <item>
+            <widget class="QPushButton" name="moveUpButton">
+             <property name="enabled">
+              <bool>false</bool>
+             </property>
+             <property name="text">
+              <string>Move &amp;Up</string>
+             </property>
+            </widget>
+           </item>
+           <item>
+            <widget class="QPushButton" name="moveDownButton">
+             <property name="enabled">
+              <bool>false</bool>
+             </property>
+             <property name="text">
+              <string>Move &amp;Down</string>
+             </property>
+            </widget>
+           </item>
+          </layout>
+         </item>
+        </layout>
+       </item>
+      </layout>
+     </widget>
+    </widget>
+   </item>
+   <item>
+    <spacer>
+     <property name="orientation">
+      <enum>Qt::Vertical</enum>
+     </property>
+     <property name="sizeType">
+      <enum>QSizePolicy::Fixed</enum>
+     </property>
+     <property name="sizeHint" stdset="0">
+      <size>
+       <width>20</width>
+       <height>4</height>
+      </size>
+     </property>
+    </spacer>
+   </item>
+   <item>
+    <widget class="QDialogButtonBox" name="buttonBox">
+     <property name="orientation">
+      <enum>Qt::Horizontal</enum>
+     </property>
+     <property name="standardButtons">
+      <set>QDialogButtonBox::Cancel|QDialogButtonBox::Ok</set>
+     </property>
+    </widget>
+   </item>
+  </layout>
+ </widget>
+ <tabstops>
+  <tabstop>tabWidget</tabstop>
+  <tabstop>pluginTableView</tabstop>
+  <tabstop>setDefaultButton</tabstop>
+  <tabstop>enableAllButton</tabstop>
+  <tabstop>disableAllButton</tabstop>
+  <tabstop>moveUpButton</tabstop>
+  <tabstop>moveDownButton</tabstop>
+  <tabstop>buttonBox</tabstop>
+ </tabstops>
+ <resources/>
+ <connections>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>accepted()</signal>
+   <receiver>pluginManagerDialog</receiver>
+   <slot>accept()</slot>
+   <hints>
+    <hint type="sourcelabel">
+     <x>248</x>
+     <y>254</y>
+    </hint>
+    <hint type="destinationlabel">
+     <x>157</x>
+     <y>274</y>
+    </hint>
+   </hints>
+  </connection>
+  <connection>
+   <sender>buttonBox</sender>
+   <signal>rejected()</signal>
+   <receiver>pluginManagerDialog</receiver>
+   <slot>reject()</slot>
+   <hints>
+    <hint type="sourcelabel">
+     <x>316</x>
+     <y>260</y>
+    </hint>
+    <hint type="destinationlabel">
+     <x>286</x>
+     <y>274</y>
+    </hint>
+   </hints>
+  </connection>
+ </connections>
+</ui>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/gui2.ui	2010-06-22 06:30:27 UTC (rev 6392)
@@ -1398,6 +1398,7 @@
      <string>&amp;Help</string>
     </property>
     <addaction name="actionShow_built_in_support" />
+    <addaction name="action_PluginManager" />
     <addaction name="action_Plugins" />
     <addaction name="separator" />
     <addaction name="actionAbout_avidemux" />
@@ -2207,7 +2208,7 @@
   </action>
   <action name="action_Plugins" >
    <property name="text" >
-    <string>&amp;Plugins...</string>
+    <string>P&amp;lugins...</string>
    </property>
   </action>
   <action name="actionRecent4" >
@@ -2250,6 +2251,11 @@
     <string>RecentProject5</string>
    </property>
   </action>
+  <action name="action_PluginManager" >
+   <property name="text" >
+    <string>&amp;Plugin Manager...</string>
+   </property>
+  </action>
  </widget>
  <customwidgets>
   <customwidget>

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/translation_table.h	2010-06-22 06:30:27 UTC (rev 6392)
@@ -53,6 +53,7 @@
 PROCESS(actionJump_to_Time,ACT_GotoTime) \
 PROCESS(actionShow_built_in_support,ACT_BUILT_IN) \
 PROCESS(action_Plugins, ACT_PLUGIN_INFO) \
+PROCESS(action_PluginManager, ACT_PLUGIN_MANAGER) \
 PROCESS(actionAbout_avidemux,ACT_About) \
 PROCESS(actionPlay,ACT_PlayAvi) \
 PROCESS(actionRecent0,ACT_RECENT0) \

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/CMakeLists.txt	2010-06-22 06:30:27 UTC (rev 6392)
@@ -15,6 +15,10 @@
 DIA_jobs_save.cpp
 DIA_plugins.cpp
 DIA_muxerMpegPs.cpp
+UiPluginManager.cpp
 )
 
+add_definitions(${LIBXML2_DEFINITIONS})
+include_directories("${LIBXML2_INCLUDE_DIR}")
+
 ADD_ADM_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_plugins.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -22,7 +22,7 @@
 uint32_t ADM_av_getNbDevices(void);
 bool     ADM_av_getDeviceInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 uint32_t ADM_ve_getNbEncoders(void);
-bool     ADM_ve_getEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
+bool     ADM_ve_getEncoderInfo(int filter, const char **id, const char **name, const char **type, const char **desc, uint32_t *major, uint32_t *minor, uint32_t *patch);
 uint32_t ADM_ae_getPluginNbEncoders(void);
 bool     ADM_ae_getAPluginEncoderInfo(int filter, const char **name, uint32_t *major,uint32_t *minor,uint32_t *patch);
 
@@ -81,7 +81,7 @@
         char versionString[256];
         char infoString[256];
         char *end;
-            ADM_ve_getEncoderInfo(i, &name,&major,&minor,&patch);
+            ADM_ve_getEncoderInfo(i, NULL, NULL, NULL, &name, &major, &minor, &patch);
             snprintf(versionString,255,"%02d.%02d.%02d",major,minor,patch);
             strncpy(infoString,name,255);
             if(strlen(infoString))

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -0,0 +1,174 @@
+/***************************************************************************
+                             UiPluginManager.cpp
+                             -------------------
+
+    begin                : Tue June 15 2010
+    copyright            : (C) 2010 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <libxml/parser.h>
+#include <string.h>
+
+#include "prefs.h"
+#include "UiPluginManager.h"
+
+UiPluginManager::UiPluginManager(void)
+{
+	_pluginList[PLUGINTYPE_VIDEO_ENCODER] = std::list<UiPlugInfo>();
+	_loaded = false;
+}
+
+void UiPluginManager::addPlugin(PluginType type, const char* id, bool enabled, bool isDefault)
+{
+	UiPlugInfo info;
+
+	info.id = id;
+	info.enabled = enabled;
+	info.isDefault = isDefault;
+
+	_pluginList[type].push_back(info);
+}
+
+void UiPluginManager::clearAll(void)
+{
+	_pluginList[PLUGINTYPE_VIDEO_ENCODER].clear();
+}
+
+void UiPluginManager::load(void)
+{
+	char* xml;
+	preferences prefs;
+
+	clearAll();
+	prefs.get(PLUGIN_ORDER, &xml);
+
+	if (strlen(xml) > 0)
+	{
+		xmlDocPtr xmlDoc = xmlReadMemory(xml, strlen(xml), "pluginOrder.xml", NULL, 0);
+		xmlNodePtr xmlNodeRoot = xmlDocGetRootElement(xmlDoc);
+
+		for (xmlNodePtr xmlChild = xmlNodeRoot->children; xmlChild; xmlChild = xmlChild->next)
+		{
+			if (strcmp((char*)xmlChild->name, "videoEncoder") == 0)
+			{
+				for (xmlNodePtr xmlPlugin = xmlChild->children; xmlPlugin; xmlPlugin = xmlPlugin->next)
+					addXmlToPluginInfoList(xmlPlugin, PLUGINTYPE_VIDEO_ENCODER);
+			}
+		}
+
+		xmlFreeDoc(xmlDoc);
+	}
+
+	ADM_dealloc(xml);
+	_loaded = true;
+}
+
+std::list<UiPluginManager::UiPlugInfo> UiPluginManager::getRankedList(PluginType type, std::set<std::string> availablePluginIds)
+{
+	if (!_loaded)
+		load();
+
+	std::set<std::string> idSet(availablePluginIds);
+	std::list<UiPlugInfo> rankedList;
+	std::list<UiPlugInfo> pluginList = _pluginList[type];
+
+	for (std::list<UiPlugInfo>::const_iterator itPlugin = pluginList.begin(); itPlugin != pluginList.end(); itPlugin++)
+	{
+		std::string id = itPlugin->id;
+		std::set<std::string>::const_iterator itId = idSet.find(id);
+
+		if (itId != idSet.end())
+		{
+			UiPlugInfo info;
+
+			info.id = id;
+			info.enabled = itPlugin->enabled;
+			info.isDefault = itPlugin->isDefault;
+
+			rankedList.push_back(info);
+			idSet.erase(itId);
+		}
+	}
+
+	for (std::set<std::string>::const_iterator it = idSet.begin(); it != idSet.end(); it++)
+	{
+		UiPlugInfo info;
+
+		info.id = *it;
+		info.enabled = true;
+		info.isDefault = false;
+
+		rankedList.push_back(info);
+	}
+
+	return rankedList;
+}
+
+void UiPluginManager::save(void)
+{
+	xmlDocPtr xmlDoc = xmlNewDoc((const xmlChar*)"1.0");
+	xmlNodePtr xmlNodeRoot = xmlNewDocNode(xmlDoc, NULL, (const xmlChar*)"pluginOrder", NULL);
+	xmlNodePtr xmlNodeGroup;
+
+	xmlDocSetRootElement(xmlDoc, xmlNodeRoot);
+
+	xmlNodeGroup = xmlNewChild(xmlNodeRoot, NULL, (xmlChar*)"videoEncoder", NULL);
+	addPluginInfoListToXml(xmlNodeGroup, _pluginList[PLUGINTYPE_VIDEO_ENCODER]);
+
+	xmlChar *tempBuffer;
+	int tempBufferSize;
+
+	xmlDocDumpMemory(xmlDoc, &tempBuffer, &tempBufferSize);
+
+	preferences prefs;
+
+	prefs.set(PLUGIN_ORDER, (char*)tempBuffer);
+
+	xmlFree(tempBuffer);
+	xmlFreeDoc(xmlDoc);
+}
+
+void UiPluginManager::addPluginInfoListToXml(void *xmlNode, std::list<UiPlugInfo> pluginList)
+{
+	for (std::list<UiPlugInfo>::const_iterator it = pluginList.begin(); it != pluginList.end(); it++)
+	{
+		xmlNodePtr xmlNodeChild = xmlNewChild((xmlNodePtr)xmlNode, NULL, (const xmlChar*)"plugin", NULL);
+
+		xmlNewProp(xmlNodeChild, (const xmlChar*)"id", (const xmlChar*)it->id.c_str());
+		xmlNewProp(xmlNodeChild, (const xmlChar*)"enabled", it->enabled ? (const xmlChar*)"true" : (const xmlChar*)"false");
+		xmlNewProp(xmlNodeChild, (const xmlChar*)"default", it->isDefault ? (const xmlChar*)"true" : (const xmlChar*)"false");
+	}
+}
+
+void UiPluginManager::addXmlToPluginInfoList(void *xmlNode, PluginType type)
+{
+	const char *id = NULL;
+	bool enabled = true, isDefault = false;
+
+	for (xmlAttrPtr xmlAttr = ((xmlNodePtr)xmlNode)->properties; xmlAttr; xmlAttr = xmlAttr->next)
+	{
+		xmlChar *attrContent = xmlNodeGetContent(xmlAttr->children);
+
+		if (strcmp((const char*)xmlAttr->name, "id") == 0 && !id)
+			id = ADM_strdup((const char*)attrContent);
+		else if (strcmp((const char*)xmlAttr->name, "enabled") == 0)
+			enabled = (strcmp((const char*)attrContent, "true") == 0);
+		else if (strcmp((const char*)xmlAttr->name, "default") == 0)
+			isDefault = (strcmp((const char*)attrContent, "true") == 0);
+
+		xmlFree(attrContent);
+	}
+
+	this->addPlugin(type, id, enabled, isDefault);
+
+	if (id)
+		delete [] id;
+}

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.h	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/UiPluginManager.h	2010-06-22 06:30:27 UTC (rev 6392)
@@ -0,0 +1,57 @@
+/***************************************************************************
+                               UiPluginManager.h
+                               -----------------
+
+    begin                : Tue June 15 2010
+    copyright            : (C) 2010 by gruntster
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#ifndef UI_PLUGIN_MANAGER
+#define UI_PLUGIN_MANAGER
+
+#include <list>
+#include <map>
+#include <set>
+#include <string>
+
+class UiPluginManager
+{
+public:
+	enum PluginType
+    {
+        PLUGINTYPE_VIDEO_ENCODER = 1
+    };
+
+	typedef struct
+	{
+		std::string id;
+		bool enabled;
+		bool isDefault;
+	} UiPlugInfo;
+
+	UiPluginManager(void);
+
+	void addPlugin(PluginType type, const char* id, bool enabled, bool isDefault);
+	void clearAll(void);
+	void save(void);
+	std::list<UiPlugInfo> getRankedList(PluginType type, std::set<std::string> availablePluginIds);
+
+private:
+	std::map< PluginType, std::list<UiPlugInfo> > _pluginList;
+	bool _loaded;
+
+	void addPluginInfoListToXml(void *xmlNode, std::list<UiPlugInfo> pluginList);
+	void addXmlToPluginInfoList(void *xmlNode, PluginType type);
+	void load(void);
+};
+
+#endif
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2010-06-22 06:30:27 UTC (rev 6392)
@@ -157,6 +157,7 @@
 extern void A_jog(void);
 extern void DIA_glyphEdit(void);
 extern uint8_t DIA_pluginsInfo(void);
+extern uint8_t DIA_pluginManager(void);
 //___________________________________________
 // serialization of user event through gui
 //
@@ -256,6 +257,9 @@
     case ACT_PLUGIN_INFO:
             DIA_pluginsInfo();
             return;
+	case ACT_PLUGIN_MANAGER:
+		DIA_pluginManager();
+		return;
     case ACT_RunScript:
                 GUI_FileSelRead (QT_TR_NOOP("Select ECMAScript to Run"),(SELFILE_CB *) A_parseECMAScript);
                         
@@ -296,7 +300,7 @@
         if(playing) return;
     	if(DIA_Preferences())
 	{
-	saveEncoderConfig ();
+
  	#ifdef HAVE_AUDIO     
       		AVDM_audioSave();
  	#endif     
@@ -304,7 +308,6 @@
 	}      
 	return;
     case ACT_SavePref:
-      saveEncoderConfig ();
  #ifdef HAVE_AUDIO     
       AVDM_audioSave();
  #endif     

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gui_action.names	2010-06-22 06:30:27 UTC (rev 6392)
@@ -144,3 +144,4 @@
 ACT(JOG)
 ACT(GLYPHEDIT)
 ACT(PLUGIN_INFO)
+ACT(PLUGIN_MANAGER)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.h	2010-06-22 06:30:27 UTC (rev 6392)
@@ -8,27 +8,6 @@
 
 // <prefs_gen>
 typedef enum {
-	CODECS_SVCD_ENCTYPE,
-	CODECS_SVCD_BITRATE,
-	CODECS_SVCD_QUANTIZER,
-	CODECS_SVCD_FINALSIZE,
-	CODECS_SVCD_INTERLACED,
-	CODECS_SVCD_BFF,
-	CODECS_SVCD_WIDESCREEN,
-	CODECS_SVCD_MATRIX,
-	CODECS_SVCD_GOPSIZE,
-	CODECS_SVCD_MAXBITRATE,
-	CODECS_DVD_ENCTYPE,
-	CODECS_DVD_BITRATE,
-	CODECS_DVD_QUANTIZER,
-	CODECS_DVD_FINALSIZE,
-	CODECS_DVD_INTERLACED,
-	CODECS_DVD_BFF,
-	CODECS_DVD_WIDESCREEN,
-	CODECS_DVD_MATRIX,
-	CODECS_DVD_GOPSIZE,
-	CODECS_DVD_MAXBITRATE,
-	CODECS_PREFERREDCODEC,
 	FILTERS_SUBTITLE_FONTNAME,
 	FILTERS_SUBTITLE_CHARSET,
 	FILTERS_SUBTITLE_FONTSIZE,
@@ -83,7 +62,8 @@
 	FEATURE_GLOBAL_GLYPH_NAME,
 	PRIORITY_ENCODING,
 	PRIORITY_INDEXING,
-	PRIORITY_PLAYBACK
+	PRIORITY_PLAYBACK,
+	PLUGIN_ORDER
 } options;
 // </prefs_gen>
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2010-06-21 17:27:18 UTC (rev 6391)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/prefs.in	2010-06-22 06:30:27 UTC (rev 6392)
@@ -11,27 +11,6 @@
 # maximum     :: the largest  value this option can have (ignored for STRING)
 
 # option name				type	value	minimum	maximum (incl.)
-codecs.svcd.enctype,			UINT,	0,	0,	99999
-codecs.svcd.bitrate,			UINT,	1500000,16000,	2748000
-codecs.svcd.quantizer,			UINT,	4,	2,	31
-codecs.svcd.finalsize,			UINT,	700,	0,	99999
-codecs.svcd.interlaced,			UINT,	0,	0,	1
-codecs.svcd.bff,			UINT,	0,	0,	1
-codecs.svcd.widescreen,			UINT,	0,	0,	1
-codecs.svcd.matrix,			UINT,	0,	0,	99999
-codecs.svcd.gopsize,			UINT,	12,	0,	99999
-codecs.svcd.maxbitrate,			UINT,	2500,	0,	2748
-codecs.dvd.enctype,			UINT,	0,	0,	99999
-codecs.dvd.bitrate,			UINT,	1500000,16000,	9900000
-codecs.dvd.quantizer,			UINT,	4,	2,	31
-codecs.dvd.finalsize,			UINT,	700,	0,	99999
-codecs.dvd.interlaced,			UINT,	0,	0,	1
-codecs.dvd.bff,				UINT,	0,	0,	1
-codecs.dvd.widescreen,			UINT,	0,	0,	1
-codecs.dvd.matrix,			UINT,	0,	0,	99999
-codecs.dvd.gopsize,			UINT,	12,	0,	99999
-codecs.dvd.maxbitrate,			UINT,	9000,	0,	9900
-codecs.preferredcodec,			STRING,	FFmpeg4
 #ifdef __WIN32
 filters.subtitle.fontname,		FILENAME, "C:\\Windows\\Fonts\\arial.ttf"
 #else
@@ -102,3 +81,4 @@
 priority.encoding,          UINT,   3,      0,      4
 priority.indexing,          UINT,   3,      0,      4
 priority.playback,          UINT,   0,      0,      4
+plugin.order,               STRING, "<?xml version=\"1.0\"?><pluginOrder><videoEncoder><plugin id=\"Copy\" enabled=\"true\" default=\"true\"/><plugin id=\"32BCB447-21C9-4210-AE9A-4FCE6C8588AE\" enabled=\"true\" default=\"false\"/><plugin id=\"92B544BE-59A3-4720-86F0-6AD5A2526FD2\" enabled=\"true\" default=\"false\"/><plugin id=\"0E7C20E3-FF92-4bb2-A9A9-55B7F713C45A\" enabled=\"true\" default=\"false\"/><plugin id=\"DBAECD8B-CF29-4846-AF57-B596427FE7D3\" enabled=\"true\" default=\"false\"/><plugin id=\"C16E9CCE-D9B3-4fbe-B0C5-8B1BEBF2178E\" enabled=\"true\" default=\"false\"/><plugin id=\"REQUANT\" enabled=\"true\" default=\"false\"/><plugin id=\"85FC9CAC-CE6C-4aa6-9D5F-352D6349BA3E\" enabled=\"true\" default=\"false\"/><plugin id=\"056FE919-C1D3-4450-A812-A767EAB07786\" enabled=\"true\" default=\"false\"/><plugin id=\"075E8A4E-5B3D-47c6-9F70-853D6B855106\" enabled=\"true\" default=\"false\"/><plugin id=\"4279DF66-ECEF-4d3d-AFEA-1BFCCB79E219\" enabled=\"true\" default=\"fals!
 e\"/><plugin id=\"134AA23B-A1FE-4d7b-AC99-85E440BA4595\" enabled=\"true\" default=\"false\"/><plugin id=\"D5118154-0B9A-4e9a-BEC6-95DA343E7215\" enabled=\"true\" default=\"false\"/><plugin id=\"970CB80B-5713-445c-A187-5C6F4A76FA76\" enabled=\"true\" default=\"false\"/><plugin id=\"E5D8EAC6-71C1-4f3e-A975-B655232271FB\" enabled=\"true\" default=\"false\"/><plugin id=\"4828D06D-B555-4d72-94EC-34F04F97E501\" enabled=\"true\" default=\"false\"/><plugin id=\"YV12\" enabled=\"true\" default=\"false\"/></videoEncoder></pluginOrder>"
\ No newline at end of file



From mean at mail.berlios.de  Thu Jun 24 19:53:48 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:48 +0200
Subject: [Avidemux-svn-commit] r6394 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241753.o5OHrmRQ013658@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:47 +0200 (Thu, 24 Jun 2010)
New Revision: 6394

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
Log:
[TS] Skeleton for VC1 indexer in mpeg TS. Descriptor decoding is buggy, hack job to make it work

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 11:49:06 UTC (rev 6393)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:47 UTC (rev 6394)
@@ -133,6 +133,7 @@
                 ~TsIndexer();
         bool    runMpeg2(const char *file,ADM_TS_TRACK *videoTrac);
         bool    runH264(const char *file,ADM_TS_TRACK *videoTrac);
+        bool    runVC1(const char *file,ADM_TS_TRACK *videoTrac);
         bool    writeVideo(TSVideo *video,ADM_TS_TRACK_TYPE trkType);
         bool    writeAudio(void);
         bool    writeSystem(const char *filename,bool append);
@@ -181,6 +182,9 @@
             case ADM_TS_MPEG2: 
                             r=dx->runMpeg2(file,&(tracks[0]));
                             break;
+            case ADM_TS_VC1: 
+                            r=dx->runVC1(file,&(tracks[0]));
+                            break;
             case ADM_TS_H264: 
                             r=dx->runH264(file,&(tracks[0]));
                             break;
@@ -688,6 +692,192 @@
         return 1; 
 }
 /**
+    \fn runVC1
+    \brief Index VC1 stream
+*/  
+bool TsIndexer::runVC1(const char *file,ADM_TS_TRACK *videoTrac)
+{
+uint32_t temporal_ref,val;
+uint8_t buffer[50*1024];
+bool seq_found=false;
+
+TSVideo video;
+indexerData  data;    
+dmxPacketInfo info;
+
+    if(!videoTrac) return false;
+    if(videoTrac[0].trackType!=ADM_TS_VC1)
+    {
+        printf("[Ts Indexer] Only VC1 video supported\n");
+        return false;
+    }
+    video.pid=videoTrac[0].trackPid;
+
+    memset(&data,0,sizeof(data));
+    data.picStructure=pictureFrame;
+
+    char *indexName=(char *)alloca(strlen(file)+5);
+    sprintf(indexName,"%s.idx2",file);
+    index=qfopen(indexName,"wt");
+    if(!index)
+    {
+        printf("[PsIndex] Cannot create %s\n",indexName);
+        return false;
+    }
+    writeSystem(file,true);
+    pkt=new tsPacketLinearTracker(videoTrac->trackPid, audioTracks);
+
+    FP_TYPE append=FP_APPEND;
+    pkt->open(file,append);
+    data.pkt=pkt;
+    fullSize=pkt->getSize();
+    int startCode;
+#define likely(x) x
+#define unlikely(x) x
+      while(1)
+      {
+        startCode=pkt->findStartCode();
+        if(!pkt->stillOk()) break;
+
+          switch(startCode)
+                  {
+                  case 0xB3: // sequence start
+                          if(seq_found)
+                          {
+                                  pkt->getInfo(&info);
+                                  data.frameType=1;
+                                  Mark(&data,&info,4);
+                                  data.state=idx_startAtGopOrSeq;
+                                  pkt->forward(8);  // Ignore
+                                  continue;
+                          }
+                          //
+                          seq_found=1;
+                          val=pkt->readi32();
+                          video.w=val>>20;
+                          video.w=((video.w+15)&~15);
+                          video.h= (((val>>8) & 0xfff)+15)& ~15;
+
+                          video.ar = (val >> 4) & 0xf;
+                          video.fps= FPS[val & 0xf];
+                          pkt->forward(4);
+                          writeVideo(&video,ADM_TS_MPEG2);
+                          writeAudio();
+                          qfprintf(index,"[Data]");
+                          pkt->getInfo(&info);
+                          data.frameType=1;
+                          Mark(&data,&info,4+8);
+                          data.state=idx_startAtGopOrSeq;
+                          continue;
+
+                          break;
+                    case 0xB5: //  extension
+                                { 
+                                    uint8_t id=pkt->readi8()>>4;
+                                    uint8_t two;
+                                    switch(id)
+                                    {
+                                        case 1: // Sequence extension
+                                            val=(val>>3)&1; // gop type progressive, unreliable, not used
+                                            break;
+                                        case 8: // picture coding extension (mpeg2)
+                                        {
+                                            // skip motion vector
+                                            uint8_t picture_structure;
+                                            pkt->forward(1); // 4*4 bits
+                                            two=pkt->readi8();
+                                            picture_structure=(two)&3;
+                                            
+                                            //printf("Picture type %02x struct:%x\n",two,picture_structure);
+                                            switch(picture_structure)
+                                            {
+                                                case 3: video.frameCount++;
+                                                        data.picStructure=pictureFrame;
+                                                        break;
+                                                case 1:  data.picStructure=pictureTopField;
+                                                         video.fieldCount++;
+                                                         break;
+                                                case 2:  data.picStructure=pictureBottomField;
+                                                         video.fieldCount++;
+                                                         break;
+                                                default: ADM_warning("frame type 0 met, this is illegal\n");
+                                            }
+                                        }
+                                        default:break;
+                                    }
+                                }
+                                break;
+                  case 0xb8: // GOP
+                          // Update ui
+                            {
+                               updateUI();
+
+                            }
+
+                          if(!seq_found) continue;
+                          if(data.state==idx_startAtGopOrSeq) 
+                          {         
+                                  continue;;
+                          }
+                          pkt->getInfo(&info);
+                          Mark(&data,&info,4);
+                          data.state=idx_startAtGopOrSeq;
+                          break;
+                  case 0x00 : // picture
+                        {
+                          int type;
+                          markType update=markNow;
+                          if(!seq_found)
+                          { 
+                                  continue;
+                                  printf("[TsIndexer]No sequence start yet, skipping..\n");
+                          }
+                          
+                          val=pkt->readi16();
+                          temporal_ref=val>>6;
+                          type=7 & (val>>3);
+                          if( type<1 ||  type>3)
+                          {
+                                  printf("[Indexer]Met illegal pic at %"LLX" + %"LX"\n",
+                                                  info.startAt,info.offset);
+                                  continue;
+                          }
+                          
+                          
+                          if(data.state==idx_startAtGopOrSeq) 
+                          {
+                                  currentFrameType=type;
+                          }else
+                            {
+                                  data.frameType=type;
+                                  pkt->getInfo(&info);
+                                  Mark(&data,&info,4+2);
+
+
+                            }
+                            data.state=idx_startAtImage;
+                            data.nbPics++;
+                        }
+                          break;
+                  default:
+                    break;
+                  }
+      }
+    
+        printf("\n");
+        Mark(&data,&info,2);
+        qfprintf(index,"\n[End]\n");
+        qfprintf(index,"\n# Found %"LU" images \n",data.nbPics); // Size
+        qfprintf(index,"# Found %"LU" frame pictures\n",video.frameCount); // Size
+        qfprintf(index,"# Found %"LU" field pictures\n",video.fieldCount); // Size
+        qfclose(index);
+        index=NULL;
+        audioTracks=NULL;
+        delete pkt;
+        pkt=NULL;
+        return 1; 
+}
+/**
     \fn   Mark
     \brief update the file
 
@@ -766,7 +956,8 @@
  switch(trkType)
     {
         case ADM_TS_MPEG2: qfprintf(index,"VideoCodec=Mpeg2\n");break;;
-        case ADM_TS_H264: qfprintf(index,"VideoCodec=H264\n");break;
+        case ADM_TS_H264:  qfprintf(index,"VideoCodec=H264\n");break;
+        case ADM_TS_VC1:   qfprintf(index,"VideoCodec=VC1\n");break;
         default: printf("[TsIndexer] Unsupported video codec\n");return false;
 
     }

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.cpp	2010-06-24 11:49:06 UTC (rev 6393)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.cpp	2010-06-24 17:53:47 UTC (rev 6394)
@@ -25,8 +25,9 @@
 /**
     \fn scanPmt
 */
-static bool TS_scanPmt(tsPacket *t,uint32_t pid,listOfTsTracks *list);
-static bool   decodeProgrameDescriptor(uint8_t *r, uint32_t maxlen);
+static bool  TS_scanPmt(tsPacket *t,uint32_t pid,listOfTsTracks *list);
+static bool  decodeProgrameDescriptor(uint8_t *r, uint32_t maxlen);
+static bool  decodeRegistration(int size,uint8_t *data);
 static ADM_TS_TRACK_TYPE EsType(uint32_t type,const char **str);
 /**
     \class TrackTypeDescriptor
@@ -44,8 +45,10 @@
     {0x002,ADM_TS_MPEG2,     "Mpeg2 Video"},
     {0x003,ADM_TS_MPEG_AUDIO,"Mpeg1 Audio"},
     {0x004,ADM_TS_MPEG_AUDIO,"Mpeg2 Audio"},
+    {0x005,ADM_TS_UNKNOWN,   "Registration"},
     {0x01b,ADM_TS_H264,      "H264 Video"},
     {0x081,ADM_TS_AC3,       "AC3 Audio"},
+    {0x0ea,ADM_TS_VC1,       "VC1 Video"},
     {0x006,ADM_TS_UNKNOWN,   "Private Stream"},
     {0xfff,ADM_TS_UNKNOWN,   "Unknown"}   // Last one must be "unknown!"
 };
@@ -125,7 +128,7 @@
     for(int i=0;i<list.size();i++)
     {
         ADM_TS_TRACK_TYPE type=list[i].trackType;
-        if(type==ADM_TS_MPEG2 || type==ADM_TS_H264)
+        if(type==ADM_TS_MPEG2 || type==ADM_TS_H264 || type==ADM_TS_VC1)
         {
             videoIndex=i;
             break;
@@ -192,18 +195,17 @@
     printf("[TsDemuxer] Looking for PMT : 0x%x\n",pid);
     if(t->getNextPSI(pid,&psi)==true)
      {
-        
-        
         len=psi.payloadSize;
         // We should be protected by CRC here
         int packLen=len;
         printf("[TsDemuxer] PCR 0x%x, len=%d\n",(r[0]<<8)+r[1],packLen);
         r+=2;  
         int programInfoLength=(r[0]<<8)+r[1];
-        programInfoLength&=0xff;
+        programInfoLength&=0x3ff;
         r+=2;
         packLen-=4;
         // Program Descriptor
+        printf("[PMT]--Decoding Program info--\n");
         if(programInfoLength && programInfoLength<=packLen)
         {
             decodeProgrameDescriptor(r, programInfoLength);
@@ -211,6 +213,7 @@
             r+=programInfoLength;
         }
         printf("[PMT]            Left : %d bytes\n",packLen);
+        printf("[PMT]--Decoding ES Descriptor--\n");
         // Es Type Descriptor
         while(packLen>4)
         {
@@ -244,6 +247,11 @@
                 }
 
             }
+            if(type==0xea)
+            {
+
+
+            }
             ADM_TS_TRACK_TYPE trackType=EsType(type,&str);;
             if(trackType!=ADM_TS_UNKNOWN) 
             {
@@ -252,7 +260,8 @@
                     trk2.trackType=trackType;
                     printf("[PMT]  Adding pid 0x%x (%d) , type %s\n",pid,pid,str);
                     list->push_back(trk2);
-            }
+            }else
+                printf("[PMT]              -> %s\n",str);
             
            
         }
@@ -279,6 +288,10 @@
                 case 0x1B:  *str= "H264 Video";return ADM_TS_H264;break;
                 case 0x81:  *str= "AC3 (Not sure)";return ADM_TS_AC3;break;
                 case 0x84:  *str= "E-AC3 (Not sure)";return ADM_TS_EAC3;break;
+                case 0xea:  *str= "VC1 (Not sure)";return ADM_TS_VC1;break;
+                case 0x90:  *str= "Presentation graphics (BluRay)";return ADM_TS_UNKNOWN;break;
+                case 0x83:  *str= "TrueHD AC3  (BluRay)";return ADM_TS_AC3;break;
+                
                 default : break;
     }
     return ADM_TS_UNKNOWN;
@@ -300,6 +313,22 @@
         {
                 int streamType,streamPid,esInfoLength;
                 streamType=r[0];
+                if(streamType==5) // descriptor
+                {
+                    int descriptorLength=r[1];
+                    if(descriptorLength+1>packLen) 
+                    {
+                        printf("[PMT             Registration length bigger than section\n");
+                        return true;
+                    }
+                    printf("[PMT] Registration FCC %c%c%c%c \n",r[2],r[3],r[4],r[5]);
+                    uint8_t *tail=r+1+descriptorLength;
+                    packLen-=1+descriptorLength;
+                    decodeRegistration(descriptorLength,r);
+                    r=tail;
+                    continue;
+                }
+                
                 streamPid=(r[1]<<8)+r[2]&0x1fff;
                 esInfoLength=((r[3]<<8)+r[4])&0xfff;
                 r+=5;
@@ -347,9 +376,37 @@
                 
         }
         return true;
-
 }
+/**
+    \fn decodeRegistration
+    \brief Decode registration descriptor subtag as used for VC1
+*/
+bool decodeRegistration(int size,uint8_t *data)
+{
+    uint8_t *end=data+size;
+    
+    while(data<end)
+    {
+        int tag=data[0];data++;
+        printf("[PMT] Registration, found tag %d\n",tag);
+        switch(tag)
+        {
+            case 0:    break; // sub desc
+            case 0xff: break;
+            case 1: // profile & level desc
+                            printf("[PMT] Profile/level :%d",*data++);
+                            break;
+            case 2: // Alignment
+                            printf("[PMT] Alignement    :%d",*data++);
+                            break;
+            case 3: // Buffer size
+                            printf("[PMT] Buffer size\n");
+                            data+=3;
+                            break;
+            default: return true;
 
+        }
+    }
 
-
+}
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.h	2010-06-24 11:49:06 UTC (rev 6393)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsPatPmt.h	2010-06-24 17:53:47 UTC (rev 6394)
@@ -31,6 +31,7 @@
     ADM_TS_AC3,
     ADM_TS_AAC,
     ADM_TS_EAC3,
+    ADM_TS_VC1
 }ADM_TS_TRACK_TYPE;
 /**
     \typedef ADM_TS_TRACK

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2010-06-24 11:49:06 UTC (rev 6393)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2010-06-24 17:53:47 UTC (rev 6394)
@@ -304,7 +304,9 @@
     init_get_bits( &s,pkt.payload, (pkt.payloadSize)*8); // dont need checksum
 
     DUMMY(tableId,8);
-    skip_bits(&s,1);             // Section syntax indicator
+    int section_syntax_indicator=get_bits(&s,1);
+    if(section_syntax_indicator)
+        ADM_warning("Section Syntax is set to private\n");
     if(get_bits(&s,1))             // Marker
     {
           printf("[MpegTs] getNextPSI Missing 0 marker\n");



From mean at mail.berlios.de  Thu Jun 24 19:53:50 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:50 +0200
Subject: [Avidemux-svn-commit] r6395 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241753.o5OHroPL013670@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:50 +0200 (Thu, 24 Jun 2010)
New Revision: 6395

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS/VC1] Buggy sequence header decoder, thanks to vlc for the info

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:47 UTC (rev 6394)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:50 UTC (rev 6395)
@@ -1,7 +1,8 @@
 /***************************************************************************
                         Mpeg2 in PS indexer                                            
                              
-    
+    VC1: /!\ Escaping not done (yet)
+
     copyright            : (C) 2005/2009 by mean
     email                : fixounet at free.fr
  ***************************************************************************/
@@ -54,7 +55,10 @@
                 0,                      // 14
                 0                       // 15
         };
-
+static const uint32_t  VC1_ar[16][2] = {  // From VLC
+                        { 0, 0}, { 1, 1}, {12,11}, {10,11}, {16,11}, {40,33},
+                        {24,11}, {20,11}, {32,11}, {80,33}, {18,11}, {15,11},
+                        {64,33}, {160,99},{ 0, 0}, { 0, 0}};
 class TSVideo
 {
 public:
@@ -103,6 +107,17 @@
     markNow
 }markType;
 
+class VC1Context
+{
+public:
+        bool advanced;
+        bool interlaced;
+        bool interpolate;
+        VC1Context() {advanced=false;interlaced=false;interpolate=false;}
+
+};
+
+
 #if 0
 #define aprintf printf
 #else
@@ -120,6 +135,7 @@
         indexerState    currentIndexState;
         uint64_t        fullSize;
         Clock           ticktock;
+        VC1Context      vc1Context;
 protected:
         FILE                    *index;
         tsPacketLinearTracker   *pkt;
@@ -127,7 +143,8 @@
         DIA_workingBase         *ui;
         void                    updateUI(void);
         bool                    decodeSEI(uint32_t nalSize, uint8_t *org,uint32_t *recoveryLength);
-
+        bool                    decodeVC1Seq(int nb, uint8_t *data,TSVideo &video);
+        
 public:
                 TsIndexer(listOfTsAudioTracks *tr);
                 ~TsIndexer();
@@ -705,6 +722,7 @@
 indexerData  data;    
 dmxPacketInfo info;
 
+
     if(!videoTrac) return false;
     if(videoTrac[0].trackType!=ADM_TS_VC1)
     {
@@ -741,109 +759,48 @@
 
           switch(startCode)
                   {
-                  case 0xB3: // sequence start
+                  case 0x0f: // sequence start
+                          uint8_t vc1Seq[8];
+                          uint8_t h;
                           if(seq_found)
                           {
-                                  pkt->getInfo(&info);
-                                  data.frameType=1;
-                                  Mark(&data,&info,4);
-                                  data.state=idx_startAtGopOrSeq;
-                                  pkt->forward(8);  // Ignore
+                                  pkt->forward(4);  // Ignore
                                   continue;
                           }
                           //
+                          
+                          h=pkt->readi8();
+                          if(!h&0x80) // simple/main profile
+                                continue;
+                          vc1Seq[0]=h;
+#define VC1_SEQ_SIZE 16
+                          pkt->read(VC1_SEQ_SIZE-1,vc1Seq+1);
+                          if(!decodeVC1Seq(VC1_SEQ_SIZE,vc1Seq,video)) continue;
                           seq_found=1;
-                          val=pkt->readi32();
-                          video.w=val>>20;
-                          video.w=((video.w+15)&~15);
-                          video.h= (((val>>8) & 0xfff)+15)& ~15;
-
-                          video.ar = (val >> 4) & 0xf;
-                          video.fps= FPS[val & 0xf];
-                          pkt->forward(4);
-                          writeVideo(&video,ADM_TS_MPEG2);
+                          // Hi Profile
+                          printf("[VC1] Found seq start with %d x %d video\n",(int)video.w,(int)video.h);
+                          printf("[VC1] FPS : %d\n",(int)video.fps);
+                          //video.ar = (val >> 4) & 0xf;
+                          //video.fps= FPS[val & 0xf];
+                          writeVideo(&video,ADM_TS_VC1);
                           writeAudio();
                           qfprintf(index,"[Data]");
                           pkt->getInfo(&info);
                           data.frameType=1;
-                          Mark(&data,&info,4+8);
+                          Mark(&data,&info,8);
                           data.state=idx_startAtGopOrSeq;
                           continue;
 
                           break;
-                    case 0xB5: //  extension
-                                { 
-                                    uint8_t id=pkt->readi8()>>4;
-                                    uint8_t two;
-                                    switch(id)
-                                    {
-                                        case 1: // Sequence extension
-                                            val=(val>>3)&1; // gop type progressive, unreliable, not used
-                                            break;
-                                        case 8: // picture coding extension (mpeg2)
-                                        {
-                                            // skip motion vector
-                                            uint8_t picture_structure;
-                                            pkt->forward(1); // 4*4 bits
-                                            two=pkt->readi8();
-                                            picture_structure=(two)&3;
-                                            
-                                            //printf("Picture type %02x struct:%x\n",two,picture_structure);
-                                            switch(picture_structure)
-                                            {
-                                                case 3: video.frameCount++;
-                                                        data.picStructure=pictureFrame;
-                                                        break;
-                                                case 1:  data.picStructure=pictureTopField;
-                                                         video.fieldCount++;
-                                                         break;
-                                                case 2:  data.picStructure=pictureBottomField;
-                                                         video.fieldCount++;
-                                                         break;
-                                                default: ADM_warning("frame type 0 met, this is illegal\n");
-                                            }
-                                        }
-                                        default:break;
-                                    }
-                                }
-                                break;
-                  case 0xb8: // GOP
-                          // Update ui
-                            {
-                               updateUI();
-
-                            }
-
-                          if(!seq_found) continue;
-                          if(data.state==idx_startAtGopOrSeq) 
-                          {         
-                                  continue;;
-                          }
-                          pkt->getInfo(&info);
-                          Mark(&data,&info,4);
-                          data.state=idx_startAtGopOrSeq;
-                          break;
-                  case 0x00 : // picture
-                        {
+                    case 0x0D: //  Picture start
+                        { 
                           int type;
                           markType update=markNow;
                           if(!seq_found)
                           { 
                                   continue;
                                   printf("[TsIndexer]No sequence start yet, skipping..\n");
-                          }
-                          
-                          val=pkt->readi16();
-                          temporal_ref=val>>6;
-                          type=7 & (val>>3);
-                          if( type<1 ||  type>3)
-                          {
-                                  printf("[Indexer]Met illegal pic at %"LLX" + %"LX"\n",
-                                                  info.startAt,info.offset);
-                                  continue;
-                          }
-                          
-                          
+                          }                          
                           if(data.state==idx_startAtGopOrSeq) 
                           {
                                   currentFrameType=type;
@@ -851,9 +808,7 @@
                             {
                                   data.frameType=type;
                                   pkt->getInfo(&info);
-                                  Mark(&data,&info,4+2);
-
-
+                                  Mark(&data,&info,0);
                             }
                             data.state=idx_startAtImage;
                             data.nbPics++;
@@ -999,6 +954,115 @@
     }
     return true;
 }
+/**
+    \fn decodeVc1Seq
+    \brief http://wiki.multimedia.cx/index.php?title=VC-1#Setup_Data_.2F_Sequence_Layer
+#warning we should de-escape it!
+        Large part of this borrowed from VLC
+*/
+bool TsIndexer::decodeVC1Seq(int nb, uint8_t *data,TSVideo &video)
+{
+GetBitContext s;
+int v;
+int consumed;
+    init_get_bits(&s, data, nb*8);
+#define VX(a,b) v=get_bits(&s,a);printf("[VC1] %d "#b"\n",v);consumed+=a;
+    VX(2,profile);
+    VX(3,level);
+
+    VX(2,chroma_format);
+    VX(3,Q_frame_rate_unused);
+    VX(5,Q_bit_unused);
+
+    VX(1,postproc_flag);
+
+    VX(12,coded_width);
+    video.w=v*2+2;
+    VX(12,coded_height);
+    video.h=v*2+2;
+
+    VX(1,pulldown_flag);
+    VX(1,interlaced_flag);
+    vc1Context.interlaced=v;
+    VX(1,frame_counter_flag);
+
+    VX(1,interpolation_flag);
+    vc1Context.interpolate=v;
+
+    VX(1,reserved_bit);
+    VX(1,psf);
+
+    VX(1,display_extension);
+    if(v)
+    {
+         VX(14,display_extension_coded_width);
+         VX(14,display_extension_coded_height);
+         VX(1,aspect_ratio_flag);
+     
+
+         if(v)
+         {
+                VX(4,aspect_ratio);
+                switch(v)
+                {
+                    case 15: video.ar=(get_bits(&s,8)<<16)+get_bits(&s,8);
+                             break;
+                    default:
+                             video.ar=(VC1_ar[v][0]<<16)+(VC1_ar[v][1]<<16);
+                             break;
+                }
+                printf("[VC1] Aspect ratio %d x %d\n",video.ar>>8,video.ar&0xff);
+         }
+    }
+    VX(1,frame_rate);
+    if(v)
+    {
+            VX(1,frame_rate32_flag);
+            if(v)
+            {
+                VX(16,frame_rate32);
+                float f=v;
+                f=(f+1)/32;
+                f*=1000;
+                video.fps=(uint32_t)f;
+            }else
+            {
+                float den,num;
+                VX(8,frame_rate_num)
+                switch( v )
+                    {
+                    case 1: num = 24000; break;
+                    case 2: num = 25000; break;
+                    case 3: num = 30000; break;
+                    case 4: num = 50000; break;
+                    case 5: num = 60000; break;
+                    case 6: num = 48000; break;
+                    case 7: num = 72000; break;
+                    }
+                VX(4,frame_rate_den)
+                switch( v )
+                    {
+                    default:
+                    case 1: den = 1000; break;
+                    case 2: den = 1001; break;
+                    }
+
+                float f=num*1000;
+                f/=den;
+                video.fps=(uint32_t)f;
+            }
+    }else
+    {
+        video.fps=25000;
+    }
+    if(consumed>nb*8) 
+    {
+        ADM_error("Stored %d bits, consumed %d\n",nb*8,consumed);
+        ADM_assert(0);
+    }
+    return true;
+
+}
 /********************************************************************************************/
 /********************************************************************************************/
 /********************************************************************************************/



From mean at mail.berlios.de  Thu Jun 24 19:53:52 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:52 +0200
Subject: [Avidemux-svn-commit] r6396 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils:
	include src
Message-ID: <201006241753.o5OHrqfm013682@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:51 +0200 (Thu, 24 Jun 2010)
New Revision: 6396

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_codecType.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp
Log:
[core] Add vc1 fourcc check

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_codecType.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_codecType.h	2010-06-24 17:53:50 UTC (rev 6395)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_codecType.h	2010-06-24 17:53:51 UTC (rev 6396)
@@ -22,6 +22,7 @@
 bool isDVCompatible     (uint32_t fourcc);
 bool isVP6Compatible    (uint32_t fourcc);
 bool isMpeg12Compatible (uint32_t fourcc);
+bool isVC1Compatible    (uint32_t fourcc);
 
 #endif
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp	2010-06-24 17:53:50 UTC (rev 6395)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp	2010-06-24 17:53:51 UTC (rev 6396)
@@ -113,6 +113,22 @@
 #undef CHECK
 }
 /**
+    \fn isVC1Compatible
+*/
+bool isVC1Compatible    (uint32_t fourcc)
+{
+
+#define CHECK(x) if(fourCC::check(fourcc,(uint8_t *)x)) \
+						{divx3=1; }
+
+  uint8_t divx3 = 0;
+
+  CHECK ("VC1 ");
+  return divx3;
+
+#undef CHECK
+}
+/**
     \fn isVP6Compatible
 */
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp	2010-06-24 17:53:50 UTC (rev 6395)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp	2010-06-24 17:53:51 UTC (rev 6396)
@@ -52,7 +52,9 @@
   {"SVQ3", CODEC_ID_SVQ3,       true, true},
   {"FFVH", CODEC_ID_FFVHUFF,    true, true},
   {"HFYU", CODEC_ID_HUFFYUV,    true, true},
+  {"VC1 ", CODEC_ID_VC1,        true, true},
 
+
  //{CODEC_ID_FFVHUFF,"FFVH"},
 //    {CODEC_ID_HUFFYUV,"HFYU"},
   //{"MJPB", CODEC_ID_CYUV,       true},



From mean at mail.berlios.de  Thu Jun 24 19:53:53 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:53 +0200
Subject: [Avidemux-svn-commit] r6397 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241753.o5OHrrSJ013693@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:53 +0200 (Thu, 24 Jun 2010)
New Revision: 6397

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[TS/VC1] Better VC1 handling, still need to put sequence Header as extraData

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:51 UTC (rev 6396)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:53 UTC (rev 6397)
@@ -144,7 +144,7 @@
         void                    updateUI(void);
         bool                    decodeSEI(uint32_t nalSize, uint8_t *org,uint32_t *recoveryLength);
         bool                    decodeVC1Seq(int nb, uint8_t *data,TSVideo &video);
-        
+        bool                    decodeVC1Pic(int nb, uint8_t *dataBuffer,uint32_t &frameType,uint32_t &frameStructure);
 public:
                 TsIndexer(listOfTsAudioTracks *tr);
                 ~TsIndexer();
@@ -155,7 +155,23 @@
         bool    writeAudio(void);
         bool    writeSystem(const char *filename,bool append);
         bool    Mark(indexerData *data,dmxPacketInfo *s,uint32_t overRead);
-
+        bool    updatePicStructure(TSVideo &video,indexerData &idata, const uint32_t t)
+                        {
+                                            switch(t)
+                                            {
+                                                case 3: video.frameCount++;
+                                                        idata.picStructure=pictureFrame;
+                                                        break;
+                                                case 1:  idata.picStructure=pictureTopField;
+                                                         video.fieldCount++;
+                                                         break;
+                                                case 2:  idata.picStructure=pictureBottomField;
+                                                         video.fieldCount++;
+                                                         break;
+                                                default: ADM_warning("frame type 0 met, this is illegal\n");
+                                            }
+                                            return true;
+                        }
 };
 /**
       \fn TsIndexer 
@@ -620,19 +636,7 @@
                                             picture_structure=(two)&3;
                                             
                                             //printf("Picture type %02x struct:%x\n",two,picture_structure);
-                                            switch(picture_structure)
-                                            {
-                                                case 3: video.frameCount++;
-                                                        data.picStructure=pictureFrame;
-                                                        break;
-                                                case 1:  data.picStructure=pictureTopField;
-                                                         video.fieldCount++;
-                                                         break;
-                                                case 2:  data.picStructure=pictureBottomField;
-                                                         video.fieldCount++;
-                                                         break;
-                                                default: ADM_warning("frame type 0 met, this is illegal\n");
-                                            }
+                                            updatePicStructure(video,data,picture_structure);
                                         }
                                         default:break;
                                     }
@@ -795,20 +799,26 @@
                     case 0x0D: //  Picture start
                         { 
                           int type;
+                          int consumed;
+                          uint8_t buffer[4];
+                          uint32_t fType,sType;
                           markType update=markNow;
                           if(!seq_found)
                           { 
                                   continue;
                                   printf("[TsIndexer]No sequence start yet, skipping..\n");
-                          }                          
+                          }      
+                          pkt->read(2,buffer);
+                          if(!decodeVC1Pic(2,buffer,fType,sType)) continue;
+                          updatePicStructure(video,data,sType);
                           if(data.state==idx_startAtGopOrSeq) 
                           {
-                                  currentFrameType=type;
+                                  currentFrameType=fType;
                           }else
                             {
-                                  data.frameType=type;
+                                  data.frameType=fType;
                                   pkt->getInfo(&info);
-                                  Mark(&data,&info,0);
+                                  Mark(&data,&info,consumed);
                             }
                             data.state=idx_startAtImage;
                             data.nbPics++;
@@ -959,12 +969,14 @@
     \brief http://wiki.multimedia.cx/index.php?title=VC-1#Setup_Data_.2F_Sequence_Layer
 #warning we should de-escape it!
         Large part of this borrowed from VLC
+        Advanced/High profile only
 */
 bool TsIndexer::decodeVC1Seq(int nb, uint8_t *data,TSVideo &video)
 {
 GetBitContext s;
 int v;
 int consumed;
+    vc1Context.advanced=true;
     init_get_bits(&s, data, nb*8);
 #define VX(a,b) v=get_bits(&s,a);printf("[VC1] %d "#b"\n",v);consumed+=a;
     VX(2,profile);
@@ -1063,6 +1075,66 @@
     return true;
 
 }
+/**
+    \fn decodeVC1Pic
+    \brief Decode info from VC1 picture
+    Borrowed a lot from VLC also
+
+*/
+bool TsIndexer::decodeVC1Pic(int nb, uint8_t *dataBuffer,uint32_t &frameType,uint32_t &frameStructure)
+{
+    GetBitContext s;
+    init_get_bits(&s, dataBuffer, nb*8);
+    frameStructure=3;
+    bool field=false;
+    if(vc1Context.interlaced)
+    {
+        if(get_bits(&s,1))
+        {
+            if(get_bits(&s,1))
+               field=true;
+        }
+    }
+    if(field)
+    {
+            int fieldType=get_bits(&s,3);
+            frameStructure=1; // Top
+            switch(fieldType)
+            {
+                case 0: /* II */
+                case 1: /* IP */
+                case 2: /* PI */
+                    frameType=1;
+                    break;
+                case 3: /* PP */
+                    frameType=2;
+                    break;
+                case 4: /* BB */
+                case 5: /* BBi */
+                case 6: /* BiB */
+                case 7: /* BiBi */
+                    frameType=3;
+                    break;
+
+            }
+    }else
+    {
+                frameStructure=3; // frame
+                if( !get_bits(&s,1))
+                    frameType=2;
+                else if( !get_bits(&s,1))
+                    frameType=3;
+                else if( !get_bits(&s,1))
+                    frameType=1;
+                else if( !get_bits(&s,1))
+                    frameType=3;
+                else
+                    frameType=2;
+
+    }
+
+    return true;
+}
 /********************************************************************************************/
 /********************************************************************************************/
 /********************************************************************************************/

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:53:51 UTC (rev 6396)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:53:53 UTC (rev 6397)
@@ -205,7 +205,11 @@
         {
              _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"H264");
         }else
+        if(!strcmp(type,"VC1"))
         {
+            _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"VC1 ");
+        }else
+        {
             _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"MPEG");
         }
     }else



From mean at mail.berlios.de  Thu Jun 24 19:53:55 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:55 +0200
Subject: [Avidemux-svn-commit] r6398 - in
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers:
	MpegPS MpegTS
Message-ID: <201006241753.o5OHrtXJ013705@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:54 +0200 (Thu, 24 Jun 2010)
New Revision: 6398

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[TS] Handle extraData

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-24 17:53:53 UTC (rev 6397)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_ps.cpp	2010-06-24 17:53:54 UTC (rev 6398)
@@ -211,4 +211,13 @@
     return false;
 }
 
+/**
+        \fn getExtraHeaderData
+*/
+uint8_t  psHeader::getExtraHeaderData(uint32_t *len, uint8_t **data)
+{
+                *len=0; //_tracks[0].extraDataLen;
+                *data=NULL; //_tracks[0].extraData;
+                return true;            
+}
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-24 17:53:53 UTC (rev 6397)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-24 17:53:54 UTC (rev 6398)
@@ -150,7 +150,7 @@
     virtual uint32_t getFlags(uint32_t frame,uint32_t *flags);
     virtual uint8_t  getFrame(uint32_t framenum,ADMCompressedImage *img);
     virtual uint64_t getTime(uint32_t frame);
-            uint8_t  getExtraHeaderData(uint32_t *len, uint8_t **data);
+//            uint8_t  getExtraHeaderData(uint32_t *len, uint8_t **data);
     virtual uint64_t getVideoDuration(void);
     virtual uint8_t  getFrameSize(uint32_t frame,uint32_t *size) ;
 virtual   bool       getPtsDts(uint32_t frame,uint64_t *pts,uint64_t *dts);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:53 UTC (rev 6397)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:54 UTC (rev 6398)
@@ -59,10 +59,12 @@
                         { 0, 0}, { 1, 1}, {12,11}, {10,11}, {16,11}, {40,33},
                         {24,11}, {20,11}, {32,11}, {80,33}, {18,11}, {15,11},
                         {64,33}, {160,99},{ 0, 0}, { 0, 0}};
+
+#define VC1_SEQ_SIZE 29
 class TSVideo
 {
 public:
-    TSVideo(void) {w=h=fps=interlaced=ar=pid=frameCount=fieldCount=0;}
+    TSVideo(void) {w=h=fps=interlaced=ar=pid=frameCount=fieldCount=0;extraDataLength=0;}
     uint32_t w;
     uint32_t h;
     uint32_t fps;
@@ -71,6 +73,8 @@
     uint32_t pid;
     uint32_t frameCount;
     uint32_t fieldCount;
+    uint32_t extraDataLength;
+    uint8_t  extraData[VC1_SEQ_SIZE];
 };
 
 typedef enum
@@ -764,7 +768,7 @@
           switch(startCode)
                   {
                   case 0x0f: // sequence start
-                          uint8_t vc1Seq[8];
+                          uint8_t vc1Seq[VC1_SEQ_SIZE];
                           uint8_t h;
                           if(seq_found)
                           {
@@ -777,9 +781,11 @@
                           if(!h&0x80) // simple/main profile
                                 continue;
                           vc1Seq[0]=h;
-#define VC1_SEQ_SIZE 16
+
                           pkt->read(VC1_SEQ_SIZE-1,vc1Seq+1);
                           if(!decodeVC1Seq(VC1_SEQ_SIZE,vc1Seq,video)) continue;
+                          video.extraDataLength=VC1_SEQ_SIZE;
+                          memcpy(video.extraData,vc1Seq,VC1_SEQ_SIZE);
                           seq_found=1;
                           // Hi Profile
                           printf("[VC1] Found seq start with %d x %d video\n",(int)video.w,(int)video.h);
@@ -918,6 +924,13 @@
     qfprintf(index,"Interlaced=%d\n",video->interlaced);
     qfprintf(index,"AR=%d\n",video->ar);
     qfprintf(index,"Pid=%d\n",video->pid);
+    if(video->extraDataLength)
+    {
+        qfprintf(index,"ExtraData=%d ",video->extraDataLength);
+        for(int i=0;i<video->extraDataLength;i++)
+            qfprintf(index," %02x",video->extraData[i]);
+        qfprintf(index,"\n");
+    }
  switch(trkType)
     {
         case ADM_TS_MPEG2: qfprintf(index,"VideoCodec=Mpeg2\n");break;;

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:53:53 UTC (rev 6397)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:53:54 UTC (rev 6398)
@@ -20,9 +20,11 @@
 #include "DIA_coreToolkit.h"
 #include "ADM_indexFile.h"
 #include "ADM_ts.h"
+#include "ADM_coreUtils.h"
 
 #include <math.h>
 #define TS_MAX_LINE 10000
+extern uint8_t  mk_hex(uint8_t a, uint8_t b);;
 /**
         \fn readIndex
         \brief Read the [video] section of the index file
@@ -216,6 +218,31 @@
     {
        _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"MPEG");
     }
+
+    char *extra=index->getAsString("ExtraData");
+    if(extra)
+    {
+            vector<string> result;
+            // From is int=nb, hex hex
+            ADM_splitString(string(" "), string(extra), result);
+            if(result.size())
+            {
+                int nb=atoi(result[0].c_str());
+                printf("[tsDemux] Found %d bytes of video extra data\n",nb);
+                if(nb)
+                {
+                    _videoExtraLen=nb;
+                    _videoExtraData=new uint8_t[nb];
+                    ADM_assert(nb+1==result.size());
+                    for(int i=0;i<nb;i++)
+                    {
+                        const char *m=result[i+1].c_str();
+                        _videoExtraData[i]=mk_hex(m[0],m[1]);
+                    }
+                }
+            }
+    }
+
     videoPid=index->getAsUint32("Pid");
     if(!videoPid)
     {



From mean at mail.berlios.de  Thu Jun 24 19:53:56 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:56 +0200
Subject: [Avidemux-svn-commit] r6399 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils:
	include src
Message-ID: <201006241753.o5OHruu8013716@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:56 +0200 (Thu, 24 Jun 2010)
New Revision: 6399

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
Log:
[Core] Add split function

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h	2010-06-24 17:53:54 UTC (rev 6398)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h	2010-06-24 17:53:56 UTC (rev 6399)
@@ -5,13 +5,18 @@
 */
 #ifndef ADM_CORE_UTILS_H
 #define ADM_CORE_UTILS_H
-
+#include <vector>
+#include <string>
+using std::string;
+using std::vector;
 bool        ADM_findMpegStartCode(uint8_t *start, uint8_t *end,uint8_t *outstartcode,uint32_t *offset);
 char        *ADM_escape(const ADM_filename *incoming);
 uint32_t    ADM_computeBitrate(uint32_t fps1000, uint32_t nbFrame, uint32_t sizeInMB);
 uint32_t    ADM_UsecFromFps1000(uint32_t fps1000);
 uint32_t    ADM_Fps1000FromUs(uint64_t us);
+bool        ADM_splitString(const string &separator, const string &source, vector<string>& result);
 
 
 
-#endif
\ No newline at end of file
+
+#endif

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2010-06-24 17:53:54 UTC (rev 6398)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2010-06-24 17:53:56 UTC (rev 6399)
@@ -24,8 +24,8 @@
 
 #include "ADM_bitmap.h"
 #include "avidemutils.h"
+#include "ADM_coreUtils.h"
 
-
 #define QT_TR_NOOP(x) x
 uint8_t  mk_hex(uint8_t a, uint8_t b);
 char    *ADM_escape(const ADM_filename *incoming);
@@ -408,5 +408,27 @@
 
 	return (a1 << 4) + b1;
 }
+/**
+        \fn ADM_splitString
+        \brief convert a string in a list using a separator
+*/
+bool        ADM_splitString(const string &separator, const string &source, vector<string>& result)
+{
+string splitted=source;
+result.clear();
 
+    string::size_type next = splitted.find(separator);
+    while(next != string::npos)
+    {
+        string chunk=splitted.substr(0, next);
+        if(chunk.length())
+                    result.push_back(chunk);
+        splitted = splitted.substr(next + 1);
+        next = splitted.find(separator);
+    }
+    if(splitted.length())
+            result.push_back(splitted);
+    return true;
+}
+
 //EOF



From mean at mail.berlios.de  Thu Jun 24 19:53:57 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:57 +0200
Subject: [Avidemux-svn-commit] r6400 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include
Message-ID: <201006241753.o5OHrv0C013726@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:57 +0200 (Thu, 24 Jun 2010)
New Revision: 6400

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp
Log:
[TS] Handle extraData

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp	2010-06-24 17:53:56 UTC (rev 6399)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxer/include/ADM_coreDemuxerMpegTemplate.cpp	2010-06-24 17:53:57 UTC (rev 6400)
@@ -145,15 +145,6 @@
     return x;
 }
 
-/**
-        \fn getExtraHeaderData
-*/
-uint8_t  MY_CLASS::getExtraHeaderData(uint32_t *len, uint8_t **data)
-{
-                *len=0; //_tracks[0].extraDataLen;
-                *data=NULL; //_tracks[0].extraData;
-                return true;            
-}
 
 /**
       \fn getFrameSize
@@ -183,7 +174,7 @@
 */
 bool    MY_CLASS::setPtsDts(uint32_t frame,uint64_t pts,uint64_t dts)
 {
-      if(frame>=ListOfFrames.size()) return false;
+    if(frame>=ListOfFrames.size()) return false;
     dmxFrame *pk=ListOfFrames[frame];
 
     pk->dts=dts;



From mean at mail.berlios.de  Thu Jun 24 19:53:58 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:53:58 +0200
Subject: [Avidemux-svn-commit] r6401 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241753.o5OHrw1x013736@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:53:58 +0200 (Thu, 24 Jun 2010)
New Revision: 6401

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS/VC1] Properly initialize extraData for VC1

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:57 UTC (rev 6400)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:53:58 UTC (rev 6401)
@@ -784,8 +784,16 @@
 
                           pkt->read(VC1_SEQ_SIZE-1,vc1Seq+1);
                           if(!decodeVC1Seq(VC1_SEQ_SIZE,vc1Seq,video)) continue;
-                          video.extraDataLength=VC1_SEQ_SIZE;
-                          memcpy(video.extraData,vc1Seq,VC1_SEQ_SIZE);
+                          video.extraDataLength=VC1_SEQ_SIZE+8;
+                          memcpy(video.extraData+4,vc1Seq,VC1_SEQ_SIZE);
+                          video.extraData[0]=0;
+                          video.extraData[1]=0;
+                          video.extraData[2]=1;
+                          video.extraData[3]=0xf;
+                          video.extraData[VC1_SEQ_SIZE+4+0]=0;
+                          video.extraData[VC1_SEQ_SIZE+4+1]=0;
+                          video.extraData[VC1_SEQ_SIZE+4+2]=1;
+                          video.extraData[VC1_SEQ_SIZE+4+3]=0xfE;
                           seq_found=1;
                           // Hi Profile
                           printf("[VC1] Found seq start with %d x %d video\n",(int)video.w,(int)video.h);



From mean at mail.berlios.de  Thu Jun 24 19:54:00 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:00 +0200
Subject: [Avidemux-svn-commit] r6402 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg:
	include src
Message-ID: <201006241754.o5OHs0Rp013751@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:00 +0200 (Thu, 24 Jun 2010)
New Revision: 6402

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
Log:
[dmx] Cleanup/simplify

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h	2010-06-24 17:53:58 UTC (rev 6401)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/include/dmx_io.h	2010-06-24 17:54:00 UTC (rev 6402)
@@ -17,6 +17,8 @@
 #ifndef FPARSER_
 #define FPARSER_
 #define DMX_BUFFER 1024*100
+#include <vector>
+using std::vector;
 
 /*
         _off is the logical offset in the file
@@ -31,7 +33,22 @@
         FP_DONT_APPEND=2,
         FP_APPEND=3
 }FP_TYPE;
-
+/**
+    \class fdIo
+    \brief Describe one file
+*/
+class fdIo
+{
+public:
+        FILE        *file;
+        uint64_t    fileSize;
+        uint64_t    fileSizeCumul;// Cumulative side from beginning =offset for the 1st byte in the file
+        fdIo() {file=NULL;fileSize=0;fileSizeCumul=0;}
+};
+/**
+    \class fileParser
+    \brief helper class to read one logical file over several physical ones
+*/
  class fileParser
 {
         private:
@@ -40,10 +57,7 @@
             uint64_t _off;              // Absolute offset
             
             uint32_t _curFd;        
-            uint32_t _nbFd;
-            FILE      **_fd;
-            uint64_t *_sizeFd;          // Filesize for file X
-            uint64_t *_sizeFdCumul;     // Cumulative side from beginning =offset for the 1st byte in the file
+            vector <fdIo> listOfFd;
             uint64_t _head,_tail,_size;       
            
         public:

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2010-06-24 17:53:58 UTC (rev 6401)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreDemuxerMpeg/src/dmx_io.cpp	2010-06-24 17:54:00 UTC (rev 6402)
@@ -1,10 +1,8 @@
-/***************************************************************************
-                          dmx_io.cpp  -  description
-                             -------------------
+/** *************************************************************************
+    \file    dmx_io.cpp
+    \brief   handle several files as one
+    \author  mean (c) 2005/2010 fixounet at free.fr
 
-    copyright            : (C) 2005 by mean
-    email                : fixounet at free.fr
-
     This just handles mpeg sync search and little endian/big endin integer reading
     It also handle multiple files seen as one logical file and buffering
         to speed up ios
@@ -28,10 +26,7 @@
 
 fileParser::fileParser( void )
 {
-                _fd=NULL;
-                _sizeFd=NULL;
                 _off=0;
-                _nbFd=0;
                 _curFd=0;
                 _buffer=new uint8_t[DMX_BUFFER];
                 _head=_tail=0;
@@ -40,22 +35,18 @@
 
 fileParser::~fileParser()
 {
-        if(_nbFd)
+        int nb=listOfFd.size();
+        for(int i=0;i<nb;i++)
         {
-                 for(uint32_t i=0;i<_nbFd;i++)
-                 {
-                                if(_fd[i])
-                                        fclose(_fd[i]);
-                 }
-                delete [] _fd;
-                delete [] _sizeFd;
-                delete [] _sizeFdCumul;
-
-
+                if(listOfFd[i].file)
+                {
+                    fclose(listOfFd[i].file);
+                    listOfFd[i].file=NULL;
+                }
         }
+        listOfFd.clear();
         if(_buffer) delete [] _buffer;
         _buffer=NULL;
-        _nbFd=0;
 }
 
 /*
@@ -76,8 +67,6 @@
         uint8_t last_followup = 0;          // indicates last follow-up (by number: 99)
         uint8_t count = 0;                  // number of follow-ups
 
-        FILE **buffer_fd = NULL;            // _fd buffer
-        uint64_t *buffer_sizeFd = NULL;     // _sizeFd buffer
 
         int i = 0;                          // index (general use)
 
@@ -103,24 +92,22 @@
         // no number sequence
         if( decimals == 0 )
         {
+                fdIo newFd;
                 aprintf( "\nSimple loading: \n" );
                 delete [] followup;
-                _nbFd = 1;
                 _curFd = 0;
-                _fd = new FILE * [_nbFd];
-                _sizeFd = new uint64_t [_nbFd];
-                _sizeFdCumul = new uint64_t [_nbFd];
-
+                FILE *f=NULL;
                 // open file
-                if(! (_fd[0] = ADM_fopen(filename, "rb")) )
+                if(! (f = ADM_fopen(filename, "rb")) )
                   { return 0; }
-
+                newFd.file=f;
                 // calculate file-size
-                fseeko( _fd[0], 0, SEEK_END );
-                _sizeFd[0] = ftello( _fd[0] );
-                fseeko( _fd[0], 0, SEEK_SET );
-                _sizeFdCumul[0]=0;
-                _size=_sizeFd[0];
+                fseeko( f, 0, SEEK_END );
+                 newFd.fileSize = ftello( f );
+                fseeko( f, 0, SEEK_SET );
+                 newFd.fileSizeCumul=0;
+                _size=newFd.fileSize;
+                listOfFd.push_back(newFd);
                 aprintf( " file: %s, size: %"LLU"\n", filename, _sizeFd[0] );
                 aprintf( " found 1 files \n" );
                 aprintf( "Done \n" );
@@ -151,11 +138,10 @@
                 // -----
                 uint32_t tabSize;
 
-                tabSize=(uint32_t)pow(10,decimals);
-                buffer_fd = new FILE * [tabSize];
-                buffer_sizeFd = new uint64_t [tabSize];
-
+            
                 aprintf( "\nAuto adding: \n" );
+                _curFd = 0;
+                uint64_t total=0;
                 while( last_followup == 0 )
                 {
                         strcpy( followup, left );
@@ -163,8 +149,8 @@
                         strcat( followup, right );
 
                         // open file
-                        buffer_fd[count] = ADM_fopen(followup, "rb");
-                        if(! buffer_fd[count] )
+                        FILE *f= ADM_fopen(followup, "rb");
+                        if(!f)
                         {
                                 // we need at least one file!
                                 if( first_followup == 1 )
@@ -174,11 +160,16 @@
                         }
 
                         // calculate file-size
-                        fseeko( buffer_fd[count], 0, SEEK_END );
-                        buffer_sizeFd[count] = ftello( buffer_fd[count] );
-                        fseeko( buffer_fd[count], 0, SEEK_SET );
+                        fdIo myFd;
+                        myFd.file=f;
+                        fseeko(f, 0, SEEK_END );
+                        myFd.fileSize = ftello(f );
+                        myFd.fileSizeCumul = total;
+                        fseeko( f, 0, SEEK_SET );
+                        total+=  myFd.fileSize;
 
-                        aprintf( " file %d: %s, size: %"LLU"\n", (count + 1), followup, buffer_sizeFd[count] );
+                        aprintf( " file %d: %s, size: %"LLU"\n", (count + 1), followup,
+                                                    myFd.fileSize );
 
                         // increase number
                         number[decimals - 1] = number[decimals - 1] + 1;
@@ -194,31 +185,17 @@
                         }
 
                         first_followup = 0;
+                        listOfFd.push_back(myFd);
                         count++;
                 } // while( last_followup == 0 )
 
-                // copy from buffer
-                _nbFd = count;
-                _curFd = 0;
-                _fd = new FILE * [_nbFd];
-                _sizeFd = new uint64_t [_nbFd];
-                _sizeFdCumul = new uint64_t [_nbFd];
-                uint64_t total=0;
-                for( i = 0; i < count; i++ )
-                {
-                        _fd[i] = buffer_fd[i];
-                        _sizeFd[i] = buffer_sizeFd[i];
-                        _sizeFdCumul[i]=total;
-                        total+=buffer_sizeFd[i];
-                }
+              
                 _size=total;
                 // clean up
                 delete [] followup;
                 delete [] left;
                 delete [] number;
                 delete [] right;
-                delete [] buffer_fd;
-                delete [] buffer_sizeFd;
                 if(*multi==FP_PROBE)
                 {
                         if(count>1)
@@ -257,12 +234,14 @@
                                return 0;
                         }
                 _off+=jmp;  // final location
-                for(uint32_t i=_curFd;i<_nbFd;i++)
+                int nb=listOfFd.size();
+                for(uint32_t i=_curFd;i<nb;i++)
                 {
-                        if(_off>=_sizeFdCumul[i] && _off<(_sizeFdCumul[i]+_sizeFd[i]))
+                        if(_off>=listOfFd[i].fileSizeCumul && _off<(listOfFd[i].fileSizeCumul
+                                                                    +listOfFd[i].fileSize))
                         {
                                 _curFd=i;
-                                fseeko(_fd[i],_off-_sizeFdCumul[i],SEEK_SET);
+                                fseeko(listOfFd[i].file,_off-listOfFd[i].fileSizeCumul,SEEK_SET);
                                 _head=_tail=_off;
                                 return 1;
                         }
@@ -280,13 +259,14 @@
                         _off=o;
                         return 1;
                 }
-                for(uint32_t i=0;i<_nbFd;i++)
+                int nb=listOfFd.size();
+                for(uint32_t i=0;i<nb;i++)
                         {
-                                if( (o>=_sizeFdCumul[i]) && o<(_sizeFdCumul[i]+_sizeFd[i]))
+                                if( (o>=listOfFd[i].fileSizeCumul) && o<(listOfFd[i].fileSizeCumul+listOfFd[i].fileSize))
                                         {
                                                         _curFd=i;
                                                         _off=o;
-                                                        fseeko(_fd[_curFd],_off-_sizeFdCumul[i],SEEK_SET);
+                                                        fseeko(listOfFd[_curFd].file,_off-listOfFd[i].fileSizeCumul,SEEK_SET);
                                                         _head=_tail=_off; // Flush
                                                   return 1;
                                         }
@@ -306,7 +286,7 @@
         // preload
         if((4+_off)>=_size)
         {
-                printf("Dmx IO: End of file met (%"LLU" / %"LLU" seg:%"LU")\n",_off,_size,_nbFd);
+                printf("Dmx IO: End of file met (%"LLU" / %"LLU" seg:%u)\n",_off,_size,(unsigned int)listOfFd.size());
                 return 0;
         }
         hnt=(read8i()<<16) + (read8i()<<8) +read8i();
@@ -318,7 +298,7 @@
                 val=read8i();
                 hnt+=val;
                 hnt&=0xffffff;
-                if(_curFd==_nbFd-1)
+                if(_curFd==listOfFd.size()-1)
                 {
                                 if((4+_off)>=_size) return 0;
                 }
@@ -339,7 +319,7 @@
         // preload
         if((5+_off)>=_size)
         {
-                printf("Dmx IO: End of file met (%"LLU" / %"LLU" seg:%"LU")\n",_off,_size,_nbFd);
+                printf("Dmx IO: End of file met (%"LLU" / %"LLU" seg:%u)\n",_off,_size,(unsigned int)listOfFd.size());
                 return 0;
         }
         hnt=(read8i()<<24)+(read8i()<<16) + (read8i()<<8) +read8i();
@@ -350,7 +330,7 @@
                 hnt<<=8;
                 val=read8i();
                 hnt+=val;
-                if(_curFd==_nbFd-1)
+                if(_curFd==listOfFd.size()-1)
                 {
                                 if((5+_off)>=_size) return 0;
                 }
@@ -418,27 +398,27 @@
 
         // Reload ?
         // What is left in that file ?
-        mx=_sizeFd[_curFd]+_sizeFdCumul[_curFd]-_off;
+        mx=listOfFd[_curFd].fileSize+listOfFd[_curFd].fileSizeCumul-_off;
         // Do we need more, if so jump over it
         if(len>mx)
         {
-                fread(buffer,mx,1,_fd[_curFd]);
+                fread(buffer,mx,1,listOfFd[_curFd].file);
                 len-=mx;
                 _off+=mx;
                 buffer+=mx;
                 _head=_tail=_off;
                 _curFd++;
-                if(_curFd>=_nbFd) return 0;
-                fseeko(_fd[_curFd],0,SEEK_SET);
+                if(_curFd>=listOfFd.size()) return 0;
+                fseeko(listOfFd[_curFd].file,0,SEEK_SET);
                 return mx+read32(len,buffer);
         }
         // Read what is available in file, store leftover in the buffer
-        fread(buffer,len,1,_fd[_curFd]);
+        fread(buffer,len,1,listOfFd[_curFd].file);
         _off+=len;
         // available in that file
         mx-=len;
         if(mx>DMX_BUFFER) mx=DMX_BUFFER;
-        fread(_buffer,mx,1,_fd[_curFd]);
+        fread(_buffer,mx,1,listOfFd[_curFd].file);
         _head=_off;
         _tail=_head+mx;
 



From mean at mail.berlios.de  Thu Jun 24 19:54:02 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:02 +0200
Subject: [Avidemux-svn-commit] r6403 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241754.o5OHs2SU013761@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:01 +0200 (Thu, 24 Jun 2010)
New Revision: 6403

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS] sort of nearly workish vc1 in TS demuxer

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-24 17:54:00 UTC (rev 6402)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-24 17:54:01 UTC (rev 6403)
@@ -26,7 +26,7 @@
 
 
 
-
+extern uint32_t TS_unescapeH264(uint32_t len,uint8_t *in, uint8_t *out);
 uint32_t ADM_UsecFromFps1000(uint32_t fps1000);
 
 /**
@@ -218,6 +218,7 @@
     interlaced=false;
     lastFrame=0xffffffff;
     videoPid=0;
+    videoNeedEscaping=false;
     
 }
 /**
@@ -235,6 +236,14 @@
         \fn getFrame
 */
 
+#define UNESCAPE() if(r==true && videoNeedEscaping)  \
+                    {\
+                        uint32_t l=img->dataLength;\
+                        uint32_t l2=TS_unescapeH264(l,img->data, img->data);\
+                        if(l!=l2)\
+                            memset(img->data+l2,0,l-l2);\
+                    }
+
 uint8_t  tsHeader::getFrame(uint32_t frame,ADMCompressedImage *img)
 {
     if(frame>=ListOfFrames.size()) return 0;
@@ -250,10 +259,11 @@
              img->demuxerPts=pk->pts;
              //printf("[>>>] %d:%02x %02x %02x %02x\n",frame,img->data[0],img->data[1],img->data[2],img->data[3]);
              getFlags(frame,&(img->flags));
+             UNESCAPE();
              return r;
     }
     // Intra ?
-    if(pk->type==1)
+    if(pk->type==1 || pk->type==4)
     {
         if(!tsPacket->seek(pk->startAt,pk->index)) return false;
          bool r=tsPacket->read(pk->len,img->data);
@@ -264,6 +274,7 @@
              getFlags(frame,&(img->flags));
              //printf("[>>>] %d:%02x %02x %02x %02x\n",frame,img->data[0],img->data[1],img->data[2],img->data[3]);
              lastFrame=frame;
+             UNESCAPE();
              return r;
 
     }
@@ -301,6 +312,7 @@
          img->demuxerPts=pk->pts;
          //printf("[>>>] %d:%02x %02x %02x %02x\n",frame,img->data[0],img->data[1],img->data[2],img->data[3]);
          getFlags(frame,&(img->flags));
+         UNESCAPE();
          return r;
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:54:00 UTC (rev 6402)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:54:01 UTC (rev 6403)
@@ -272,9 +272,10 @@
         ui->update( (uint32_t)pos);
 }
 /**
-
+    \fn Unescape stream
+    \brief H264 and VC1 in TS escape
 */
-static uint32_t unescapeH264(uint32_t len,uint8_t *in, uint8_t *out)
+uint32_t TS_unescapeH264(uint32_t len,uint8_t *in, uint8_t *out)
 {
   uint32_t outlen=0;
   uint8_t *tail=in+len;
@@ -288,6 +289,7 @@
         out+=2;
         outlen+=2;
         in+=3; 
+        continue;
       }
       *out++=*in++;
       outlen++;
@@ -309,7 +311,7 @@
 {
     GetBitContext s;
     uint8_t *payload=(uint8_t *)alloca(nalSize+16);
-    nalSize=unescapeH264(nalSize,org,payload);
+    nalSize=TS_unescapeH264(nalSize,org,payload);
     init_get_bits(&s, payload, nalSize*8);
     while( get_bits_count(&s)<(nalSize-4)*8)
     {
@@ -486,7 +488,7 @@
                    
                         pkt->read(NON_IDR_PRE_READ,bufr);
                         // unescape...
-                        unescapeH264(NON_IDR_PRE_READ,bufr,header);
+                        TS_unescapeH264(NON_IDR_PRE_READ,bufr,header);
                         //
                         init_get_bits(&s, header, NON_IDR_PRE_READ*8);
                         int first_mb_in_slice,slice_type;
@@ -775,17 +777,16 @@
                                   pkt->forward(4);  // Ignore
                                   continue;
                           }
-                          //
-                          
+                          // Verify it is high/advanced profile
                           h=pkt->readi8();
                           if(!h&0x80) // simple/main profile
                                 continue;
                           vc1Seq[0]=h;
-
                           pkt->read(VC1_SEQ_SIZE-1,vc1Seq+1);
                           if(!decodeVC1Seq(VC1_SEQ_SIZE,vc1Seq,video)) continue;
                           video.extraDataLength=VC1_SEQ_SIZE+8;
                           memcpy(video.extraData+4,vc1Seq,VC1_SEQ_SIZE);
+                            // Add info so that ffmpeg is happy
                           video.extraData[0]=0;
                           video.extraData[1]=0;
                           video.extraData[2]=1;
@@ -798,14 +799,12 @@
                           // Hi Profile
                           printf("[VC1] Found seq start with %d x %d video\n",(int)video.w,(int)video.h);
                           printf("[VC1] FPS : %d\n",(int)video.fps);
-                          //video.ar = (val >> 4) & 0xf;
-                          //video.fps= FPS[val & 0xf];
                           writeVideo(&video,ADM_TS_VC1);
                           writeAudio();
                           qfprintf(index,"[Data]");
                           pkt->getInfo(&info);
-                          data.frameType=1;
-                          Mark(&data,&info,8);
+                          data.frameType=1; // Force first frame to be intra
+                          Mark(&data,&info,VC1_SEQ_SIZE);
                           data.state=idx_startAtGopOrSeq;
                           continue;
 
@@ -813,7 +812,6 @@
                     case 0x0D: //  Picture start
                         { 
                           int type;
-                          int consumed;
                           uint8_t buffer[4];
                           uint32_t fType,sType;
                           markType update=markNow;
@@ -832,7 +830,7 @@
                             {
                                   data.frameType=fType;
                                   pkt->getInfo(&info);
-                                  Mark(&data,&info,consumed);
+                                  Mark(&data,&info,2);
                             }
                             data.state=idx_startAtImage;
                             data.nbPics++;



From mean at mail.berlios.de  Thu Jun 24 19:54:03 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:03 +0200
Subject: [Avidemux-svn-commit] r6404 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241754.o5OHs39F013771@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:03 +0200 (Thu, 24 Jun 2010)
New Revision: 6404

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[TS] Mark video stream that needs to be escaped

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-24 17:54:01 UTC (rev 6403)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.h	2010-06-24 17:54:03 UTC (rev 6404)
@@ -118,6 +118,7 @@
     uint64_t        timeConvert(uint64_t x);
     bool            updatePtsDts(void);
     bool            updateIdr(void);
+    bool            videoNeedEscaping;
 protected:
     vector <ADM_tsTrackDescriptor *>listOfAudioTracks;
     uint32_t        videoPid;             

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:54:01 UTC (rev 6403)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:54:03 UTC (rev 6404)
@@ -210,6 +210,7 @@
         if(!strcmp(type,"VC1"))
         {
             _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"VC1 ");
+            videoNeedEscaping=true;
         }else
         {
             _videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"MPEG");



From mean at mail.berlios.de  Thu Jun 24 19:54:05 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:05 +0200
Subject: [Avidemux-svn-commit] r6405 - in branches/avidemux_2.6_branch_mean:
	avidemux/common/ADM_videoCodec/src avidemux_core/ADM_coreUtils/src
Message-ID: <201006241754.o5OHs47s013781@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:04 +0200 (Thu, 24 Jun 2010)
New Revision: 6405

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp
Log:
[VDPAU] Add vc1 as a possible target (disabled)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2010-06-24 17:54:03 UTC (rev 6404)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_ffmpeg_vdpau.cpp	2010-06-24 17:54:04 UTC (rev 6405)
@@ -233,10 +233,17 @@
         }else if(isMpeg12Compatible(fcc))
         {
             vdpauType=ADM_VDPAU_MPEG2;
+        }else if(isVC1Compatible(fcc))
+        {
+            vdpauType=ADM_VDPAU_VC1;
         }else ADM_assert(0);
         int vdpDecoder;
         switch(vdpauType)
         {
+            case ADM_VDPAU_VC1  : vdpDecoder=VDP_DECODER_PROFILE_VC1_ADVANCED;
+                                  WRAP_OpenByName(vc1_vdpau,CODEC_ID_VC1);
+                                  break;
+
             case ADM_VDPAU_H264 : vdpDecoder=VDP_DECODER_PROFILE_H264_HIGH;
                                   WRAP_OpenByName(h264_vdpau,CODEC_ID_H264);
                                   break;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-24 17:54:03 UTC (rev 6404)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-24 17:54:04 UTC (rev 6405)
@@ -43,14 +43,15 @@
 decoders *ADM_getDecoder (uint32_t fcc, uint32_t w, uint32_t h, uint32_t extraLen, 
             uint8_t * extraData,uint32_t bpp)
 {
+  ADM_info("\nSearching decoder in plugins\n");
   decoders *fromPlugin=tryCreatingVideoDecoder(w,h,fcc,extraLen,extraData,bpp);
   if(fromPlugin) return fromPlugin;
-
-  ADM_info("Searching decoder in coreVideoCodec(%d x %d, extradataSize:%d)...\n",w,h,extraLen);
-  if (isH264Compatible (fcc) || isMpeg12Compatible(fcc))
+#if defined(USE_VDPAU) 
+  ADM_info("Searching decoder in vdpau (%d x %d, extradataSize:%d)...\n",w,h,extraLen);
+  if (isH264Compatible (fcc) || isMpeg12Compatible(fcc) || 0*isVC1Compatible(fcc))
     {
-#if defined(USE_VDPAU) 
-        if(vdpauUsable()==true)
+        ADM_info("This is vdpau compatible\n");
+        if(true==vdpauUsable())
         {
             decoderFFVDPAU *dec=new decoderFFVDPAU (w,h,fcc,extraLen,extraData,bpp);
             if(dec->initializedOk()==true)
@@ -60,10 +61,10 @@
                 GUI_Error_HIG("VDPAU","Cannot initialize VDPAU, make sure it is not already used by another application.\nSwitching to default decoder.");
                 delete dec;
             }
-        }
-        
+        }else ADM_info("Vdpau is not active\n");
+    }        
 #endif // VDPAU
-    }
+
 // VPX
 #if defined(USE_VPX)
     if(fourCC::check(fcc,(const uint8_t *)"VP8 "))
@@ -75,6 +76,7 @@
         delete dec;
     }
 #endif // VPX
+    ADM_info("Searching decoder in coreVideoCodec(%d x %d, extradataSize:%d)...\n",w,h,extraLen);
     return ADM_coreCodecGetDecoder(fcc,w,h,extraLen,extraData,bpp);
 }
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp	2010-06-24 17:54:03 UTC (rev 6404)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_codecType.cpp	2010-06-24 17:54:04 UTC (rev 6405)
@@ -124,6 +124,7 @@
   uint8_t divx3 = 0;
 
   CHECK ("VC1 ");
+  CHECK ("WVC1");
   return divx3;
 
 #undef CHECK



From mean at mail.berlios.de  Thu Jun 24 19:54:06 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:06 +0200
Subject: [Avidemux-svn-commit] r6406 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241754.o5OHs6ib013793@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:06 +0200 (Thu, 24 Jun 2010)
New Revision: 6406

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
Log:
[TS/VC1] Disable escaping

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-24 17:54:04 UTC (rev 6405)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_ts.cpp	2010-06-24 17:54:06 UTC (rev 6406)
@@ -236,7 +236,7 @@
         \fn getFrame
 */
 
-#define UNESCAPE() if(r==true && videoNeedEscaping)  \
+#define UNESCAPE() if(r==true && 0 && videoNeedEscaping)  \
                     {\
                         uint32_t l=img->dataLength;\
                         uint32_t l2=TS_unescapeH264(l,img->data, img->data);\



From mean at mail.berlios.de  Thu Jun 24 19:54:07 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:07 +0200
Subject: [Avidemux-svn-commit] r6407 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src
Message-ID: <201006241754.o5OHs7Aq013815@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:07 +0200 (Thu, 24 Jun 2010)
New Revision: 6407

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
Log:
[Qt] VPX is now a plugin

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-24 17:54:06 UTC (rev 6406)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoCodec/src/ADM_videoCodec.cpp	2010-06-24 17:54:07 UTC (rev 6407)
@@ -64,18 +64,6 @@
         }else ADM_info("Vdpau is not active\n");
     }        
 #endif // VDPAU
-
-// VPX
-#if defined(USE_VPX)
-    if(fourCC::check(fcc,(const uint8_t *)"VP8 "))
-    {
-        decoderVPX *dec=new decoderVPX(w,h,fcc,extraLen,extraData,bpp);
-        if(dec->initializedOk())
-            return (decoders *) (dec);
-        GUI_Error_HIG("VPX","Cannot initialize libvpx.");
-        delete dec;
-    }
-#endif // VPX
     ADM_info("Searching decoder in coreVideoCodec(%d x %d, extradataSize:%d)...\n",w,h,extraLen);
     return ADM_coreCodecGetDecoder(fcc,w,h,extraLen,extraData,bpp);
 }



From mean at mail.berlios.de  Thu Jun 24 19:54:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:08 +0200
Subject: [Avidemux-svn-commit] r6408 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241754.o5OHs8Dr013825@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:08 +0200 (Thu, 24 Jun 2010)
New Revision: 6408

Added:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h
Log:
[Ts] Simplet getbits, might be useful later

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.cpp	2010-06-24 17:54:07 UTC (rev 6407)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.cpp	2010-06-24 17:54:08 UTC (rev 6408)
@@ -0,0 +1,100 @@
+/***************************************************************************
+    \file ADM_tsGetBits
+    \brief Simple getbits dedicated to TS packet. should be made more generic.
+    \author mean (C) 2010 fixounet at free.fr
+
+    This is slow, but we dont care as it is not used much.
+    The aim is to consume exactly what we need from the pkt.
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_tsGetBits.h"
+/**
+    \fn ctor
+*/
+tsGetBits::tsGetBits(tsPacketLinear *p)
+{
+    pkt=p;
+    consumed=0;
+    accumulator=0;
+    stored=0;
+}
+/**
+    \fn dtor
+*/
+tsGetBits::~tsGetBits()
+{
+
+
+}
+bool tsGetBits::refill(void)
+{
+    uint32_t nw;
+    int shift=32-stored;
+    accumulator>>=shift;
+    accumulator<<=shift;
+    
+    nw=pkt->readi8();
+    ADM_assert(consumed<MAX_GETBITS_BUFFER);
+    data[consumed]=nw;
+    nw<<=24-stored;
+    accumulator+=nw;
+
+    consumed++;
+    stored+=8;
+    return true;
+}
+/**
+    \fn getBits
+*/
+uint32_t tsGetBits::getBits(int n)
+{
+    ADM_assert(n);
+    if(n>23) ADM_assert(0);
+again:
+    if(n<=stored)
+    {
+        uint32_t out=accumulator;
+        int shift=32-n;
+        out>>=shift;
+        accumulator<<=n;
+        stored-=n;
+        out&=(1<<n)-1;
+        return out;
+    }
+    // make room
+    refill();
+    goto again;
+}
+
+/**
+    \fn getBits
+*/
+uint32_t tsGetBits::peekBits(int n)
+{
+    ADM_assert(n);
+    if(n>31) ADM_assert(0);
+again:
+    if(n<=stored)
+    {
+        uint32_t out=accumulator;
+        int shift=32-n;
+        out>>=shift;
+        out&=(1<<n)-1;
+        return out;
+    }
+    // make room
+    refill();
+    goto again;
+}
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h	2010-06-24 17:54:07 UTC (rev 6407)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h	2010-06-24 17:54:08 UTC (rev 6408)
@@ -0,0 +1,41 @@
+/***************************************************************************
+    \file ADM_tsGetBits
+    \brief Simple getbits dedicated to TS packet. should be made more generic.
+    \author mean (C) 2010 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_TS_GETBITS
+#define ADM_TS_GETBITS
+#include "dmxTSPacket.h"
+#define MAX_GETBITS_BUFFER 64
+/**
+    \class tsGetBits
+    
+*/
+class tsGetBits
+{
+protected:
+    bool           refill(void);
+    tsPacketLinear *pkt;
+    int            consumed;
+    int            stored; /// Nb bits stored in accumulator
+    int            accumulator; /// bits storage 31 max!
+public:
+    uint8_t  data[MAX_GETBITS_BUFFER];
+             tsGetBits(tsPacketLinear *p);
+             ~tsGetBits();
+    int      getConsumed(void) {return consumed;}
+    uint32_t getBits(int n);
+    uint32_t peekBits(int n);
+};
+
+#endif
\ No newline at end of file



From mean at mail.berlios.de  Thu Jun 24 19:54:10 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:10 +0200
Subject: [Avidemux-svn-commit] r6409 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241754.o5OHsASf013835@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:09 +0200 (Thu, 24 Jun 2010)
New Revision: 6409

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt
Log:
[TS] Bundle TS get bits

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt	2010-06-24 17:54:08 UTC (rev 6408)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/CMakeLists.txt	2010-06-24 17:54:09 UTC (rev 6409)
@@ -10,6 +10,7 @@
         ADM_tsComputeTimeStamp.cpp
         dmxTSPacket.cpp
         ADM_tsPatPmt.cpp
+        ADM_tsGetBits.cpp
 )
 
 ADD_LIBRARY(ADM_dm_ts SHARED ${ADM_ts_SRCS})



From mean at mail.berlios.de  Thu Jun 24 19:54:11 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Thu, 24 Jun 2010 19:54:11 +0200
Subject: [Avidemux-svn-commit] r6410 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src
	avidemux_core/ADM_coreVideoCodec/include
	avidemux_core/ADM_coreVideoCodec/src
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006241754.o5OHsBsM013847@sheep.berlios.de>

Author: mean
Date: 2010-06-24 19:54:11 +0200 (Thu, 24 Jun 2010)
New Revision: 6410

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecFFsimple.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS/VC1] Proper decoding & exctracting of VC1 sequence hear and exctration point

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h	2010-06-24 17:54:09 UTC (rev 6409)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreCodecMapping.h	2010-06-24 17:54:11 UTC (rev 6410)
@@ -27,6 +27,7 @@
     CodecID    codecId;
     bool       extraData;
     bool       refCopy;
+    bool       hasBFrame;
 }ffVideoCodec;
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp	2010-06-24 17:54:09 UTC (rev 6409)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_coreCodecMapping.cpp	2010-06-24 17:54:11 UTC (rev 6410)
@@ -23,43 +23,43 @@
 #include "fourcc.h"
 const ffVideoCodec ffCodec[]=
 {
-
-  {"SNOW",  CODEC_ID_SNOW,      false, false},
-  {"cvid",  CODEC_ID_CINEPAK,   false, false},
-  {"CRAM",  CODEC_ID_MSVIDEO1,  false, false},
-  {"VP6F",  CODEC_ID_VP6F,      false, false},
-  {"VP6A",  CODEC_ID_VP6A,      false, false},
-  {"SVQ1",  CODEC_ID_SVQ1,      false, false},
-  {"FLV1",  CODEC_ID_FLV1,      false, false},
-  {"AMV",   CODEC_ID_AMV,       false, false},
-  {"MJPG",  CODEC_ID_MJPEG,     false, false},
-  {"mjpa",  CODEC_ID_MJPEG,     false, false},
-  {"MJPB",  CODEC_ID_MJPEGB,    false, false},
-  {"FPS1",  CODEC_ID_FRAPS,     false, false},
-  {"cvid",  CODEC_ID_CINEPAK,   false, false},
+                                // Refcopy // extrdata // Can have  B frame
+  {"SNOW",  CODEC_ID_SNOW,      false, false,    false},
+  {"cvid",  CODEC_ID_CINEPAK,   false, false,    false},
+  {"CRAM",  CODEC_ID_MSVIDEO1,  false, false,    false},
+  {"VP6F",  CODEC_ID_VP6F,      false, false,    false},
+  {"VP6A",  CODEC_ID_VP6A,      false, false,    false},
+  {"SVQ1",  CODEC_ID_SVQ1,      false, false,    false},
+  {"FLV1",  CODEC_ID_FLV1,      false, false,    false},
+  {"AMV",   CODEC_ID_AMV,       false, false,    false},
+  {"MJPG",  CODEC_ID_MJPEG,     false, false,    false},
+  {"mjpa",  CODEC_ID_MJPEG,     false, false,    false},
+  {"MJPB",  CODEC_ID_MJPEGB,    false, false,    false},
+  {"FPS1",  CODEC_ID_FRAPS,     false, false,    false},
+  {"cvid",  CODEC_ID_CINEPAK,   false, false,    false},
 // Need extradata
-  {"WMV2", CODEC_ID_WMV2,       true, false},
-  {"WMV1", CODEC_ID_WMV1,       true, false},
-  {"WMV3", CODEC_ID_WMV3,       true, false},
-  {"WVC1", CODEC_ID_VC1,        true, false},
-  {"WMVA", CODEC_ID_VC1,        true, false},
+  {"WMV2", CODEC_ID_WMV2,       true, false,    false},
+  {"WMV1", CODEC_ID_WMV1,       true, false,    false},
+  {"WMV3", CODEC_ID_WMV3,       true, false,    true},
+  {"WVC1", CODEC_ID_VC1,        true, false,    true},
+  {"WMVA", CODEC_ID_VC1,        true, false,    true},
 
-  {"WMVA", CODEC_ID_DVVIDEO,    true, false},
+  {"WMVA", CODEC_ID_DVVIDEO,    true, false,    false},
 // RefCopy
-  {"FFV1", CODEC_ID_FFV1,       true, true},
-  {"H263", CODEC_ID_H263,       false, true},
-  {"MP42", CODEC_ID_MSMPEG4V2,  true, true},
-  {"SVQ3", CODEC_ID_SVQ3,       true, true},
-  {"FFVH", CODEC_ID_FFVHUFF,    true, true},
-  {"HFYU", CODEC_ID_HUFFYUV,    true, true},
-  {"VC1 ", CODEC_ID_VC1,        true, true},
+  {"FFV1", CODEC_ID_FFV1,       true, true,    false},
+  {"H263", CODEC_ID_H263,       false, true,   false},
+  {"MP42", CODEC_ID_MSMPEG4V2,  true, true,    false},
+  {"SVQ3", CODEC_ID_SVQ3,       true, true,    false},
+  {"FFVH", CODEC_ID_FFVHUFF,    true, true,    false},
+  {"HFYU", CODEC_ID_HUFFYUV,    true, true,    false},
+  {"VC1 ", CODEC_ID_VC1,        true, true,    true},
 
 
  //{CODEC_ID_FFVHUFF,"FFVH"},
 //    {CODEC_ID_HUFFYUV,"HFYU"},
   //{"MJPB", CODEC_ID_CYUV,       true},
  // {"MJPB", CODEC_ID_THEORA),    true}
-  {"xxxx", CODEC_ID_NONE, false,false}
+  {"xxxx", CODEC_ID_NONE, false,false,    false}
 };
 
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h	2010-06-24 17:54:09 UTC (rev 6409)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_codecFFsimple.h	2010-06-24 17:54:11 UTC (rev 6410)
@@ -32,11 +32,13 @@
 class decoderFFSimple:public decoderFF
 {
 protected:
+    bool hasBFrame;
 
-
 public:
   decoderFFSimple (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-  virtual const char *getDecoderName(void) {return "lavcodec";}
+  virtual const char *getDecoderName(void)  {return "lavcodec";}
+  virtual bool bFramePossible (void)        {return hasBFrame; }
+  
 };
 
 decoders *admCreateFFSimple(uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecFFsimple.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecFFsimple.cpp	2010-06-24 17:54:09 UTC (rev 6409)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecFFsimple.cpp	2010-06-24 17:54:11 UTC (rev 6410)
@@ -25,6 +25,7 @@
         : decoderFF(w,h,fcc,extraDataLen,extraData,bpp)
 {
     const ffVideoCodec *c=getCodecIdFromFourcc(fcc);
+    hasBFrame=false;
     ADM_assert(c);
     CodecID id=c->codecId;
     ADM_assert(id!=CODEC_ID_NONE);
@@ -35,7 +36,8 @@
     }
     if(true==c->refCopy)
         _refCopy=1;
-
+    if(true==c->hasBFrame)
+        hasBFrame=true;
     AVCodec *codec=avcodec_find_decoder(id);
     if(!codec) {GUI_Error_HIG("Codec",QT_TR_NOOP("Internal error finding codec 0x%x"),fcc);ADM_assert(0);} 
     codecId=id; 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h	2010-06-24 17:54:09 UTC (rev 6409)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsGetBits.h	2010-06-24 17:54:11 UTC (rev 6410)
@@ -36,6 +36,7 @@
     int      getConsumed(void) {return consumed;}
     uint32_t getBits(int n);
     uint32_t peekBits(int n);
+    bool     flush(void) {stored=0;accumulator=0;return true;}
 };
 
 #endif
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:54:09 UTC (rev 6409)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-24 17:54:11 UTC (rev 6410)
@@ -33,6 +33,8 @@
 #include "ADM_clock.h"
 #include "ADM_getbits.h"
 #include "ADM_indexFile.h"
+#include "ADM_tsGetBits.h"
+
 #define zprintf(...) {}
 static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
 static const char Type[5]={'X','I','P','B','D'};
@@ -60,7 +62,7 @@
                         {24,11}, {20,11}, {32,11}, {80,33}, {18,11}, {15,11},
                         {64,33}, {160,99},{ 0, 0}, { 0, 0}};
 
-#define VC1_SEQ_SIZE 29
+#define VC1_MAX_SEQ_SIZE 64
 class TSVideo
 {
 public:
@@ -74,7 +76,7 @@
     uint32_t frameCount;
     uint32_t fieldCount;
     uint32_t extraDataLength;
-    uint8_t  extraData[VC1_SEQ_SIZE];
+    uint8_t  extraData[VC1_MAX_SEQ_SIZE];
 };
 
 typedef enum
@@ -147,8 +149,8 @@
         DIA_workingBase         *ui;
         void                    updateUI(void);
         bool                    decodeSEI(uint32_t nalSize, uint8_t *org,uint32_t *recoveryLength);
-        bool                    decodeVC1Seq(int nb, uint8_t *data,TSVideo &video);
-        bool                    decodeVC1Pic(int nb, uint8_t *dataBuffer,uint32_t &frameType,uint32_t &frameStructure);
+        bool                    decodeVC1Seq(tsGetBits &bits,TSVideo &video);
+        bool                    decodeVC1Pic(tsGetBits &bits,uint32_t &frameType,uint32_t &frameStructure);
 public:
                 TsIndexer(listOfTsAudioTracks *tr);
                 ~TsIndexer();
@@ -770,44 +772,46 @@
           switch(startCode)
                   {
                   case 0x0f: // sequence start
-                          uint8_t vc1Seq[VC1_SEQ_SIZE];
-                          uint8_t h;
+                          
                           if(seq_found)
                           {
                                   pkt->forward(4);  // Ignore
                                   continue;
                           }
                           // Verify it is high/advanced profile
-                          h=pkt->readi8();
-                          if(!h&0x80) // simple/main profile
-                                continue;
-                          vc1Seq[0]=h;
-                          pkt->read(VC1_SEQ_SIZE-1,vc1Seq+1);
-                          if(!decodeVC1Seq(VC1_SEQ_SIZE,vc1Seq,video)) continue;
-                          video.extraDataLength=VC1_SEQ_SIZE+8;
-                          memcpy(video.extraData+4,vc1Seq,VC1_SEQ_SIZE);
+                          {
+                          int seqSize=0;
+                          tsGetBits bits(pkt);
+                          if(!bits.peekBits(1)) continue; // simple/main profile
+
+                          if(!decodeVC1Seq(bits,video)) continue;
+
+                          seqSize=bits.getConsumed();
+                          video.extraDataLength=seqSize+8;
+                          memcpy(video.extraData+4,bits.data,seqSize);
                             // Add info so that ffmpeg is happy
                           video.extraData[0]=0;
                           video.extraData[1]=0;
                           video.extraData[2]=1;
                           video.extraData[3]=0xf;
-                          video.extraData[VC1_SEQ_SIZE+4+0]=0;
-                          video.extraData[VC1_SEQ_SIZE+4+1]=0;
-                          video.extraData[VC1_SEQ_SIZE+4+2]=1;
-                          video.extraData[VC1_SEQ_SIZE+4+3]=0xfE;
+                          video.extraData[seqSize+4+0]=0;
+                          video.extraData[seqSize+4+1]=0;
+                          video.extraData[seqSize+4+2]=1;
+                          video.extraData[seqSize+4+3]=0xfE;
                           seq_found=1;
                           // Hi Profile
                           printf("[VC1] Found seq start with %d x %d video\n",(int)video.w,(int)video.h);
                           printf("[VC1] FPS : %d\n",(int)video.fps);
+                          printf("[VC1] sequence header is %d bytes\n",(int)seqSize);
                           writeVideo(&video,ADM_TS_VC1);
                           writeAudio();
                           qfprintf(index,"[Data]");
                           pkt->getInfo(&info);
                           data.frameType=1; // Force first frame to be intra
-                          Mark(&data,&info,VC1_SEQ_SIZE);
+                          Mark(&data,&info,seqSize);
                           data.state=idx_startAtGopOrSeq;
                           continue;
-
+                          }
                           break;
                     case 0x0D: //  Picture start
                         { 
@@ -820,8 +824,8 @@
                                   continue;
                                   printf("[TsIndexer]No sequence start yet, skipping..\n");
                           }      
-                          pkt->read(2,buffer);
-                          if(!decodeVC1Pic(2,buffer,fType,sType)) continue;
+                          tsGetBits bits(pkt);
+                          if(!decodeVC1Pic(bits,fType,sType)) continue;
                           updatePicStructure(video,data,sType);
                           if(data.state==idx_startAtGopOrSeq) 
                           {
@@ -830,7 +834,7 @@
                             {
                                   data.frameType=fType;
                                   pkt->getInfo(&info);
-                                  Mark(&data,&info,2);
+                                  Mark(&data,&info,bits.getConsumed());
                             }
                             data.state=idx_startAtImage;
                             data.nbPics++;
@@ -990,14 +994,14 @@
         Large part of this borrowed from VLC
         Advanced/High profile only
 */
-bool TsIndexer::decodeVC1Seq(int nb, uint8_t *data,TSVideo &video)
+bool TsIndexer::decodeVC1Seq(tsGetBits &bits,TSVideo &video)
 {
-GetBitContext s;
+
 int v;
 int consumed;
     vc1Context.advanced=true;
-    init_get_bits(&s, data, nb*8);
-#define VX(a,b) v=get_bits(&s,a);printf("[VC1] %d "#b"\n",v);consumed+=a;
+
+#define VX(a,b) v=bits.getBits(a);printf("[VC1] %d "#b"\n",v);consumed+=a;
     VX(2,profile);
     VX(3,level);
 
@@ -1036,7 +1040,7 @@
                 VX(4,aspect_ratio);
                 switch(v)
                 {
-                    case 15: video.ar=(get_bits(&s,8)<<16)+get_bits(&s,8);
+                    case 15: video.ar=(bits.getBits(8)<<16)+bits.getBits(8);
                              break;
                     default:
                              video.ar=(VC1_ar[v][0]<<16)+(VC1_ar[v][1]<<16);
@@ -1044,53 +1048,100 @@
                 }
                 printf("[VC1] Aspect ratio %d x %d\n",video.ar>>8,video.ar&0xff);
          }
-    }
-    VX(1,frame_rate);
-    if(v)
-    {
-            VX(1,frame_rate32_flag);
-            if(v)
-            {
-                VX(16,frame_rate32);
-                float f=v;
-                f=(f+1)/32;
-                f*=1000;
-                video.fps=(uint32_t)f;
+    
+        VX(1,frame_rate);
+        if(v)
+        {
+                VX(1,frame_rate32_flag);
+                if(v)
+                {
+                    VX(16,frame_rate32);
+                    float f=v;
+                    f=(f+1)/32;
+                    f*=1000;
+                    video.fps=(uint32_t)f;
+                }else
+                {
+                    float den,num;
+                    VX(8,frame_rate_num)
+                    switch( v )
+                        {
+                        case 1: num = 24000; break;
+                        case 2: num = 25000; break;
+                        case 3: num = 30000; break;
+                        case 4: num = 50000; break;
+                        case 5: num = 60000; break;
+                        case 6: num = 48000; break;
+                        case 7: num = 72000; break;
+                        }
+                    VX(4,frame_rate_den)
+                    switch( v )
+                        {
+                        default:
+                        case 1: den = 1000; break;
+                        case 2: den = 1001; break;
+                        }
+
+                    float f=num*1000;
+                    f/=den;
+                    video.fps=(uint32_t)f;
+                }
             }else
             {
-                float den,num;
-                VX(8,frame_rate_num)
-                switch( v )
-                    {
-                    case 1: num = 24000; break;
-                    case 2: num = 25000; break;
-                    case 3: num = 30000; break;
-                    case 4: num = 50000; break;
-                    case 5: num = 60000; break;
-                    case 6: num = 48000; break;
-                    case 7: num = 72000; break;
-                    }
-                VX(4,frame_rate_den)
-                switch( v )
-                    {
-                    default:
-                    case 1: den = 1000; break;
-                    case 2: den = 1001; break;
-                    }
-
-                float f=num*1000;
-                f/=den;
-                video.fps=(uint32_t)f;
+                video.fps=25000;
             }
-    }else
+            //
+            VX(1,color_flag);
+            if(v){
+                    VX(8,color_prim);
+                    VX(8,transfer_char);
+                    VX(8,matrix_coef);
+                }
+    }
+    VX(1,hrd_param_flag);
+    int leaky=0;
+    if(v)
     {
-        video.fps=25000;
+        VX(5,hrd_num_leaky_buckets);
+        leaky=v;
+        VX(4,bitrate_exponent);
+        VX(4,buffer_size_exponent);
+        for(int i = 0; i < leaky; i++) 
+        {
+                bits.getBits(16);
+                bits.getBits(16);
+        }
     }
-    if(consumed>nb*8) 
+    // Now we need an entry point
+    bits.flush();
+    uint8_t a[4];
+    uint8_t entryPoint[4]={0,0,1,0x0E};
+    for(int i=0;i<4;i++) a[i]=bits.getBits(8);
+    for(int i=0;i<4;i++) printf("%02x ",a[i]);
+    printf(" as marker\n");
+    if(memcmp(a,entryPoint,4))
     {
-        ADM_error("Stored %d bits, consumed %d\n",nb*8,consumed);
-        ADM_assert(0);
+        ADM_warning("Bad entry point");
+        return false;
     }
+    VX(6,ep_flags);
+    VX(1,extended_mv);
+    int extended_mv=v;
+    VX(6,ep_flags2);
+
+    for(int i=0;i<leaky;i++)
+            bits.getBits(8);
+    VX(1,ep_coded_dimension);
+    if(v)
+    {
+         VX(12,ep_coded_width);
+         VX(12,ep_coded_height);
+    }
+    if(extended_mv) VX(1,dmv);
+    VX(1,range_mappy_flags);
+    if(v) VX(3,mappy_flags);
+    VX(1,range_mappuv_flags);
+    if(v) VX(3,mappuv_flags);
     return true;
 
 }
@@ -1100,23 +1151,21 @@
     Borrowed a lot from VLC also
 
 */
-bool TsIndexer::decodeVC1Pic(int nb, uint8_t *dataBuffer,uint32_t &frameType,uint32_t &frameStructure)
+bool TsIndexer::decodeVC1Pic(tsGetBits &bits,uint32_t &frameType,uint32_t &frameStructure)
 {
-    GetBitContext s;
-    init_get_bits(&s, dataBuffer, nb*8);
     frameStructure=3;
     bool field=false;
     if(vc1Context.interlaced)
     {
-        if(get_bits(&s,1))
+        if(bits.getBits(1))
         {
-            if(get_bits(&s,1))
+            if(bits.getBits(1))
                field=true;
         }
     }
     if(field)
     {
-            int fieldType=get_bits(&s,3);
+            int fieldType=bits.getBits(3);
             frameStructure=1; // Top
             switch(fieldType)
             {
@@ -1139,17 +1188,16 @@
     }else
     {
                 frameStructure=3; // frame
-                if( !get_bits(&s,1))
+                if( !bits.getBits(1))
                     frameType=2;
-                else if( !get_bits(&s,1))
+                else if( !bits.getBits(1))
                     frameType=3;
-                else if( !get_bits(&s,1))
+                else if( !bits.getBits(1))
                     frameType=1;
-                else if( !get_bits(&s,1))
+                else if( !bits.getBits(1))
                     frameType=3;
                 else
                     frameType=2;
-
     }
 
     return true;



From mean at mail.berlios.de  Fri Jun 25 06:37:34 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 25 Jun 2010 06:37:34 +0200
Subject: [Avidemux-svn-commit] r6411 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006250437.o5P4bYUp029870@sheep.berlios.de>

Author: mean
Date: 2010-06-25 06:37:32 +0200 (Fri, 25 Jun 2010)
New Revision: 6411

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_string.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_string.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
Log:
[Core] Put string stuff in its own file

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h	2010-06-24 17:54:11 UTC (rev 6410)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_coreUtils.h	2010-06-25 04:37:32 UTC (rev 6411)
@@ -5,18 +5,14 @@
 */
 #ifndef ADM_CORE_UTILS_H
 #define ADM_CORE_UTILS_H
-#include <vector>
-#include <string>
-using std::string;
-using std::vector;
 bool        ADM_findMpegStartCode(uint8_t *start, uint8_t *end,uint8_t *outstartcode,uint32_t *offset);
 char        *ADM_escape(const ADM_filename *incoming);
 uint32_t    ADM_computeBitrate(uint32_t fps1000, uint32_t nbFrame, uint32_t sizeInMB);
 uint32_t    ADM_UsecFromFps1000(uint32_t fps1000);
 uint32_t    ADM_Fps1000FromUs(uint64_t us);
-bool        ADM_splitString(const string &separator, const string &source, vector<string>& result);
 
 
 
 
+
 #endif

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_string.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_string.h	2010-06-24 17:54:11 UTC (rev 6410)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_string.h	2010-06-25 04:37:32 UTC (rev 6411)
@@ -0,0 +1,24 @@
+/** *************************************************************************
+    \file  ADM_string
+    \brief String related utilities
+                      
+    copyright            : (C) 2009/2010 by mean
+    
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ ***************************************************************************/
+
+#ifndef ADM_STRING_H
+#define ADM_STRING_H
+
+#include "ADM_image.h"
+
+bool        ADM_splitString(const string &separator, const string &source, vector<string>& result);
+#endif
+//EOF

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_string.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_string.cpp	2010-06-24 17:54:11 UTC (rev 6410)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_string.cpp	2010-06-25 04:37:32 UTC (rev 6411)
@@ -0,0 +1,48 @@
+/***************************************************************************
+                          avidemutils.cpp  -  description
+                             -------------------
+    begin                : Sun Nov 11 2001
+    copyright            : (C) 2001 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include <vector>
+#include <string>
+using std::string;
+using std::vector;
+
+#include "ADM_default.h"
+#include "ADM_string.h"
+
+/**
+        \fn ADM_splitString
+        \brief convert a string in a list using a separator
+*/
+bool        ADM_splitString(const string &separator, const string &source, vector<string>& result)
+{
+string splitted=source;
+result.clear();
+
+    string::size_type next = splitted.find(separator);
+    while(next != string::npos)
+    {
+        string chunk=splitted.substr(0, next);
+        if(chunk.length())
+                    result.push_back(chunk);
+        splitted = splitted.substr(next + 1);
+        next = splitted.find(separator);
+    }
+    if(splitted.length())
+            result.push_back(splitted);
+    return true;
+}
+
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2010-06-24 17:54:11 UTC (rev 6410)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2010-06-25 04:37:32 UTC (rev 6411)
@@ -12,6 +12,7 @@
 ADM_paramList.cpp
 ADM_coreCodecMapping.cpp
 ADM_threadQueue.cpp
+ADM_string.cpp
 prefs.cpp)
 
 ADD_LIBRARY(ADM_coreUtils6 SHARED ${ADM_coreUtils_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2010-06-24 17:54:11 UTC (rev 6410)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/avidemutils.cpp	2010-06-25 04:37:32 UTC (rev 6411)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+
 #include "ADM_default.h"
 #include <math.h>
 
@@ -408,27 +409,6 @@
 
 	return (a1 << 4) + b1;
 }
-/**
-        \fn ADM_splitString
-        \brief convert a string in a list using a separator
-*/
-bool        ADM_splitString(const string &separator, const string &source, vector<string>& result)
-{
-string splitted=source;
-result.clear();
 
-    string::size_type next = splitted.find(separator);
-    while(next != string::npos)
-    {
-        string chunk=splitted.substr(0, next);
-        if(chunk.length())
-                    result.push_back(chunk);
-        splitted = splitted.substr(next + 1);
-        next = splitted.find(separator);
-    }
-    if(splitted.length())
-            result.push_back(splitted);
-    return true;
-}
 
 //EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-24 17:54:11 UTC (rev 6410)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsReadIndex.cpp	2010-06-25 04:37:32 UTC (rev 6411)
@@ -14,13 +14,17 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include <vector>
+#include <string>
+using std::vector;
+using std::string;
 
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_indexFile.h"
 #include "ADM_ts.h"
-#include "ADM_coreUtils.h"
+#include "ADM_string.h"
 
 #include <math.h>
 #define TS_MAX_LINE 10000



From mean at mail.berlios.de  Fri Jun 25 20:34:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 25 Jun 2010 20:34:08 +0200
Subject: [Avidemux-svn-commit] r6412 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006251834.o5PIY86L030063@sheep.berlios.de>

Author: mean
Date: 2010-06-25 20:34:08 +0200 (Fri, 25 Jun 2010)
New Revision: 6412

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS/VC1] Fix indexer

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-25 04:37:32 UTC (rev 6411)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-25 18:34:08 UTC (rev 6412)
@@ -775,8 +775,14 @@
                           
                           if(seq_found)
                           {
-                                  pkt->forward(4);  // Ignore
-                                  continue;
+                              if(data.state==idx_startAtGopOrSeq)       
+                                  continue;;
+                              pkt->getInfo(&info);
+                              data.frameType=1; // next frame is assumed to be intra
+                              Mark(&data,&info,4); // startcode
+                              data.state=idx_startAtGopOrSeq;
+                              updateUI();
+                              break;
                           }
                           // Verify it is high/advanced profile
                           {
@@ -787,7 +793,7 @@
                           if(!decodeVC1Seq(bits,video)) continue;
 
                           seqSize=bits.getConsumed();
-                          video.extraDataLength=seqSize+8;
+                          video.extraDataLength=seqSize+4+1;
                           memcpy(video.extraData+4,bits.data,seqSize);
                             // Add info so that ffmpeg is happy
                           video.extraData[0]=0;
@@ -795,9 +801,6 @@
                           video.extraData[2]=1;
                           video.extraData[3]=0xf;
                           video.extraData[seqSize+4+0]=0;
-                          video.extraData[seqSize+4+1]=0;
-                          video.extraData[seqSize+4+2]=1;
-                          video.extraData[seqSize+4+3]=0xfE;
                           seq_found=1;
                           // Hi Profile
                           printf("[VC1] Found seq start with %d x %d video\n",(int)video.w,(int)video.h);
@@ -808,7 +811,7 @@
                           qfprintf(index,"[Data]");
                           pkt->getInfo(&info);
                           data.frameType=1; // Force first frame to be intra
-                          Mark(&data,&info,seqSize);
+                          Mark(&data,&info,seqSize+4);
                           data.state=idx_startAtGopOrSeq;
                           continue;
                           }



From mean at mail.berlios.de  Fri Jun 25 20:34:10 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Fri, 25 Jun 2010 20:34:10 +0200
Subject: [Avidemux-svn-commit] r6413 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_script2/binding ADM_script2/include ADM_script2/js
	ADM_script2/py
Message-ID: <201006251834.o5PIYAFa030073@sheep.berlios.de>

Author: mean
Date: 2010-06-25 20:34:10 +0200 (Fri, 25 Jun 2010)
New Revision: 6413

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp
Log:
[Py] add editor.hexDumpFrame() to debug

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2010-06-25 18:34:08 UTC (rev 6412)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2010-06-25 18:34:10 UTC (rev 6413)
@@ -164,3 +164,27 @@
     return getCompressedPicture(videoDelay,img);
    
 }
+
+/**
+        \fn     getDirectImage
+        \brief  For DEBUG DO NOT USE!
+
+*/
+bool        ADM_Composer::getDirectImage(uint32_t frameNum,ADMCompressedImage *img)
+{
+  
+    _SEGMENT *seg=_segments.getSegment(0);
+    ADM_assert(seg);
+    _VIDEOS *vid=_segments.getRefVideo(seg->_reference);
+    ADM_assert(vid);
+    vidHeader *demuxer=vid->_aviheader;
+    ADM_assert(demuxer);
+
+    // Get next pic?
+    if(false==demuxer->getFrame (frameNum,img))
+    {
+        ADM_info("Failed to get next frame for ref %"LU"\n",seg->_reference);
+        return false;
+    }
+   return true;
+}

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-25 18:34:08 UTC (rev 6412)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-25 18:34:10 UTC (rev 6413)
@@ -162,6 +162,8 @@
 // Used for stream copy
                     bool        GoToIntraTime_noDecoding(uint64_t time,uint32_t *toframe=NULL);
                     bool        getCompressedPicture(uint64_t delay,ADMCompressedImage *img);     //COPYMODE                
+                    // Use only for debug purpose !!!
+                    bool        getDirectImage(uint32_t frameNum,ADMCompressedImage *img);             
 public:
                     uint8_t	    updateVideoInfo(aviInfo *info);
                     uint32_t 	getSpecificMpeg4Info( void );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass	2010-06-25 18:34:08 UTC (rev 6412)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/binding/editor.admPyClass	2010-06-25 18:34:10 UTC (rev 6413)
@@ -3,4 +3,5 @@
 /* METHOD */ int jsPrintTiming:printTiming      (int ) 
 /* METHOD */ int jsDumpSegments:dumpSegment     (void) 
 /* METHOD */ int jsDumpRefVideos:dumpRefVideo   (void) 
+/* METHOD */ int jsHexDumpFrame:hexDumpFrame    (int) 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h	2010-06-25 18:34:08 UTC (rev 6412)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/include/ADM_scriptEditor.h	2010-06-25 18:34:10 UTC (rev 6413)
@@ -20,6 +20,7 @@
 #endif
 
 int jsPrintTiming(int framenumber );
+int jsHexDumpFrame(int framenumber );
 int jsDumpSegments (void);
 int jsDumpRefVideos (void);
 #ifdef __cplusplus

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-25 18:34:08 UTC (rev 6412)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-25 18:34:10 UTC (rev 6413)
@@ -18,7 +18,7 @@
 #include "ADM_scriptEditor.h"
 #include "ADM_editor/ADM_edit.hxx"
 extern ADM_Composer *video_body;
-
+void mixDump(uint8_t *ptr, uint32_t len);;
 /**
     \fn jsPrintTiming
 */
@@ -37,8 +37,25 @@
     }
     return 0;
 }
-
 /**
+    \fn jsHexDumpFrame
+*/
+int jsHexDumpFrame(int framenumber )
+{
+    ADMCompressedImage img;
+    img.data=new uint8_t[2000*2000*3];
+    img.dataLength=2000*2000*3;
+    if(!video_body->getDirectImage(framenumber,&img))
+    {
+            jsLog("Cannot get picture %d\n",framenumber);
+            delete [] img.data;
+            return false;
+    }
+    mixDump(img.data,img.dataLength);
+    delete [] img.data;
+    return true;
+}
+/**
     \fn    jsDumpSegments
     \brief dump segment, video & all
 */

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp	2010-06-25 18:34:08 UTC (rev 6412)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/editor_gen.cpp	2010-06-25 18:34:10 UTC (rev 6413)
@@ -9,6 +9,16 @@
   int r=  jsPrintTiming(p0); 
   return tp_number(r);
 }
+// hexDumpFrame -> int jsHexDumpFrame (int ) 
+static tp_obj zzpy_hexDumpFrame(TP)
+ {
+  tp_obj self=tp_getraw( tp);
+  tinyParams pm(tp);
+  void *me=(void *)pm.asThis(&self,ADM_PYID_EDITOR);
+  int p0= pm.asInt();
+  int r=  jsHexDumpFrame(p0); 
+  return tp_number(r);
+}
 // dumpSegment -> int jsDumpSegments (void ) 
 static tp_obj zzpy_dumpSegment(TP)
  {
@@ -37,6 +47,10 @@
   {
      return tp_method(vm,self,zzpy_printTiming);
   }
+  if (!strcmp(key, "hexDumpFrame"))
+  {
+     return tp_method(vm,self,zzpy_hexDumpFrame);
+  }
   if (!strcmp(key, "dumpSegment"))
   {
      return tp_method(vm,self,zzpy_dumpSegment);
@@ -73,6 +87,7 @@
 static tp_obj zzpy__pyEditor_help(TP)
  {
   jsLog("printTiming(int )");
+  jsLog("hexDumpFrame(int)");
   jsLog("dumpSegment(void)");
   jsLog("dumpRefVideo(void)");
 };



From mean at mail.berlios.de  Sat Jun 26 09:14:04 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:14:04 +0200
Subject: [Avidemux-svn-commit] r6414 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: ADM_editor
	ADM_script2/js
Message-ID: <201006260714.o5Q7E42K020253@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:14:04 +0200 (Sat, 26 Jun 2010)
New Revision: 6414

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
Log:
[Editor] Rename function to make sure it is not used

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2010-06-25 18:34:10 UTC (rev 6413)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2010-06-26 07:14:04 UTC (rev 6414)
@@ -170,7 +170,7 @@
         \brief  For DEBUG DO NOT USE!
 
 */
-bool        ADM_Composer::getDirectImage(uint32_t frameNum,ADMCompressedImage *img)
+bool        ADM_Composer::getDirectImageForDebug(uint32_t frameNum,ADMCompressedImage *img)
 {
   
     _SEGMENT *seg=_segments.getSegment(0);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-25 18:34:10 UTC (rev 6413)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-26 07:14:04 UTC (rev 6414)
@@ -163,7 +163,7 @@
                     bool        GoToIntraTime_noDecoding(uint64_t time,uint32_t *toframe=NULL);
                     bool        getCompressedPicture(uint64_t delay,ADMCompressedImage *img);     //COPYMODE                
                     // Use only for debug purpose !!!
-                    bool        getDirectImage(uint32_t frameNum,ADMCompressedImage *img);             
+                    bool        getDirectImageForDebug(uint32_t frameNum,ADMCompressedImage *img);             
 public:
                     uint8_t	    updateVideoInfo(aviInfo *info);
                     uint32_t 	getSpecificMpeg4Info( void );

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-25 18:34:10 UTC (rev 6413)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-26 07:14:04 UTC (rev 6414)
@@ -45,7 +45,7 @@
     ADMCompressedImage img;
     img.data=new uint8_t[2000*2000*3];
     img.dataLength=2000*2000*3;
-    if(!video_body->getDirectImage(framenumber,&img))
+    if(!video_body->getDirectImageForDebug(framenumber,&img))
     {
             jsLog("Cannot get picture %d\n",framenumber);
             delete [] img.data;



From mean at mail.berlios.de  Sat Jun 26 09:14:06 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:14:06 +0200
Subject: [Avidemux-svn-commit] r6415 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006260714.o5Q7E67c020263@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:14:05 +0200 (Sat, 26 Jun 2010)
New Revision: 6415

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[TS] Use string rather than char *

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-26 07:14:04 UTC (rev 6414)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-26 07:14:05 UTC (rev 6415)
@@ -35,6 +35,9 @@
 #include "ADM_indexFile.h"
 #include "ADM_tsGetBits.h"
 
+#include <string>
+using std::string;
+
 #define zprintf(...) {}
 static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
 static const char Type[5]={'X','I','P','B','D'};
@@ -106,13 +109,9 @@
     uint64_t prevPts,prevDts;
 }indexerData;
 
-typedef enum
-{
-    markStart,
-    markEnd,
-    markNow
-}markType;
-
+/**
+    \class VC1Context
+*/
 class VC1Context
 {
 public:
@@ -360,9 +359,10 @@
     memset(&data,0,sizeof(data));
     data.picStructure=pictureFrame;
 
-    char *indexName=(char *)alloca(strlen(file)+5);
-    sprintf(indexName,"%s.idx2",file);
+    string indexName=string(file);
+    indexName=indexName+string(".idx2");
     index=qfopen(indexName,"wt");
+
     if(!index)
     {
         printf("[PsIndex] Cannot create %s\n",indexName);
@@ -571,9 +571,10 @@
     memset(&data,0,sizeof(data));
     data.picStructure=pictureFrame;
 
-    char *indexName=(char *)alloca(strlen(file)+5);
-    sprintf(indexName,"%s.idx2",file);
+    string indexName=string(file);
+    indexName=indexName+string(".idx2");
     index=qfopen(indexName,"wt");
+
     if(!index)
     {
         printf("[PsIndex] Cannot create %s\n",indexName);
@@ -669,7 +670,6 @@
                   case 0x00 : // picture
                         {
                           int type;
-                          markType update=markNow;
                           if(!seq_found)
                           { 
                                   continue;
@@ -745,13 +745,14 @@
 
     memset(&data,0,sizeof(data));
     data.picStructure=pictureFrame;
+    
+    string indexName=string(file);
+    indexName=indexName+string(".idx2");
+    index=qfopen(indexName,"wt");
 
-    char *indexName=(char *)alloca(strlen(file)+5);
-    sprintf(indexName,"%s.idx2",file);
-    index=qfopen(indexName,"wt");
     if(!index)
     {
-        printf("[PsIndex] Cannot create %s\n",indexName);
+        printf("[PsIndex] Cannot create %s\n",indexName.c_str());
         return false;
     }
     writeSystem(file,true);
@@ -821,7 +822,6 @@
                           int type;
                           uint8_t buffer[4];
                           uint32_t fType,sType;
-                          markType update=markNow;
                           if(!seq_found)
                           { 
                                   continue;



From mean at mail.berlios.de  Sat Jun 26 09:14:07 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:14:07 +0200
Subject: [Avidemux-svn-commit] r6416 - in
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils:
	include src
Message-ID: <201006260714.o5Q7E7D6020273@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:14:07 +0200 (Sat, 26 Jun 2010)
New Revision: 6416

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp
Log:
[Core] Allow qfopen(string) in addition to qfopen(const char*)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h	2010-06-26 07:14:05 UTC (rev 6415)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h	2010-06-26 07:14:07 UTC (rev 6416)
@@ -20,7 +20,13 @@
 #include <unistd.h>
 #include "ADM_coreConfig.h"
 
+#ifdef __cplusplus
+#include <string>
+using std::string;
+FILE *qfopen(const string &name, const char *);
+#endif
 /* qfopen stands for quota-fopen() */
+
 FILE *qfopen(const char *, const char *);
 
 /* qfprintf stands for quota-fprintf() */

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp	2010-06-26 07:14:05 UTC (rev 6415)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp	2010-06-26 07:14:07 UTC (rev 6416)
@@ -10,6 +10,8 @@
 #include "DIA_coreToolkit.h"
 #undef free
 
+#include <string>
+using std::string;
 
 struct qfile_t {
         const char *filename;
@@ -62,7 +64,10 @@
 /* why here?: don't use mean's malloc rewrites for all of the xml2 library */
 #include "ADM_assert.h"
 
-
+FILE *qfopen(const string &fileName, const char *mode)
+{
+    return qfopen(fileName.c_str(),mode);
+}
 /* store open filenames and it's current "ignore"-status */
 FILE *qfopen(const char *path, const char *mode){
     // Mean:Should be the first funtion to be called



From mean at mail.berlios.de  Sat Jun 26 09:14:08 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:14:08 +0200
Subject: [Avidemux-svn-commit] r6417 -
	branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor
Message-ID: <201006260714.o5Q7E89U020284@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:14:08 +0200 (Sat, 26 Jun 2010)
New Revision: 6417

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
Log:
[Codec] VC1 has a simple reordering scheme, like mpeg1/2/4

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-06-26 07:14:07 UTC (rev 6416)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-06-26 07:14:08 UTC (rev 6417)
@@ -325,7 +325,7 @@
         if(video.decoder->bFramePossible())
         {
             printf("[Editor] B- frame possible with that codec \n");
-            if(isMpeg4Compatible(info.fcc) || isMpeg12Compatible(info.fcc))
+            if(isMpeg4Compatible(info.fcc) || isMpeg12Compatible(info.fcc) || isVC1Compatible(info.fcc))
             {
                 ADM_info("[Editor] It is mpeg4-SP/ASP, try to guess all PTS\n");             
                 uint64_t delay;



From mean at mail.berlios.de  Sat Jun 26 09:31:00 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:31:00 +0200
Subject: [Avidemux-svn-commit] r6418 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreUtils/include
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006260731.o5Q7V0uw021230@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:30:59 +0200 (Sat, 26 Jun 2010)
New Revision: 6418

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[Core] Partially revert string change due to win32

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h	2010-06-26 07:14:08 UTC (rev 6417)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h	2010-06-26 07:30:59 UTC (rev 6418)
@@ -20,11 +20,6 @@
 #include <unistd.h>
 #include "ADM_coreConfig.h"
 
-#ifdef __cplusplus
-#include <string>
-using std::string;
-FILE *qfopen(const string &name, const char *);
-#endif
 /* qfopen stands for quota-fopen() */
 
 FILE *qfopen(const char *, const char *);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-26 07:14:08 UTC (rev 6417)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-26 07:30:59 UTC (rev 6418)
@@ -37,6 +37,7 @@
 
 #include <string>
 using std::string;
+FILE *qfopen(const std::string &name, const char *);
 
 #define zprintf(...) {}
 static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
@@ -361,11 +362,11 @@
 
     string indexName=string(file);
     indexName=indexName+string(".idx2");
-    index=qfopen(indexName,"wt");
+    index=qfopen(indexName,(const char*)"wt");
 
     if(!index)
     {
-        printf("[PsIndex] Cannot create %s\n",indexName);
+        printf("[PsIndex] Cannot create %s\n",indexName.c_str());
         return false;
     }
 
@@ -577,7 +578,7 @@
 
     if(!index)
     {
-        printf("[PsIndex] Cannot create %s\n",indexName);
+        printf("[PsIndex] Cannot create %s\n",indexName.c_str());
         return false;
     }
     writeSystem(file,true);



From mean at mail.berlios.de  Sat Jun 26 09:45:48 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:45:48 +0200
Subject: [Avidemux-svn-commit] r6419 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
Message-ID: <201006260745.o5Q7jmEo022027@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:45:48 +0200 (Sat, 26 Jun 2010)
New Revision: 6419

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp
Log:
[Core] memcpy clashes with #include <string>

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp	2010-06-26 07:30:59 UTC (rev 6418)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_quota.cpp	2010-06-26 07:45:48 UTC (rev 6419)
@@ -4,14 +4,14 @@
 */
 #define ADM_LEGACY_PROGGY
 #include <errno.h>
+#include <string>
+using std::string;
 
 #include "ADM_default.h"
 #include "ADM_quota.h"
 #include "DIA_coreToolkit.h"
 #undef free
 
-#include <string>
-using std::string;
 
 struct qfile_t {
         const char *filename;



From mean at mail.berlios.de  Sat Jun 26 09:54:10 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sat, 26 Jun 2010 09:54:10 +0200
Subject: [Avidemux-svn-commit] r6420 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006260754.o5Q7sAKp022333@sheep.berlios.de>

Author: mean
Date: 2010-06-26 09:54:10 +0200 (Sat, 26 Jun 2010)
New Revision: 6420

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[Core] memcpy clashes with #include <string>

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-26 07:45:48 UTC (rev 6419)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-26 07:54:10 UTC (rev 6420)
@@ -15,7 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include <string>
 #include "ADM_includeFfmpeg.h"
 #include "ADM_default.h"
 #include "ADM_demuxerInternal.h"
@@ -35,7 +35,7 @@
 #include "ADM_indexFile.h"
 #include "ADM_tsGetBits.h"
 
-#include <string>
+
 using std::string;
 FILE *qfopen(const std::string &name, const char *);
 



From mean at mail.berlios.de  Sun Jun 27 10:45:09 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 10:45:09 +0200
Subject: [Avidemux-svn-commit] r6421 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer
Message-ID: <201006270845.o5R8j9Ro031538@sheep.berlios.de>

Author: mean
Date: 2010-06-27 10:45:08 +0200 (Sun, 27 Jun 2010)
New Revision: 6421

Added:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_vc1.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_internal.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
Log:
[TS] VC1 Backport : Part 1 write index

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.cpp	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.cpp	2010-06-27 08:45:08 UTC (rev 6421)
@@ -0,0 +1,100 @@
+/***************************************************************************
+    \file ADM_tsGetBits
+    \brief Simple getbits dedicated to TS packet. should be made more generic.
+    \author mean (C) 2010 fixounet at free.fr
+
+    This is slow, but we dont care as it is not used much.
+    The aim is to consume exactly what we need from the pkt.
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include "ADM_default.h"
+#include "ADM_tsGetBits.h"
+/**
+    \fn ctor
+*/
+tsGetBits::tsGetBits(dmx_demuxer *p)
+{
+    pkt=p;
+    consumed=0;
+    accumulator=0;
+    stored=0;
+}
+/**
+    \fn dtor
+*/
+tsGetBits::~tsGetBits()
+{
+
+
+}
+bool tsGetBits::refill(void)
+{
+    uint32_t nw;
+    int shift=32-stored;
+    accumulator>>=shift;
+    accumulator<<=shift;
+    
+    nw=pkt->read8i();
+    ADM_assert(consumed<MAX_GETBITS_BUFFER);
+    data[consumed]=nw;
+    nw<<=24-stored;
+    accumulator+=nw;
+
+    consumed++;
+    stored+=8;
+    return true;
+}
+/**
+    \fn getBits
+*/
+uint32_t tsGetBits::getBits(int n)
+{
+    ADM_assert(n);
+    if(n>23) ADM_assert(0);
+again:
+    if(n<=stored)
+    {
+        uint32_t out=accumulator;
+        int shift=32-n;
+        out>>=shift;
+        accumulator<<=n;
+        stored-=n;
+        out&=(1<<n)-1;
+        return out;
+    }
+    // make room
+    refill();
+    goto again;
+}
+
+/**
+    \fn getBits
+*/
+uint32_t tsGetBits::peekBits(int n)
+{
+    ADM_assert(n);
+    if(n>31) ADM_assert(0);
+again:
+    if(n<=stored)
+    {
+        uint32_t out=accumulator;
+        int shift=32-n;
+        out>>=shift;
+        out&=(1<<n)-1;
+        return out;
+    }
+    // make room
+    refill();
+    goto again;
+}
+//EOF

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.h	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/ADM_tsGetBits.h	2010-06-27 08:45:08 UTC (rev 6421)
@@ -0,0 +1,42 @@
+/***************************************************************************
+    \file ADM_tsGetBits
+    \brief Simple getbits dedicated to TS packet. should be made more generic.
+    \author mean (C) 2010 fixounet at free.fr
+
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#ifndef ADM_TS_GETBITS
+#define ADM_TS_GETBITS
+#include "dmx_demuxer.h"
+#define MAX_GETBITS_BUFFER 64
+/**
+    \class tsGetBits
+    
+*/
+class tsGetBits
+{
+protected:
+    bool           refill(void);
+    dmx_demuxer    *pkt;
+    int            consumed;
+    int            stored; /// Nb bits stored in accumulator
+    int            accumulator; /// bits storage 31 max!
+public:
+    uint8_t  data[MAX_GETBITS_BUFFER];
+             tsGetBits(dmx_demuxer *p);
+             ~tsGetBits();
+    int      getConsumed(void) {return consumed;}
+    uint32_t getBits(int n);
+    uint32_t peekBits(int n);
+    bool     flush(void) {stored=0;accumulator=0;return true;}
+};
+
+#endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/CMakeLists.txt	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/CMakeLists.txt	2010-06-27 08:45:08 UTC (rev 6421)
@@ -1,5 +1,7 @@
 SET(ADM_mpegdemuxer_SRCS 
 	dmx_audio.cpp    dmx_demuxerES.cpp     dmx_demuxerPS.cpp  dmx_identify.cpp  dmx_indexer_h264.cpp   dmx_io.cpp     dmx_probeTS.cpp
-	dmx_demuxer.cpp  dmx_demuxerMSDVR.cpp  dmx_demuxerTS.cpp  dmx_indexer.cpp   dmx_indexer_mpeg2.cpp  dmx_probe.cpp  dmx_video.cpp)
+	dmx_demuxer.cpp  dmx_demuxerMSDVR.cpp  dmx_demuxerTS.cpp  dmx_indexer.cpp   dmx_indexer_mpeg2.cpp  dmx_probe.cpp  dmx_video.cpp
+        dmx_indexer_vc1.cpp ADM_tsGetBits.cpp
+        )
 
 ADD_ADM_LIB_ALL_TARGETS(ADM_mpegdemuxer ${ADM_mpegdemuxer_SRCS})

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.h	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_demuxer.h	2010-06-27 08:45:08 UTC (rev 6421)
@@ -28,7 +28,8 @@
   DMX_PAYLOAD_ERROR=0,
   DMX_PAYLOAD_MPEG2=1,
   DMX_PAYLOAD_MPEG4,
-  DMX_PAYLOAD_H264
+  DMX_PAYLOAD_H264,
+  DMX_PAYLOAD_VC1
 }dmx_payloadType;
 
 class dmx_demuxer

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.cpp	2010-06-27 08:45:08 UTC (rev 6421)
@@ -113,7 +113,8 @@
                                   default: ADM_assert(0);
                                 }
                                 switch(tracks[0].streamType)
-                                  {
+                                  {
+                                    case ADM_STREAM_VC1:        payloadType=DMX_PAYLOAD_VC1;break;
                                     case ADM_STREAM_H264:       payloadType=DMX_PAYLOAD_H264;break;
                                     case ADM_STREAM_MPEG4:      payloadType=DMX_PAYLOAD_MPEG4;break;
                                     case ADM_STREAM_MPEG_VIDEO: payloadType=DMX_PAYLOAD_MPEG2;break;
@@ -219,7 +220,11 @@
                             idxer=new dmx_videoIndexerMpeg2(&run);
                             break;
                   }
-          case DMX_PAYLOAD_MPEG4:ADM_assert(0);
+          case DMX_PAYLOAD_MPEG4:ADM_assert(0);
+          case DMX_PAYLOAD_VC1:
+                            idxer=new dmx_videoIndexerVC1(&run);
+                            break;
+
           case DMX_PAYLOAD_H264:
                             idxer=new dmx_videoIndexerH264(&run);
                             break;
@@ -299,7 +304,9 @@
                             qfprintf(out,"Payload  : MP_4\n"); // MPEG,MP_4,H264
                             break;
           case DMX_PAYLOAD_H264:
-                            qfprintf(out,"Payload  : H264\n"); // MPEG,MP_4,H264
+                            qfprintf(out,"Payload  : H264\n"); // MPEG,MP_4,H264
+          case DMX_PAYLOAD_VC1:
+                            qfprintf(out,"Payload  : VC1 \n"); // MPEG,MP_4,H264
                             break;
           default: ADM_assert(0);
         }                            

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer.h	2010-06-27 08:45:08 UTC (rev 6421)
@@ -27,7 +27,8 @@
   ADM_STREAM_DTS,
   ADM_STREAM_H264,
   ADM_STREAM_MPEG4,
-  ADM_STREAM_AAC
+  ADM_STREAM_AAC,
+  ADM_STREAM_VC1
 }ADM_STREAM_TYPE;
 
 typedef struct MPEG_TRACK

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_internal.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_internal.h	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_internal.h	2010-06-27 08:45:08 UTC (rev 6421)
@@ -106,6 +106,29 @@
              
 };
 /**************************************************/
+/* Class to index VC1 payload in ES/PS/TS/MSDVR */
+/**************************************************/
+class dmx_videoIndexerVC1 :public dmx_videoIndexer
+{
+protected:
+          uint64_t firstPicPTS;
+          uint32_t grabbing;
+          uint32_t seq_found;
+          
+          
+          uint8_t gopDump(uint64_t abs,uint64_t rel);
+          uint8_t gopUpdate(void);
+          uint8_t dumpPts(uint64_t firstPts);
+          uint8_t Push(uint32_t ftype,uint64_t abs,uint64_t rel);
+public:
+                  dmx_videoIndexerVC1(dmx_runData *run);
+ 
+          uint8_t run(void);
+          void    cleanup(void);
+  virtual         ~dmx_videoIndexerVC1();
+             
+};
+/**************************************************/
 /* Class to index H264 payload in ES/PS/TS/MSDVR */
 /**************************************************/
 class dmx_videoIndexerH264 :public dmx_videoIndexer

Added: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_vc1.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_vc1.cpp	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_indexer_vc1.cpp	2010-06-27 08:45:08 UTC (rev 6421)
@@ -0,0 +1,537 @@
+/***************************************************************************
+                        2nd gen indexer                                                 
+                             
+    
+    copyright            : (C) 2005 by mean
+    email                : fixounet at free.fr
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "config.h"
+
+#include "ADM_default.h"
+
+#include "DIA_fileSel.h"
+#include "ADM_osSupport/ADM_quota.h"
+#include "ADM_userInterfaces/ADM_commonUI/DIA_idx_pg.h"
+
+
+
+#include "ADM_osSupport/ADM_debugID.h"
+#define MODULE_NAME MODULE_MPEG
+#include "ADM_osSupport/ADM_debug.h"
+#include "dmx_demuxerEs.h"
+#include "dmx_demuxerPS.h"
+#include "dmx_demuxerTS.h"
+#include "dmx_demuxerMSDVR.h"
+#include "dmx_identify.h"
+
+#define MIN_DELTA_PTS 150 // autofix in ms
+#include "ADM_osSupport/ADM_debugID.h"
+#define MODULE_NAME MODULE_MPEG
+#include "ADM_osSupport/ADM_debug.h"
+
+#include "dmx_indexer_internal.h"
+#include "ADM_tsGetBits.h"
+static const char vc1Type[5]={'X','I','P','B','P'};
+static const uint32_t  VC1_ar[16][2] = {  // From VLC
+                        { 0, 0}, { 1, 1}, {12,11}, {10,11}, {16,11}, {40,33},
+                        {24,11}, {20,11}, {32,11}, {80,33}, {18,11}, {15,11},
+                        {64,33}, {160,99},{ 0, 0}, { 0, 0}};
+
+/**
+    \class VC1Context
+*/
+class VC1Context
+{
+public:
+        bool advanced;
+        bool interlaced;
+        bool interpolate;
+        VC1Context() {reset();}
+        bool reset(void){advanced=false;interlaced=false;interpolate=false;return true;}
+};
+static bool decodeVC1Pic(tsGetBits &bits,dmx_runData &video,VC1Context &vc1Context,uint32_t &frameType,uint32_t &frameStructure);
+static bool decodeVC1Seq(tsGetBits &bits,dmx_runData &video,VC1Context &vc1Context);
+
+dmx_videoIndexerVC1::dmx_videoIndexerVC1(dmx_runData *run) : dmx_videoIndexer(run)
+{
+  _frames=new IndFrame[MAX_PUSHED];
+  firstPicPTS=ADM_NO_PTS;
+  seq_found=0;
+  grabbing=0;
+  
+}
+dmx_videoIndexerVC1::~dmx_videoIndexerVC1()
+{
+          if(_frames) delete [] _frames;
+          _frames=NULL;
+}
+/**
+      \fn cleanup
+      \brief do cleanup and purge non processed data at the end of the VC1 stream
+*/
+void dmx_videoIndexerVC1::cleanup(void)
+{
+  uint64_t lastAbs,lastRel;
+          _run->demuxer->getPos(&lastAbs,&lastRel);
+          if(_run->nbPushed)  gopDump(lastAbs,lastRel);
+          dumpPts(firstPicPTS); 
+          
+}
+
+/**
+      \fn run 
+      \brief main indexing loop for VC1 payload
+*/
+uint8_t   dmx_videoIndexerVC1::run  (void)
+{
+dmx_demuxer *demuxer=_run->demuxer;
+uint64_t syncAbs,syncRel;
+uint8_t streamid;   
+uint32_t temporal_ref,ftype,val;
+uint64_t pts,dts;
+uint32_t imageAR;
+VC1Context vc1Context;      
+
+      while(1)
+      {
+
+              if(!demuxer->sync(&streamid,&syncAbs,&syncRel,&pts,&dts)) return 0;   
+              if((_run->totalFileSize>>16)>50)
+              {
+                    _run->work->update(syncAbs>>16,_run->totalFileSize>>16,
+                               _run->nbImage,_run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss);
+              }else
+              {
+                    _run->work->update(syncAbs,_run->totalFileSize,_run->nbImage,
+                            _run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss);
+              }
+              if(_run->work->isAborted()) return 0;
+              switch(streamid)
+                      {
+                  case 0x0f: // sequence start
+                          
+                          if(seq_found)
+                          {
+                              if(grabbing)  
+                                  continue;;
+                              gopDump(syncAbs,syncRel);
+                              grabbing=1;
+                              break;
+                          }
+                          // Verify it is high/advanced profile
+                          {
+                          int seqSize=0;
+                          tsGetBits bits(demuxer);
+                          if(!bits.peekBits(1)) continue; // simple/main profile
+
+                          if(!decodeVC1Seq(bits,*_run,vc1Context)) continue;
+#if 0
+                          seqSize=bits.getConsumed();
+                          video.extraDataLength=seqSize+4+1;
+                          memcpy(video.extraData+4,bits.data,seqSize);
+                            // Add info so that ffmpeg is happy
+                          video.extraData[0]=0;
+                          video.extraData[1]=0;
+                          video.extraData[2]=1;
+                          video.extraData[3]=0xf;
+                          video.extraData[seqSize+4+0]=0;
+#endif
+                          seq_found=1;
+                          // Hi Profile
+                          _frames[0].abs=syncAbs;
+                          _frames[0].rel=syncRel;
+                          grabbing=1;
+                          continue;
+                          }
+                          break;
+                    case 0x0D: //  Picture start
+                        { 
+                          int type;
+                          uint8_t buffer[4];
+                          uint32_t fType,sType;
+                          if(!seq_found)
+                          { 
+                                  printf("[TsIndexer]No sequence start yet, skipping..\n");
+                                  continue;
+                          }      
+                          tsGetBits bits(demuxer);
+
+                          if(!decodeVC1Pic(bits,*_run,vc1Context,fType,sType)) continue;
+                          grabbing=0;
+                          Push(fType,syncAbs,syncRel);
+                        }
+                          break;
+                  default:
+                    break;
+                  }
+      }
+      return 1;   
+}
+/**** Push a frame
+There is a +- 2 correction when we switch gop
+as in the frame header we read 2 bytes
+Between frames, the error is self cancelling.
+
+**/
+/**
+      \fn Push
+      \brief Add a frame to the current gop
+
+*/
+uint8_t dmx_videoIndexerVC1::Push(uint32_t ftype,uint64_t abs,uint64_t rel)
+{
+       printf("%d ",ftype)  ;
+        _frames[_run->nbPushed].type=ftype;
+        
+        if(_run->nbPushed)
+        {                
+                _frames[_run->nbPushed-1].size=_run->demuxer->elapsed();
+                if(_run->nbPushed==1) _frames[_run->nbPushed-1].size-=2;
+                _frames[_run->nbPushed].abs=abs;
+                _frames[_run->nbPushed].rel=rel;        
+                _run->demuxer->stamp();
+        
+        }
+        //aprintf("\tpushed %d %"LLX"\n",nbPushed,abs);
+        _run->nbPushed++;
+        
+        ADM_assert(_run->nbPushed<MAX_PUSHED);
+        return 1;
+
+}
+/**
+    \fn dumpPts
+    \brief
+
+*/
+uint8_t dmx_videoIndexerVC1::dumpPts(uint64_t firstPts)
+{
+uint64_t stats[_run->nbTrack],p;
+double d;
+dmx_demuxer *demuxer=_run->demuxer;
+
+        if(!demuxer->getAllPTS(stats)) return 0;
+        qfprintf(_run->fd,"# Video 1st PTS : %07"LLU"\n",firstPts);
+        if(firstPts==ADM_NO_PTS) return 1;
+        for(int i=1;i<_run->nbTrack;i++)
+        {
+                p=stats[i];
+                if(p==ADM_NO_PTS)
+                {
+                        qfprintf(_run->fd,"# track %d no pts\n",i);
+                }
+                else
+                {
+                        
+                        d=firstPts; // it is in 90 khz tick
+                        d-=stats[i];
+                        d/=90.;
+                        qfprintf(_run->fd,"# track %d PTS : %07"LLU" ",i,stats[i]);
+                        qfprintf(_run->fd," delta=%04d ms\n",(int)d);
+                }
+
+        }
+        return 1;
+}
+/**
+      \fn       gopDump
+      \brief    Dump the content of a gop into the index file
+*/
+uint8_t dmx_videoIndexerVC1::gopDump(uint64_t abs,uint64_t rel)
+{
+  dmx_demuxer *demuxer=_run->demuxer;
+        if(!_run->nbPushed && !_run->nbImage) demuxer->stamp();
+        if(!_run->nbPushed) return 1;
+
+uint64_t stats[_run->nbTrack];
+
+        _frames[_run->nbPushed-1].size=demuxer->elapsed()+2;
+        qfprintf(_run->fd,"V %03u %06u %02u ",_run->nbGop,_run->nbImage,_run->nbPushed);
+
+        // For each picture Type : abs position : relat position : size
+        for(uint32_t i=0;i<_run->nbPushed;i++) 
+        {
+
+                qfprintf(_run->fd,"%c:%08"LLX",%05"LLX,
+                        vc1Type[_frames[i].type],
+                        _frames[i].abs,
+                        _frames[i].rel);
+                qfprintf(_run->fd,",%05x ",
+                        _frames[i].size);
+        }
+        
+        qfprintf(_run->fd,"\n");
+
+        // audio if any
+        //*******************************************
+        // Nb image abs_pos audio seen
+        // The Nb image is used to compute a drift
+        //*******************************************
+        if(demuxer->hasAudio() & _run->nbTrack>1)
+        {
+                demuxer->getStats(stats);
+                
+                qfprintf(_run->fd,"A %u %"LLX" ",_run->nbImage,abs);
+                for(uint32_t i=1;i<_run->nbTrack;i++)
+                {
+                        qfprintf(_run->fd,":%"LLX" ",stats[i]);
+                }
+                qfprintf(_run->fd,"\n");
+                
+        }
+        // Print some gop stamp infos, does not hurt
+        qfprintf(_run->fd,"# Timestamp %02d:%02d:%02d,%03d\n",
+                 _run->lastStamp.hh,_run->lastStamp.mm,_run->lastStamp.ss,_run->lastStamp.ff);
+        _run->nbGop++;
+        _run->nbImage+=_run->nbPushed;
+        _run->nbPushed=0;
+                
+        _frames[0].abs=abs;
+        _frames[0].rel=rel;
+        demuxer->stamp();
+        return 1;
+        
+}
+/**
+      \fn gopUpdate( 
+      \brief Update the timecode hh:mm:ss.xx inside a gop header
+*/
+uint8_t dmx_videoIndexerVC1::gopUpdate(void)
+{
+        return 1;
+}
+/**
+    \fn decodeVc1Seq
+    \brief http://wiki.multimedia.cx/index.php?title=VC-1#Setup_Data_.2F_Sequence_Layer
+#warning we should de-escape it!
+        Large part of this borrowed from VLC
+        Advanced/High profile only
+*/
+bool decodeVC1Seq(tsGetBits &bits,dmx_runData &video,VC1Context &vc1Context)
+{
+
+int v;
+int consumed;
+    vc1Context.advanced=true;
+
+#define VX(a,b) v=bits.getBits(a);printf("[VC1] %d "#b"\n",v);consumed+=a;
+    VX(2,profile);
+    VX(3,level);
+
+    VX(2,chroma_format);
+    VX(3,Q_frame_rate_unused);
+    VX(5,Q_bit_unused);
+
+    VX(1,postproc_flag);
+
+    VX(12,coded_width);
+    video.imageW=v*2+2;
+    VX(12,coded_height);
+    video.imageH=v*2+2;
+
+    VX(1,pulldown_flag);
+    VX(1,interlaced_flag);
+    vc1Context.interlaced=v;
+    VX(1,frame_counter_flag);
+
+    VX(1,interpolation_flag);
+    vc1Context.interpolate=v;
+
+    VX(1,reserved_bit);
+    VX(1,psf);
+
+    VX(1,display_extension);
+    if(v)
+    {
+         VX(14,display_extension_coded_width);
+         VX(14,display_extension_coded_height);
+         VX(1,aspect_ratio_flag);
+     
+
+         if(v)
+         {
+                VX(4,aspect_ratio);
+                switch(v)
+                {
+                    case 15: 
+                             video.imageDarNum=bits.getBits(8);
+                             video.imageDarDen=bits.getBits(8);
+                             break;
+                    default:
+                             video.imageDarNum=VC1_ar[v][0];
+                             video.imageDarDen=VC1_ar[v][1];
+                             break;
+                }
+                printf("[VC1] Aspect ratio %d x %d\n",video.imageDarNum,video.imageDarDen);
+         }
+    
+        VX(1,frame_rate);
+        if(v)
+        {
+                VX(1,frame_rate32_flag);
+                if(v)
+                {
+                    VX(16,frame_rate32);
+                    float f=v;
+                    f=(f+1)/32;
+                    f*=1000;
+                    video.imageFPS=(uint32_t)f;
+                }else
+                {
+                    float den,num;
+                    VX(8,frame_rate_num)
+                    switch( v )
+                        {
+                        case 1: num = 24000; break;
+                        case 2: num = 25000; break;
+                        case 3: num = 30000; break;
+                        case 4: num = 50000; break;
+                        case 5: num = 60000; break;
+                        case 6: num = 48000; break;
+                        case 7: num = 72000; break;
+                        }
+                    VX(4,frame_rate_den)
+                    switch( v )
+                        {
+                        default:
+                        case 1: den = 1000; break;
+                        case 2: den = 1001; break;
+                        }
+
+                    float f=num*1000;
+                    f/=den;
+                    video.imageFPS=(uint32_t)f;
+                }
+            }else
+            {
+                video.imageFPS=25000;
+            }
+            //
+            VX(1,color_flag);
+            if(v){
+                    VX(8,color_prim);
+                    VX(8,transfer_char);
+                    VX(8,matrix_coef);
+                }
+    }
+    VX(1,hrd_param_flag);
+    int leaky=0;
+    if(v)
+    {
+        VX(5,hrd_num_leaky_buckets);
+        leaky=v;
+        VX(4,bitrate_exponent);
+        VX(4,buffer_size_exponent);
+        for(int i = 0; i < leaky; i++) 
+        {
+                bits.getBits(16);
+                bits.getBits(16);
+        }
+    }
+    // Now we need an entry point
+    bits.flush();
+    uint8_t a[4];
+    uint8_t entryPoint[4]={0,0,1,0x0E};
+    for(int i=0;i<4;i++) a[i]=bits.getBits(8);
+    for(int i=0;i<4;i++) printf("%02x ",a[i]);
+    printf(" as marker\n");
+    if(memcmp(a,entryPoint,4))
+    {
+        printf("Bad entry point");
+        return false;
+    }
+    VX(6,ep_flags);
+    VX(1,extended_mv);
+    int extended_mv=v;
+    VX(6,ep_flags2);
+
+    for(int i=0;i<leaky;i++)
+            bits.getBits(8);
+    VX(1,ep_coded_dimension);
+    if(v)
+    {
+         VX(12,ep_coded_width);
+         VX(12,ep_coded_height);
+    }
+    if(extended_mv) VX(1,dmv);
+    VX(1,range_mappy_flags);
+    if(v) VX(3,mappy_flags);
+    VX(1,range_mappuv_flags);
+    if(v) VX(3,mappuv_flags);
+    return true;
+
+}
+/**
+    \fn decodeVC1Pic
+    \brief Decode info from VC1 picture
+    Borrowed a lot from VLC also
+
+*/
+bool decodeVC1Pic(tsGetBits &bits,dmx_runData &video,VC1Context &vc1Context,uint32_t &frameType,uint32_t &frameStructure)
+{
+    frameStructure=3;
+    frameType=1;
+    bool field=false;
+    if(vc1Context.interlaced)
+    {
+        if(bits.getBits(1))
+        {
+            if(bits.getBits(1))
+               field=true;
+        }
+    }
+    if(field)
+    {
+            int fieldType=bits.getBits(3);
+            frameStructure=1; // Top
+            switch(fieldType)
+            {
+                case 0: /* II */
+                case 1: /* IP */
+                case 2: /* PI */
+                    frameType=1;
+                    break;
+                case 3: /* PP */
+                    frameType=2;
+                    break;
+                case 4: /* BB */
+                case 5: /* BBi */
+                case 6: /* BiB */
+                case 7: /* BiBi */
+                    frameType=3;
+                    break;
+
+            }
+    }else
+    {
+                frameStructure=3; // frame
+                if( !bits.getBits(1))
+                    frameType=2;
+                else if( !bits.getBits(1))
+                    frameType=3;
+                else if( !bits.getBits(1))
+                    frameType=1;
+                else if( !bits.getBits(1))
+                    frameType=3;
+                else
+                    frameType=2;
+    }
+
+    return true;
+}
+
+/********************************************************************************************/
+/********************************************************************************************/
+/********************************************************************************************/
+/********************************************************************************************/
+
+//

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_probeTS.cpp	2010-06-27 08:45:08 UTC (rev 6421)
@@ -322,7 +322,7 @@
 	{
 		ADM_STREAM_TYPE type = xtracks[j].streamType;
 
-		if(type == ADM_STREAM_MPEG_VIDEO || type==ADM_STREAM_MPEG4 || type==ADM_STREAM_H264)
+		if(type == ADM_STREAM_MPEG_VIDEO || type==ADM_STREAM_MPEG4 || type==ADM_STREAM_H264 || type==ADM_STREAM_VC1)
 		{
 			found = j;
 			break;
@@ -586,7 +586,10 @@
 				uint8_t *d = &progDescBuffer[i + 2];
 
 				if (d[0] == 'A' && d[1] == 'C' && d[2] == '-' && d[3] == '3')	// AC3
-					*esType = 0x81;
+					*esType = 0x81;
+                else if (d[0] == 'V' && d[1] == 'C' && d[2] == '-' && d[3] == '1')	
+                            *esType = 0xea;
+                    else printf("Unkown registration : %c%c%c%c\n",d[0],d[1],d[2],d[3]);
 				//else if (d[0] == 'D' && d[1] == 'T' && d[2] == 'S' && d[3] == '1')	// DTS
 				//else if (d[0] == 'D' && d[1] == 'T' && d[2] == 'S' && d[3] == '2')	// DTS
 				//else if (d[0] == 'V' && d[1] == 'C' && d[2] == '-' && d[3] == '1')	// VC-1
@@ -610,6 +613,7 @@
    case 0x10:        *streamType=ADM_STREAM_MPEG4;return "MP4 Video";
    case 0x1B: *streamType=ADM_STREAM_H264;return "H264";
    case 0x81: *streamType=ADM_STREAM_AC3;return "Private (AC3?)";
+   case 0xea: *streamType=ADM_STREAM_VC1;return "VC1";
  }
  *streamType=ADM_STREAM_UNKNOWN;
   return "???";
@@ -632,6 +636,7 @@
   MST(ADM_STREAM_H264,H264)
   MST(ADM_STREAM_MPEG4,MPEG4)
   MST(ADM_STREAM_AAC,AAC)
+  MST(ADM_STREAM_VC1,VC1)
     
   }
   return "???";

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2010-06-26 07:54:10 UTC (rev 6420)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2010-06-27 08:45:08 UTC (rev 6421)
@@ -256,7 +256,11 @@
                         {
                               _payloadType=DMX_PAYLOAD_MPEG4;
                         }else
+                        if(!strncmp(payload,"VC1",3))
                         {
+                              _payloadType=DMX_PAYLOAD_VC1;
+                        }else
+                        {
                           ADM_assert(0); 
                         }
                         
@@ -512,6 +516,7 @@
                           case DMX_PAYLOAD_MPEG2:_videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"MPEG");;break;
                           case DMX_PAYLOAD_MPEG4:_videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"DX50");;break;
                           case DMX_PAYLOAD_H264:_videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"H264");;break;
+                          case DMX_PAYLOAD_VC1:_videostream.fccHandler=_video_bih.biCompression=fourCC::get((uint8_t *)"WVC1");;break;
                           default: ADM_assert(0);
                         }
                         



From mean at mail.berlios.de  Sun Jun 27 10:45:14 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 10:45:14 +0200
Subject: [Avidemux-svn-commit] r6422 - in
	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_codecs
	ADM_inputs/ADM_mpegdemuxer
Message-ID: <201006270845.o5R8jE6M031548@sheep.berlios.de>

Author: mean
Date: 2010-06-27 10:45:14 +0200 (Sun, 27 Jun 2010)
New Revision: 6422

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
Log:
[VC1] Almost correct VC1 setup

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2010-06-27 08:45:08 UTC (rev 6421)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.cpp	2010-06-27 08:45:14 UTC (rev 6422)
@@ -659,7 +659,8 @@
 {
   _context->extradata = (uint8_t *) d;
   _context->extradata_size = (int) l;
-
+  _refCopy = 1;			// YUV420 only
+  LOWDELAY();
   WRAP_Open (CODEC_ID_VC1);
 }
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h	2010-06-27 08:45:08 UTC (rev 6421)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_ffmp43.h	2010-06-27 08:45:14 UTC (rev 6422)
@@ -240,7 +240,10 @@
 
 public:
   decoderFFVC1 (uint32_t w, uint32_t h, uint32_t l, uint8_t * d);
-
+  virtual uint8_t bFramePossible (void)
+  {
+      return true;
+  }
 };
 
 class decoderFFV1:public decoderFF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2010-06-27 08:45:08 UTC (rev 6421)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2010-06-27 08:45:14 UTC (rev 6422)
@@ -466,15 +466,22 @@
                                 scancode<<=8;
                                 scancode+=tmp[count];
                                 count++;
-                                if(scancode==0x000001b8 || scancode==0x00000100)
+                                if(scancode==0x000001b8 || scancode==0x00000100 || scancode==0x10D)
                                 {
                                         found=1;
                                         break;
                                 }                                                       
                         }
-                        if(found && count>4)
+                        
+                        switch(_payloadType)
                         {
-                                
+
+                        case DMX_PAYLOAD_MPEG2:
+                            if(found && count<4)
+                            {
+                                    printf("Mmm cound not find a gop start.....\n");
+                                    break;
+                            }
                                 _extraDataLen=count-4;
                                 _extraData=new uint8_t[_extraDataLen];
                                 memcpy(_extraData,tmp,_extraDataLen);
@@ -485,12 +492,30 @@
                                         _extraDataLen, _extraData[0],
                                                         _extraData[1],
                                                         _extraData[2],
-                                                        _extraData[3]);                                          
-                        }
-                        else
+                                                        _extraData[3]);    
+                                break;
+                        case DMX_PAYLOAD_VC1:
                         {
-                                printf("Mmm cound not find a gop start.....\n");
+                                if(!found)
+                                {
+                                        printf("No seq header + extraction point\n");
+                                        return false;
+                                }
+                                _extraDataLen=count-4;
+                                _extraData=new uint8_t[_extraDataLen];
+                                memcpy(_extraData,tmp,_extraDataLen);
+                                mixDump(tmp,50);
+                                printf("\n");
+                                printf("Image :%d, seqLen : %u seq %x %x %x %x\n",
+                                        firstPic,
+                                        _extraDataLen, _extraData[0],
+                                                        _extraData[1],
+                                                        _extraData[2],
+                                                        _extraData[3]);  
                         }
+                        break;
+                        default: break;
+                        }
                         delete [] tmp;                                                
                    
                          demuxer->setPos(_index[0].absolute,



From mean at mail.berlios.de  Sun Jun 27 10:45:18 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 10:45:18 +0200
Subject: [Avidemux-svn-commit] r6423 -
	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer
Message-ID: <201006270845.o5R8jIfI031558@sheep.berlios.de>

Author: mean
Date: 2010-06-27 10:45:15 +0200 (Sun, 27 Jun 2010)
New Revision: 6423

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
Log:
[vc1] Add one extra byte to vc1 extradata

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2010-06-27 08:45:14 UTC (rev 6422)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_inputs/ADM_mpegdemuxer/dmx_video.cpp	2010-06-27 08:45:15 UTC (rev 6423)
@@ -501,7 +501,7 @@
                                         printf("No seq header + extraction point\n");
                                         return false;
                                 }
-                                _extraDataLen=count-4;
+                                _extraDataLen=count-3;
                                 _extraData=new uint8_t[_extraDataLen];
                                 memcpy(_extraData,tmp,_extraDataLen);
                                 mixDump(tmp,50);



From mean at mail.berlios.de  Sun Jun 27 12:06:03 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 12:06:03 +0200
Subject: [Avidemux-svn-commit] r6424 -
	branches/avidemux_2.5_branch_gruntster/cmake/patches
Message-ID: <201006271006.o5RA6310002741@sheep.berlios.de>

Author: mean
Date: 2010-06-27 12:06:03 +0200 (Sun, 27 Jun 2010)
New Revision: 6424

Added:
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch
Log:
[Ffmpeg] Allow low delay for vc1

Added: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch	2010-06-27 08:45:15 UTC (rev 6423)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_vc1_lowdelay.c.patch	2010-06-27 10:06:03 UTC (rev 6424)
@@ -0,0 +1,16 @@
+Index: libavcodec/vc1dec.c
+===================================================================
+--- libavcodec/vc1dec.c	(revision 23514)
++++ libavcodec/vc1dec.c	(working copy)
+@@ -3118,7 +3118,10 @@
+     AVFrame *pict = data;
+     uint8_t *buf2 = NULL;
+     const uint8_t *buf_start = buf;
+-
++/** MEANX **/
++    if(s->flags& CODEC_FLAG_LOW_DELAY)
++        s->low_delay=1;
++/** /MEANX **/
+     /* no supplementary picture */
+     if (buf_size == 0) {
+         /* special case for last picture */



From mean at mail.berlios.de  Sun Jun 27 15:42:41 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 15:42:41 +0200
Subject: [Avidemux-svn-commit] r6425 - in branches/avidemux_2.6_branch_mean:
	avidemux/qt4/ADM_userInterfaces/ADM_dialog
	avidemux_core/ADM_core/include avidemux_core/ADM_coreUtils/include
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006271342.o5RDgfE8024112@sheep.berlios.de>

Author: mean
Date: 2010-06-27 15:42:40 +0200 (Sun, 27 Jun 2010)
New Revision: 6425

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[All] Include string by default

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_encoding.cpp	2010-06-27 10:06:03 UTC (rev 6424)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_dialog/Q_encoding.cpp	2010-06-27 13:42:40 UTC (rev 6425)
@@ -99,9 +99,9 @@
 //*******************************************
 #define WIDGET(x) (window->ui.x)
 #define WRITEM(x,y) window->ui.x->setText(y)
-#define WRITE(x) WRITEM(x,string)
+#define WRITE(x) WRITEM(x,stringMe)
 /*************************************/
-static char string[80];
+static char stringMe[80];
 #define window ((encodingWindow *)WINDOW)
 DIA_encodingQt4::DIA_encodingQt4( uint64_t duration) : DIA_encodingBase(duration)
 {
@@ -119,7 +119,7 @@
 
 void DIA_encodingQt4::setFps(uint32_t fps)
 {
-      snprintf(string,79,"%"LU" fps",fps);
+      snprintf(stringMe,79,"%"LU" fps",fps);
       WRITE(labelFps);
 }
 
@@ -180,7 +180,7 @@
 void DIA_encodingQt4::setFrameCount(uint32_t nb)
 {
           ADM_assert(window);
-          snprintf(string,79,"%"LU,nb);
+          snprintf(stringMe,79,"%"LU,nb);
           WRITE(labelFrame);
 
 }
@@ -224,7 +224,7 @@
 void DIA_encodingQt4::setBitrate(uint32_t br,uint32_t globalbr)
 {
           ADM_assert(window);
-          snprintf(string,79,"%"LU" kB/s",br);
+          snprintf(stringMe,79,"%"LU" kB/s",br);
           WRITE(labelVidBitrate);
 
 }
@@ -247,7 +247,7 @@
 void DIA_encodingQt4::setQuantIn(int size)
 {
           ADM_assert(window);
-          sprintf(string,"%"LU,size);
+          sprintf(stringMe,"%"LU,size);
           WRITE(labelQz);
 
 }
@@ -260,7 +260,7 @@
 {
           ADM_assert(window);
           uint64_t mb=size>>20;
-          sprintf(string,"%"LU" MB",(int)mb);
+          sprintf(stringMe,"%"LU" MB",(int)mb);
           WRITE(labelTotalSize);
 
 }
@@ -274,7 +274,7 @@
 {
           ADM_assert(window);
           uint64_t mb=size>>20;
-          sprintf(string,"%"LU" MB",(int)mb);
+          sprintf(stringMe,"%"LU" MB",(int)mb);
           WRITE(labelVideoSize);
 
 }
@@ -287,7 +287,7 @@
 {
           ADM_assert(window);
           uint64_t mb=size>>20;
-          sprintf(string,"%"LU" MB",(int)mb);
+          sprintf(stringMe,"%"LU" MB",(int)mb);
           WRITE(labelAudioSize);
 
 }
@@ -301,7 +301,7 @@
           ADM_assert(window);
           uint64_t mb=nb;
           mb*=1000;
-          strcpy(string,ADM_us2plain(mb));
+          strcpy(stringMe,ADM_us2plain(mb));
           WRITE(labelElapsed);
 }
 /**
@@ -312,7 +312,7 @@
 void DIA_encodingQt4::setAverageQz(uint32_t nb)
 {
           ADM_assert(window);
-          snprintf(string,79,"%"LU,nb);
+          snprintf(stringMe,79,"%"LU,nb);
           WRITE(labelQz);
 }
 /**
@@ -323,7 +323,7 @@
 void DIA_encodingQt4::setAverageBitrateKbits(uint32_t kb)
 {
           ADM_assert(window);
-          snprintf(string,79,"%"LU" kbits/s",kb);
+          snprintf(stringMe,79,"%"LU" kbits/s",kb);
           WRITE(labelVidBitrate);
 }
 
@@ -336,7 +336,7 @@
           ADM_assert(window);
           uint64_t mb=nb;
           mb*=1000;
-          strcpy(string,ADM_us2plain(mb));
+          strcpy(stringMe,ADM_us2plain(mb));
           WRITE(labelETA);
 }
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h	2010-06-27 10:06:03 UTC (rev 6424)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h	2010-06-27 13:42:40 UTC (rev 6425)
@@ -22,6 +22,10 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+#ifdef __cplusplus
+#include <string>
+using std::string;
+#endif
 
 #include "ADM_coreConfig.h"
 #include "ADM_inttype.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h	2010-06-27 10:06:03 UTC (rev 6424)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_quota.h	2010-06-27 13:42:40 UTC (rev 6425)
@@ -23,7 +23,9 @@
 /* qfopen stands for quota-fopen() */
 
 FILE *qfopen(const char *, const char *);
-
+#ifdef __cplusplus
+FILE *qfopen(const std::string &name, const char *);
+#endif
 /* qfprintf stands for quota-fprintf() */
 void qfprintf(FILE *, const char *, ...);
 size_t qfwrite(const void *ptr, size_t size, size_t  nmemb, FILE *stream);

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 10:06:03 UTC (rev 6424)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 13:42:40 UTC (rev 6425)
@@ -15,7 +15,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include <string>
 #include "ADM_includeFfmpeg.h"
 #include "ADM_default.h"
 #include "ADM_demuxerInternal.h"
@@ -36,9 +35,9 @@
 #include "ADM_tsGetBits.h"
 
 
-using std::string;
-FILE *qfopen(const std::string &name, const char *);
 
+
+
 #define zprintf(...) {}
 static const char Structure[4]={'X','T','B','F'}; // X Top Bottom Frame
 static const char Type[5]={'X','I','P','B','D'};



From mean at mail.berlios.de  Sun Jun 27 15:42:44 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 15:42:44 +0200
Subject: [Avidemux-svn-commit] r6426 - in
	branches/avidemux_2.6_branch_mean/avidemux/common: .
	ADM_editor ADM_toolkit
Message-ID: <201006271342.o5RDgi3B024127@sheep.berlios.de>

Author: mean
Date: 2010-06-27 15:42:43 +0200 (Sun, 27 Jun 2010)
New Revision: 6426

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
Log:
[editor] Switch from char* to string for editor projectName

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-06-27 13:42:40 UTC (rev 6425)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-06-27 13:42:43 UTC (rev 6426)
@@ -70,7 +70,7 @@
   _internalFlags=0;
   _currentSegment=0;
   _scratch=NULL;
-  projectName=NULL;
+  currentProjectName=string("");
 }
 /**
 	Remap 1:1 video to segments
@@ -112,28 +112,22 @@
 	deletePostProc(&_pp);
     if(_imageBuffer) delete  _imageBuffer;
     _imageBuffer=NULL;
-    if(projectName) ADM_dealloc(projectName);
-    projectName=NULL;
+
 }
 /**
     \fn getProjectName
 */
-const char *ADM_Composer::getProjectName(void)
+const string &ADM_Composer::getProjectName(void)
 {
-    if(!projectName) return NULL;
-    if(!strlen(projectName)) return NULL;
-    return projectName;
+    return currentProjectName;
 }
 
 /**
     \fn setProjectName
 */
-bool ADM_Composer::setProjectName(const char *pj)
+bool ADM_Composer::setProjectName(const string &pj)
 {
-    if(projectName) ADM_dealloc(projectName);
-    projectName=NULL;
-    if(pj)
-        projectName=ADM_strdup(pj);
+    currentProjectName=pj;
     return true;
 }
 /**

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-27 13:42:40 UTC (rev 6425)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-27 13:42:43 UTC (rev 6426)
@@ -63,7 +63,7 @@
 class ADM_Composer : public ADM_audioStream
 {
   private:
-                    const  char *projectName;
+                    string currentProjectName;
   private:
 //*********************************PRIVATE API *******************************************
                     //bool		decodeCache(uint32_t ref, uint32_t frame,ADMImage *image);
@@ -203,8 +203,8 @@
 /**************************************** /Video Info **************************/					
 /***************************************** Project Handling ********************/
 public:
-                    const char          *getProjectName(void);
-                    bool                 setProjectName(const char *name);
+                    const string         &getProjectName(void);
+                    bool                 setProjectName(const string &name);
 					
 /***************************************** Seeking *****************************/            
 public:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-06-27 13:42:40 UTC (rev 6425)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-06-27 13:42:43 UTC (rev 6426)
@@ -142,7 +142,7 @@
         {"load-workbench",	1,"load workbench file", (one_arg_type)A_openAvi},
         {"append",		1,"append video",			(one_arg_type)A_appendAvi},
         {"save",		1,"save avi",				(one_arg_type)save},
-        {"save-workbench",	1,"save workbench file",		(one_arg_type)A_saveWorkbench},
+        {"save-workbench",	1,"save workbench file",		(one_arg_type)A_saveJsProject},
 
         {"force-b-frame",	0,"Force detection of bframe in next loaded file", (one_arg_type)call_bframe},
         {"force-alt-h264",	0,"Force use of alternate read mode for h264", (one_arg_type)call_x264},

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2010-06-27 13:42:40 UTC (rev 6425)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/A_functions.h	2010-06-27 13:42:43 UTC (rev 6426)
@@ -11,7 +11,6 @@
 void    A_openBrokenAvi (const char *name);
 int     A_openAvi2 (const char *name, uint8_t mode);
 int     A_appendAvi (const char *name);
-void    A_saveWorkbench (const char *name);
 void    A_videoCheck( void);
 void	A_setPostproc( void );
 void    A_Resync(void);
@@ -38,7 +37,7 @@
 int  A_saveBunchJpg(const char *name);
 int  A_saveImg (const char *name);
 int  ADM_saveRaw (const char *name);
-void A_saveWorkbench (const char *name);
+void A_saveJsProject (const char *name);
 void A_savePyProject (const char *name);
 int  A_audioSave(const char *name);
 int  A_SaveWrapper(const char *name);

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-27 13:42:40 UTC (rev 6425)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-27 13:42:43 UTC (rev 6426)
@@ -49,18 +49,16 @@
             UI_refreshCustomMenu();
             break;
     case ACT_SaveWork:
-      GUI_FileSelWrite (QT_TR_NOOP("Select Project to Save"), A_saveWorkbench);
+      GUI_FileSelWrite (QT_TR_NOOP("Select Project to Save"), A_saveJsProject);
 	  UI_refreshCustomMenu();
       break;
    case ACT_SaveCurrentWork:
         {
-          const char *pj=video_body->getProjectName();
-          if( pj ){
-            char *tmp = ADM_strdup(pj);
-             A_saveWorkbench( tmp ); // will write "actual_workbench_file" itself
-             ADM_dealloc(tmp);
+          const string pj=video_body->getProjectName();
+          if( pj.length() ){
+             A_saveJsProject( pj.c_str() ); // will write "actual_workbench_file" itself
           }else{
-            GUI_FileSelWrite (QT_TR_NOOP("Select Workbench to Save"), A_saveWorkbench);
+            GUI_FileSelWrite (QT_TR_NOOP("Select Workbench to Save"), A_saveJsProject);
             UI_refreshCustomMenu();
           }
         }
@@ -438,7 +436,7 @@
     \fn A_saveWorkbench
     \brief Save current workbench as ecmascript
 */
-void A_saveWorkbench (const char *name)
+void A_saveJsProject (const char *name)
 {
   video_body->saveAsScript(name,NULL);
   video_body->setProjectName(name);



From mean at mail.berlios.de  Sun Jun 27 15:42:45 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 15:42:45 +0200
Subject: [Avidemux-svn-commit] r6427 -
	branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006271342.o5RDgjcm024141@sheep.berlios.de>

Author: mean
Date: 2010-06-27 15:42:45 +0200 (Sun, 27 Jun 2010)
New Revision: 6427

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
Log:
[plugin] build fix (?)

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 13:42:43 UTC (rev 6426)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 13:42:45 UTC (rev 6427)
@@ -16,6 +16,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "ADM_includeFfmpeg.h"
+#include "ADM_getbits.h"
 #include "ADM_default.h"
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
@@ -30,7 +31,6 @@
 #include "ADM_videoInfoExtractor.h"
 #include "ADM_h264_tag.h"
 #include "ADM_clock.h"
-#include "ADM_getbits.h"
 #include "ADM_indexFile.h"
 #include "ADM_tsGetBits.h"
 



From mean at mail.berlios.de  Sun Jun 27 17:19:00 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 17:19:00 +0200
Subject: [Avidemux-svn-commit] r6428 - in branches/avidemux_2.6_branch_mean:
	avidemux_core/ADM_coreAudioParser/src
	avidemux_core/ADM_coreUtils/include avidemux_core/ADM_coreUtils/src
	avidemux_plugins/ADM_demuxers/MpegTS
Message-ID: <201006271519.o5RFJ0sL028687@sheep.berlios.de>

Author: mean
Date: 2010-06-27 17:18:59 +0200 (Sun, 27 Jun 2010)
New Revision: 6428

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_dcainfo.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_getbits.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractor.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
Log:
[All] Wrap get_bits inside a class to avoid including fffmpeg headers directly. Slower but safer

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_dcainfo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_dcainfo.cpp	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/ADM_dcainfo.cpp	2010-06-27 15:18:59 UTC (rev 6428)
@@ -14,7 +14,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_includeFfmpeg.h"
 #include "ADM_default.h"
 #include "ADM_dcainfo.h"
 #include "ADM_getbits.h"
@@ -71,25 +70,24 @@
                 // Frame length  7
                 // Frame Size 14
                 // **** Inefficient ! ****
-                GetBitContext s;
-                init_get_bits( &s,cur, (end-cur)*8);
-                skip_bits(&s,32);
-                skip_bits(&s,1);
-                skip_bits(&s,5);
-                skip_bits(&s,1);
+                getBits bits((int)(end-cur),cur);
+                bits.skip(32);
+                bits.skip(1);
+                bits.skip(5);
+                bits.skip(1);
                 //Nb Samples
-                nbBlocks=(get_bits(&s,7)+1);
+                nbBlocks=1+bits.get(7);
                 // Frame size in bit
-                len2=get_bits(&s,14);
+                len2=bits.get(14);
                 framesize=len2+1;
                 //
                 //
                 //
-                flags=get_bits(&s,6);
+                flags=bits.get(6);
                 info->flags=flags;
-                index=get_bits(&s,4);
+                index=bits.get(4);
                 info->frequency=dts_sample_rates[index];
-                index=get_bits(&s,5);
+                index=bits.get(5);
                 info->bitrate=dts_bit_rates[index];
 #if 0
                 printf("[dts]Flags  :%u\n",flags);
@@ -100,8 +98,8 @@
 #endif
                 *syncoff=cur-buf;
                 if(*syncoff) ADM_warning("[dts] Dropped %u bytes\n",*syncoff);
-                get_bits(&s,10);
-                int lfe=get_bits(&s,2);
+                bits.get(10);
+                int lfe=bits.get(2);
                 int c;
                 c=dts_channels[flags & 0xf];
                 if(c==5 && lfe) c++; // LFE

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_getbits.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_getbits.h	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/include/ADM_getbits.h	2010-06-27 15:18:59 UTC (rev 6428)
@@ -11,26 +11,24 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#ifndef ADM_GETBITS_H
+#define ADM_GETBITS_H
 
+class getBits
+{
+protected:
+         void *ctx;
+public:
+                getBits(int bufferSizeInBytes, uint8_t *buffer);
+                ~getBits();
+            int get(int nb);
+            int getUEG(void);
+            int getSEG(void);
+            int getUEG31(void);
+            int skip(int nb);
+            int getConsumedBits(void);
+};
 
-#include "ADM_default.h"
 
-#ifndef ADM_getbits_H
-#define ADM_getbits_H
-extern "C"
-{
-#define ADM_NO_CONFIG_H
-#include "ADM_ffmpeg/libavutil/common.h"
-#include "ADM_ffmpeg/libavutil/bswap.h"
-#ifndef INT_MAX
-#define INT_MAX (0x7FFFFFFF)
 #endif
-#include "ADM_ffmpeg/ffmpeg_config/config.h"
-#include "ADM_ffmpeg/libavutil/internal.h"
-#include "ADM_ffmpeg/libavcodec/get_bits.h"
-#include "ADM_ffmpeg/libavcodec/golomb.h"
-}
-#undef printf
-#undef sprintf
-#endif
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractor.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractor.cpp	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractor.cpp	2010-06-27 15:18:59 UTC (rev 6428)
@@ -12,25 +12,36 @@
  *                                                                         *
  ***************************************************************************/
 
-#include "ADM_includeFfmpeg.h"
-
 #include "ADM_default.h"
 #include "ADM_Video.h"
-
 #include "fourcc.h"
-//#include "ADM_mp4.h"
-
-#define aprintf(...) {}
 #include "ADM_getbits.h"
 #include "ADM_videoInfoExtractor.h"
 #include "ADM_h264_tag.h"
 
+#define aprintf(...) {}
+
 bool ADM_findMpegStartCode (uint8_t * start, uint8_t * end,
 			    uint8_t * outstartcode, uint32_t * offset);
+
+extern const uint8_t ff_log2_tab[256];
+static  int av_log2_c(unsigned int v)
+{
+    int n = 0;
+    if (v & 0xffff0000) {
+        v >>= 16;
+        n += 16;
+    }
+    if (v & 0xff00) {
+        v >>= 8;
+        n += 8;
+    }
+    n += ff_log2_tab[v];
+
+    return n;
+}
 /*
     Extract width & height from vol header passed as arg
-
-
 */
 uint8_t
 extractMpeg4Info (uint8_t * data, uint32_t dataSize, uint32_t * w,
@@ -77,49 +88,49 @@
 		}
 #endif
 	      // Here we go !
-	      GetBitContext s;
-	      init_get_bits (&s, data + idx, dataSize * 8);
+          getBits bits(dataSize,data + idx);
+
 	      //
-	      skip_bits1 (&s);	// Random access
-	      skip_bits (&s, 8);	// Obj type indication
-	      if (get_bits (&s, 1))	// VO od 
+	      bits.skip(1);
+          bits.skip(8);	      // Obj type indication
+	      if (bits.get(1))	// VO od 
 		{
-		  skip_bits (&s, 4);	// Ver
-		  skip_bits (&s, 3);	// Priority
+		  bits.get( 4);	// Ver
+		  bits.get( 3);	// Priority
 		}
-	      if (get_bits (&s, 4) == 15)	// custom A/R
+	      if (bits.get( 4) == 15)	// custom A/R
 		{
-		  skip_bits (&s, 8);
-		  skip_bits (&s, 8);
+		  bits.get( 8);
+		  bits.get( 8);
 		}
-	      if (get_bits (&s, 1))	// Vol control param
+	      if (bits.get( 1))	// Vol control param
 		{
-		  skip_bits (&s, 2);	//Chroma
-		  skip_bits (&s, 1);	// Low delay
-		  if (get_bits (&s, 1))	// VBV Info
+		  bits.get( 2);	//Chroma
+		  bits.get( 1);	// Low delay
+		  if (bits.get( 1))	// VBV Info
 		    {
-		      skip_bits (&s, 16);
-		      skip_bits (&s, 16);
-		      skip_bits (&s, 16);
-		      skip_bits (&s, 15);
-		      skip_bits (&s, 16);
+		      bits.get( 16);
+		      bits.get( 16);
+		      bits.get( 16);
+		      bits.get( 15);
+		      bits.get( 16);
 		    }
 		}
-	      skip_bits (&s, 2);	//  Shape
-	      skip_bits (&s, 1);	//  Marker
-	      timeVal = get_bits (&s, 16);	// Time increment
-	      *time_inc = av_log2 (timeVal - 1) + 1;
+	      bits.get( 2);	//  Shape
+	      bits.get( 1);	//  Marker
+	      timeVal = bits.get( 16);	// Time increment
+	      *time_inc = av_log2_c (timeVal - 1) + 1;
 	      if (*time_inc < 1)
-		*time_inc = 1;
-	      skip_bits (&s, 1);	//  Marker
-	      if (get_bits (&s, 1))	// Fixed vop rate, compute how much bits needed
+		 *time_inc = 1;
+	      bits.get( 1);	//  Marker
+	      if (bits.get( 1))	// Fixed vop rate, compute how much bits needed
 		{
-		  get_bits (&s, *time_inc);
+		  bits.get( *time_inc);
 		}
-	      skip_bits (&s, 1);	//  Marker
-	      mw = get_bits (&s, 13);
-	      skip_bits (&s, 1);	//  Marker
-	      mh = get_bits (&s, 13);
+	      bits.get( 1);	//  Marker
+	      mw = bits.get( 13);
+	      bits.get( 1);	//  Marker
+	      mh = bits.get( 13);
 	      // /Here we go
 	      //printf("%d x %d \n",mw,mh);
 	      *h = mh;
@@ -153,11 +164,12 @@
 		uint32_t * vopType, uint32_t * modulo, uint32_t * time_inc,
 		uint32_t * vopcoded)
 {
-  GetBitContext s;
+  
   int vop;
   uint32_t vp, tinc;
-  init_get_bits (&s, data, len * 8);
-  vop = get_bits (&s, 2);
+  getBits bits(len,data );
+  
+  vop = bits.get( 2);
   switch (vop)
     {
     case 0:
@@ -178,25 +190,25 @@
     }
   /* Read modulo */
   int imodulo = 0;
-  while (get_bits1 (&s) != 0)
+  while (bits.get(1) != 0)
     imodulo++;
-  if (!get_bits1 (&s))
+  if (!bits.get(1))
     {
       printf ("Wrong marker1\n");
       return 0;
     }
 
   /* Read time */
-  tinc = get_bits (&s, timeincbits);
+  tinc = bits.get(timeincbits);
   /* Marker */
-  if (!get_bits1 (&s))
+  if (!bits.get(1))
     {
       printf ("Wrong marker2\n");
       return 0;
     }
   /* Vop coded */
   *modulo = imodulo;
-  *vopcoded = get_bits1 (&s);
+  *vopcoded = bits.get(1);
   *vopType = vp;
   *time_inc = tinc;
   return 1;
@@ -209,32 +221,33 @@
 extractH263FLVInfo (uint8_t * buffer, uint32_t len, uint32_t * w,
 		    uint32_t * h)
 {
-  GetBitContext gb;
+  
   int format;
-  init_get_bits (&gb, buffer, len * 8);
-  if (get_bits_long (&gb, 17) != 1)
+  getBits bits(len,buffer );
+  
+  if (bits.get( 17) != 1)
     {
       printf ("[FLV]Wrong FLV1 header\n");
       return 0;
     }
-  format = get_bits (&gb, 5);
+  format = bits.get( 5);
   if (format != 0 && format != 1)
     {
       printf ("[FLV]Wrong FLV1 header format\n");
       return 0;
     }
 
-  get_bits (&gb, 8);		/* picture timestamp */
-  format = get_bits (&gb, 3);
+  bits.get(8);		/* picture timestamp */
+  format = bits.get( 3);
   switch (format)
     {
     case 0:
-      *w = get_bits (&gb, 8);
-      *h = get_bits (&gb, 8);
+      *w = bits.get( 8);
+      *h = bits.get( 8);
       break;
     case 1:
-      *w = get_bits (&gb, 16);
-      *h = get_bits (&gb, 16);
+      *w = bits.get( 16);
+      *h = bits.get( 16);
       break;
     case 2:
       *w = 352;
@@ -272,30 +285,30 @@
 		 uint32_t * h)
 {
   uint32_t val;
-  GetBitContext s;
-  init_get_bits (&s, data, dataSize * 8);
+  getBits bits(dataSize,data );
+  
 
   mixDump (data, 10);
-  val = get_bits (&s, 16);
+  val = bits.get( 16);
   if (val)
     {
       printf ("incorrect H263 header sync\n");
       return 0;
     }
-  val = get_bits (&s, 6);
+  val = bits.get( 6);
   if (val != 0x20)
     {
       printf ("incorrect H263 header sync (2)\n");
       return 0;
     }
   //
-  skip_bits (&s, 8);		// timestamps in 30 fps tick
-  skip_bits (&s, 1);		// Marker
-  skip_bits (&s, 1);		// Id
-  skip_bits (&s, 1);		// Split
-  skip_bits (&s, 1);		// Document Camera indicator
-  skip_bits (&s, 1);		// Full Picture Freeze Release
-  val = get_bits (&s, 3);
+  bits.get( 8);		// timestamps in 30 fps tick
+  bits.get( 1);		// Marker
+  bits.get( 1);		// Id
+  bits.get( 1);		// Split
+  bits.get( 1);		// Document Camera indicator
+  bits.get( 1);		// Full Picture Freeze Release
+  val = bits.get( 3);
   switch (val)
     {
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_infoExtractorH264.cpp	2010-06-27 15:18:59 UTC (rev 6428)
@@ -64,20 +64,19 @@
 /**
         \fn extractVUIInfo
 */
-static uint8_t
-extractVUIInfo (GetBitContext * s, uint32_t * fps1000, uint32_t * darNum,
+static uint8_t  extractVUIInfo (getBits &bits, uint32_t * fps1000, uint32_t * darNum,
 		uint32_t * darDen)
 {
   *fps1000 = *darNum = *darDen = 0;
 
-  if (get_bits1 (s))
+  if (bits.get(1))
     {
-      unsigned int aspect_ratio_information = get_bits (s, 8);
+      unsigned int aspect_ratio_information = bits.get( 8);
 
       if (aspect_ratio_information == 255)
 	{
-	  *darNum = get_bits_long (s, 16);
-	  *darDen = get_bits_long (s, 16);
+	  *darNum = bits.get( 16);
+	  *darDen = bits.get( 16);
 	}
       else if (aspect_ratio_information <
 	       sizeof (pixel_aspect) / sizeof (*pixel_aspect))
@@ -87,32 +86,32 @@
 	}
     }
 
-  if (get_bits1 (s))		// overscan
-    get_bits1 (s);
+  if (bits.get(1))		// overscan
+    bits.get(1);
 
-  if (get_bits1 (s))		// vsp_color
+  if (bits.get(1))		// vsp_color
     {
-      get_bits (s, 4);
+      bits.get( 4);
 
-      if (get_bits1 (s))
+      if (bits.get(1))
 	{
-	  get_bits (s, 8);
-	  get_bits (s, 8);
-	  get_bits (s, 8);
+        bits.get( 8);
+        bits.get( 8);
+        bits.get( 8);
 	}
     }
 
-  if (get_bits1 (s))		// chroma
+  if (bits.get(1))		// chroma
     {
-      get_ue_golomb (s);
-      get_ue_golomb (s);
+      bits.getUEG();
+      bits.getUEG();
     }
 
-  if (get_bits1 (s))		// timing
+  if (bits.get(1))		// timing
     {
-      uint32_t timeinc_unit = get_bits_long (s, 32);
-      uint32_t timeinc_resolution = get_bits_long (s, 32);
-      uint32_t fixed_fps = get_bits1 (s);
+      uint32_t timeinc_unit = bits.get( 32);
+      uint32_t timeinc_resolution = bits.get( 32);
+      uint32_t fixed_fps = bits.get(1);
       ADM_info("Time unit =%d/%d\n",(int)timeinc_unit,(int)timeinc_resolution);
       if (timeinc_unit > 0 && timeinc_resolution > 0)
 	*fps1000 =
@@ -130,9 +129,9 @@
         \fn decodeOnMatrix
         \brief borrowed from ffmpeg
 */
-bool decodeOneMatrix(int count,GetBitContext *s)
+bool decodeOneMatrix(int count,getBits &bits)
 {
-        if(!get_bits1(s)) 
+        if(!bits.get(1)) 
         {
                 return true;
         }
@@ -141,7 +140,7 @@
         for(i=0;i<count;i++)
         {
          if(next)
-            next = (last + get_se_golomb(s)) & 0xff;
+            next = (last + bits.getUEG()) & 0xff;
          if(!i && !next)
          { /* matrix not written, we use the preset one */
             return true;
@@ -154,16 +153,16 @@
 /**
         \fn decodeScalingMatrices
 */
-bool          decodeScalingMatrices(GetBitContext *s)
+bool          decodeScalingMatrices(getBits &bits)
 {
-        decodeOneMatrix(16,s);
-        decodeOneMatrix(16,s);
-        decodeOneMatrix(16,s);
-        decodeOneMatrix(16,s);
-        decodeOneMatrix(16,s);
-        decodeOneMatrix(16,s);
-        decodeOneMatrix(64,s);
-        decodeOneMatrix(64,s);
+        decodeOneMatrix(16,bits);
+        decodeOneMatrix(16,bits);
+        decodeOneMatrix(16,bits);
+        decodeOneMatrix(16,bits);
+        decodeOneMatrix(16,bits);
+        decodeOneMatrix(16,bits);
+        decodeOneMatrix(64,bits);
+        decodeOneMatrix(64,bits);
         return true;
 }
 
@@ -172,12 +171,10 @@
     \brief Extract info from H264 SPS
     See 7.3.2.1 of 14496-10
 */
-uint8_t
-extractSPSInfo (uint8_t * data, uint32_t len, uint32_t * wwidth,
-		uint32_t * hheight, uint32_t * fps1000, uint32_t * darNum,
-		uint32_t * darDen)
+uint8_t extractSPSInfo (uint8_t * data, uint32_t len, uint32_t * wwidth,
+		uint32_t * hheight, uint32_t * fps1000, uint32_t * darNum, uint32_t * darDen)
 {
-  GetBitContext s;
+  
   *fps1000=0;
   uint32_t profile, constraint, level, pic_order_cnt_type, w, h, mbh,
     frame_mbs_only;
@@ -186,50 +183,51 @@
   uint32_t id, dum;
 
   outlen = unescapeH264 (len, data, buf);
-  init_get_bits (&s, buf, outlen * 8);
+  getBits bits(outlen,buf);
+  
 
-  profile = get_bits (&s, 8);
-  constraint = get_bits (&s, 8) >> 5;
-  level = get_bits (&s, 8);
-  id = get_ue_golomb (&s);	// Seq parameter set id           
+  profile = bits.get(8);
+  constraint = bits.get( 8) >> 5;
+  level = bits.get( 8);
+  id = bits.getUEG();	// Seq parameter set id           
   printf ("[H264]Profile : %u, Level :%u, SPSid:%u\n", profile, level, id);
   if (profile >= 100)		// ?? Borrowed from H264.C/FFMPEG
     {
       printf ("[H264]Warning : High profile\n");
-      if (get_ue_golomb (&s) == 3)	//chroma_format_idc
-	get_bits1 (&s);		//residual_color_transform_flag
-      get_ue_golomb (&s);	//bit_depth_luma_minus8
-      get_ue_golomb (&s);	//bit_depth_chroma_minus8
-      get_bits1 (&s);		// Transform bypass
-      if (get_bits1 (&s))	// Scaling matrix
-	{
-	  printf ("[H264] Scaling matrix present\n");
-          decodeScalingMatrices(&s);
-	}
+      if (bits.getUEG() == 3)	//chroma_format_idc
+        bits.get(1);		//residual_color_transform_flag
+      bits.getUEG();	//bit_depth_luma_minus8
+      bits.getUEG();	//bit_depth_chroma_minus8
+      bits.get(1);		// Transform bypass
+      if (bits.get(1))	// Scaling matrix
+	  {
+	    printf ("[H264] Scaling matrix present\n");
+          decodeScalingMatrices(bits);
+	  }
     }
 
 
-  dum = get_ue_golomb (&s);	// log2_max_frame_num_minus4
+  dum = bits.getUEG();	// log2_max_frame_num_minus4
   printf ("[H264]Log2maxFrame-4:%u\n", dum);
-  pic_order_cnt_type = get_ue_golomb (&s);
+  pic_order_cnt_type = bits.getUEG();
   printf ("[H264]Pic Order Cnt Type:%u\n", pic_order_cnt_type);
   if (!pic_order_cnt_type)	// pic_order_cnt_type
     {
-      dum = get_ue_golomb (&s);	//log2_max_pic_order_cnt_lsb_minus4
+      dum = bits.getUEG();	//log2_max_pic_order_cnt_lsb_minus4
       printf ("[H264]Log2maxPix-4:%u\n", dum);
     }
   else
     {
       if (pic_order_cnt_type == 1)
 	{
-	  get_bits1 (&s);	//delta_pic_order_always_zero_flag
-	  get_se_golomb (&s);	//offset_for_non_ref_pic
-	  get_se_golomb (&s);	// offset_for_top_to_bottom_field
-	  int i = get_ue_golomb (&s);	//num_ref_frames_in_pic_order_cnt_cycle
+	  bits.get(1);	//delta_pic_order_always_zero_flag
+	  bits.getSEG();	//offset_for_non_ref_pic
+	  bits.getSEG();	// offset_for_top_to_bottom_field
+	  int i = bits.getUEG() ;	//num_ref_frames_in_pic_order_cnt_cycle
 
 	  for (int j = 0; j < i; j++)
 	    {
-	      get_se_golomb (&s);
+	      bits.getSEG();
 	    }
 	}
       else if (pic_order_cnt_type != 2)
@@ -238,13 +236,13 @@
 	  return 0;
 	}
     }
-  dum = get_ue_golomb (&s);	//num_ref_frames
+  dum = bits.getUEG();	//num_ref_frames
   printf ("[H264] # of ref frames : %u\n", dum);
-  get_bits1 (&s);		// gaps_in_frame_num_value_allowed_flag
-  w = get_ue_golomb (&s) + 1;	//pic_width_in_mbs_minus1
+  bits.get(1);		// gaps_in_frame_num_value_allowed_flag
+  w = bits.getUEG() + 1;	//pic_width_in_mbs_minus1
 
-  mbh = get_ue_golomb (&s) + 1;
-  frame_mbs_only = get_bits1 (&s);
+  mbh = bits.getUEG() + 1;
+  frame_mbs_only = bits.get(1);
   h = (2 - frame_mbs_only) * mbh;	//pic_height_in_mbs_minus1
 
   printf ("[H264] Width in mb -1  :%d\n", w);
@@ -254,21 +252,21 @@
   *hheight = h * 16;
 
   if (!frame_mbs_only)
-    get_bits1 (&s);
+    bits.get(1);
 
-  get_bits1 (&s);
+  bits.get(1);
 
-  if (get_bits1 (&s))
+  if (bits.get(1))
     {
-      get_ue_golomb (&s);
-      get_ue_golomb (&s);
-      get_ue_golomb (&s);
-      get_ue_golomb (&s);
+      bits.getUEG();
+      bits.getUEG();
+      bits.getUEG();
+      bits.getUEG();
     }
 
-  if (get_bits1 (&s))
+  if (bits.get(1))
     {
-      extractVUIInfo (&s, fps1000, darNum, darDen);
+      extractVUIInfo (bits, fps1000, darNum, darDen);
       printf ("[H264] Fps %" LU ", a.r. %" LU ",%" LU "\n", *fps1000, *darNum,
 	      *darDen);
     }
@@ -284,8 +282,7 @@
       \brief return frametype in flags (KEY_FRAME or 0). To be used only with  mkv/mp4 nal type (i.e. no startcode)
       
 */
-uint8_t
-extractH264FrameType (uint32_t nalSize, uint8_t * buffer, uint32_t len,
+uint8_t extractH264FrameType (uint32_t nalSize, uint8_t * buffer, uint32_t len,
 		      uint32_t * flags)
 {
   uint8_t *head = buffer, *tail = buffer + len;
@@ -337,9 +334,7 @@
       \brief return frametype in flags (KEY_FRAME or 0). To be used only with  avi / mpeg TS nal type (i.e. with startcode)
       
 */
-uint8_t
-extractH264FrameType_startCode (uint32_t nalSize, uint8_t * buffer,
-				uint32_t len, uint32_t * flags)
+uint8_t extractH264FrameType_startCode(uint32_t nalSize, uint8_t * buffer,uint32_t len, uint32_t * flags)
 {
   uint8_t *head = buffer, *tail = buffer + len;
   uint8_t stream;
@@ -390,15 +385,14 @@
     \fn refineH264FrameType
     \brief Try to detect B slice, warning the stream is not escaped!
 */
-void
-refineH264FrameType (uint8_t * head, uint8_t * tail, uint32_t * flags)
+void refineH264FrameType (uint8_t * head, uint8_t * tail, uint32_t * flags)
 {
-  GetBitContext s;
+  getBits bits(tail-head,head);
   uint32_t sliceType;
   *flags = 0;
-  init_get_bits (&s, head, (tail - head) * 8);
-  get_ue_golomb (&s);
-  sliceType = get_ue_golomb_31 (&s);
+  
+  bits.getUEG();
+  sliceType = bits.getUEG31(); // get_ue_golomb_31??
   if (sliceType > 9)
     {
       printf ("Weird Slice %d\n", sliceType);

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/CMakeLists.txt	2010-06-27 15:18:59 UTC (rev 6428)
@@ -13,6 +13,7 @@
 ADM_coreCodecMapping.cpp
 ADM_threadQueue.cpp
 ADM_string.cpp
+ADM_getbits.cpp
 prefs.cpp)
 
 ADD_LIBRARY(ADM_coreUtils6 SHARED ${ADM_coreUtils_SRCS})

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 15:18:59 UTC (rev 6428)
@@ -15,8 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_includeFfmpeg.h"
-#include "ADM_getbits.h"
+
 #include "ADM_default.h"
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"
@@ -32,6 +31,7 @@
 #include "ADM_h264_tag.h"
 #include "ADM_clock.h"
 #include "ADM_indexFile.h"
+#include "ADM_getbits.h"
 #include "ADM_tsGetBits.h"
 
 
@@ -310,23 +310,24 @@
 */
 bool TsIndexer::decodeSEI(uint32_t nalSize, uint8_t *org,uint32_t *recoveryLength)
 {
-    GetBitContext s;
+    
     uint8_t *payload=(uint8_t *)alloca(nalSize+16);
     nalSize=TS_unescapeH264(nalSize,org,payload);
-    init_get_bits(&s, payload, nalSize*8);
-    while( get_bits_count(&s)<(nalSize-4)*8)
+    getBits bits(nalSize,payload);
+    
+    while( bits.getConsumedBits()<(nalSize-4)*8)
     {
-        uint32_t sei_type=get_bits(&s,8);
-        uint32_t sei_size=get_bits(&s,8);
-                if(sei_size==0xff) sei_size=0xff00+get_bits(&s,8);; // should be enough
+        uint32_t sei_type=bits.get(8);
+        uint32_t sei_size=bits.get(8);
+                if(sei_size==0xff) sei_size=0xff00+bits.get(8);; // should be enough
                 zprintf("  [SEI] Type : 0x%x size:%d\n",sei_type,sei_size);
                 if(sei_type==6) // Recovery point
                 {
-                        *recoveryLength=get_ue_golomb(&s);
+                        *recoveryLength=bits.getUEG();
                         zprintf("[SEI] Recovery :%"LU"\n",*recoveryLength);
                         return true;
                 }
-                skip_bits(&s,sei_size*8);
+                bits.skip(sei_size*8);
     }
     return false;
 }
@@ -486,17 +487,17 @@
                         
                       uint8_t bufr[NON_IDR_PRE_READ+4];
                       uint8_t header[NON_IDR_PRE_READ+4];
-                      GetBitContext s;
+                      
                    
                         pkt->read(NON_IDR_PRE_READ,bufr);
                         // unescape...
                         TS_unescapeH264(NON_IDR_PRE_READ,bufr,header);
                         //
-                        init_get_bits(&s, header, NON_IDR_PRE_READ*8);
+                        getBits bits(NON_IDR_PRE_READ,header);
                         int first_mb_in_slice,slice_type;
 
-                        first_mb_in_slice= get_ue_golomb(&s);
-                        slice_type= get_ue_golomb_31(&s);
+                        first_mb_in_slice= bits.getUEG();
+                        slice_type= bits.getUEG31();
                         if(slice_type>9) 
                         {
                             printf("[TsIndexer] Bad slice type\n");

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2010-06-27 13:42:45 UTC (rev 6427)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/dmxTSPacket.cpp	2010-06-27 15:18:59 UTC (rev 6428)
@@ -18,7 +18,6 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-#include "ADM_includeFfmpeg.h"
 #include "ADM_default.h"
 
 #include "dmxTSPacket.h"
@@ -283,9 +282,9 @@
     \brief Take a raw packet of type pid & remove the header (PSI)
 */
 #ifdef VERBOSE_PSI
-#define DUMMY(x,n) {dummy=get_bits(&s,n);printf("[TS]: "#x" =0x%x %d\n",dummy,dummy);}
+#define DUMMY(x,n) {dummy=bits.get(n);printf("[TS]: "#x" =0x%x %d\n",dummy,dummy);}
 #else
-#define DUMMY(x,n) {dummy=get_bits(&s,n);}
+#define DUMMY(x,n) {dummy=bits.get(n);}
 #endif
 bool tsPacket::getNextPSI(uint32_t pid,TS_PSIpacketInfo *psi)
 {
@@ -294,26 +293,25 @@
 
     if(false==getNextPacket_NoHeader(pid,&pkt,true)) return false;    
 
-    GetBitContext s;
+    
     uint32_t tableId;
     uint32_t sectionLength=0;
     uint32_t transportStreamId=0;
     uint32_t dummy;
     
+    getBits bits(pkt.payloadSize,pkt.payload);
 
-    init_get_bits( &s,pkt.payload, (pkt.payloadSize)*8); // dont need checksum
-
     DUMMY(tableId,8);
-    int section_syntax_indicator=get_bits(&s,1);
+    int section_syntax_indicator=bits.get(1);
     if(section_syntax_indicator)
         ADM_warning("Section Syntax is set to private\n");
-    if(get_bits(&s,1))             // Marker
+    if(bits.get(1))             // Marker
     {
           printf("[MpegTs] getNextPSI Missing 0 marker\n");
           goto nextPack2;
     }
-    skip_bits(&s,2);
-    sectionLength=get_bits(&s,12);    // Section Length
+    bits.get(2);
+    sectionLength=bits.get(12);    // Section Length
 #if 1
     if(sectionLength+3>pkt.payloadSize) 
     {
@@ -321,16 +319,16 @@
         goto nextPack2;
     }
 #endif
-    transportStreamId=get_bits(&s,16);// transportStreamId
+    transportStreamId=bits.get(16);// transportStreamId
 #ifdef VERBOSE_PSI
     printf("[MpegTs] Section length    =%d\n",sectionLength);
     printf("[MpegTs] transportStreamId =%d\n",transportStreamId);
 #endif
-    skip_bits(&s,2);                  // ignored
+    bits.skip(2);                  // ignored
     DUMMY(VersionNumber,5);         // Version number
     DUMMY(CurrentNext,1);           // Current Next indicator
-    psi->count=get_bits(&s,8);           // Section number
-    psi->countMax=get_bits(&s,8);        // Section last number
+    psi->count=bits.get(8);           // Section number
+    psi->countMax=bits.get(8);        // Section last number
 #ifdef VERBOSE_PSI
     printf("[MpegTs] Count=%d CountMax=%d\n",psi->count,psi->countMax);
 #endif



From mean at mail.berlios.de  Sun Jun 27 17:19:02 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 17:19:02 +0200
Subject: [Avidemux-svn-commit] r6429 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
Message-ID: <201006271519.o5RFJ2kp028697@sheep.berlios.de>

Author: mean
Date: 2010-06-27 17:19:01 +0200 (Sun, 27 Jun 2010)
New Revision: 6429

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp
Log:
[All] Wrap get_bits inside a class to avoid including fffmpeg headers directly. Slower but safer

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp	2010-06-27 15:18:59 UTC (rev 6428)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_getbits.cpp	2010-06-27 15:19:01 UTC (rev 6429)
@@ -0,0 +1,85 @@
+/**
+        \file ADM_getbits.cpp
+        \brief Wrapper around ffmpeg getbits function
+        \author mean fixounet at free.Fr (c) 2010
+
+*/
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+#include "ADM_includeFfmpeg.h"
+
+#include "ADM_default.h"
+
+#ifndef ADM_getbits_H
+#define ADM_getbits_H
+extern "C"
+{
+#define ADM_NO_CONFIG_H
+#include "ADM_ffmpeg/libavutil/common.h"
+#include "ADM_ffmpeg/libavutil/bswap.h"
+#ifndef INT_MAX
+#define INT_MAX (0x7FFFFFFF)
+#endif
+#include "ADM_ffmpeg/ffmpeg_config/config.h"
+#include "ADM_ffmpeg/libavutil/internal.h"
+#include "ADM_ffmpeg/libavcodec/get_bits.h"
+#include "ADM_ffmpeg/libavcodec/golomb.h"
+}
+#undef printf
+#undef sprintf
+#endif
+
+
+#include "ADM_getbits.h"
+/**
+    \fn ctor
+*/
+getBits::getBits(int bufferSize, uint8_t *buffer)
+{
+    GetBitContext *c=new  GetBitContext;
+    init_get_bits(c,buffer,bufferSize*8);
+    ctx=(void *)c;
+
+}
+/**
+    \fn dtor
+*/
+getBits::~getBits()
+{
+    GetBitContext *c= (GetBitContext *)ctx;
+    delete c;
+    ctx=NULL;
+}
+int getBits::get(int nb)
+{
+    if(nb>15) return get_bits_long((GetBitContext *)ctx,nb);
+    return get_bits( (GetBitContext *)ctx,nb);
+}
+int getBits::skip(int nb)
+{
+     skip_bits( (GetBitContext *)ctx,nb);
+     return 0; 
+}
+int getBits::getUEG(void)
+{
+    return get_ue_golomb( (GetBitContext *)ctx);
+}
+int getBits::getSEG(void)
+{
+    return get_se_golomb( (GetBitContext *)ctx);
+}
+int getBits::getUEG31(void)
+{
+    return get_ue_golomb_31( (GetBitContext *)ctx);
+}
+int getBits::getConsumedBits(void)
+{
+    return get_bits_count((GetBitContext *)ctx);
+}
+// EOF
\ No newline at end of file



From mean at mail.berlios.de  Sun Jun 27 18:32:33 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Sun, 27 Jun 2010 18:32:33 +0200
Subject: [Avidemux-svn-commit] r6430 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src
Message-ID: <201006271632.o5RGWXaH003666@sheep.berlios.de>

Author: mean
Date: 2010-06-27 18:32:32 +0200 (Sun, 27 Jun 2010)
New Revision: 6430

Modified:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
Log:
[coreAudioParser] Need getBits from coreUtils

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2010-06-27 15:19:01 UTC (rev 6429)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreAudioParser/src/CMakeLists.txt	2010-06-27 16:32:32 UTC (rev 6430)
@@ -12,6 +12,6 @@
 ADD_DEFINITIONS( "-DCPU_CLIPS_POSITIVE=0 -DCPU_CLIPS_NEGATIVE=0")
 #*************************************************
 ADD_LIBRARY(ADM_audioParser6 SHARED ${ADMaudioParser_SRCS})
-TARGET_LINK_LIBRARIES(ADM_audioParser6 ADM_core6 ADM_coreUI6  ADM_libavcodec6 ADM_libavformat6 ADM_libavutil6)
+TARGET_LINK_LIBRARIES(ADM_audioParser6 ADM_core6 ADM_coreUtils6 ADM_coreUI6  ADM_libavcodec6 ADM_libavformat6 ADM_libavutil6)
 
 ADM_INSTALL_LIB(ADM_audioParser6)



From mean at mail.berlios.de  Mon Jun 28 07:15:29 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 28 Jun 2010 07:15:29 +0200
Subject: [Avidemux-svn-commit] r6431 - in branches/avidemux_2.6_branch_mean:
	avidemux/common avidemux/common/ADM_audioFilter/src
	avidemux/common/ADM_commonUI avidemux/common/ADM_editor
	avidemux/common/ADM_muxerGate/src
	avidemux/common/ADM_osSupport avidemux/common/ADM_script2/js
	avidemux/common/ADM_script2/py
	avidemux/common/ADM_script2/src avidemux/common/ADM_toolkit
	avidemux/common/ADM_videoFilter2/src
	avidemux/qt4/ADM_userInterfaces/ADM_filters
	avidemux_core/ADM_core/include avidemux_core/ADM_coreUtils/src
	avidemux_plugins/ADM_demuxers/MpegPS
	avidemux_plugins/ADM_demuxers/MpegTS
	avidemux_plugins/ADM_muxers/muxerAvi
Message-ID: <201006280515.o5S5FT3V017223@sheep.berlios.de>

Author: mean
Date: 2010-06-28 07:15:20 +0200 (Mon, 28 Jun 2010)
New Revision: 6431

Modified:
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiocopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_thread.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edMarker.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edStub.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_previewNavigate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAudio.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
   branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
   branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
   branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp
Log:
[All] Put vector and string in a separate include (ADM_cpp.h)

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiocopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiocopy.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiocopy.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,8 @@
  ***************************************************************************/
 
 
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include <math.h>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,8 @@
  ***************************************************************************/
 
 
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include <math.h>
 
@@ -182,4 +184,4 @@
 	return true;
 }
 
-// EOF
\ No newline at end of file
+// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_bridge.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,8 @@
  ***************************************************************************/
 
 
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include <math.h>
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_encoder.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,8 @@
  ***************************************************************************/
 
 
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include <math.h>
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_thread.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_thread.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_audioFilter/src/audiofilter_thread.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,7 +13,8 @@
  *                                                                         *
  ***************************************************************************/
 
-
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "audiofilter_thread.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_commonUI/DIA_bitrateHisto.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,7 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include "ADM_cpp.h"
+using std::string;
 #include <math.h>
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edFrameType.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -16,6 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edIdentify.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,11 +17,11 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"
-//#include "ADM_videoFilter.h"
-
 #include "ADM_coreDemuxerMpeg/include/dmx_identify.h"
 
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edLoadSave.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_quota.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edMarker.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edMarker.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edMarker.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edPySave.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_quota.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRender.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -16,6 +16,7 @@
  *                                                                         *
  ***************************************************************************/
 #include <math.h>
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edRenderInternal.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_includeFfmpeg.h"
 #include <math.h>
 #include "ADM_default.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edSearch.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "fourcc.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edStub.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edStub.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edStub.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include <math.h>
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edVideoCopy.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include <math.h>
 #include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -14,6 +14,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "math.h"
 
@@ -70,7 +71,7 @@
   _internalFlags=0;
   _currentSegment=0;
   _scratch=NULL;
-  currentProjectName=string("");
+  currentProjectName=std::string("");
 }
 /**
 	Remap 1:1 video to segments
@@ -117,7 +118,7 @@
 /**
     \fn getProjectName
 */
-const string &ADM_Composer::getProjectName(void)
+const std::string &ADM_Composer::getProjectName(void)
 {
     return currentProjectName;
 }
@@ -125,7 +126,7 @@
 /**
     \fn setProjectName
 */
-bool ADM_Composer::setProjectName(const string &pj)
+bool ADM_Composer::setProjectName(const std::string &pj)
 {
     currentProjectName=pj;
     return true;

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADM_edit.hxx	2010-06-28 05:15:20 UTC (rev 6431)
@@ -63,7 +63,7 @@
 class ADM_Composer : public ADM_audioStream
 {
   private:
-                    string currentProjectName;
+                    std::string currentProjectName;
   private:
 //*********************************PRIVATE API *******************************************
                     //bool		decodeCache(uint32_t ref, uint32_t frame,ADMImage *image);
@@ -203,8 +203,8 @@
 /**************************************** /Video Info **************************/					
 /***************************************** Project Handling ********************/
 public:
-                    const string         &getProjectName(void);
-                    bool                 setProjectName(const string &name);
+                    const std::string   &getProjectName(void);
+                    bool                 setProjectName(const std::string &name);
 					
 /***************************************** Seeking *****************************/            
 public:

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_editor/ADMedAVIAUD.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -25,6 +25,7 @@
  ***************************************************************************/
 
 #include <string.h>
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include <math.h>
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_muxerGate/src/ADM_videoCopy.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,8 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "ADM_videoCopy.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_osSupport/ADM_crashHook.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  ***************************************************************************/
 
 
+#include <string>
 #include "ADM_default.h"
 #include "DIA_coreToolkit.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_preview.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -32,6 +32,7 @@
  *                                                                         *
  ***************************************************************************/
 #include "config.h"
+#include "ADM_cpp.h"
 
 #include "ADM_default.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_previewNavigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_previewNavigate.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_previewNavigate.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -31,6 +31,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "config.h"
 
 #include "ADM_default.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAudio.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAudio.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_jsAvidemux.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsAvidemux.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_jsAvidemux.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsDebug.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_scriptDebug.h"
@@ -103,4 +104,4 @@
             GUI_Quiet();
 
 }// end printJSError
-// EOF
\ No newline at end of file
+// EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsEditor.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -12,6 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include <stdarg.h>
 #include <vector>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsIf.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -12,6 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include <stdarg.h>
 #include <vector>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsTestFactory.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "DIA_fileSel.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/js/ADM_jsVideo.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_js.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_jsAvidemux.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/py/ADM_pyAdm.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -12,6 +12,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include <stdarg.h>
 #include <vector>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAudio.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAudio.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAudio.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_scriptIf.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "A_functions.h"
@@ -78,4 +79,4 @@
         if(c) delete c;
         return r;
 }
-//EOF
\ No newline at end of file
+//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemux.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,7 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-
+#include "ADM_cpp.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "A_functions.h"
 #include "ADM_muxerProto.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptAvidemuxInfo.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_scriptIf.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_scriptCommon.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptIf.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -11,6 +11,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "ADM_scriptIf.h"
 #include <stdarg.h>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptUtils.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -9,6 +9,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_scriptIf.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "GUI_ui.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_script2/src/ADM_scriptVideo.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,7 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
-//#include "ADM_js.h"
+#include "ADM_cpp.h"
 #include "ADM_editor/ADM_edit.hxx"
 #include "ADM_scriptAvidemux.h"
 #include "ADM_scriptVideo.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_toolkit/automation.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  ***************************************************************************/
 
 
+#include "ADM_cpp.h"
 #include <stdlib.h>
 #include <signal.h>
 #ifndef __WIN32

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/ADM_videoFilter2/src/ADM_videoFilterBridge.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -16,6 +16,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "ADM_videoFilterBridge.h"
 #include "ADM_editor/ADM_edit.hxx"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gtk_gui.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,6 +13,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include <math.h>
 #include <errno.h>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_autodrive.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 
 #include "config.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_blackframes.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -18,7 +18,7 @@
  *                                                                         *
  ***************************************************************************/
 
-
+#include "ADM_cpp.h"
 #include "avi_vars.h"
 
 #include <math.h>

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_navigate.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -17,6 +17,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 
 #include "ADM_default.h"
 #include "avi_vars.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_play.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include <math.h>
 #include "prefs.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_save.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "avi_vars.h"
 
@@ -54,7 +55,7 @@
       break;
    case ACT_SaveCurrentWork:
         {
-          const string pj=video_body->getProjectName();
+          const std::string pj=video_body->getProjectName();
           if( pj.length() ){
              A_saveJsProject( pj.c_str() ); // will write "actual_workbench_file" itself
           }else{

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/gui_savenew.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "ADM_threads.h"
 

Modified: branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/common/main.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -16,6 +16,7 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 
 #ifdef __MINGW32__
 #include <windows.h>

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/ADM_userInterfaces/ADM_filters/Q_mainfilter.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -24,7 +24,9 @@
  *   (at your option) any later version.                                   *
  *                                                                         *
  ***************************************************************************/
+#include "ADM_cpp.h"
 #include <vector>
+using std::string;
 #include "Q_mainfilter.h"
 #include "ADM_default.h"
 #include "DIA_fileSel.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_default.h	2010-06-28 05:15:20 UTC (rev 6431)
@@ -22,10 +22,6 @@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
-#ifdef __cplusplus
-#include <string>
-using std::string;
-#endif
 
 #include "ADM_coreConfig.h"
 #include "ADM_inttype.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/ADM_file.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -13,7 +13,7 @@
 /*
 * MODIFIED BY GMV 30.1.05: prepared for ODML
 */
-
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "ADM_fileio.h"
 #include "ADM_quota.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src/prefs.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -12,7 +12,7 @@
  ***************************************************************************/
 
 
-
+#include "ADM_cpp.h"
 #include <libxml/tree.h>
 #include <libxml/parser.h>
 

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegPS/ADM_psIndex.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -15,6 +15,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_demuxers/MpegTS/ADM_tsIndex.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -16,6 +16,8 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
+using std::string;
 #include "ADM_default.h"
 #include "ADM_demuxerInternal.h"
 #include "fourcc.h"

Modified: branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp	2010-06-27 16:32:32 UTC (rev 6430)
+++ branches/avidemux_2.6_branch_mean/avidemux_plugins/ADM_muxers/muxerAvi/op_aviwrite.cpp	2010-06-28 05:15:20 UTC (rev 6431)
@@ -19,6 +19,7 @@
  *                                                                         *
  ***************************************************************************/
 
+#include "ADM_cpp.h"
 #include "ADM_default.h"
 #include <math.h>
 #include "ADM_muxer.h"



From mean at mail.berlios.de  Mon Jun 28 07:15:35 2010
From: mean at mail.berlios.de (mean at BerliOS)
Date: Mon, 28 Jun 2010 07:15:35 +0200
Subject: [Avidemux-svn-commit] r6432 -
	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include
Message-ID: <201006280515.o5S5FZr9017328@sheep.berlios.de>

Author: mean
Date: 2010-06-28 07:15:35 +0200 (Mon, 28 Jun 2010)
New Revision: 6432

Added:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpp.h
Log:
[All] Put vector and string in a separate include (ADM_cpp.h)

Added: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpp.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpp.h	2010-06-28 05:15:20 UTC (rev 6431)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_core/include/ADM_cpp.h	2010-06-28 05:15:35 UTC (rev 6432)
@@ -0,0 +1,4 @@
+#include <string>
+#include <vector>
+using std::vector;
+using std::string;



