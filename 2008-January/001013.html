<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r3745 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK:	ADM_dialog glade
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3745%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK%3A%0A%09ADM_dialog%20glade&In-Reply-To=%3C200801131007.m0DA7n22000994%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001012.html">
   <LINK REL="Next"  HREF="001014.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r3745 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK:	ADM_dialog glade</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r3745%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK%3A%0A%09ADM_dialog%20glade&In-Reply-To=%3C200801131007.m0DA7n22000994%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r3745 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK:	ADM_dialog glade">mean at mail.berlios.de
       </A><BR>
    <I>Sun Jan 13 11:07:49 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001012.html">[Avidemux-svn-commit] r3744 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog
</A></li>
        <LI>Next message: <A HREF="001014.html">[Avidemux-svn-commit] r3746 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1013">[ date ]</a>
              <a href="thread.html#1013">[ thread ]</a>
              <a href="subject.html#1013">[ subject ]</a>
              <a href="author.html#1013">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2008-01-13 11:07:48 +0100 (Sun, 13 Jan 2008)
New Revision: 3745

Added:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
Log:
[Filters] Chris Mc Gregor weird filters + fixes

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2008-01-13 10:07:09 UTC (rev 3744)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/CMakeLists.txt	2008-01-13 10:07:48 UTC (rev 3745)
@@ -10,7 +10,7 @@
 DIA_cnr2.cpp         DIA_eq2.cpp        DIA_idx_pg.cpp     DIA_partial.cpp   DIA_quota.cpp       DIA_vobsub.cpp
 DIA_asharp.cpp    DIA_coloryuv.cpp     DIA_equalizer.cpp  DIA_jobs.cpp       DIA_pause.cpp     DIA_recent.cpp      DIA_working.cpp
 DIA_busy.cpp      DIA_contrast.cpp     DIA_exLame.cpp     DIA_jobs_save.cpp  DIA_pipe.cpp      DIA_resize.cpp      DIA_x264.cpp
-DIA_threshold.cpp DIA_SwissArmyKnife.cpp DIA_particle.cpp
+DIA_threshold.cpp DIA_SwissArmyKnife.cpp DIA_particle.cpp DIA_eraser.cpp
 )
 ADD_LIBRARY(${ADM_LIB} STATIC ${${ADM_LIB}_SRCS})
 ADD_ADM_LIB(${ADM_LIB} ADM_libraries)

Added: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-01-13 10:07:09 UTC (rev 3744)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_eraser.cpp	2008-01-13 10:07:48 UTC (rev 3745)
@@ -0,0 +1,1378 @@
+/***************************************************************************
+                          DIA_eraser.cpp  -  configuration dialog for
+						Eraser filter
+                              -------------------
+                         Chris MacGregor, December 2007
+                         <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">chris-avidemux at bouncingdog.com</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &quot;default.h&quot;
+
+#include &lt;gtk/gtk.h&gt;
+#include &lt;cmath&gt;
+
+#include &quot;fourcc.h&quot;
+#include &quot;avio.hxx&quot;
+#include &quot;prefs.h&quot;
+
+#include &quot;avi_vars.h&quot;
+
+#ifdef HAVE_ENCODER
+
+#include &lt;algorithm&gt;
+
+#include &quot;ADM_editor/ADM_edit.hxx&quot;
+#include &quot;ADM_video/ADM_genvideo.hxx&quot;
+#include &quot;ADM_videoFilter/ADM_vidEraser.h&quot;
+#include &quot;ADM_toolkit/toolkit.hxx&quot;
+#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
+#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
+#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
+#include &quot;ADM_toolkit/filesel.h&quot;
+#include &quot;ADM_assert.h&quot;
+#include &quot;DIA_flyDialog.h&quot;
+#include &quot;DIA_flyEraser.h&quot;
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot; // for diaElemMenu etc.
+
+using namespace std;
+
+#undef _
+#define _(_s) QT_TR_NOOP(_s)
+
+/********************************************************************/
+static GtkWidget * create_eraser_dialog (void);
+static GtkWidget * dialog = 0;
+
+static gboolean gui_draw (GtkWidget * widget,
+			  GdkEventExpose * event, gpointer user_data);
+static void gui_update (GtkObject * button, gpointer user_data);
+static void frame_changed (GtkRange *, gpointer user_data);
+
+static volatile int lock = 0;
+
+static const int MAX_FRAME_NUM = 99999999;
+
+/********************************************************************/
+
+class flyEraserGtk : public flyEraser
+{
+protected:
+    GtkWidget * dialog;
+    GtkListStore * list_store;
+    GtkTreeModel * tree_model;
+    GtkWidget * tree_view_widget;
+    GtkTreeView * tree_view;
+public:
+    GtkTreeSelection * tree_sel;
+
+public:
+    uint8_t    download();
+    uint8_t    upload();
+    uint8_t    upload_masklist (bool set_preview_frame);
+    void       wipeOutputBuffer();
+
+    flyEraserGtk (uint32_t width, uint32_t height,
+                  AVDMGenericVideoStream * in,
+                  void * canvas, void * slider, GtkWidget * dialog,
+                  ADMVideoEraser * eraserp, const ERASER_PARAM * in_param,
+                  const MenuMapping * menu_mapping,
+                  uint32_t menu_mapping_count)
+        : flyEraser (width, height, in, canvas, slider, dialog,
+                     eraserp, in_param, menu_mapping, menu_mapping_count),
+          dialog (dialog),
+          list_store (gtk_list_store_new (2, G_TYPE_INT, G_TYPE_INT)),
+          tree_model (GTK_TREE_MODEL (list_store)),
+          tree_view_widget (WID (rangeListTreeview)),
+          tree_view (GTK_TREE_VIEW (tree_view_widget)),
+          tree_sel (gtk_tree_view_get_selection (tree_view))
+    {
+        // printf (&quot;flyEraserGtk::flyEraserGtk: &quot;
+        //         &quot;in_param %p, &amp;param %p\n&quot;, in_param, &amp;param);
+
+        gtk_tree_view_set_model (tree_view, tree_model);
+        gtk_tree_view_columns_autosize ((tree_view));
+        gtk_tree_selection_set_mode (tree_sel, GTK_SELECTION_BROWSE);
+    };
+
+    ~flyEraserGtk ()
+    {
+        g_object_unref (list_store);
+    }
+
+    void selection_changed ();
+};
+
+static gboolean previewSomeEvent (GtkWidget * widget,
+                                  uint8_t button, uint16_t x, uint16_t y,
+                                  guint state, gpointer data)
+{
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (data);
+    bool erasing = (button == 1) ? myFly-&gt;param.brush_mode
+                   : !myFly-&gt;param.brush_mode;
+    ADMImage * image = myFly-&gt;getOutputImage();
+
+    uint16_t width = image-&gt;_width;
+    uint16_t height = image-&gt;_height;
+
+    if (x &gt;= width || y &gt;= height)
+        return FALSE;
+
+    uint8_t brush_size = myFly-&gt;param.brush_size;
+    if (state &amp; GDK_SHIFT_MASK &amp;&amp; brush_size &gt; 0)
+        --brush_size;
+    else if (state &amp; GDK_CONTROL_MASK)
+        ++brush_size;
+    brush_size = brush_size * 2 + 1;
+
+    uint8_t halfrange = brush_size / 2;
+
+    uint32_t xmin = (x &gt; halfrange) ? (x - halfrange) : 0;
+    uint32_t ymin = (y &gt; halfrange) ? (y - halfrange) : 0;
+
+    uint32_t xmax = x + halfrange;
+    uint32_t ymax = y + halfrange;
+
+    if (xmax &gt;= width)
+        xmax = width - 1;
+    brush_size = xmax - xmin + 1;
+    if (ymax &gt;= height)
+        ymax = height - 1;
+
+    Eraser::LineVec &amp; lines = myFly-&gt;current_mask-&gt;lines;
+    Eraser::LineVec::iterator lineit = lines.begin();
+
+    // HERE: We could improve performance by doing some kind of binary search
+    // to find the line with the first y.  After that it probably wouldn't
+    // help all that much, if at all.  However, unless they're masking a lot
+    // of pixels, and tweaking them frequently and/or on slow machines, it may
+    // not be worth the trouble.
+
+    for (y = ymin; y &lt;= ymax; y++)
+    {
+        while (lineit != lines.end() &amp;&amp; lineit-&gt;y &lt; y)
+            ++lineit;
+
+        if (erasing)
+        {
+            bool need_insert = true;
+            while (lineit != lines.end() &amp;&amp; lineit-&gt;y == y)
+            {
+                if (xmax + 1 &lt; lineit-&gt;x)
+                {
+                    // This line is to the right of and is not touching the new
+                    // line.  Since the lines are sorted and we haven't stopped
+                    // before this, that means that there are no lines with which
+                    // we can connect.  Break out and insert a separate new line.
+                    break;
+                }
+
+                Eraser::Line &amp; line = *lineit++;
+
+                uint16_t currlinexmaxplus1 = line.x + line.count;
+                if (currlinexmaxplus1 &lt; xmin)
+                {
+                    // This line is to the left of and is not touching the new
+                    // line.  Skip it and continue looking.
+                    continue;
+                }
+
+                // We get here whenever, and only if, the new line touches the
+                // current line in some way.  It may overlap the head (left end),
+                // or the tail (right end), or both, or neither (in which case no
+                // change is made); in any case, there is no need to insert a new
+                // line object.  If we overlap the tail of the current line, then
+                // it is possible that we also will overlap (and can connect with,
+                // and thus delete) the following line.  (It is also possible that
+                // we extend the tail of it, and perhaps even connect to the
+                // following one, etc., so we iterate to be sure we handle all
+                // such cases.  Having trouble picturing how that could happen?
+                // Here's one way:
+                //                     |0    5    
+                //                     |..*.*.*.*..|
+                // 
+                // Now imagine a 9x9 brush covering coordinates 1 through 9.)
+
+                if (xmin &lt; line.x)
+                {
+                    // The new line overlaps (and extends) the beginning of this
+                    // line.  No insertion or deletion is required.
+                    line.x = xmin;
+                    line.count = currlinexmaxplus1 - xmin;
+                }
+
+                if (xmax &gt;= currlinexmaxplus1)
+                {
+                    // The new line overlaps (and extends) the end of this line.
+                    line.count = xmax - line.x + 1;
+
+                    // Possibly we can also merge with the head of the next line,
+                    // in which case we can delete that line.  As described above,
+                    // there may be more than one such, and so we iterate until
+                    // there are none.
+
+                    while (lineit != lines.end() &amp;&amp; xmax + 1 &gt;= lineit-&gt;x
+                           &amp;&amp; lineit-&gt;y == y)
+                    {
+                        // Okay, here we go.  We fold the next line into the
+                        // current line, and delete that line.
+                        line.count = max (lineit-&gt;x + lineit-&gt;count,
+                                          int (xmax + 1))
+                                     - line.x;
+                        lineit = lines.erase (lineit);
+                    }
+                }
+
+                need_insert = false;
+                break;
+            }
+
+            if (need_insert)
+                lineit = lines.insert (lineit,
+                                       Eraser::Line (xmin, y, brush_size));
+        }
+        else // if (!erasing) (unerasing)
+        {
+            while (lineit != lines.end() &amp;&amp; lineit-&gt;y == y)
+            {
+                Eraser::Line &amp; line = *lineit;
+
+                if (xmax &lt; line.x)
+                {
+                    // This line is to the right of and does not overlap the
+                    // area we are un-erasing.  Since the lines are sorted and
+                    // we haven't stopped before this, that means that there
+                    // is nothing (more) for us to delete, so we break out.
+                    break;
+                }
+
+                uint16_t currlinexmaxplus1 = line.x + line.count;
+                if (currlinexmaxplus1 &lt;= xmin)
+                {
+                    // This line is to the left of and does not overlap the
+                    // area we are un-erasing.  Skip it and continue looking.
+                    ++lineit;
+                    continue;
+                }
+
+                // We get here whenever, and only if, we are un-erasing some
+                // part of the current line.  We may be un-erasing the head
+                // (left end), or the tail (right end), or both (the entire
+                // line, in which case we delete it from the list).  If we are
+                // un-erasing the middle of the current line (but not either
+                // end), then we will need to split it into two separate lines
+                // (thus inserting one new one).  If we are un-erasing the
+                // tail (or more) of the current line, then it is possible
+                // that we also will need to do something with the following
+                // line, and perhaps also the one after that, etc., so we
+                // allow the loop to continue to be sure we handle all such
+                // cases.  Having trouble picturing how that could happen?
+                // Here's one way:
+                //
+                //                     |0    5    
+                //                     |..*.*.*.*..|
+                // 
+                // Now imagine a 9x9 brush covering coordinates 1 through 9.)
+
+                if (xmax + 1 &gt;= currlinexmaxplus1)
+                {
+                    // The area to erase overlaps (at least) the tail of the
+                    // current line.  Let's check the beginning...
+
+                    if (xmin &lt;= line.x)
+                    {
+                        // We overlap the head and the tail, so we can just
+                        // delete this entire line and continue on to examine
+                        // the next one.
+                        lineit = lines.erase (lineit);
+                        continue;
+                    }
+
+                    // We're just making this line shorter.  However, we might
+                    // overlap the following line(s), too, so we need to keep
+                    // looking.
+
+                    line.count = xmin - line.x;
+                }
+                else if (xmin &lt;= line.x)
+                {
+                    // We're erasing the head of this line, but not the tail.
+                    // We know that we don't need to look at the following
+                    // line, either.
+                    line.x = xmax + 1;
+                    line.count = currlinexmaxplus1 - line.x;
+                    break;
+                }
+                else
+                {
+                    // We must be erasing a chunk of the middle of this line,
+                    // which means we need to split it (inserting one new
+                    // segment).  We know that we don't need to look at the
+                    // following line, either.
+
+                    Eraser::Line new_line (line.x, y, xmin - line.x);
+                    line.x = xmax + 1;
+                    line.count = currlinexmaxplus1 - line.x;
+                    lineit = lines.insert (lineit, new_line);
+                    break;
+                }
+
+                ++lineit;
+            }
+        }
+    }
+
+    if (myFly-&gt;param.debug &amp; 0x40)
+    {
+        printf (&quot;---------------------------------------------\n&quot;);
+        for (Eraser::LineVec::const_iterator lineit = lines.begin();
+             lineit != lines.end();
+             ++lineit)
+        {
+            printf (&quot;line: %d %d %d\n&quot;, lineit-&gt;x, lineit-&gt;y, lineit-&gt;count);
+        }
+    }
+
+    myFly-&gt;update();
+
+    return TRUE;
+}
+
+/********************************************************************/
+
+static gboolean previewButtonEvent (GtkWidget * widget,
+                                    GdkEventButton * event,
+                                    gpointer data)
+{
+    if (event-&gt;type != GDK_BUTTON_PRESS)
+        return FALSE;
+
+    uint16_t x = static_cast &lt;uint16_t&gt; (event-&gt;x);
+    uint16_t y = static_cast &lt;uint16_t&gt; (event-&gt;y);
+
+    return previewSomeEvent (widget, event-&gt;button, x, y,
+                             event-&gt;state, data);
+}
+
+/********************************************************************/
+
+static gboolean previewMotionEvent (GtkWidget * widget,
+                                    GdkEventMotion * event,
+                                    gpointer data)
+{
+    if (event-&gt;type != GDK_MOTION_NOTIFY)
+        return FALSE;
+
+    uint16_t x = static_cast &lt;uint16_t&gt; (event-&gt;x);
+    uint16_t y = static_cast &lt;uint16_t&gt; (event-&gt;y);
+
+    uint8_t button;
+    if (event-&gt;state &amp; GDK_BUTTON1_MASK)
+        button = 1;
+    else if (event-&gt;state &amp; GDK_BUTTON2_MASK)
+        button = 2;
+    else if (event-&gt;state &amp; GDK_BUTTON3_MASK)
+        button = 3;
+    else
+        return FALSE;
+
+    return previewSomeEvent (widget, button, x, y, event-&gt;state, data);
+}
+
+/********************************************************************/
+
+static void browse_button_clicked (GtkButton *, gpointer user_data)
+{
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    // First, determine a default output file if we don't already have an
+    // output file.
+
+    const char * filename
+        = gtk_entry_get_text (GTK_ENTRY(WID(eraserDataFileEntry)));
+    const int MAX_SEL = 2048;
+    char buffer [MAX_SEL + 1];
+    const char * lastfilename;
+    const char * defaultSuffix = &quot;eraser_data&quot;;
+    if ((!filename || !*filename)
+        &amp;&amp; prefs-&gt;get (LASTFILES_FILE1, (ADM_filename **)&amp;lastfilename))
+    {
+        strcpy (buffer, lastfilename);
+        char * cptr = buffer + strlen (buffer);
+        while (cptr &gt; buffer)
+        {
+            if (*cptr == '.')
+            {
+                strcpy (cptr + 1, defaultSuffix);
+                filename = buffer;
+                printf (&quot;Default output filename is %s based on %s + %s\n&quot;,
+                        filename, lastfilename, defaultSuffix);
+                break;
+            }
+            --cptr;
+        }
+    }
+    else if (!filename)
+        filename = &quot;&quot;;
+
+    if (FileSel_SelectWrite (&quot;Store Eraser Data in File&quot;,
+                             buffer, MAX_SEL, filename))
+    {
+        gtk_entry_set_text (GTK_ENTRY(WID(eraserDataFileEntry)), buffer);
+    }
+}
+
+/********************************************************************/
+
+static void jump_first_button_clicked (GtkButton *, gpointer user_data)
+{
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    myFly-&gt;sliderSet (myFly-&gt;current_mask-&gt;first_frame);
+    myFly-&gt;sliderChanged();
+}
+
+/********************************************************************/
+
+static void jump_last_button_clicked (GtkButton *, gpointer user_data)
+{
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    myFly-&gt;sliderSet (myFly-&gt;current_mask-&gt;last_frame);
+    myFly-&gt;sliderChanged();
+}
+
+/********************************************************************/
+
+void flyEraserGtk::selection_changed ()
+{
+    if (lock)
+        return;
+
+    uint32_t sel_num = 99999;
+    if (!getSelectionNumber (eraserp-&gt;getMasks().size(),
+                             GTK_WIDGET (tree_view), list_store, &amp;sel_num))
+    {
+        printf (&quot;ugh, failed to determine which row is selected!!\n&quot;);
+        sel_num = 0; // best we can do
+    }
+    else if (param.debug)
+        printf (&quot;row %d is selected\n&quot;, sel_num);
+
+    ++lock;
+
+    uint32_t current_sel = current_mask - eraserp-&gt;getMasks().begin();
+    if (sel_num != current_sel)
+    {
+        current_mask = eraserp-&gt;getMasks().begin() + sel_num;
+        gtk_spin_button_set_value
+            (GTK_SPIN_BUTTON(WID(frameRangeFirstSpinButton)),
+             current_mask-&gt;first_frame);
+        gtk_spin_button_set_value
+            (GTK_SPIN_BUTTON(WID(frameRangeLastSpinButton)),
+             current_mask-&gt;last_frame);
+    }
+
+    uint32_t middle_frame = (current_mask-&gt;first_frame
+                             + current_mask-&gt;last_frame) / 2;
+    // HERE: a better test might be &quot;if (middle_frame &gt; last_actual_frame)&quot;...
+    if (current_mask-&gt;last_frame &gt;= MAX_FRAME_NUM)
+        middle_frame = current_mask-&gt;first_frame;
+
+    if (middle_frame != sliderGet())
+    {
+        sliderSet (middle_frame);
+        sliderChanged();
+    }
+
+    --lock;
+}
+
+/********************************************************************/
+
+static void treeview_selection_changed (GtkTreeSelection * sel,
+                                        gpointer user_data)
+{
+    if (lock)
+        return;
+
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    myFly-&gt;selection_changed();
+}
+
+/********************************************************************/
+
+static void frame_range_changed (GtkSpinButton * spinbutton,
+                                 gpointer user_data)
+{
+    if (lock)
+        return;
+
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    bool changed = false;
+
+    Eraser::MaskVec::iterator &amp; current_mask = myFly-&gt;current_mask;
+    Eraser::MaskVec &amp; masks = myFly-&gt;eraserp-&gt;getMasks();
+    typedef Eraser::MaskVec::iterator MaskIter;
+    typedef Eraser::MaskVec::reverse_iterator MaskRiter;
+
+    int32_t value = gtk_spin_button_get_value_as_int
+                    (GTK_SPIN_BUTTON(WID(frameRangeFirstSpinButton)));
+    if (value != current_mask-&gt;first_frame)
+    {
+        current_mask-&gt;first_frame = value;
+        changed = true;
+        int32_t curr_value = value;
+        for (MaskRiter maskit (current_mask); maskit != masks.rend(); ++maskit)
+        {
+            if (maskit-&gt;last_frame &gt;= curr_value)
+                maskit-&gt;last_frame = max (curr_value - 1, 0);
+            else
+                break;
+
+            if (maskit-&gt;first_frame &gt;= curr_value)
+                maskit-&gt;first_frame = max (curr_value - 1, 0);
+            else
+                break;
+
+            curr_value = max (curr_value - 1, 0);
+        }
+
+        // we deliberately include the current mask in the following loop
+
+        curr_value = value;
+        for (MaskIter maskit (current_mask); maskit != masks.end(); ++maskit)
+        {
+            if (maskit-&gt;last_frame &lt; curr_value)
+                maskit-&gt;last_frame = curr_value;
+            else
+                break;
+
+            if (maskit-&gt;first_frame &lt; curr_value)
+                maskit-&gt;first_frame = curr_value;
+            else
+                break;
+
+            ++curr_value;
+        }
+    }
+
+    value = gtk_spin_button_get_value_as_int
+            (GTK_SPIN_BUTTON(WID(frameRangeLastSpinButton)));
+    if (value != myFly-&gt;current_mask-&gt;last_frame)
+    {
+        myFly-&gt;current_mask-&gt;last_frame = value;
+        changed = true;
+
+        // we deliberately include the current mask in the following loop
+
+        int32_t curr_value = value;
+        for (MaskRiter maskit (current_mask + 1);
+             maskit != masks.rend();
+             ++maskit)
+        {
+            if (maskit-&gt;first_frame &gt; curr_value)
+                maskit-&gt;first_frame = curr_value;
+            else
+                break;
+
+            if (maskit-&gt;last_frame &gt; curr_value)
+                maskit-&gt;last_frame = curr_value;
+            else
+                break;
+
+            curr_value = max (curr_value - 1, 0);
+        }
+
+        curr_value = value;
+        for (MaskIter maskit (current_mask + 1);
+             maskit != masks.end();
+             ++maskit)
+        {
+            if (maskit-&gt;first_frame &lt;= curr_value)
+                maskit-&gt;first_frame = curr_value + 1;
+            else
+                break;
+
+            if (maskit-&gt;last_frame &lt;= curr_value)
+                maskit-&gt;last_frame = curr_value + 1;
+            else
+                break;
+
+            ++curr_value;
+        }
+    }
+
+    if (!changed)
+        return;
+
+    myFly-&gt;upload_masklist (false);
+    gui_update (GTK_OBJECT (spinbutton), user_data);
+}
+
+/********************************************************************/
+
+static void insert_button_clicked (GtkButton * button, gpointer user_data)
+{
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    bool current_changed = false;
+
+    Eraser::MaskVec::iterator &amp; current_mask = myFly-&gt;current_mask;
+    Eraser::MaskVec &amp; masks = myFly-&gt;eraserp-&gt;getMasks();
+    typedef Eraser::MaskVec::iterator MaskIter;
+
+    int32_t frame = current_mask-&gt;last_frame + 1;
+    if (button == GTK_BUTTON (WID (duplicateButton)))
+        current_mask = masks.insert (current_mask + 1,
+                                     Eraser::Mask (frame, frame,
+                                                   current_mask-&gt;lines));
+    else
+        current_mask = masks.insert (current_mask + 1,
+                                     Eraser::Mask (frame, frame));
+
+    for (MaskIter maskit (current_mask + 1); maskit != masks.end(); ++maskit)
+    {
+        if (maskit-&gt;first_frame &lt;= frame)
+            maskit-&gt;first_frame = frame + 1;
+        else
+            break;
+
+        if (maskit-&gt;last_frame &lt;= frame)
+            maskit-&gt;last_frame = frame + 1;
+        else
+            break;
+
+        ++frame;
+    }
+
+    myFly-&gt;upload_masklist (true);
+    gui_update (GTK_OBJECT (button), user_data);
+}
+
+/********************************************************************/
+
+static void delete_button_clicked (GtkButton * button, gpointer user_data)
+{
+    flyEraserGtk * myFly = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    bool current_changed = false;
+
+    Eraser::MaskVec::iterator &amp; current_mask = myFly-&gt;current_mask;
+    Eraser::MaskVec &amp; masks = myFly-&gt;eraserp-&gt;getMasks();
+
+    current_mask = masks.erase (current_mask);
+    if (current_mask == masks.end())
+    {
+        if (masks.empty())
+            masks.push_back (Eraser::Mask (0, MAX_FRAME_NUM));
+        current_mask = masks.end() - 1;
+    }
+
+    myFly-&gt;upload_masklist (true);
+    gui_update (GTK_OBJECT (button), user_data);
+}
+
+/********************************************************************/
+
+uint8_t DIA_eraser (AVDMGenericVideoStream * in, ADMVideoEraser * eraserp,
+                    ERASER_PARAM * param, const MenuMapping * menu_mapping,
+                    uint32_t menu_mapping_count)
+{
+    // Allocate space for preview video
+    uint32_t width = in-&gt;getInfo()-&gt;width;
+    uint32_t height = in-&gt;getInfo()-&gt;height;
+
+    // We never have an empty list - there is always at least one mask,
+    // and if we create it the frame range is the entire video.
+
+    Eraser::MaskVec &amp; masks = eraserp-&gt;getMasks();
+    if (masks.empty())
+    {
+        masks.push_back (Eraser::Mask (0, MAX_FRAME_NUM));
+    }
+
+    dialog = create_eraser_dialog();
+    gtk_register_dialog (dialog);
+
+    // Fix up a bunch of things that Glade can't do.  This is less efficient
+    // than just editing the Glade output, but it's not that big a deal and
+    // doing it this way makes it MUCH easier to use Glade to tweak the layout
+    // later.
+
+    // 1. Connect the slider/spinner pairs by making them share a
+    //    GtkAdjustment.
+
+#define JOIN_SPINPAIR(_basename) \
+    gtk_range_set_adjustment \
+        (GTK_RANGE(WID(_basename ## Slider)), \
+         gtk_spin_button_get_adjustment (GTK_SPIN_BUTTON(WID(_basename ## Spinner))))
+
+    JOIN_SPINPAIR (color);
+
+    // 2. Create the flyDialog.
+
+    gtk_widget_show (dialog);
+
+    flyEraserGtk * myDialog
+        = new flyEraserGtk (width, height, in,
+                            WID(previewVideo), WID(previewSlider),
+                            dialog, eraserp, param,
+                            menu_mapping, menu_mapping_count);
+    myDialog-&gt;upload();
+    myDialog-&gt;sliderChanged();
+
+    // 3. Set up the treeview stuff.  This is waaaay more complicated than I
+    // needed for my simple little list, but that's just how it is in GTK, I
+    // guess.
+
+    GtkCellRenderer * renderer = gtk_cell_renderer_text_new();
+
+    gtk_tree_view_append_column
+        (GTK_TREE_VIEW(WID(rangeListTreeview)),
+         gtk_tree_view_column_new_with_attributes (_(&quot;First Frame&quot;),
+                                                   renderer, &quot;text&quot;, 0,
+                                                   NULL));
+    gtk_tree_view_append_column
+        (GTK_TREE_VIEW(WID(rangeListTreeview)),
+         gtk_tree_view_column_new_with_attributes (_(&quot;Last Frame&quot;),
+                                                   renderer, &quot;text&quot;, 1,
+                                                   NULL));
+
+    g_signal_connect (G_OBJECT(myDialog-&gt;tree_sel), &quot;changed&quot;,
+                      GTK_SIGNAL_FUNC(treeview_selection_changed),
+                      gpointer(myDialog));
+
+    // 4. Connect up all the other signals and stuff.
+
+    g_signal_connect (GTK_OBJECT(WID(eraserDataFileBrowseButton)), &quot;clicked&quot;,
+                      GTK_SIGNAL_FUNC(browse_button_clicked),
+                      gpointer(myDialog));
+
+#define CNX(_widg,_signame) \
+    g_signal_connect (GTK_OBJECT(WID(_widg)), _signame,                \
+                      GTK_SIGNAL_FUNC(gui_update), gpointer(myDialog));
+
+    CNX (brushModeMenu, &quot;changed&quot;);
+    CNX (brushSizeMenu, &quot;changed&quot;);
+    CNX (colorSpinner, &quot;value_changed&quot;);
+    // CNX (frameRangeFirstSpinButton, &quot;value_changed&quot;);
+    // CNX (frameRangeLastSpinButton, &quot;value_changed&quot;);
+
+    g_signal_connect (GTK_OBJECT(WID(frameRangeFirstSpinButton)),
+                      &quot;value_changed&quot;,
+                      GTK_SIGNAL_FUNC(frame_range_changed),
+                      gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(frameRangeLastSpinButton)),
+                      &quot;value_changed&quot;,
+                      GTK_SIGNAL_FUNC(frame_range_changed),
+                      gpointer(myDialog));
+
+    g_signal_connect (GTK_OBJECT(WID(insertButton)), &quot;clicked&quot;,
+                      GTK_SIGNAL_FUNC(insert_button_clicked),
+                      gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(duplicateButton)), &quot;clicked&quot;,
+                      GTK_SIGNAL_FUNC(insert_button_clicked),
+                      gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(deleteButton)), &quot;clicked&quot;,
+                      GTK_SIGNAL_FUNC(delete_button_clicked),
+                      gpointer(myDialog));
+
+    // preview stuff:
+
+    g_signal_connect (GTK_OBJECT(WID(previewSlider)), &quot;value_changed&quot;,
+                      GTK_SIGNAL_FUNC(frame_changed), gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(previewVideo)), &quot;expose_event&quot;,
+                      GTK_SIGNAL_FUNC(gui_draw), gpointer(myDialog));
+
+    g_signal_connect (GTK_OBJECT(WID(previewVideo)), &quot;button_press_event&quot;,
+                      GTK_SIGNAL_FUNC(previewButtonEvent),
+                      gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(previewVideo)), &quot;motion_notify_event&quot;,
+                      GTK_SIGNAL_FUNC(previewMotionEvent),
+                      gpointer(myDialog));
+
+    g_signal_connect (GTK_OBJECT(WID(previewJumpFirstButton)), &quot;clicked&quot;,
+                      GTK_SIGNAL_FUNC(jump_first_button_clicked),
+                      gpointer(myDialog));
+    g_signal_connect (GTK_OBJECT(WID(previewJumpLastButton)), &quot;clicked&quot;,
+                      GTK_SIGNAL_FUNC(jump_last_button_clicked),
+                      gpointer(myDialog));
+
+    uint8_t ret = 0;
+    int response = gtk_dialog_run(GTK_DIALOG(dialog));
+
+    if (response == GTK_RESPONSE_OK)
+    {
+        // Don't let them leave without asking for a filename - if they leave
+        // with no filename selected, they will lose all their mask data!
+
+        const char * filename =
+            gtk_entry_get_text (GTK_ENTRY(WID(eraserDataFileEntry)));
+        if (filename == NULL || *filename == '\0')
+            browse_button_clicked (NULL, gpointer (myDialog));
+
+        myDialog-&gt;download();
+        myDialog-&gt;getParam (param);
+        ret = 1;
+    }
+
+    gtk_unregister_dialog(dialog);
+    gtk_widget_destroy(dialog);
+
+    delete myDialog;
+
+    return ret;
+}
+
+void frame_changed (GtkRange *, gpointer user_data)
+{
+    flyEraserGtk * myDialog = static_cast &lt;flyEraserGtk *&gt; (user_data);
+
+    myDialog-&gt;sliderChanged();
+}
+
+void gui_update (GtkObject *, gpointer user_data)
+{
+    if (lock)
+        return;
+
+    flyEraserGtk * myDialog = static_cast &lt;flyEraserGtk *&gt; (user_data);
+    myDialog-&gt;update();
+}
+
+gboolean gui_draw (GtkWidget * widget, GdkEventExpose * event, gpointer user_data)
+{
+    flyEraserGtk * myDialog
+        = static_cast &lt;flyEraserGtk *&gt; (user_data);
+    myDialog-&gt;display();
+    return TRUE;
+}
+
+/**************************************/
+
+uint8_t flyEraserGtk::upload (void)
+{
+    lock++;
+
+    gtk_entry_set_text (GTK_ENTRY(WID(eraserDataFileEntry)),
+                        param.data_file.c_str());
+
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(colorSpinner)), param.output_color);
+
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(debugSpinButton)), param.debug);
+
+    lock--;
+
+    return upload_masklist (true);
+}
+
+uint8_t flyEraserGtk::upload_masklist (bool set_preview_frame)
+{
+    lock++;
+
+    Eraser::MaskVec &amp; masks = eraserp-&gt;getMasks();
+
+    gtk_tree_view_set_model (tree_view, NULL);
+
+    // There may be a more efficient way, but for the likely numbers of rows
+    // we'll be dealing with, I don't know that it's worth the trouble to
+    // implement it.
+    gtk_list_store_clear (list_store);
+
+    for (Eraser::MaskVec::const_iterator maskit = masks.begin();
+         maskit != masks.end();
+         ++maskit)
+    {
+        const Eraser::Mask &amp; mask = *maskit;
+
+        GtkTreeIter iter;
+        gtk_list_store_append (list_store, &amp;iter);
+        gtk_list_store_set (list_store, &amp;iter, 0, mask.first_frame,
+                            1, mask.last_frame, -1);
+//        printf (&quot;uploaded mask %d (%d - %d) to treeview\n&quot;,
+//                maskit - masks.begin(), mask.first_frame, mask.last_frame);
+    }
+
+    gtk_tree_view_set_model (tree_view, tree_model);
+
+    setSelectionNumber (masks.size(), GTK_WIDGET (tree_view), list_store,
+                        current_mask - masks.begin());
+
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(frameRangeFirstSpinButton)),
+         current_mask-&gt;first_frame);
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(frameRangeLastSpinButton)),
+         current_mask-&gt;last_frame);
+
+    if (set_preview_frame)
+    {
+        uint32_t middle_frame = (current_mask-&gt;first_frame
+                                 + current_mask-&gt;last_frame) / 2;
+        sliderSet (middle_frame);
+        sliderChanged();
+    }
+
+    lock--;
+    return 1;
+}
+
+uint8_t flyEraserGtk::download (void)
+{
+    getMenuValues();
+
+    const char * filename =
+        gtk_entry_get_text (GTK_ENTRY(WID(eraserDataFileEntry)));
+
+    // Note that the documentation states clearly that the result of
+    // gtk_entry_get_text() must NOT be freed, modified, or stored.  This is
+    // different than gtk_file_chooser_get_filename(), which returns a pointer
+    // which must eventually be passed to g_free().
+
+    if (filename)
+        param.data_file = filename;
+    else
+        param.data_file = &quot;&quot;;
+
+    param.output_color
+        = gtk_spin_button_get_value_as_int
+        (GTK_SPIN_BUTTON(WID(colorSpinner)));
+
+    param.debug
+        = gtk_spin_button_get_value_as_int
+        (GTK_SPIN_BUTTON(WID(debugSpinButton)));
+
+    return 1;
+}
+
+void flyEraserGtk::wipeOutputBuffer ()
+{
+    // printf (&quot;wiping output buffer\n&quot;);
+    uint32_t pixelcount = _w * _h;
+    uint32_t * outp = reinterpret_cast &lt;uint32_t *&gt;
+                      (YPLANE (_yuvBufferOut) + pixelcount);
+    uint32_t intcount = pixelcount / 4 + 1;
+    uint32_t value = 0x60;
+    while (--intcount)
+    {
+        *--outp = value;
+        value = value &gt;&gt; 8 | ((value &amp; 0xff) &lt;&lt; 24);
+    }
+
+    memset (UPLANE (_yuvBufferOut), 128, pixelcount &gt;&gt; 2);
+    memset (VPLANE (_yuvBufferOut), 128, pixelcount &gt;&gt; 2);
+}
+
+// The following was generated by glade from eraser.glade once upon a time (in
+// fact, several times :-).  Thus far, I've avoided editing it, so
+// regenerating the code from Glade (I used 2.12.1) and swapping it in here
+// should not lose anything.  All the tweaking and adjusting and
+// signal-connecting is done in code above, which is maintained by hand, and
+// which has much knowledge of the names and layout of the widgets (so be
+// cautious about renaming things!).
+
+GtkWidget*
+create_eraser_dialog (void)
+{
+  GtkWidget *eraser_dialog;
+  GtkWidget *dialogVbox;
+  GtkWidget *dialogHbox;
+  GtkWidget *allSettingsVbox;
+  GtkWidget *settingsOuterHbox;
+  GtkWidget *settingsOuterVbox;
+  GtkWidget *brushSettingsHbox;
+  GtkWidget *brushModeHbox;
+  GtkWidget *brushModeLabel;
+  GtkWidget *brushModeMenu;
+  GtkWidget *brushSizeHbox;
+  GtkWidget *brushSizeLabel;
+  GtkWidget *brushSizeMenu;
+  GtkWidget *colorVbox;
+  GtkWidget *colorLabel;
+  GtkWidget *colorHbox;
+  GtkWidget *colorSlider;
+  GtkObject *colorSpinner_adj;
+  GtkWidget *colorSpinner;
+  GtkWidget *eraserDataFileHbox;
+  GtkWidget *eraserDataFileLabel;
+  GtkWidget *eraserDataFileEntry;
+  GtkWidget *debugHbox;
+  GtkWidget *eraserDataFileBrowseButton;
+  GtkWidget *browse_debug_spacer;
+  GtkWidget *debugLabel;
+  GtkObject *debugSpinButton_adj;
+  GtkWidget *debugSpinButton;
+  GtkWidget *frameRangeHbox;
+  GtkWidget *frameRangeStartHbox;
+  GtkWidget *frameRangeStartLabel;
+  GtkObject *frameRangeFirstSpinButton_adj;
+  GtkWidget *frameRangeFirstSpinButton;
+  GtkWidget *frameRangeLastHbox;
+  GtkWidget *frameRangeLastLabel;
+  GtkObject *frameRangeLastSpinButton_adj;
+  GtkWidget *frameRangeLastSpinButton;
+  GtkWidget *rangeListScrolledWindow;
+  GtkWidget *rangeListTreeview;
+  GtkWidget *rangeListHButtonBox;
+  GtkWidget *insertButton;
+  GtkWidget *duplicateButton;
+  GtkWidget *deleteButton;
+  GtkWidget *previewVboxOuter;
+  GtkWidget *previewJumpButtonHbox;
+  GtkWidget *previewJumpLastButton;
+  GtkWidget *previewJumpFirstButton;
+  GtkWidget *previewJumpLabel;
+  GtkWidget *previewFrame;
+  GtkWidget *previewAlignment;
+  GtkWidget *previewVbox;
+  GtkWidget *previewControlHbox;
+  GtkWidget *previewOutputMenu;
+  GtkWidget *previewSlider;
+  GtkWidget *previewVideo;
+  GtkWidget *previewLabel;
+  GtkWidget *dialogButtonBox;
+  GtkWidget *cancelButton;
+  GtkWidget *okButton;
+  GtkTooltips *tooltips;
+
+  tooltips = gtk_tooltips_new ();
+
+  eraser_dialog = gtk_dialog_new ();
+  //                                                NO NEED TO &quot;FIX&quot; THAT _()!!
+  //                                                see handy macros near top of file.
+  gtk_window_set_title (GTK_WINDOW (eraser_dialog), _(&quot;Eraser Configuration&quot;));
+  gtk_window_set_type_hint (GTK_WINDOW (eraser_dialog), GDK_WINDOW_TYPE_HINT_DIALOG);
+
+  dialogVbox = GTK_DIALOG (eraser_dialog)-&gt;vbox;
+  gtk_widget_show (dialogVbox);
+
+  dialogHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (dialogHbox);
+  gtk_box_pack_start (GTK_BOX (dialogVbox), dialogHbox, TRUE, TRUE, 0);
+
+  allSettingsVbox = gtk_vbox_new (FALSE, 12);
+  gtk_widget_show (allSettingsVbox);
+  gtk_box_pack_start (GTK_BOX (dialogHbox), allSettingsVbox, TRUE, TRUE, 0);
+  gtk_container_set_border_width (GTK_CONTAINER (allSettingsVbox), 8);
+
+  settingsOuterHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (settingsOuterHbox);
+  gtk_box_pack_start (GTK_BOX (allSettingsVbox), settingsOuterHbox, TRUE, TRUE, 0);
+
+  settingsOuterVbox = gtk_vbox_new (FALSE, 12);
+  gtk_widget_show (settingsOuterVbox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterHbox), settingsOuterVbox, TRUE, TRUE, 0);
+
+  brushSettingsHbox = gtk_hbox_new (FALSE, 15);
+  gtk_widget_show (brushSettingsHbox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), brushSettingsHbox, FALSE, TRUE, 0);
+
+  brushModeHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (brushModeHbox);
+  gtk_box_pack_start (GTK_BOX (brushSettingsHbox), brushModeHbox, TRUE, TRUE, 0);
+
+  brushModeLabel = gtk_label_new_with_mnemonic (_(&quot;Brush _Mode:  &quot;));
+  gtk_widget_show (brushModeLabel);
+  gtk_box_pack_start (GTK_BOX (brushModeHbox), brushModeLabel, FALSE, FALSE, 0);
+
+  brushModeMenu = gtk_combo_box_new_text ();
+  gtk_widget_show (brushModeMenu);
+  gtk_box_pack_start (GTK_BOX (brushModeHbox), brushModeMenu, TRUE, TRUE, 0);
+
+  brushSizeHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (brushSizeHbox);
+  gtk_box_pack_start (GTK_BOX (brushSettingsHbox), brushSizeHbox, TRUE, TRUE, 0);
+
+  brushSizeLabel = gtk_label_new_with_mnemonic (_(&quot;Brush _Size:  &quot;));
+  gtk_widget_show (brushSizeLabel);
+  gtk_box_pack_start (GTK_BOX (brushSizeHbox), brushSizeLabel, FALSE, FALSE, 0);
+
+  brushSizeMenu = gtk_combo_box_new_text ();
+  gtk_widget_show (brushSizeMenu);
+  gtk_box_pack_start (GTK_BOX (brushSizeHbox), brushSizeMenu, TRUE, TRUE, 0);
+
+  colorVbox = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (colorVbox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), colorVbox, FALSE, TRUE, 0);
+
+  colorLabel = gtk_label_new_with_mnemonic (_(&quot;Output \&quot;_Color\&quot; for all masked pixels:&quot;));
+  gtk_widget_show (colorLabel);
+  gtk_box_pack_start (GTK_BOX (colorVbox), colorLabel, FALSE, FALSE, 0);
+  gtk_misc_set_alignment (GTK_MISC (colorLabel), 0, 0.5);
+
+  colorHbox = gtk_hbox_new (FALSE, 5);
+  gtk_widget_show (colorHbox);
+  gtk_box_pack_start (GTK_BOX (colorVbox), colorHbox, TRUE, TRUE, 0);
+
+  colorSlider = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 255, 1, 1, 0)));
+  gtk_widget_show (colorSlider);
+  gtk_box_pack_start (GTK_BOX (colorHbox), colorSlider, TRUE, TRUE, 0);
+  gtk_scale_set_draw_value (GTK_SCALE (colorSlider), FALSE);
+  gtk_scale_set_value_pos (GTK_SCALE (colorSlider), GTK_POS_LEFT);
+  gtk_scale_set_digits (GTK_SCALE (colorSlider), 0);
+
+  colorSpinner_adj = gtk_adjustment_new (0, 0, 255, 1, 1, 0);
+  colorSpinner = gtk_spin_button_new (GTK_ADJUSTMENT (colorSpinner_adj), 1, 0);
+  gtk_widget_show (colorSpinner);
+  gtk_box_pack_start (GTK_BOX (colorHbox), colorSpinner, FALSE, TRUE, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (colorSpinner), TRUE);
+
+  eraserDataFileHbox = gtk_hbox_new (FALSE, 5);
+  gtk_widget_show (eraserDataFileHbox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), eraserDataFileHbox, FALSE, TRUE, 0);
+
+  eraserDataFileLabel = gtk_label_new_with_mnemonic (_(&quot;Eraser _Data File:&quot;));
+  gtk_widget_show (eraserDataFileLabel);
+  gtk_box_pack_start (GTK_BOX (eraserDataFileHbox), eraserDataFileLabel, FALSE, FALSE, 0);
+
+  eraserDataFileEntry = gtk_entry_new ();
+  gtk_widget_show (eraserDataFileEntry);
+  gtk_box_pack_start (GTK_BOX (eraserDataFileHbox), eraserDataFileEntry, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, eraserDataFileEntry, _(&quot;File in which eraser mask information (the list below and the pixels erased for each range) will be stored&quot;), NULL);
+  gtk_entry_set_invisible_char (GTK_ENTRY (eraserDataFileEntry), 8226);
+  gtk_entry_set_width_chars (GTK_ENTRY (eraserDataFileEntry), 35);
+
+  debugHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (debugHbox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), debugHbox, FALSE, TRUE, 0);
+
+  eraserDataFileBrowseButton = gtk_button_new_with_mnemonic (_(&quot;_Browse...&quot;));
+  gtk_widget_show (eraserDataFileBrowseButton);
+  gtk_box_pack_start (GTK_BOX (debugHbox), eraserDataFileBrowseButton, FALSE, FALSE, 0);
+
+  browse_debug_spacer = gtk_label_new (&quot;&quot;);
+  gtk_widget_show (browse_debug_spacer);
+  gtk_box_pack_start (GTK_BOX (debugHbox), browse_debug_spacer, TRUE, FALSE, 0);
+
+  debugLabel = gtk_label_new_with_mnemonic (_(&quot;_Debugging settings (bits):   &quot;));
+  gtk_widget_show (debugLabel);
+  gtk_box_pack_start (GTK_BOX (debugHbox), debugLabel, FALSE, FALSE, 0);
+
+  debugSpinButton_adj = gtk_adjustment_new (0, 0, 16777215, 1, 10, 0);
+  debugSpinButton = gtk_spin_button_new (GTK_ADJUSTMENT (debugSpinButton_adj), 1, 0);
+  gtk_widget_show (debugSpinButton);
+  gtk_box_pack_start (GTK_BOX (debugHbox), debugSpinButton, FALSE, TRUE, 0);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (debugSpinButton), TRUE);
+
+  frameRangeHbox = gtk_hbox_new (FALSE, 32);
+  gtk_widget_show (frameRangeHbox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), frameRangeHbox, FALSE, TRUE, 0);
+
+  frameRangeStartHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (frameRangeStartHbox);
+  gtk_box_pack_start (GTK_BOX (frameRangeHbox), frameRangeStartHbox, TRUE, TRUE, 0);
+
+  frameRangeStartLabel = gtk_label_new_with_mnemonic (_(&quot;_First frame:   &quot;));
+  gtk_widget_show (frameRangeStartLabel);
+  gtk_box_pack_start (GTK_BOX (frameRangeStartHbox), frameRangeStartLabel, FALSE, FALSE, 0);
+
+  frameRangeFirstSpinButton_adj = gtk_adjustment_new (0, 0, 100000000, 1, 10, 0);
+  frameRangeFirstSpinButton = gtk_spin_button_new (GTK_ADJUSTMENT (frameRangeFirstSpinButton_adj), 1, 0);
+  gtk_widget_show (frameRangeFirstSpinButton);
+  gtk_box_pack_start (GTK_BOX (frameRangeStartHbox), frameRangeFirstSpinButton, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, frameRangeFirstSpinButton, _(&quot;First frame to which currently selected eraser mask applies; 0 means first frame of video&quot;), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (frameRangeFirstSpinButton), TRUE);
+
+  frameRangeLastHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (frameRangeLastHbox);
+  gtk_box_pack_start (GTK_BOX (frameRangeHbox), frameRangeLastHbox, TRUE, TRUE, 0);
+
+  frameRangeLastLabel = gtk_label_new_with_mnemonic (_(&quot;_Last frame:   &quot;));
+  gtk_widget_show (frameRangeLastLabel);
+  gtk_box_pack_start (GTK_BOX (frameRangeLastHbox), frameRangeLastLabel, FALSE, FALSE, 0);
+
+  frameRangeLastSpinButton_adj = gtk_adjustment_new (100000000, 0, 100000000, 1, 10, 0);
+  frameRangeLastSpinButton = gtk_spin_button_new (GTK_ADJUSTMENT (frameRangeLastSpinButton_adj), 1, 0);
+  gtk_widget_show (frameRangeLastSpinButton);
+  gtk_box_pack_start (GTK_BOX (frameRangeLastHbox), frameRangeLastSpinButton, TRUE, TRUE, 0);
+  gtk_tooltips_set_tip (tooltips, frameRangeLastSpinButton, _(&quot;Last frame to which currently selected eraser mask applies; use e.g. 99999999 to represent the last frame of video&quot;), NULL);
+  gtk_spin_button_set_numeric (GTK_SPIN_BUTTON (frameRangeLastSpinButton), TRUE);
+
+  rangeListScrolledWindow = gtk_scrolled_window_new (NULL, NULL);
+  gtk_widget_show (rangeListScrolledWindow);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), rangeListScrolledWindow, TRUE, TRUE, 0);
+  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (rangeListScrolledWindow), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
+  gtk_scrolled_window_set_shadow_type (GTK_SCROLLED_WINDOW (rangeListScrolledWindow), GTK_SHADOW_IN);
+
+  rangeListTreeview = gtk_tree_view_new ();
+  gtk_widget_show (rangeListTreeview);
+  gtk_container_add (GTK_CONTAINER (rangeListScrolledWindow), rangeListTreeview);
+  gtk_tree_view_set_rules_hint (GTK_TREE_VIEW (rangeListTreeview), TRUE);
+  gtk_tree_view_set_enable_search (GTK_TREE_VIEW (rangeListTreeview), FALSE);
+
+  rangeListHButtonBox = gtk_hbutton_box_new ();
+  gtk_widget_show (rangeListHButtonBox);
+  gtk_box_pack_start (GTK_BOX (settingsOuterVbox), rangeListHButtonBox, FALSE, TRUE, 0);
+
+  insertButton = gtk_button_new_from_stock (&quot;gtk-new&quot;);
+  gtk_widget_show (insertButton);
+  gtk_container_add (GTK_CONTAINER (rangeListHButtonBox), insertButton);
+  GTK_WIDGET_SET_FLAGS (insertButton, GTK_CAN_DEFAULT);
+  gtk_button_set_focus_on_click (GTK_BUTTON (insertButton), FALSE);
+
+  duplicateButton = gtk_button_new_with_mnemonic (_(&quot;Duplicate&quot;));
+  gtk_widget_show (duplicateButton);
+  gtk_container_add (GTK_CONTAINER (rangeListHButtonBox), duplicateButton);
+  GTK_WIDGET_SET_FLAGS (duplicateButton, GTK_CAN_DEFAULT);
+  gtk_tooltips_set_tip (tooltips, duplicateButton, _(&quot;Make a copy of the currently selected eraser mask and insert it as the following row&quot;), NULL);
+  gtk_button_set_focus_on_click (GTK_BUTTON (duplicateButton), FALSE);
+
+  deleteButton = gtk_button_new_from_stock (&quot;gtk-delete&quot;);
+  gtk_widget_show (deleteButton);
+  gtk_container_add (GTK_CONTAINER (rangeListHButtonBox), deleteButton);
+  GTK_WIDGET_SET_FLAGS (deleteButton, GTK_CAN_DEFAULT);
+  gtk_button_set_focus_on_click (GTK_BUTTON (deleteButton), FALSE);
+
+  previewVboxOuter = gtk_vbox_new (FALSE, 0);
+  gtk_widget_show (previewVboxOuter);
+  gtk_box_pack_start (GTK_BOX (dialogHbox), previewVboxOuter, FALSE, TRUE, 0);
+
+  previewJumpButtonHbox = gtk_hbox_new (FALSE, 0);
+  gtk_widget_show (previewJumpButtonHbox);
+  gtk_box_pack_start (GTK_BOX (previewVboxOuter), previewJumpButtonHbox, FALSE, TRUE, 5);
+
+  previewJumpLastButton = gtk_button_new_with_mnemonic (_(&quot;Last Frame in Range&quot;));
+  gtk_widget_show (previewJumpLastButton);
+  gtk_box_pack_end (GTK_BOX (previewJumpButtonHbox), previewJumpLastButton, FALSE, FALSE, 0);
+  gtk_button_set_focus_on_click (GTK_BUTTON (previewJumpLastButton), FALSE);
+
+  previewJumpFirstButton = gtk_button_new_with_mnemonic (_(&quot;First Frame in Range&quot;));
+  gtk_widget_show (previewJumpFirstButton);
+  gtk_box_pack_end (GTK_BOX (previewJumpButtonHbox), previewJumpFirstButton, FALSE, FALSE, 0);
+  gtk_button_set_focus_on_click (GTK_BUTTON (previewJumpFirstButton), FALSE);
+
+  previewJumpLabel = gtk_label_new (_(&quot;Jump to:  &quot;));
+  gtk_widget_show (previewJumpLabel);
+  gtk_box_pack_end (GTK_BOX (previewJumpButtonHbox), previewJumpLabel, FALSE, FALSE, 0);
+
+  previewFrame = gtk_frame_new (NULL);
+  gtk_widget_show (previewFrame);
+  gtk_box_pack_start (GTK_BOX (previewVboxOuter), previewFrame, FALSE, TRUE, 0);
+
+  previewAlignment = gtk_alignment_new (0.5, 0.5, 1, 1);
+  gtk_widget_show (previewAlignment);
+  gtk_container_add (GTK_CONTAINER (previewFrame), previewAlignment);
+  gtk_alignment_set_padding (GTK_ALIGNMENT (previewAlignment), 0, 8, 6, 8);
+
+  previewVbox = gtk_vbox_new (FALSE, 5);
+  gtk_widget_show (previewVbox);
+  gtk_container_add (GTK_CONTAINER (previewAlignment), previewVbox);
+
+  previewControlHbox = gtk_hbox_new (FALSE, 5);
+  gtk_widget_show (previewControlHbox);
+  gtk_box_pack_start (GTK_BOX (previewVbox), previewControlHbox, TRUE, TRUE, 0);
+
+  previewOutputMenu = gtk_combo_box_new_text ();
+  gtk_box_pack_start (GTK_BOX (previewControlHbox), previewOutputMenu, FALSE, TRUE, 0);
+  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), _(&quot;Eraser output&quot;));
+  gtk_combo_box_append_text (GTK_COMBO_BOX (previewOutputMenu), _(&quot;Final output&quot;));
+
+  previewSlider = gtk_hscale_new (GTK_ADJUSTMENT (gtk_adjustment_new (0, 0, 99, 1, 1, 0)));
+  gtk_widget_show (previewSlider);
+  gtk_box_pack_start (GTK_BOX (previewControlHbox), previewSlider, TRUE, TRUE, 0);
+  gtk_scale_set_digits (GTK_SCALE (previewSlider), 0);
+
+  previewVideo = gtk_drawing_area_new ();
+  gtk_widget_show (previewVideo);
+  gtk_box_pack_start (GTK_BOX (previewVbox), previewVideo, TRUE, TRUE, 0);
+  gtk_widget_set_size_request (previewVideo, -1, 300);
+  gtk_widget_set_events (previewVideo, GDK_BUTTON1_MOTION_MASK | GDK_BUTTON2_MOTION_MASK | GDK_BUTTON3_MOTION_MASK | GDK_BUTTON_PRESS_MASK);
+
+  previewLabel = gtk_label_new (_(&quot;Preview&quot;));
+  gtk_widget_show (previewLabel);
+  gtk_frame_set_label_widget (GTK_FRAME (previewFrame), previewLabel);
+
+  dialogButtonBox = GTK_DIALOG (eraser_dialog)-&gt;action_area;
+  gtk_widget_show (dialogButtonBox);
+  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialogButtonBox), GTK_BUTTONBOX_END);
+
+  cancelButton = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
+  gtk_widget_show (cancelButton);
+  gtk_dialog_add_action_widget (GTK_DIALOG (eraser_dialog), cancelButton, GTK_RESPONSE_CANCEL);
+  GTK_WIDGET_SET_FLAGS (cancelButton, GTK_CAN_DEFAULT);
+
+  okButton = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
+  gtk_widget_show (okButton);
+  gtk_dialog_add_action_widget (GTK_DIALOG (eraser_dialog), okButton, GTK_RESPONSE_OK);
+  GTK_WIDGET_SET_FLAGS (okButton, GTK_CAN_DEFAULT);
+
+  gtk_label_set_mnemonic_widget (GTK_LABEL (eraserDataFileLabel), eraserDataFileEntry);
+  gtk_label_set_mnemonic_widget (GTK_LABEL (debugLabel), debugSpinButton);
+  gtk_label_set_mnemonic_widget (GTK_LABEL (frameRangeStartLabel), debugSpinButton);
+  gtk_label_set_mnemonic_widget (GTK_LABEL (frameRangeLastLabel), debugSpinButton);
+
+  /* Store pointers to all widgets, for use by lookup_widget(). */
+  GLADE_HOOKUP_OBJECT_NO_REF (eraser_dialog, eraser_dialog, &quot;eraser_dialog&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (eraser_dialog, dialogVbox, &quot;dialogVbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, dialogHbox, &quot;dialogHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, allSettingsVbox, &quot;allSettingsVbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, settingsOuterHbox, &quot;settingsOuterHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, settingsOuterVbox, &quot;settingsOuterVbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushSettingsHbox, &quot;brushSettingsHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushModeHbox, &quot;brushModeHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushModeLabel, &quot;brushModeLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushModeMenu, &quot;brushModeMenu&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushSizeHbox, &quot;brushSizeHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushSizeLabel, &quot;brushSizeLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, brushSizeMenu, &quot;brushSizeMenu&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, colorVbox, &quot;colorVbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, colorLabel, &quot;colorLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, colorHbox, &quot;colorHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, colorSlider, &quot;colorSlider&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, colorSpinner, &quot;colorSpinner&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, eraserDataFileHbox, &quot;eraserDataFileHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, eraserDataFileLabel, &quot;eraserDataFileLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, eraserDataFileEntry, &quot;eraserDataFileEntry&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, debugHbox, &quot;debugHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, eraserDataFileBrowseButton, &quot;eraserDataFileBrowseButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, browse_debug_spacer, &quot;browse_debug_spacer&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, debugLabel, &quot;debugLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, debugSpinButton, &quot;debugSpinButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeHbox, &quot;frameRangeHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeStartHbox, &quot;frameRangeStartHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeStartLabel, &quot;frameRangeStartLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeFirstSpinButton, &quot;frameRangeFirstSpinButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeLastHbox, &quot;frameRangeLastHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeLastLabel, &quot;frameRangeLastLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, frameRangeLastSpinButton, &quot;frameRangeLastSpinButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, rangeListScrolledWindow, &quot;rangeListScrolledWindow&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, rangeListTreeview, &quot;rangeListTreeview&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, rangeListHButtonBox, &quot;rangeListHButtonBox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, insertButton, &quot;insertButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, duplicateButton, &quot;duplicateButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, deleteButton, &quot;deleteButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewVboxOuter, &quot;previewVboxOuter&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewJumpButtonHbox, &quot;previewJumpButtonHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewJumpLastButton, &quot;previewJumpLastButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewJumpFirstButton, &quot;previewJumpFirstButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewJumpLabel, &quot;previewJumpLabel&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewFrame, &quot;previewFrame&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewAlignment, &quot;previewAlignment&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewVbox, &quot;previewVbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewControlHbox, &quot;previewControlHbox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewOutputMenu, &quot;previewOutputMenu&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewSlider, &quot;previewSlider&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewVideo, &quot;previewVideo&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, previewLabel, &quot;previewLabel&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (eraser_dialog, dialogButtonBox, &quot;dialogButtonBox&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, cancelButton, &quot;cancelButton&quot;);
+  GLADE_HOOKUP_OBJECT (eraser_dialog, okButton, &quot;okButton&quot;);
+  GLADE_HOOKUP_OBJECT_NO_REF (eraser_dialog, tooltips, &quot;tooltips&quot;);
+
+  return eraser_dialog;
+}
+
+#endif

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-01-13 10:07:09 UTC (rev 3744)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_flyDialog.cpp	2008-01-13 10:07:48 UTC (rev 3745)
@@ -62,20 +62,15 @@
 uint32_t ADM_flyDialog::sliderGet(void)
 {
 	ADM_assert(_slider);
-	GtkAdjustment *adj=gtk_range_get_adjustment (GTK_RANGE(_slider));
-	return (uint32_t)GTK_ADJUSTMENT(adj)-&gt;value;
+	return (uint32_t)gtk_range_get_value (GTK_RANGE(_slider));
 }
 
 uint8_t ADM_flyDialog::sliderSet(uint32_t value)
 {
 	ADM_assert(_slider);
 
-	GtkAdjustment *adj = gtk_range_get_adjustment(GTK_RANGE(_slider));
+        gtk_range_set_value (GTK_RANGE(_slider), value);
 
-	adj-&gt;value = value;
-
-	gtk_range_set_adjustment(GTK_RANGE(_slider), adj);
-
 	return 1; 
 }
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-01-13 10:07:09 UTC (rev 3744)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_particle.cpp	2008-01-13 10:07:48 UTC (rev 3745)
@@ -139,6 +139,8 @@
 {
     flyParticle * myDialog = static_cast &lt;flyParticle *&gt; (user_data);
 
+    myDialog-&gt;getMenuValues();  // so we know the output format
+
     // First, determine a default output file if we don't already have an
     // output file.
 
@@ -147,7 +149,9 @@
     const int MAX_SEL = 2048;
     char buffer [MAX_SEL + 1];
     const char * lastfilename;
-    const char * defaultSuffix = &quot;pts&quot;;
+    const char * defaultSuffix
+        = (myDialog-&gt;param.output_format
+           == ADMVideoParticle::OUTPUTFMT_FORMAT_AB_ODU) ? &quot;csv&quot; : &quot;pts&quot;;
     if ((!filename || !*filename)
         &amp;&amp; prefs-&gt;get (LASTFILES_FILE1, (ADM_filename **)&amp;lastfilename))
     {
@@ -278,6 +282,10 @@
         (GTK_SPIN_BUTTON(WID(topCropSpinButton)), param.top_crop);
     gtk_spin_button_set_value
         (GTK_SPIN_BUTTON(WID(bottomCropSpinButton)), param.bottom_crop);
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(cameraNumberSpinButton)), param.camera_number);
+    gtk_spin_button_set_value
+        (GTK_SPIN_BUTTON(WID(debugSpinButton)), param.debug);
 
     lock--;
     return 1;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2008-01-13 10:07:09 UTC (rev 3744)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2008-01-13 10:07:48 UTC (rev 3745)
@@ -31,7 +31,8 @@
 	DIA_threshold.cpp \
 	DIA_SwissArmyKnife.cpp \
 	DIA_particle.cpp \
-	DIA_flyDialog.cpp
+	DIA_flyDialog.cpp \
+	DIA_eraser.cpp
 
 
 
@@ -55,5 +56,5 @@
 DIA_busy.h            DIA_quota.cpp       DIA_xvid4.cpp \
 DIA_calculator.cpp   DIA_encoding.cpp      DIA_recent.cpp \
 DIA_chromaShift.cpp  DIA_encoding.h        DIA_lavpp_deint.cpp \
-DIA_threshold.cpp    DIA_SwissArmyKnife.cpp DIA_particle.cpp
+DIA_threshold.cpp    DIA_SwissArmyKnife.cpp DIA_particle.cpp DIA_eraser.cpp
 

Added: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade	2008-01-13 10:07:09 UTC (rev 3744)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/glade/eraser.glade	2008-01-13 10:07:48 UTC (rev 3745)
@@ -0,0 +1,902 @@
+&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt; &lt;!--*- mode: xml -*--&gt;
+&lt;!DOCTYPE glade-interface SYSTEM &quot;<A HREF="http://glade.gnome.org/glade-2.0.dtd">http://glade.gnome.org/glade-2.0.dtd</A>&quot;&gt;
+
+&lt;glade-interface&gt;
+
+&lt;widget class=&quot;GtkDialog&quot; id=&quot;eraser_dialog&quot;&gt;
+  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;title&quot; translatable=&quot;yes&quot;&gt;Eraser Configuration&lt;/property&gt;
+  &lt;property name=&quot;type&quot;&gt;GTK_WINDOW_TOPLEVEL&lt;/property&gt;
+  &lt;property name=&quot;window_position&quot;&gt;GTK_WIN_POS_NONE&lt;/property&gt;
+  &lt;property name=&quot;modal&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;resizable&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;destroy_with_parent&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;decorated&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;skip_taskbar_hint&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;skip_pager_hint&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;type_hint&quot;&gt;GDK_WINDOW_TYPE_HINT_DIALOG&lt;/property&gt;
+  &lt;property name=&quot;gravity&quot;&gt;GDK_GRAVITY_NORTH_WEST&lt;/property&gt;
+  &lt;property name=&quot;focus_on_map&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;urgency_hint&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;has_separator&quot;&gt;True&lt;/property&gt;
+
+  &lt;child internal-child=&quot;vbox&quot;&gt;
+    &lt;widget class=&quot;GtkVBox&quot; id=&quot;dialogVbox&quot;&gt;
+      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+      &lt;child internal-child=&quot;action_area&quot;&gt;
+	&lt;widget class=&quot;GtkHButtonBox&quot; id=&quot;dialogButtonBox&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;layout_style&quot;&gt;GTK_BUTTONBOX_END&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;cancelButton&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-cancel&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-6&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;okButton&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-ok&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-5&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkHBox&quot; id=&quot;dialogHbox&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkVBox&quot; id=&quot;allSettingsVbox&quot;&gt;
+	      &lt;property name=&quot;border_width&quot;&gt;8&lt;/property&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;spacing&quot;&gt;12&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkHBox&quot; id=&quot;settingsOuterHbox&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkVBox&quot; id=&quot;settingsOuterVbox&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;spacing&quot;&gt;12&lt;/property&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkHBox&quot; id=&quot;brushSettingsHbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;15&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkHBox&quot; id=&quot;brushModeHbox&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkLabel&quot; id=&quot;brushModeLabel&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Brush _Mode:  &lt;/property&gt;
+				  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkComboBox&quot; id=&quot;brushModeMenu&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+				  &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkHBox&quot; id=&quot;brushSizeHbox&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkLabel&quot; id=&quot;brushSizeLabel&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Brush _Size:  &lt;/property&gt;
+				  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkComboBox&quot; id=&quot;brushSizeMenu&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+				  &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkVBox&quot; id=&quot;colorVbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkLabel&quot; id=&quot;colorLabel&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Output &quot;_Color&quot; for all masked pixels:&lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+			      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+			      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+			      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkHBox&quot; id=&quot;colorHbox&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;spacing&quot;&gt;5&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkHScale&quot; id=&quot;colorSlider&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;draw_value&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;value_pos&quot;&gt;GTK_POS_LEFT&lt;/property&gt;
+				  &lt;property name=&quot;digits&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;update_policy&quot;&gt;GTK_UPDATE_CONTINUOUS&lt;/property&gt;
+				  &lt;property name=&quot;inverted&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;adjustment&quot;&gt;0 0 255 1 1 0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkSpinButton&quot; id=&quot;colorSpinner&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;climb_rate&quot;&gt;1&lt;/property&gt;
+				  &lt;property name=&quot;digits&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;numeric&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;update_policy&quot;&gt;GTK_UPDATE_ALWAYS&lt;/property&gt;
+				  &lt;property name=&quot;snap_to_ticks&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;adjustment&quot;&gt;0 0 255 1 1 0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkHBox&quot; id=&quot;eraserDataFileHbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;5&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkLabel&quot; id=&quot;eraserDataFileLabel&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Eraser _Data File:&lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+			      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;mnemonic_widget&quot;&gt;eraserDataFileEntry&lt;/property&gt;
+			      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+			      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+			      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkEntry&quot; id=&quot;eraserDataFileEntry&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;tooltip&quot; translatable=&quot;yes&quot;&gt;File in which eraser mask information (the list below and the pixels erased for each range) will be stored&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;editable&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;visibility&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;max_length&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+			      &lt;property name=&quot;has_frame&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;invisible_char&quot;&gt;&#8226;&lt;/property&gt;
+			      &lt;property name=&quot;activates_default&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;width_chars&quot;&gt;35&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkHBox&quot; id=&quot;debugHbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkButton&quot; id=&quot;eraserDataFileBrowseButton&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_Browse...&lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+			      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkLabel&quot; id=&quot;browse_debug_spacer&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+			      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+			      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+			      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkLabel&quot; id=&quot;debugLabel&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_Debugging settings (bits):   &lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+			      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;mnemonic_widget&quot;&gt;debugSpinButton&lt;/property&gt;
+			      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+			      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+			      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkSpinButton&quot; id=&quot;debugSpinButton&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;climb_rate&quot;&gt;1&lt;/property&gt;
+			      &lt;property name=&quot;digits&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;numeric&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;update_policy&quot;&gt;GTK_UPDATE_ALWAYS&lt;/property&gt;
+			      &lt;property name=&quot;snap_to_ticks&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;adjustment&quot;&gt;0 0 16777215 1 10 0&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkHBox&quot; id=&quot;frameRangeHbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;32&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkHBox&quot; id=&quot;frameRangeStartHbox&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkLabel&quot; id=&quot;frameRangeStartLabel&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_First frame:   &lt;/property&gt;
+				  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;mnemonic_widget&quot;&gt;debugSpinButton&lt;/property&gt;
+				  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkSpinButton&quot; id=&quot;frameRangeFirstSpinButton&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;tooltip&quot; translatable=&quot;yes&quot;&gt;First frame to which currently selected eraser mask applies; 0 means first frame of video&lt;/property&gt;
+				  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;climb_rate&quot;&gt;1&lt;/property&gt;
+				  &lt;property name=&quot;digits&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;numeric&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;update_policy&quot;&gt;GTK_UPDATE_ALWAYS&lt;/property&gt;
+				  &lt;property name=&quot;snap_to_ticks&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;adjustment&quot;&gt;0 0 100000000 1 10 0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkHBox&quot; id=&quot;frameRangeLastHbox&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkLabel&quot; id=&quot;frameRangeLastLabel&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;_Last frame:   &lt;/property&gt;
+				  &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				  &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;mnemonic_widget&quot;&gt;debugSpinButton&lt;/property&gt;
+				  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkSpinButton&quot; id=&quot;frameRangeLastSpinButton&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;tooltip&quot; translatable=&quot;yes&quot;&gt;Last frame to which currently selected eraser mask applies; use e.g. 99999999 to represent the last frame of video&lt;/property&gt;
+				  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;climb_rate&quot;&gt;1&lt;/property&gt;
+				  &lt;property name=&quot;digits&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;numeric&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;update_policy&quot;&gt;GTK_UPDATE_ALWAYS&lt;/property&gt;
+				  &lt;property name=&quot;snap_to_ticks&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;adjustment&quot;&gt;100000000 0 100000000 1 10 0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;rangeListScrolledWindow&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+			  &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+			  &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_IN&lt;/property&gt;
+			  &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkTreeView&quot; id=&quot;rangeListTreeview&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;headers_visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;rules_hint&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;reorderable&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;enable_search&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fixed_height_mode&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;hover_selection&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;hover_expand&quot;&gt;False&lt;/property&gt;
+			    &lt;/widget&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkHButtonBox&quot; id=&quot;rangeListHButtonBox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;layout_style&quot;&gt;GTK_BUTTONBOX_DEFAULT_STYLE&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkButton&quot; id=&quot;insertButton&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot;&gt;gtk-new&lt;/property&gt;
+			      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+			      &lt;property name=&quot;focus_on_click&quot;&gt;False&lt;/property&gt;
+			    &lt;/widget&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkButton&quot; id=&quot;duplicateButton&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;tooltip&quot; translatable=&quot;yes&quot;&gt;Make a copy of the currently selected eraser mask and insert it as the following row&lt;/property&gt;
+			      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Duplicate&lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+			      &lt;property name=&quot;focus_on_click&quot;&gt;False&lt;/property&gt;
+			    &lt;/widget&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkButton&quot; id=&quot;deleteButton&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot;&gt;gtk-delete&lt;/property&gt;
+			      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+			      &lt;property name=&quot;focus_on_click&quot;&gt;False&lt;/property&gt;
+			    &lt;/widget&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+			&lt;packing&gt;
+			  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			&lt;/packing&gt;
+		      &lt;/child&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkVBox&quot; id=&quot;previewVboxOuter&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkHBox&quot; id=&quot;previewJumpButtonHbox&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkButton&quot; id=&quot;previewJumpLastButton&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Last Frame in Range&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		      &lt;property name=&quot;focus_on_click&quot;&gt;False&lt;/property&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkButton&quot; id=&quot;previewJumpFirstButton&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;First Frame in Range&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+		      &lt;property name=&quot;focus_on_click&quot;&gt;False&lt;/property&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkLabel&quot; id=&quot;previewJumpLabel&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Jump to:  &lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+		      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+		      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+		      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;5&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkFrame&quot; id=&quot;previewFrame&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;label_xalign&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;label_yalign&quot;&gt;0.5&lt;/property&gt;
+		  &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_ETCHED_IN&lt;/property&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkAlignment&quot; id=&quot;previewAlignment&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;xscale&quot;&gt;1&lt;/property&gt;
+		      &lt;property name=&quot;yscale&quot;&gt;1&lt;/property&gt;
+		      &lt;property name=&quot;top_padding&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;bottom_padding&quot;&gt;8&lt;/property&gt;
+		      &lt;property name=&quot;left_padding&quot;&gt;6&lt;/property&gt;
+		      &lt;property name=&quot;right_padding&quot;&gt;8&lt;/property&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkVBox&quot; id=&quot;previewVbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;5&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkHBox&quot; id=&quot;previewControlHbox&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;spacing&quot;&gt;5&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkComboBox&quot; id=&quot;previewOutputMenu&quot;&gt;
+				  &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;Eraser output
+Final output&lt;/property&gt;
+				  &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkHScale&quot; id=&quot;previewSlider&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;draw_value&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;value_pos&quot;&gt;GTK_POS_TOP&lt;/property&gt;
+				  &lt;property name=&quot;digits&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;update_policy&quot;&gt;GTK_UPDATE_CONTINUOUS&lt;/property&gt;
+				  &lt;property name=&quot;inverted&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;adjustment&quot;&gt;0 0 99 1 1 0&lt;/property&gt;
+				&lt;/widget&gt;
+				&lt;packing&gt;
+				  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+				&lt;/packing&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkDrawingArea&quot; id=&quot;previewVideo&quot;&gt;
+			      &lt;property name=&quot;height_request&quot;&gt;300&lt;/property&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;events&quot;&gt;GDK_BUTTON1_MOTION_MASK | GDK_BUTTON2_MOTION_MASK | GDK_BUTTON3_MOTION_MASK | GDK_BUTTON_PRESS_MASK&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+		      &lt;/child&gt;
+		    &lt;/widget&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkLabel&quot; id=&quot;previewLabel&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Preview&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+		      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+		      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+		      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;type&quot;&gt;label_item&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+		&lt;packing&gt;
+		  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+		  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+		  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+		&lt;/packing&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+    &lt;/widget&gt;
+  &lt;/child&gt;
+&lt;/widget&gt;
+
+&lt;/glade-interface&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001012.html">[Avidemux-svn-commit] r3744 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialog
</A></li>
	<LI>Next message: <A HREF="001014.html">[Avidemux-svn-commit] r3746 -	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1013">[ date ]</a>
              <a href="thread.html#1013">[ thread ]</a>
              <a href="subject.html#1013">[ subject ]</a>
              <a href="author.html#1013">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
