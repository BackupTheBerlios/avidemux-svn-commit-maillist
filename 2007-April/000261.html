<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2943 - in	branches/avidemux_2.4_branch/avidemux: ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2943%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200704151054.l3FAsUVP017545%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000260.html">
   <LINK REL="Next"  HREF="000262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2943 - in	branches/avidemux_2.4_branch/avidemux: ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2943%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20ADM_script%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_NONE/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200704151054.l3FAsUVP017545%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2943 - in	branches/avidemux_2.4_branch/avidemux: ADM_script	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_NONE/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI">mean at mail.berlios.de
       </A><BR>
    <I>Sun Apr 15 12:54:30 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000260.html">[Avidemux-svn-commit] r2942 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialogFactory ADM_NONE/ADM_dialogFactory	ADM_QT4/ADM_dialogFactory ADM_commonUI
</A></li>
        <LI>Next message: <A HREF="000262.html">[Avidemux-svn-commit] r2944 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_NONE/ADM_dialog ADM_QT4/ADM_dialog	ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#261">[ date ]</a>
              <a href="thread.html#261">[ thread ]</a>
              <a href="subject.html#261">[ subject ]</a>
              <a href="author.html#261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-04-15 12:54:29 +0200 (Sun, 15 Apr 2007)
New Revision: 2943

Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
Log:
enhance prefs, finish frames

Modified: branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_script/ADM_JSFunctions.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -77,6 +77,7 @@
 JSBool facRoText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facText(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facTab(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
+JSBool facFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool facDirSel(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
 JSBool assertTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval);
@@ -108,6 +109,7 @@
   {&quot;dialogFactoryText&quot;,       facText,        0},
   {&quot;dialogFactoryTabs&quot;,       facTab,        0},
   {&quot;dialogFactoryDirSel&quot;,       facDirSel,        0},
+  {&quot;dialogFactoryFrame&quot;,       facFrame,        0},
   {&quot;crashTest&quot;,               crashTest,        0},
   {&quot;assertTest&quot;,               assertTest,        0},
   {0}
@@ -694,7 +696,33 @@
   
   return JS_TRUE;
 }
+JSBool facFrame(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
+{
     
+      uint32_t test,test2;
+      
+      diaElemReadOnlyText align(&quot;*****&quot;,&quot;Value:&quot;);
+      diaElemReadOnlyText txt(&quot;blah blah&quot;,&quot;Value:&quot;);
+      diaElemUInteger     bt(&amp;test,&quot;Entry1&quot;,0,10);
+      diaElemUInteger     bt2(&amp;test2,&quot;Entry2&quot;,0,10);
+      diaElemFrame        frm(&quot;Frame1&quot;);
+      
+      frm.swallow(&amp;txt);
+      frm.swallow(&amp;bt);
+      frm.swallow(&amp;bt2);
+      
+         diaElem *elems[]={&amp;align,&amp;frm   };
+  if(diaFactoryRun(&quot;Test frame&quot;,2,elems))
+  {
+    *rval = BOOLEAN_TO_JSVAL(1);
+    
+  }else
+    *rval = BOOLEAN_TO_JSVAL(0);
+  
+  return JS_TRUE;
+      
+      
+}
 JSBool crashTest(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
 {
   

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/DIA_dialogFactory.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -173,7 +173,15 @@
     buildOneTab(notebook1,i,tabs[i]); 
   }
   
- 
+  diaElemTabs *itab;
+  for(int i=0;i&lt;nb;i++)
+  {
+    itab=(tabs[i]);
+    for(int j=0;j&lt;itab-&gt;nbElems;j++)
+    {
+      itab-&gt;dias[j]-&gt;finalize();
+    }
+  }
   // Add a Close button
   GtkWidget *okbutton1;
   GtkWidget *cancelbutton1;

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_frame.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -90,6 +90,7 @@
     elems[i]-&gt;setMe(dialog,table,v); 
     v+=elems[i]-&gt;getSize();
   }
+  myWidget=(void *)table;
 }
 void diaElemFrame::getMe(void)
 {
@@ -98,9 +99,16 @@
     elems[i]-&gt;getMe(); 
   }
 }
+void diaElemFrame::finalize(void)
+{
+   for(int i=0;i&lt;nbElems;i++)
+  {
+    elems[i]-&gt;finalize(); 
+  }
+}
 void diaElemFrame::enable(uint32_t onoff)
 {
-//   GtkWidget *widget=(GtkWidget *)myWidget;
-//   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
+   GtkWidget *widget=(GtkWidget *)myWidget;
+   gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
 }
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_readOnlyText.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -128,4 +128,11 @@
   *input=ADM_strdup(gtk_editable_get_chars(GTK_EDITABLE (myWidget), 0, -1));
   
 }
+
+void diaElemText::enable(uint32_t onoff)
+{
+  GtkWidget *widget=(GtkWidget *)myWidget;
+  gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);
+}
+
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_NONE/ADM_dialogFactory/FAC_toggle.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -210,6 +210,7 @@
 {
  
 }
+
 //******************************************************
 diaElemNotch::diaElemNotch(uint32_t yes,const char *toggleTitle, const char *tip)
   : diaElem(ELEM_NOTCH)
@@ -239,7 +240,7 @@
 diaElemText::~diaElemText() {}
 void diaElemText::setMe(void *dialog, void *opaque,uint32_t line) {}
 void diaElemText::getMe(void) {}  
-  
+void diaElemText::enable(uint32_t onoff) {};
             
 //******************************************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
@@ -292,4 +293,7 @@
 {
 
 }
+void diaElemFrame::finalize(void)
+{
+}
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_frame.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -54,6 +54,9 @@
 {
 
 }
+void diaElemFrame::finalize(void)
+{
+}
 
 
 //******************************************************

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_readOnlyText.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -107,6 +107,9 @@
   *c=ADM_strdup(lineEdit-&gt;text().toAscii().data());
  
 }
+void diaElemText::enable(uint32_t onoff)
+{
+  
+}
 
-
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2007-04-15 10:54:29 UTC (rev 2943)
@@ -276,6 +276,7 @@
   virtual ~diaElemText() ;
   void setMe(void *dialog, void *opaque,uint32_t line);
   void getMe(void);
+  void enable(uint32_t onoff);
 };
 
 /*********************************************/
@@ -323,6 +324,7 @@
   void getMe(void) ;
   void swallow(diaElem *widget);
   void enable(uint32_t onoff);
+  void finalize(void);
 };
 /**********************************************/
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2007-04-15 10:32:22 UTC (rev 2942)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_prefs.cpp	2007-04-15 10:54:29 UTC (rev 2943)
@@ -232,13 +232,27 @@
         diaElemMenu menuAudio(&amp;newdevice,_(&quot;Audio output&quot;), sizeof(audioEntries)/sizeof(diaMenuEntry),audioEntries,&quot;&quot;);
         
         diaElemText entryAlsaDevice(&amp;alsaDevice,&quot;Alsa Device&quot;,NULL);
-        
+#ifdef ALSA_SUPPORT
+          int z,m;
+          m=sizeof(audioEntries)/sizeof(diaMenuEntry);
+          for(z=0;z&lt;m;z++)
+          {
+            if(audioEntries[z].val==DEVICE_ALSA)
+                menuAudio.link(&amp;(audioEntries[z]),1,&amp;entryAlsaDevice);
+          }
+#endif
         // default Post proc
-     diaElemToggle     fhzd(&amp;hzd,_(&quot;Default Postproc, Horizontal deblocking&quot;));
-     diaElemToggle     fvzd(&amp;vzd,_(&quot;Default Potsproc, Vertical deblocking&quot;));
-     diaElemToggle     fdring(&amp;dring,_(&quot;Default Postproc, Deringing&quot;));
-     diaElemUInteger   postProcStrength(&amp;pp_value,_(&quot;Default Postproc strength:&quot;),0,5);
+     diaElemToggle     fhzd(&amp;hzd,_(&quot;Horizontal deblocking&quot;));
+     diaElemToggle     fvzd(&amp;vzd,_(&quot;Vertical deblocking&quot;));
+     diaElemToggle     fdring(&amp;dring,_(&quot;Deringing&quot;));
+     diaElemUInteger   postProcStrength(&amp;pp_value,_(&quot;Strength:&quot;),0,5);
+     diaElemFrame      framePP(_(&quot;Default Postprocessing&quot;));
      
+     framePP.swallow(&amp;fhzd);
+     framePP.swallow(&amp;fvzd);
+     framePP.swallow(&amp;fdring);
+     framePP.swallow(&amp;postProcStrength);
+     
         // Filter path
         if( prefs-&gt;get(FILTERS_AUTOLOAD_PATH, &amp;filterPath) != RC_OK )
 #ifndef CYG_MANGLING
@@ -271,8 +285,8 @@
         
         /* Fifth Tab : video */
         
-        diaElem *diaVideo[]={&amp;menuVideoMode,&amp;fhzd,&amp;fvzd,&amp;fdring,&amp;postProcStrength};
-        diaElemTabs tabVideo(&quot;Video&quot;,5,(diaElem **)diaVideo);
+        diaElem *diaVideo[]={&amp;menuVideoMode,&amp;framePP};
+        diaElemTabs tabVideo(&quot;Video&quot;,2,(diaElem **)diaVideo);
         
         /* Sixth Tab : mthread */
         diaElem *diaMthread[]={&amp;multiThread};


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000260.html">[Avidemux-svn-commit] r2942 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialogFactory ADM_NONE/ADM_dialogFactory	ADM_QT4/ADM_dialogFactory ADM_commonUI
</A></li>
	<LI>Next message: <A HREF="000262.html">[Avidemux-svn-commit] r2944 - in	branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces:	ADM_GTK/ADM_dialog ADM_NONE/ADM_dialog ADM_QT4/ADM_dialog	ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#261">[ date ]</a>
              <a href="thread.html#261">[ thread ]</a>
              <a href="subject.html#261">[ subject ]</a>
              <a href="author.html#261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
