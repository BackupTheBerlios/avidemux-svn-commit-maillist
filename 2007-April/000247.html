<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r2929 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2929%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20.%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200704121841.l3CIfvLK024031%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000246.html">
   <LINK REL="Next"  HREF="000248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r2929 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI</H1>
    <B>mean at BerliOS</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r2929%20-%20in%0A%09branches/avidemux_2.4_branch/avidemux%3A%20.%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialog%0A%09ADM_userInterfaces/ADM_GTK/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_QT4/ADM_dialogFactory%0A%09ADM_userInterfaces/ADM_commonUI&In-Reply-To=%3C200704121841.l3CIfvLK024031%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r2929 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_userInterfaces/ADM_GTK/ADM_dialog	ADM_userInterfaces/ADM_GTK/ADM_dialogFactory	ADM_userInterfaces/ADM_QT4/ADM_dialogFactory	ADM_userInterfaces/ADM_commonUI">mean at mail.berlios.de
       </A><BR>
    <I>Thu Apr 12 20:41:57 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000246.html">[Avidemux-svn-commit] r2928 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter
</A></li>
        <LI>Next message: <A HREF="000248.html">[Avidemux-svn-commit] r2930 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_outputs/oplug_avi ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#247">[ date ]</a>
              <a href="thread.html#247">[ thread ]</a>
              <a href="subject.html#247">[ subject ]</a>
              <a href="author.html#247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: mean
Date: 2007-04-12 20:41:56 +0200 (Thu, 12 Apr 2007)
New Revision: 2929

Added:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
Removed:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_audioTrack.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_gototime.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_rotate.cpp
Modified:
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_menu.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_toggle.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
   branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
   branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
Log:
update QT4 widgets, moved changed files

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_audioTrack.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_audioTrack.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_audioTrack.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -1,177 +0,0 @@
-/***************************************************************************
-                          Simple bitrate calculator
-                             -------------------
-    begin                : Wed Dec 18 2002
-    copyright            : (C) 2004 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-#include &quot;config.h&quot;
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
-#include &lt;math.h&gt;
-#include &lt;gtk/gtk.h&gt;
-
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-
-
-#include &quot;default.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_toolkit/filesel.h&quot;
-#include &quot;ADM_assert.h&quot;
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_audiofilter/audioeng_buildfilters.h&quot;
-#define NB_TRACK_MAX (8+4)
-static GtkWidget *create_dialog1 (void);
-extern const char *getStrFromAudioCodec( uint32_t codec);
-uint8_t DIA_audioTrack(AudioSource *source, uint32_t *track,uint32_t nbTrack, audioInfo *infos);
-//************************************
-uint8_t DIA_audioTrack(AudioSource *source, uint32_t *track,uint32_t nbTrack, audioInfo *infos)
-{
-uint8_t r=0;
-GtkWidget *menu,*dialog;
-char string[100];
-GtkWidget **fq=(GtkWidget **)ADM_alloc(sizeof(GtkWidget *)*NB_TRACK_MAX);
-int nbWidget=0;
-int old;
-
-        dialog=create_dialog1();
-        gtk_register_dialog(dialog);
-
-        menu = gtk_menu_new ();
-#define ADD_STRING() \
-                fq[nbWidget]=gtk_menu_item_new_with_mnemonic (string); \
-                gtk_widget_show (fq[nbWidget]); \
-                gtk_container_add (GTK_CONTAINER (menu), fq[nbWidget]); \
-                nbWidget++; 
-        
-        for(unsigned int i=0;i&lt;nbTrack;i++)
-        {
-                sprintf(string,&quot;Audio track %d (%s/%d channels/%d kbit per s/%d ms shift)&quot;,i,getStrFromAudioCodec(infos[i].encoding),
-                        infos[i].channels,infos[i].bitrate,infos[i].av_sync);
-                ADD_STRING();
-        }
-        // Add none
-        sprintf(string,&quot;No audio&quot;);
-        ADD_STRING();
-
-        sprintf(string,&quot;External PCM (Wav)&quot;);
-        ADD_STRING();
-
-        sprintf(string,&quot;External MP2/3&quot;);
-        ADD_STRING();
-
-        sprintf(string,&quot;External AC3&quot;);
-        ADD_STRING();
-
-        switch(*source)
-        {
-                case  AudioAvi: old=*track;break;
-                case  AudioMP3: old=nbWidget-2;break;
-                case  AudioWav: old=nbWidget-3;break;
-                case  AudioAC3: old=nbWidget-1;break;
-                case  AudioNone: old=nbWidget-4;break;
-                default:
-                        ADM_assert(0);
-        }
-        
-
-        gtk_option_menu_set_menu (GTK_OPTION_MENU (WID(optionmenu1)), menu);
-        gtk_option_menu_set_history(GTK_OPTION_MENU(WID(optionmenu1)), old);
-        if(GTK_RESPONSE_OK==gtk_dialog_run(GTK_DIALOG(dialog)))
-                {
-                        r=1;
-                        old=r=getRangeInMenu(WID(optionmenu1));
-                        if(old&lt;nbTrack)
-                        {
-                                *source=AudioAvi;
-                                *track=old;
-                        }
-                        else
-                        {
-                                switch(old-nbTrack)
-                                {
-                                        case 0: *source=AudioNone;break;
-                                        case 1: *source=AudioWav;break;
-                                        case 2: *source=AudioMP3;break;
-                                        case 3: *source=AudioAC3;break;
-                                }
-                        }
-                }
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-        return r;
-}
-
-GtkWidget *create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *vbox1;
-  GtkWidget *label1;
-  GtkWidget *optionmenu1;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Audio selector&quot;));
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  vbox1 = gtk_vbox_new (FALSE, 0);
-  gtk_widget_show (vbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
-
-  label1 = gtk_label_new (_(&quot;Select audio track&quot;));
-  gtk_widget_show (label1);
-  gtk_box_pack_start (GTK_BOX (vbox1), label1, FALSE, FALSE, 0);
-  gtk_label_set_justify (GTK_LABEL (label1), GTK_JUSTIFY_LEFT);
-
-  optionmenu1 = gtk_option_menu_new ();
-  gtk_widget_show (optionmenu1);
-  gtk_box_pack_start (GTK_BOX (vbox1), optionmenu1, FALSE, FALSE, 0);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, label1, &quot;label1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, optionmenu1, &quot;optionmenu1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-
-  return dialog1;
-}
-

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_gototime.cpp
===================================================================

Deleted: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_rotate.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_rotate.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/DIA_rotate.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -1,210 +0,0 @@
-/***************************************************************************
-                          ADM_guiRotate.cpp  -  description
-                             -------------------
-    begin                : Sat Jan 8 2003
-    copyright            : (C) 2003 by Tracy Harton / (c) 2006 Mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">tracy at amphibious.org</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;config.h&quot;
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
-#include &lt;gtk/gtk.h&gt;
-#include &lt;time.h&gt;
-#include &lt;sys/time.h&gt;
-#include &lt;math.h&gt;
-
-
-#include &quot;fourcc.h&quot;
-#include &quot;avio.hxx&quot;
-#include &quot;config.h&quot;
-#include &quot;avi_vars.h&quot;
-
-#include &quot;ADM_editor/ADM_edit.hxx&quot;
-#include &quot;ADM_video/ADM_genvideo.hxx&quot;
-#include &quot;ADM_video/ADM_vidRotate_param.h&quot;
-
-#include &quot;ADM_colorspace/ADM_rgb.h&quot;
-#include &quot;ADM_toolkit_gtk/ADM_gladeSupport.h&quot;
-#include &quot;ADM_toolkit/toolkit.hxx&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk.h&quot;
-#include &quot;ADM_toolkit_gtk/toolkit_gtk_include.h&quot;
-#include &lt;ADM_assert.h&gt;
-
-void    GUI_RGBDisplay(uint8_t *dis,uint32_t w,uint32_t h,void *widg);
-
-static GtkWidget *create_dialog1 (void);
-static GtkWidget *dialog = NULL;
-
-static gboolean gui_draw (GtkWidget * widget,  GdkEventExpose * event, gpointer user_data);
-static void gui_update (GtkButton * button, gpointer user_data);
-static void calculate(void);
-static void draw(void);
-
-
-// Ugly !
-static ColYuvRgb    *rgbConv=NULL;
-static ADMImage *video_src,*video_rotated;
-static AVDMGenericVideoStream *sstream;
-static uint8_t *video_rgb;
-static uint32_t ww, hh;
-static ROTATE_PARAM par;
-static GtkObject *adj_angle;
-
-#define CNX(x,y) gtk_signal_connect(GTK_OBJECT(WID(x)), y, GTK_SIGNAL_FUNC(gui_update), (void *) (1));  
-uint8_t DIA_rotate(AVDMGenericVideoStream *astream,ROTATE_PARAM *param)
-{
-  uint8_t ret=0;
-  uint32_t len,flags;
-  uint32_t curImage=0;
-        sstream=astream;
-        memcpy(&amp;par,param,sizeof(par));
-        
-        ww=astream-&gt;getInfo()-&gt;width;
-        hh=astream-&gt;getInfo()-&gt;height;
-        video_src=new ADMImage(ww,hh);
-        video_rotated=new ADMImage(par.width,par.height);
-        video_rgb=new uint8_t[ww*hh*4];
-        rgbConv=new ColYuvRgb(par.width,par.height);
-        rgbConv-&gt;reset(par.width,par.height);
-
-        dialog=create_dialog1();
-        gtk_register_dialog(dialog);
-         if(!astream-&gt;getFrameNumberNoAlloc(curImage,&amp;len,video_src,&amp;flags))
-        {
-          GUI_Error_HIG(&quot;Frame error&quot;,&quot;Cannnot read frame to display&quot;);
-
-        }
-        else
-        {
-          calculate ();
-          CNX (hscale1, &quot;value_changed&quot;);
-          gtk_signal_connect (GTK_OBJECT (WID (drawingarea1)), &quot;expose_event&quot;,
-                            GTK_SIGNAL_FUNC (gui_draw), NULL);
-          if (gtk_dialog_run (GTK_DIALOG (dialog)) == GTK_RESPONSE_OK)
-            {
-              memcpy(param,&amp;par,sizeof(par));
-              ret = 1;
-            }
-        }
-        gtk_unregister_dialog(dialog);
-        gtk_widget_destroy(dialog);
-        dialog=NULL;
-        delete video_src;
-        delete video_rotated;
-        delete [] video_rgb;
-        delete rgbConv;
-        return ret;
-}
-//
-//        Check entered values and green-out the selected portion on the screen
-//        Each value must be even
-//
-void calculate( void )
-{
-  do_rotate(video_src,video_rotated, par.angle);
-  par.width=video_rotated-&gt;_width;
-  par.height=video_rotated-&gt;_height;
-  rgbConv-&gt;reset(par.width,par.height);
-  rgbConv-&gt;scale(video_rotated-&gt;data,video_rgb);
-}
-void draw(void)
-{
-  GUI_RGBDisplay (video_rgb, par.width, par.height, (void *) WID (drawingarea1));
-  gtk_widget_set_usize (WID (drawingarea1), par.width,par.height);
-}
-void gui_update (GtkButton * button, gpointer user_data)
-{
-  UNUSED_ARG (button);
-  UNUSED_ARG (user_data);
-  uint32_t    sz;
-
-  par.angle = GTK_ADJUSTMENT(adj_angle)-&gt;value;
-  calculate();
-  draw();
- 
-}
-
-gboolean gui_draw (GtkWidget * widget, GdkEventExpose * event, gpointer user_data)
-{
-  UNUSED_ARG (widget);
-  UNUSED_ARG (event);
-  UNUSED_ARG (user_data);
-  
-  gtk_widget_set_usize (WID (drawingarea1), par.width, par.height);
-  GUI_RGBDisplay (video_rgb, par.width, par.height, (void *) WID (drawingarea1));
-  return TRUE;
-}
-
-//*****************************************
-GtkWidget	*create_dialog1 (void)
-{
-  GtkWidget *dialog1;
-  GtkWidget *dialog_vbox1;
-  GtkWidget *vbox1;
-  GtkWidget *hscale1;
-  GtkWidget *drawingarea1;
-  GtkWidget *dialog_action_area1;
-  GtkWidget *cancelbutton1;
-  GtkWidget *okbutton1;
-
-  dialog1 = gtk_dialog_new ();
-  gtk_window_set_title (GTK_WINDOW (dialog1), _(&quot;Rotate&quot;));
-
-  dialog_vbox1 = GTK_DIALOG (dialog1)-&gt;vbox;
-  gtk_widget_show (dialog_vbox1);
-
-  vbox1 = gtk_vbox_new (FALSE, 0);
-  gtk_widget_show (vbox1);
-  gtk_box_pack_start (GTK_BOX (dialog_vbox1), vbox1, TRUE, TRUE, 0);
-
-  adj_angle=gtk_adjustment_new (0.0, 0.0, 360.0, 90.0, 90.0, 90.0);
-  hscale1 = gtk_hscale_new (GTK_ADJUSTMENT (adj_angle));
-  gtk_widget_show (hscale1);
-  gtk_box_pack_start (GTK_BOX (vbox1), hscale1, FALSE, TRUE, 0);
-  gtk_scale_set_digits (GTK_SCALE (hscale1), 0);
-
-  drawingarea1 = gtk_drawing_area_new ();
-  gtk_widget_show (drawingarea1);
-  gtk_box_pack_start (GTK_BOX (vbox1), drawingarea1, TRUE, TRUE, 0);
-
-  dialog_action_area1 = GTK_DIALOG (dialog1)-&gt;action_area;
-  gtk_widget_show (dialog_action_area1);
-  gtk_button_box_set_layout (GTK_BUTTON_BOX (dialog_action_area1), GTK_BUTTONBOX_END);
-
-  cancelbutton1 = gtk_button_new_from_stock (&quot;gtk-cancel&quot;);
-  gtk_widget_show (cancelbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), cancelbutton1, GTK_RESPONSE_CANCEL);
-  GTK_WIDGET_SET_FLAGS (cancelbutton1, GTK_CAN_DEFAULT);
-
-  okbutton1 = gtk_button_new_from_stock (&quot;gtk-ok&quot;);
-  gtk_widget_show (okbutton1);
-  gtk_dialog_add_action_widget (GTK_DIALOG (dialog1), okbutton1, GTK_RESPONSE_OK);
-  GTK_WIDGET_SET_FLAGS (okbutton1, GTK_CAN_DEFAULT);
-
-  /* Store pointers to all widgets, for use by lookup_widget(). */
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog1, &quot;dialog1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_vbox1, &quot;dialog_vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, vbox1, &quot;vbox1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, hscale1, &quot;hscale1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, drawingarea1, &quot;drawingarea1&quot;);
-  GLADE_HOOKUP_OBJECT_NO_REF (dialog1, dialog_action_area1, &quot;dialog_action_area1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, cancelbutton1, &quot;cancelbutton1&quot;);
-  GLADE_HOOKUP_OBJECT (dialog1, okbutton1, &quot;okbutton1&quot;);
-
-  return dialog1;
-}
-
-

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialog/Makefile.am	2007-04-12 18:41:56 UTC (rev 2929)
@@ -18,8 +18,8 @@
 	DIA_pause.cpp \
 	DIA_lavdecoder.cpp DIA_calculator.cpp DIA_equalizer.cpp \
 	DIA_vobsub.cpp DIA_x264.cpp DIA_ocr.cpp  DIA_hue.cpp DIA_eq2.cpp \
-	DIA_asharp.cpp  DIA_idx_pg.cpp DIA_gototime.cpp \
-	DIA_audioTrack.cpp DIA_cnr2.cpp DIA_jobs.cpp DIA_jobs_save.cpp  \
+	DIA_asharp.cpp  DIA_idx_pg.cpp  \
+	DIA_cnr2.cpp DIA_jobs.cpp DIA_jobs_save.cpp  \
 	DIA_v2v.cpp DIA_tdeint.cpp DIA_mpdelogo.cpp \
         DIA_chromaShift.cpp \
         \
@@ -41,11 +41,11 @@
 DIA_coloryuv.cpp      DIA_equalizer.cpp    DIA_mpdelogo.cpp     \
 DIA_contrast.cpp      DIA_exLame.cpp       DIA_mpeg2opt.cpp    DIA_srt.cpp \
 DIA_about.cpp        DIA_tdeint.cpp \
-DIA_acodec.cpp       DIA_crop.cpp          DIA_gototime.cpp   DIA_v2v.cpp \
+DIA_acodec.cpp       DIA_crop.cpp         DIA_v2v.cpp \
 DIA_animated.cpp     DIA_hue.cpp          DIA_ocr.cpp         DIA_vcodec.cpp \
 DIA_asharp.cpp       DIA_idx_pg.cpp       DIA_partial.cpp     DIA_vobsub.cpp \
 DIA_audio.cpp        DIA_idx_pg.h         DIA_pause.cpp       \
-DIA_audioTrack.cpp   DIA_pipe.cpp        DIA_working.cpp \
+DIA_pipe.cpp        DIA_working.cpp \
 DIA_defaultAudio.cpp  DIA_jobs.cpp        DIA_working.h \
 DIA_jobs_save.cpp     DIA_x264.cpp \
 DIA_preview.cpp     DIA_xvcd.cpp \

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_GTK/ADM_dialogFactory/FAC_menu.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -41,125 +41,51 @@
   this-&gt;menu=menu;
   this-&gt;nbMenu=nb;
   nbLink=0;
+  
+  menus=new diaMenuEntryDynamic * [nb];
+  for(int i=0;i&lt;nb;i++)
+  {
+    menus[i]=new  diaMenuEntryDynamic(menu[i].val,menu[i].text,menu[i].desc);
+  }
+  dyna=new diaElemMenuDynamic(intValue,itle,nb,menus,tip);
 }
 
 diaElemMenu::~diaElemMenu()
 {
+  for(int i=0;i&lt;nbMenu;i++)
+      delete menus[i];
+  delete [] menus;
   
 }
 void diaElemMenu::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  GtkWidget *widget;
-  GtkWidget *label;
-  GtkWidget *item;
-  GtkWidget *combo;
-  
-  
-  label = gtk_label_new_with_mnemonic (paramTitle);
-  gtk_misc_set_alignment (GTK_MISC (label), 0.0, 0.5);
-  gtk_widget_show(label);
-  
-  gtk_table_attach (GTK_TABLE (opaque), label, 0, 1, line, line+1,
-                    (GtkAttachOptions) (GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  
-  combo = gtk_combo_box_new_text ();
-  gtk_widget_show (combo);
-  gtk_table_attach (GTK_TABLE (opaque), combo, 1, 2, line, line+1,
-                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
-                    (GtkAttachOptions) (0), 0, 0);
-  
-  gtk_label_set_mnemonic_widget (GTK_LABEL(label), combo);
-  
-  for(int i=0;i&lt;nbMenu;i++)
-  {
-    gtk_combo_box_append_text (GTK_COMBO_BOX (combo),this-&gt;menu[i].text);
-  }
-  
-  for(int i=0;i&lt;nbMenu;i++)
-  {
-    if(this-&gt;menu[i].val==*(uint32_t *)param) 
-    {
-      gtk_combo_box_set_active(GTK_COMBO_BOX(combo),i);
-    }
-  }
-  
-  
-  myWidget=(void *)combo;
-   gtk_signal_connect(GTK_OBJECT(combo), &quot;changed&quot;,
-                      GTK_SIGNAL_FUNC(cb_menus),
-                      (void *) this);
+  dyna-&gt;setMe(dialog,opaque,line);
 }
 
 void diaElemMenu::getMe(void)
 {
-  GtkWidget *widget=(GtkWidget *)myWidget;
-  uint32_t *val=(uint32_t *)param;
-  uint32_t rank;
-  ADM_assert(widget);
-  if(!nbMenu) return;
-  
-  rank=gtk_combo_box_get_active(GTK_COMBO_BOX(widget));
-  ADM_assert(rank&lt;this-&gt;nbMenu);
-  *(uint32_t *)param=this-&gt;menu[rank].val;
+ dyna-&gt;getMe();
 }
 void   diaElemMenu::updateMe(void)
 {
-  GtkWidget *widget=(GtkWidget *)myWidget;
-  uint32_t val;
-  uint32_t rank;
-  if(!nbMenu) return;
-  ADM_assert(widget);
-  
-  
-  rank=gtk_combo_box_get_active(GTK_COMBO_BOX(widget));
-  ADM_assert(rank&lt;this-&gt;nbMenu);
-  val=this-&gt;menu[rank].val;
-  /* Now search through the linked list to see if something happens ...*/
-  
-  /* 1 disable everything */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    if(l-&gt;value==val)
-    {
-      if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(0);
-    }else
-    {
-       if(l-&gt;onoff)  l-&gt;widget-&gt;enable(0);
-    }
-    
-  }
-  /* Then enable */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    if(l-&gt;value==val)
-    {
-      if(l-&gt;onoff)  l-&gt;widget-&gt;enable(1);
-    }else
-    {
-       if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(1);
-    }
-    
-  }
+  dyna-&gt;updateMe();
 }
 uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
 {
-    ADM_assert(nbLink&lt;MENU_MAX_lINK);
-    links[nbLink].value=entry-&gt;val;
-    links[nbLink].onoff=onoff;
-    links[nbLink].widget=w;
-    nbLink++;
-    return 1;
+    for(int i=0;i&lt;nbMenu;i++)
+    {
+        if(entry-&gt;val==menus[i]-&gt;val)
+            return dyna-&gt;link(menus[i],onoff,w);
+    }
+    ADM_assert(0);
 }
 void   diaElemMenu::enable(uint32_t onoff)
 {
-  gtk_widget_set_sensitive(GTK_WIDGET(myWidget),onoff);  
+  dyna-&gt;enable(onoff);
 }
 void   diaElemMenu::finalize(void)
 {
-  updateMe(); 
+  dyna-&gt;finalize();
 }
 //*******************************
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
@@ -258,9 +184,7 @@
   ADM_assert(rank&lt;this-&gt;nbMenu);
   val=this-&gt;menu[rank]-&gt;val;
   /* Now search through the linked list to see if something happens ...*/
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
+  
    /* 1 disable everything */
   for(int i=0;i&lt;nbLink;i++)
   {
@@ -287,7 +211,6 @@
     }
     
   }
-  }
 }
 void   diaElemMenuDynamic::finalize(void)
 {

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_float.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -77,4 +77,12 @@
  *(ELEM_TYPE_FLOAT *)param=val;
  
 }
-void diaElemFloat::enable(uint32_t onoff) {}
\ No newline at end of file
+void diaElemFloat::enable(uint32_t onoff) 
+{
+   QDoubleSpinBox *box=(QDoubleSpinBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
\ No newline at end of file

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_integer.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -79,7 +79,15 @@
  *(int32_t *)param=val;
  
 }
-void diaElemInteger::enable(uint32_t onoff) {}
+void diaElemInteger::enable(uint32_t onoff) 
+{
+ QSpinBox *box=(QSpinBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
 //******************************************************
 diaElemUInteger::diaElemUInteger(uint32_t *intValue,const char *toggleTitle, uint32_t min, uint32_t max,const char *tip)
   : diaElem(ELEM_TOGGLE)
@@ -125,6 +133,13 @@
 
 }
 
-void diaElemUInteger::enable(uint32_t onoff) {}
-
+void diaElemUInteger::enable(uint32_t onoff) 
+{
+ QSpinBox *box=(QSpinBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_menu.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_menu.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_menu.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -35,136 +35,87 @@
 
 extern const char *shortkey(const char *);
 
+
 diaElemMenu::diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
                const diaMenuEntry *menu,const char *tip)
   : diaElem(ELEM_MENU)
 {
   param=(void *)intValue;
-  paramTitle=shortkey(itle);
+  paramTitle=itle;
   this-&gt;tip=tip;
   this-&gt;menu=menu;
   this-&gt;nbMenu=nb;
   nbLink=0;
+  
+  menus=new diaMenuEntryDynamic * [nb];
+  for(int i=0;i&lt;nb;i++)
+  {
+    menus[i]=new  diaMenuEntryDynamic(menu[i].val,menu[i].text,menu[i].desc);
+  }
+  dyna=new diaElemMenuDynamic(intValue,itle,nb,menus,tip);
 }
 
 diaElemMenu::~diaElemMenu()
 {
-  if(paramTitle)
-    delete paramTitle;
+  for(int i=0;i&lt;nbMenu;i++)
+      delete menus[i];
+  delete [] menus;
+  
 }
 void diaElemMenu::setMe(void *dialog, void *opaque,uint32_t line)
 {
-  QComboBox *combo=new QComboBox( (QWidget *)dialog);
-  QGridLayout *layout=(QGridLayout*) opaque;
-     myWidget=(void *)combo; 
-
-  QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
-  
-  // Fill in combobox
-  int mem=0;
-  const diaMenuEntry *entries=menu;
-  for(int i=0;i&lt;nbMenu;i++)
-  {
-    combo-&gt;addItem(entries[i].text);
-    if( *(uint32_t *)param==entries[i].val) mem=i;
-  }
-   combo-&gt;setCurrentIndex(mem);
-   text-&gt;setBuddy(combo);
-   layout-&gt;addWidget(text,line,0);
-   layout-&gt;addWidget(combo,line,1);
+  dyna-&gt;setMe(dialog,opaque,line);
 }
 
 void diaElemMenu::getMe(void)
 {
-  QComboBox *combo=(QComboBox *)myWidget;
-  int r;
-  r=combo-&gt;currentIndex();
-  if(!nbMenu) return;
-  ADM_assert(r&lt;nbMenu);
-  *(uint32_t *)param=menu[r].val;
-      
+ dyna-&gt;getMe();
 }
-void diaElemMenu::finalize(void)
-{ 
+void   diaElemMenu::updateMe(void)
+{
+  dyna-&gt;updateMe();
 }
-void diaElemMenu::enable(uint32_t onoff)
-{ 
-}
-
 uint8_t   diaElemMenu::link(diaMenuEntry *entry,uint32_t onoff,diaElem *w)
 {
-    ADM_assert(nbLink&lt;MENU_MAX_lINK);
-    links[nbLink].value=entry-&gt;val;
-    links[nbLink].onoff=onoff;
-    links[nbLink].widget=w;
-    nbLink++;
-    return 1;
+    for(int i=0;i&lt;nbMenu;i++)
+    {
+        if(entry-&gt;val==menus[i]-&gt;val)
+            return dyna-&gt;link(menus[i],onoff,w);
+    }
+    ADM_assert(0);
 }
-void   diaElemMenu::updateMe(void)
+void   diaElemMenu::enable(uint32_t onoff)
 {
-   QComboBox *combo=(QComboBox *)myWidget;
-  uint32_t val;
-  uint32_t rank;
-  if(!nbMenu) return;
   
-  rank=combo-&gt;currentIndex();
-  ADM_assert(rank&lt;this-&gt;nbMenu);
-  val=this-&gt;menu[rank].val;
-  /* Now search through the linked list to see if something happens ...*/
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-   /* 1 disable everything */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    if(l-&gt;value==val)
-    {
-      if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(0);
-    }else
-    {
-       if(l-&gt;onoff)  l-&gt;widget-&gt;enable(0);
-    }
-    
-  }
-  /* Then enable */
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
-    if(l-&gt;value==val)
-    {
-      if(l-&gt;onoff)  l-&gt;widget-&gt;enable(1);
-    }else
-    {
-       if(!l-&gt;onoff)  l-&gt;widget-&gt;enable(1);
-    }
-    
-  }
-  }
+    dyna-&gt;enable(onoff);
 }
+void   diaElemMenu::finalize(void)
+{
+  dyna-&gt;finalize();
+}
 //*********************************
+
 diaElemMenuDynamic::diaElemMenuDynamic(uint32_t *intValue,const char *itle, uint32_t nb, 
                 diaMenuEntryDynamic **menu,const char *tip)
   : diaElem(ELEM_MENU)
 {
-   param=(void *)intValue;
+  param=(void *)intValue;
   paramTitle=shortkey(itle);
   this-&gt;tip=tip;
   this-&gt;menu=menu;
   this-&gt;nbMenu=nb;
   nbLink=0;
-  
 }
 
 diaElemMenuDynamic::~diaElemMenuDynamic()
-{ 
+{
   if(paramTitle)
     delete paramTitle;
 }
 void diaElemMenuDynamic::setMe(void *dialog, void *opaque,uint32_t line)
 {
-   QComboBox *combo=new QComboBox( (QWidget *)dialog);
-   QGridLayout *layout=(QGridLayout*) opaque;
+  QComboBox *combo=new QComboBox( (QWidget *)dialog);
+  QGridLayout *layout=(QGridLayout*) opaque;
      myWidget=(void *)combo; 
 
   QLabel *text=new QLabel( this-&gt;paramTitle,(QWidget *)dialog);
@@ -184,44 +135,29 @@
 }
 
 void diaElemMenuDynamic::getMe(void)
-{ 
-   QComboBox *combo=(QComboBox *)myWidget;
+{
+  QComboBox *combo=(QComboBox *)myWidget;
   int r;
-  if(!nbMenu) return;
   r=combo-&gt;currentIndex();
+  if(!nbMenu) return;
   ADM_assert(r&lt;nbMenu);
   *(uint32_t *)param=menu[r]-&gt;val;
       
 }
 void diaElemMenuDynamic::finalize(void)
 { 
-}
-uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
-{
-    ADM_assert(nbLink&lt;MENU_MAX_lINK);
-    links[nbLink].value=entry-&gt;val;
-    links[nbLink].onoff=onoff;
-    links[nbLink].widget=w;
-    nbLink++;
-    return 1;
-}
-void diaElemMenuDynamic::enable(uint32_t onoff)
-{
-}
-void   diaElemMenuDynamic::updateMe(void)
-{
    QComboBox *combo=(QComboBox *)myWidget;
   uint32_t val;
   uint32_t rank;
   if(!nbMenu) return;
+  ADM_assert(combo);
   
+  
   rank=combo-&gt;currentIndex();
   ADM_assert(rank&lt;this-&gt;nbMenu);
   val=this-&gt;menu[rank]-&gt;val;
   /* Now search through the linked list to see if something happens ...*/
-  for(int i=0;i&lt;nbLink;i++)
-  {
-    dialElemLink *l=&amp;(links[i]);
+ 
    /* 1 disable everything */
   for(int i=0;i&lt;nbLink;i++)
   {
@@ -248,6 +184,28 @@
     }
     
   }
-  }
 }
+void diaElemMenuDynamic::enable(uint32_t onoff)
+{ 
+   QComboBox *combo=(QComboBox *)myWidget;
+  ADM_assert(combo);
+  if(onoff)
+    combo-&gt;setEnabled(1);
+  else
+    combo-&gt;setDisabled(1);
+}
+
+uint8_t   diaElemMenuDynamic::link(diaMenuEntryDynamic *entry,uint32_t onoff,diaElem *w)
+{
+    ADM_assert(nbLink&lt;MENU_MAX_lINK);
+    links[nbLink].value=entry-&gt;val;
+    links[nbLink].onoff=onoff;
+    links[nbLink].widget=w;
+    nbLink++;
+    return 1;
+}
+void   diaElemMenuDynamic::updateMe(void)
+{
+  finalize();
+}
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_toggle.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_toggle.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/FAC_toggle.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -71,9 +71,18 @@
   }else
     *val=0;
 }
-void diaElemToggle::enable(uint32_t onoff) {}
+void diaElemToggle::enable(uint32_t onoff) 
+{
+  QCheckBox *box=(QCheckBox *)myWidget;
+  ADM_assert(box);
+  if(onoff)
+    box-&gt;setEnabled(1);
+  else
+    box-&gt;setDisabled(1);
+}
 
 
+
 //******************************************************
 
 //EOF

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialogFactory/T_filesel.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -128,7 +128,8 @@
 }
 void diaElemFileRead::enable(uint32_t onoff)
 {
-  
+  ADM_Qfilesel *fs=(ADM_Qfilesel *)myWidget;
+  fs-&gt;setEnabled(onoff);
 }
 //****************************
 diaElemDirSelect::diaElemDirSelect(char **filename,const char *toggleTitle,const char *tip)  : diaElem(ELEM_DIR_SELECT) 
@@ -163,6 +164,8 @@
   
 }
   
-void diaElemDirSelect::changeFile(void) {}
+void diaElemDirSelect::changeFile(void) 
+{
+}
 //EOF
 

Modified: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_factory.h	2007-04-12 18:41:56 UTC (rev 2929)
@@ -160,25 +160,7 @@
   diaElem  *widget;
 }dialElemLink;
 
-class diaElemMenu : public diaElem
-{
-const diaMenuEntry  *menu;
-uint32_t            nbMenu;
-dialElemLink        links[MENU_MAX_lINK];
-uint32_t            nbLink;
 
-public:
-  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
-               const diaMenuEntry *menu,const char *tip=NULL);
-  
-  virtual ~diaElemMenu() ;
-  void setMe(void *dialog, void *opaque,uint32_t line);
-  void getMe(void);
-  uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
-  void      updateMe(void);
-  void      enable(uint32_t onoff) ;
-  void      finalize(void);;
-};
 //*******************************
 // Same but for dynamic menus
 //*******************************
@@ -201,6 +183,29 @@
   void      enable(uint32_t onoff) ;
   void      finalize(void);
 };
+
+class diaElemMenu : public diaElem
+{
+const diaMenuEntry  *menu;
+uint32_t            nbMenu;
+dialElemLink        links[MENU_MAX_lINK];
+uint32_t            nbLink;
+
+diaElemMenuDynamic  *dyna;
+diaMenuEntryDynamic  **menus;
+public:
+  diaElemMenu(uint32_t *intValue,const char *itle, uint32_t nb, 
+               const diaMenuEntry *menu,const char *tip=NULL);
+  
+  virtual ~diaElemMenu() ;
+  void setMe(void *dialog, void *opaque,uint32_t line);
+  void getMe(void);
+  uint8_t   link(diaMenuEntry *entry,uint32_t onoff,diaElem *w);
+  void      updateMe(void);
+  void      enable(uint32_t onoff) ;
+  void      finalize(void);;
+};
+
 /*************************************************/
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
 

Added: branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_gototime.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -0,0 +1,39 @@
+//
+// C++ Implementation: ADM_vidForcedPP
+//
+//
+//
+//
+#include &quot;config.h&quot;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+
+#include &lt;math.h&gt;
+#include &lt;math.h&gt;
+#include &lt;iconv.h&gt;
+
+
+#include &quot;default.h&quot;
+#include &quot;ADM_osSupport/ADM_misc.h&quot;
+#include &quot;ADM_userInterfaces/ADM_commonUI/DIA_factory.h&quot;
+#include &lt;ADM_assert.h&gt;
+
+
+uint8_t DIA_gotoTime(uint16_t *hh, uint16_t *mm, uint16_t *ss)
+{
+uint32_t h=*hh,m=*mm,s=*ss;
+
+diaElemUInteger   eh(&amp;h,_(&quot;Hour&quot;),0,24);
+diaElemUInteger   em(&amp;m,_(&quot;Minutes&quot;),0,59);
+diaElemUInteger   es(&amp;s,_(&quot;Secons&quot;),0,59);
+        diaElem *allWidgets[]={&amp;eh,&amp;em,&amp;es};
+
+  if(!diaFactoryRun(&quot;Go to time&quot;,3,allWidgets)) return 0;
+    *hh=h;
+    *mm=m;
+    *ss=s;
+    return 1;
+
+}
+//EOF 

Modified: branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2007-04-12 15:42:51 UTC (rev 2928)
+++ branches/avidemux_2.4_branch/avidemux/gtk_gui.cpp	2007-04-12 18:41:56 UTC (rev 2929)
@@ -2038,16 +2038,25 @@
          
          if( diaFactoryRun(&quot;Select Main audio Track&quot;,3,allWidgets))
          {
+           if(nw!=AudioNone &amp;&amp; nw!=AudioAvi)
+           {
+              if( !ADM_fileExist(newtrackname))
+                GUI_Info_HIG(ADM_LOG_INFO,_(&quot;Cannot load&quot;),_(&quot;The selected audio file does not exist.&quot;)); 
+              goto roger_and_out;
+           }
             switch( nw)
             {
                     case AudioMP3:
-                            A_loadMP3(newtrackname);
+                            if( ADM_fileExist(newtrackname))
+                              A_loadMP3(newtrackname);
                             break;
                     case AudioAC3:
-                            A_loadAC3(newtrackname);
+                            if( ADM_fileExist(newtrackname))
+                              A_loadAC3(newtrackname);
                             break;
                     case AudioWav:
-                            A_loadWave(newtrackname);
+                            if( ADM_fileExist(newtrackname))
+                              A_loadWave(newtrackname);
                             break;
                     case AudioNone:
                               A_changeAudioStream((AVDMGenericAudioStream *) NULL, AudioNone,NULL);
@@ -2070,6 +2079,7 @@
                             ADM_assert(0);
         }
          }
+roger_and_out:         
          /* Clean up */
          for(int i=0;i&lt;nb;i++)
             delete sourceavitracks[i];
@@ -2106,7 +2116,11 @@
          sourceMenu.link(&amp;(sourcesStream[1]),1,&amp;sourceName);
 
          if( !diaFactoryRun(_(&quot;Select 2nd audio Track&quot;),2,allWidgets)) return;
-       
+         if(!ADM_fileExist(newtrackname))
+         {
+           GUI_Info_HIG(ADM_LOG_INFO,_(&quot;Cannot load&quot;),_(&quot;The selected audio file does not exist.&quot;));
+           return;
+         }
         if(secondAudioSource!=AudioNone)
         {
                  delete secondaudiostream;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000246.html">[Avidemux-svn-commit] r2928 - in	branches/avidemux_2.4_branch/avidemux:	ADM_userInterfaces/ADM_NONE/ADM_dialog	ADM_userInterfaces/ADM_QT4/ADM_dialog ADM_video ADM_videoFilter
</A></li>
	<LI>Next message: <A HREF="000248.html">[Avidemux-svn-commit] r2930 - in	branches/avidemux_2.4_branch/avidemux: .	ADM_libraries/ADM_lavformat ADM_libraries/ADM_utilities	ADM_outputs/oplug_avi ADM_userInterfaces/ADM_commonUI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#247">[ date ]</a>
              <a href="thread.html#247">[ thread ]</a>
              <a href="subject.html#247">[ subject ]</a>
              <a href="author.html#247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
