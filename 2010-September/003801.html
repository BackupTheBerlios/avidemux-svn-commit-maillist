<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6617 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_toolkit	ADM_userInterfaces/ADM_QT4 ADM_userInterfaces/ADM_QT4/ADM_gui	ADM_userInterfaces/ADM_render
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6617%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20ADM_toolkit%0A%09ADM_userInterfaces/ADM_QT4%20ADM_userInterfaces/ADM_QT4/ADM_gui%0A%09ADM_userInterfaces/ADM_render&In-Reply-To=%3C20100912192215.B5822480FEB%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003800.html">
   <LINK REL="Next"  HREF="003802.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6617 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_toolkit	ADM_userInterfaces/ADM_QT4 ADM_userInterfaces/ADM_QT4/ADM_gui	ADM_userInterfaces/ADM_render</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6617%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/avidemux%3A%20ADM_toolkit%0A%09ADM_userInterfaces/ADM_QT4%20ADM_userInterfaces/ADM_QT4/ADM_gui%0A%09ADM_userInterfaces/ADM_render&In-Reply-To=%3C20100912192215.B5822480FEB%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6617 - in	branches/avidemux_2.5_branch_gruntster/avidemux: ADM_toolkit	ADM_userInterfaces/ADM_QT4 ADM_userInterfaces/ADM_QT4/ADM_gui	ADM_userInterfaces/ADM_render">gruntster at mail.berlios.de
       </A><BR>
    <I>Sun Sep 12 21:22:15 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003800.html">[Avidemux-svn-commit] r6616 -	branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog
</A></li>
        <LI>Next message: <A HREF="003802.html">[Avidemux-svn-commit] r6618 - in	branches/avidemux_2.6_branch_mean/autononreg: js py/avidemux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3801">[ date ]</a>
              <a href="thread.html#3801">[ thread ]</a>
              <a href="subject.html#3801">[ subject ]</a>
              <a href="author.html#3801">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-09-12 21:22:15 +0200 (Sun, 12 Sep 2010)
New Revision: 6617

Removed:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.cpp
Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_sdlRender.cpp
Log:
[apple] at least get 64-bit with SDL to compile

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/CMakeLists.txt	2010-09-12 14:17:22 UTC (rev 6616)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/CMakeLists.txt	2010-09-12 19:22:15 UTC (rev 6617)
@@ -1,5 +1,5 @@
 SET(ADM_toolkit_SRCS 
-	ADM_audioQueue.cpp  ADM_packetQueue.cpp  automation.cpp  filesel.cpp)
+	ADM_audioQueue.cpp  ADM_packetQueue.cpp  automation.cpp)
 
 include_directories(&quot;${PTHREAD_INCLUDE_DIR}&quot;)
 ADD_ADM_LIB_ALL_TARGETS(ADM_toolkit ${ADM_toolkit_SRCS})

Deleted: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.cpp	2010-09-12 14:17:22 UTC (rev 6616)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_toolkit/filesel.cpp	2010-09-12 19:22:15 UTC (rev 6617)
@@ -1,2 +0,0 @@
-// rmed
-

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2010-09-12 14:17:22 UTC (rev 6616)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_gui/T_preview.cpp	2010-09-12 19:22:15 UTC (rev 6617)
@@ -231,8 +231,13 @@
 #if defined(__WIN32)
 	xinfo-&gt;display=videoWindow-&gt;winId();
 #elif defined(__APPLE__)
-	xinfo-&gt;display = HIViewGetWindow(HIViewRef(widget-&gt;winId()));
-	xinfo-&gt;window = 0;
+	#if defined(ADM_CPU_X86_64)
+		xinfo-&gt;display = (void*)videoWindow-&gt;winId();
+		xinfo-&gt;window = 0;
+	#else
+		xinfo-&gt;display = HIViewGetWindow(HIViewRef(widget-&gt;winId()));
+		xinfo-&gt;window = 0;
+	#endif
 #else
     const QX11Info &amp;info=videoWindow-&gt;x11Info();
     xinfo-&gt;display=info.display();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2010-09-12 14:17:22 UTC (rev 6616)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ui_support.cpp	2010-09-12 19:22:15 UTC (rev 6617)
@@ -140,7 +140,7 @@
 {
 	*handle = (intptr_t)QuiMainWindows;
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) &amp;&amp; !defined(ADM_CPU_X86_64)
 	*nativeHandle = (intptr_t)HIViewGetWindow(HIViewRef(QuiMainWindows-&gt;winId()));
 #else
 	*nativeHandle = (intptr_t)QuiMainWindows-&gt;winId();

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt	2010-09-12 14:17:22 UTC (rev 6616)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/CMakeLists.txt	2010-09-12 19:22:15 UTC (rev 6617)
@@ -1,24 +1,22 @@
 SET(ADM_LIB ADM_render)
+SET(${ADM_LIB}_SRCS GUI_render.cpp GUI_sdlRender.cpp GUI_xvRender.cpp)
+SDLify(GUI_sdlRender.cpp)
 
-SET(${ADM_LIB}_SRCS
-GUI_render.cpp
-GUI_sdlRender.cpp
-GUI_xvRender.cpp
-)
+ADD_ADM_SHARED_LIB_CLI_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
 
-IF (APPLE)
-	SET(${ADM_LIB}_SRCS ${${ADM_LIB}_SRCS} GUI_sdlRenderHelper.m)
-ENDIF (APPLE)
+IF (GETTEXT_FOUND)
+	TARGET_LINK_LIBRARIES(${ADM_LIB}_cli ${GETTEXT_LIBRARY_DIR})
+ENDIF (GETTEXT_FOUND)
 
-ADD_ADM_SHARED_LIB_ALL_TARGETS(${ADM_LIB} ${${ADM_LIB}_SRCS})
-SDLify(GUI_sdlRender.cpp)
-ADM_TARGET_LINK_LIBARIES_ALL_TARGET(${ADM_LIB} ADM_core ADM_coreUI ADM_coreImage)
+INSTALL(TARGETS ${ADM_LIB}_cli RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib${LIB_SUFFIX}  ARCHIVE DESTINATION lib${LIB_SUFFIX})
 
-IF (APPLE)
-	ADM_TARGET_LINK_LIBARIES_ALL_TARGET(${ADM_LIB} &quot;-framework Cocoa&quot;)
-ENDIF (APPLE)
+IF (ADM_UI_GTK)
+	IF (APPLE AND NOT ADM_CPU_X86_64)
+		ADD_ADM_SHARED_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS} GUI_sdlRenderHelper.m)
+	ELSE (APPLE AND NOT ADM_CPU_X86_64)
+		ADD_ADM_SHARED_LIB_GTK_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+	ENDIF (APPLE AND NOT ADM_CPU_X86_64)
 
-IF (ADM_UI_GTK)
 	IF (GETTEXT_FOUND)
 		TARGET_LINK_LIBRARIES(${ADM_LIB}_gtk ${GETTEXT_LIBRARY_DIR})
 	ENDIF (GETTEXT_FOUND)
@@ -35,6 +33,12 @@
 ENDIF (ADM_UI_GTK)
 
 IF (ADM_UI_QT4)
+	IF (APPLE AND NOT ADM_CPU_X86_64)
+		ADD_ADM_SHARED_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS} GUI_sdlRenderHelper.m)
+	ELSE (APPLE AND NOT ADM_CPU_X86_64)
+		ADD_ADM_SHARED_LIB_QT4_TARGET(${ADM_LIB} ${${ADM_LIB}_SRCS})
+	ENDIF (APPLE AND NOT ADM_CPU_X86_64)
+
 	IF (USE_SDL)
 		TARGET_LINK_LIBRARIES(${ADM_LIB}_qt4 ${SDL_LIBRARY})
 	ENDIF (USE_SDL)
@@ -46,8 +50,8 @@
 	INSTALL(TARGETS ${ADM_LIB}_qt4 RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib${LIB_SUFFIX}  ARCHIVE DESTINATION lib${LIB_SUFFIX})
 ENDIF (ADM_UI_QT4)
 
-IF (GETTEXT_FOUND)
-	TARGET_LINK_LIBRARIES(${ADM_LIB}_cli ${GETTEXT_LIBRARY_DIR})
-ENDIF (GETTEXT_FOUND)
+ADM_TARGET_LINK_LIBARIES_ALL_TARGET(${ADM_LIB} ADM_core ADM_coreUI ADM_coreImage)
 
-INSTALL(TARGETS ${ADM_LIB}_cli RUNTIME DESTINATION ${BIN_DIR}  LIBRARY DESTINATION lib${LIB_SUFFIX}  ARCHIVE DESTINATION lib${LIB_SUFFIX})
+IF (APPLE)
+	ADM_TARGET_LINK_LIBARIES_ALL_TARGET(${ADM_LIB} &quot;-framework Cocoa&quot;)
+ENDIF (APPLE)
\ No newline at end of file

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_sdlRender.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_sdlRender.cpp	2010-09-12 14:17:22 UTC (rev 6616)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_render/GUI_sdlRender.cpp	2010-09-12 19:22:15 UTC (rev 6617)
@@ -39,7 +39,7 @@
 #include &quot;GUI_sdlRender.h&quot;
 #include &quot;ADM_assert.h&quot;
 
-#ifdef __APPLE__
+#if defined(__APPLE__) &amp;&amp; !defined(ADM_CPU_X86_64)
 extern &quot;C&quot;
 {
 	void initSdlCocoaView(void* parent, int x, int y, int width, int height, bool carbonParent);
@@ -77,7 +77,7 @@
         {
                 SDL_QuitSubSystem(SDL_INIT_VIDEO);
 
-#ifdef __APPLE__
+#if defined(__APPLE__) &amp;&amp; !defined(ADM_CPU_X86_64)
 				destroyCocoaView();
 #endif
         }
@@ -163,7 +163,7 @@
 	putenv(origin);
 #endif
 
-#ifdef __APPLE__
+#if defined(__APPLE__) &amp;&amp; !defined(ADM_CPU_X86_64)
 	void* parent;
 
 	if (window-&gt;display)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003800.html">[Avidemux-svn-commit] r6616 -	branches/avidemux_2.6_branch_mean/avidemux/cli/ADM_userInterfaces/ADM_dialog
</A></li>
	<LI>Next message: <A HREF="003802.html">[Avidemux-svn-commit] r6618 - in	branches/avidemux_2.6_branch_mean/autononreg: js py/avidemux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3801">[ date ]</a>
              <a href="thread.html#3801">[ thread ]</a>
              <a href="subject.html#3801">[ subject ]</a>
              <a href="author.html#3801">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
