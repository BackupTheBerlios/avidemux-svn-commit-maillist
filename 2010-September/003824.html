<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6640 - in branches/avidemux_2.6_branch_mean:	avidemux/cli avidemux/gtk avidemux/qt4	avidemux_core/ADM_coreVideoCodec/include	avidemux_core/ADM_coreVideoCodec/src	avidemux_core/ADM_ffmpeg/ffmpeg_config	avidemux_core/ADM_ffmpeg/libavcodec cmake
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6640%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/cli%20avidemux/gtk%20avidemux/qt4%0A%09avidemux_core/ADM_coreVideoCodec/include%0A%09avidemux_core/ADM_coreVideoCodec/src%0A%09avidemux_core/ADM_ffmpeg/ffmpeg_config%0A%09avidemux_core/ADM_ffmpeg/libavcodec%20cmake&In-Reply-To=%3C20100925100251.49A69480FCF%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003823.html">
   <LINK REL="Next"  HREF="003825.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6640 - in branches/avidemux_2.6_branch_mean:	avidemux/cli avidemux/gtk avidemux/qt4	avidemux_core/ADM_coreVideoCodec/include	avidemux_core/ADM_coreVideoCodec/src	avidemux_core/ADM_ffmpeg/ffmpeg_config	avidemux_core/ADM_ffmpeg/libavcodec cmake</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6640%20-%20in%20branches/avidemux_2.6_branch_mean%3A%0A%09avidemux/cli%20avidemux/gtk%20avidemux/qt4%0A%09avidemux_core/ADM_coreVideoCodec/include%0A%09avidemux_core/ADM_coreVideoCodec/src%0A%09avidemux_core/ADM_ffmpeg/ffmpeg_config%0A%09avidemux_core/ADM_ffmpeg/libavcodec%20cmake&In-Reply-To=%3C20100925100251.49A69480FCF%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6640 - in branches/avidemux_2.6_branch_mean:	avidemux/cli avidemux/gtk avidemux/qt4	avidemux_core/ADM_coreVideoCodec/include	avidemux_core/ADM_coreVideoCodec/src	avidemux_core/ADM_ffmpeg/ffmpeg_config	avidemux_core/ADM_ffmpeg/libavcodec cmake">gruntster at mail.berlios.de
       </A><BR>
    <I>Sat Sep 25 12:02:51 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003823.html">[Avidemux-svn-commit] r6639 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec
</A></li>
        <LI>Next message: <A HREF="003825.html">[Avidemux-svn-commit] r6641 - in	branches/avidemux_2.6_branch_mean/avidemux_core:	ADM_coreImage/src ADM_coreVideoCodec/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3824">[ date ]</a>
              <a href="thread.html#3824">[ thread ]</a>
              <a href="subject.html#3824">[ subject ]</a>
              <a href="author.html#3824">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-09-25 12:02:51 +0200 (Sat, 25 Sep 2010)
New Revision: 6640

Removed:
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_png.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_png.cpp
Modified:
   branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
   branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
   branches/avidemux_2.6_branch_mean/cmake/admCheckRequiredLibs.cmake
   branches/avidemux_2.6_branch_mean/cmake/config.h.cmake
Log:
[png] use ffmpeg to decode png so libpng isn't needed (port from 2.4)

Modified: branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux/cli/CMakeLists.txt	2010-09-25 10:02:51 UTC (rev 6640)
@@ -77,13 +77,7 @@
 IF (GETTEXT_FOUND)
 	TARGET_LINK_LIBRARIES(avidemux3_cli ${GETTEXT_LIBRARY_DIR})
 ENDIF (GETTEXT_FOUND)
-# PNG
-IF (USE_PNG)
-        TARGET_LINK_LIBRARIES(avidemux3_cli ${PNG_LIBRARIES})
-	
-ENDIF (USE_PNG)
 
-
 # XVideo
 IF (USE_XV)
         TARGET_LINK_LIBRARIES(avidemux3_cli ${XVIDEO_LIBRARY_DIR})

Modified: branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux/gtk/CMakeLists.txt	2010-09-25 10:02:51 UTC (rev 6640)
@@ -83,13 +83,7 @@
 IF (GETTEXT_FOUND)
 	TARGET_LINK_LIBRARIES(avidemux3_gtk ${GETTEXT_LIBRARY_DIR})
 ENDIF (GETTEXT_FOUND)
-# PNG
-IF (USE_PNG)
-        TARGET_LINK_LIBRARIES(avidemux3_gtk ${PNG_LIBRARIES})
-	
-ENDIF (USE_PNG)
 
-
 # XVideo
 IF (USE_XV)
         TARGET_LINK_LIBRARIES(avidemux3_gtk ${XVIDEO_LIBRARY_DIR})

Modified: branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux/qt4/CMakeLists.txt	2010-09-25 10:02:51 UTC (rev 6640)
@@ -104,14 +104,6 @@
 	TARGET_LINK_LIBRARIES(avidemux3_qt4 ${GETTEXT_LIBRARY_DIR})
 ENDIF (GETTEXT_FOUND)
 
-
-# PNG
-IF (USE_PNG)
-        TARGET_LINK_LIBRARIES(avidemux3_qt4 ${PNG_LIBRARIES})
-	
-ENDIF (USE_PNG)
-
-
 # XVideo
 IF (USE_XV)
         TARGET_LINK_LIBRARIES(avidemux3_qt4 ${XVIDEO_LIBRARY_DIR})

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_ffmp43.h	2010-09-25 10:02:51 UTC (rev 6640)
@@ -132,8 +132,12 @@
   decoderFF_ffhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
 };
 
+class decoderFFPng : public decoderFF
+{
+public:
+	decoderFFPng(uint32_t w, uint32_t h, uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData, uint32_t bpp);
+};
 
-
 #endif
 
 // EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_png.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_png.h	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/include/ADM_png.h	2010-09-25 10:02:51 UTC (rev 6640)
@@ -1,65 +0,0 @@
-/***************************************************************************
-                          ADM_png  -  description
-                             -------------------
-    copyright            : (C) 2005 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
- 
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/ 
-#ifndef PNG_H_A
-#define PNG_H_A
-
-/**
-    \struct memAccess   
-    \brief png io wrapper
-*/
-typedef struct memAccess 
-{
-  
-int size;   
-int cur;
-uint8_t * data;
-} memAccess;
-
-/**
-    \class decoderPng
-*/
-class decoderPng:public decoders 
-{
-
-protected:
-    memAccess io;      
-    ADM_colorspace colorspace;
-    void *png_ptr;
-    void *info_ptr;
-    void *end_info;
-    uint8_t ** rows;      
-    uint8_t * decoded;
-    void Init (void);
-    void Cleanup (void);
-    void recalc (void);
-
-public:
-            decoderPng (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp);
-  
-    virtual ~ decoderPng ();
-  
-    virtual bool uncompress(ADMCompressedImage * in, ADMImage * out);
-  
-    bool dontcopy (void)
-            {
-                return true;
-            }
-    virtual const char *getDecoderName(void) {return &quot;Png&quot;;}
-};
-
-#endif 
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_codecSearch.cpp	2010-09-25 10:02:51 UTC (rev 6640)
@@ -32,7 +32,6 @@
 #include &quot;ADM_codecNull.h&quot;
 #include &quot;ADM_rgb16.h&quot;
 #include &quot;ADM_uyvy.h&quot;
-#include &quot;ADM_png.h&quot;
 #include &quot;ADM_codecEmpty.h&quot;
 #include &quot;ADM_ffmp43.h&quot;
 #include &quot;ADM_codecFFsimple.h&quot;
@@ -62,7 +61,7 @@
     }
   if (fourCC::check (fcc, (uint8_t *) &quot;PNG &quot;))
     {
-      return (decoders *) (new decoderPng (w,h,fcc,extraLen,extraData,bpp));
+      return (decoders *) (new decoderFFPng (w,h,fcc,extraLen,extraData,bpp));
     }
   if (fourCC::check (fcc, (uint8_t *) &quot;FFVH&quot;))
     {

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_ffmp43.cpp	2010-09-25 10:02:51 UTC (rev 6640)
@@ -1,613 +1,618 @@
-/***************************************************************************
-    \file ADM_ffmp43
-    \brief Decoders using lavcodec
-    \author mean &amp; all (c) 2002-2010
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-extern &quot;C&quot; {
-#include &quot;ADM_lavcodec.h&quot;
-}
-#include &quot;ADM_default.h&quot;
-
-#include &quot;ADM_codec.h&quot;
-#include &quot;ADM_ffmp43.h&quot;
-#include &quot;DIA_coreToolkit.h&quot;
-//#include &quot;ADM_videoInfoExtractor.h&quot;
-
-extern int ADM_cpu_num_processors(void);
-extern &quot;C&quot;
-{
-    static void ADM_releaseBuffer(struct AVCodecContext *avctx, AVFrame *pic);
-    static int  ADM_getBuffer(AVCodecContext *avctx, AVFrame *pic);
-}
-
-#define aprintf(...) {}
-
-#define WRAP_Open_Template(funcz,argz,display,codecid) \
-{\
-AVCodec *codec=funcz(argz);\
-if(!codec) {GUI_Error_HIG(&quot;Codec&quot;,QT_TR_NOOP(&quot;Internal error finding codec&quot;display));ADM_assert(0);} \
-  codecId=codecid; \
-  _context-&gt;workaround_bugs=1*FF_BUG_AUTODETECT +0*FF_BUG_NO_PADDING; \
-  _context-&gt;error_concealment=3; \
-  if (avcodec_open(_context, codec) &lt; 0)  \
-                      { \
-                                        printf(&quot;[lavc] Decoder init: &quot;display&quot; video decoder failed!\n&quot;); \
-                                        GUI_Error_HIG(&quot;Codec&quot;,&quot;Internal error opening &quot;display); \
-                                        ADM_assert(0); \
-                                } \
-                                else \
-                                { \
-                                        printf(&quot;[lavc] Decoder init: &quot;display&quot; video decoder initialized! (%s)\n&quot;,codec-&gt;long_name); \
-                                } \
-}
-
-#define WRAP_Open(x)            {WRAP_Open_Template(avcodec_find_decoder,x,#x,x);}
-#define WRAP_OpenByName(x,y)    {WRAP_Open_Template(avcodec_find_decoder_by_name,#x,#x,y);}
-
-
-//****************************
-extern uint8_t DIA_lavDecoder (uint32_t * swapUv, uint32_t * showU);
-extern &quot;C&quot;
-{
-  int av_is_voppacked (AVCodecContext * avctx, int *vop_packed, int *gmc,
-		       int *qpel);
-};
-/**
-    \fn clonePic
-    \brief Convert AvFrame to ADMImage
-*/
-uint8_t decoderFF::clonePic (AVFrame * src, ADMImage * out)
-{
-  uint32_t    u,v;
-  ADM_assert(out-&gt;isRef());
-  ADMImageRef *ref=out-&gt;castToRef();
-  ref-&gt;_planes[0] = (uint8_t *) src-&gt;data[0];
-  ref-&gt;_planeStride[0] = src-&gt;linesize[0];
-  if (_swapUV)
-    {
-      u = 1;
-      v = 2;
-    }
-  else
-    {
-      u = 2;
-      v = 1;
-    }
-  ref-&gt;_planes[1] = (uint8_t *) src-&gt;data[u];
-  ref-&gt;_planeStride[1] = src-&gt;linesize[u];
-
-  ref-&gt;_planes[2] = (uint8_t *) src-&gt;data[v];
-  ref-&gt;_planeStride[2] = src-&gt;linesize[v];
-
-  _lastQ = 0;			//_context-&gt;quality;
-  out-&gt;_Qp = (src-&gt;quality * 32) / FF_LAMBDA_MAX;
-  out-&gt;flags = frameType ();
-
-  // Quant ?
-  if (src-&gt;qstride &amp;&amp; src-&gt;qscale_table &amp;&amp; codecId != CODEC_ID_H264)
-    {
-      out-&gt;quant = (uint8_t *) src-&gt;qscale_table;
-      out-&gt;_qStride = src-&gt;qstride;
-      out-&gt;_qSize = (_w + 15) &gt;&gt; 4;
-      out-&gt;_qSize *= (_h + 15) &gt;&gt; 4;	// FixME?
-    }
-  else
-    {
-      out-&gt;_qSize = out-&gt;_qStride = 0;
-      out-&gt;quant = NULL;
-    }
-    //printf(&quot;[LAVC] Old pts :%&quot;LLD&quot; new pts :%&quot;LLD&quot;\n&quot;,out-&gt;Pts, (uint64_t)(src-&gt;reordered_opaque));
-    //printf(&quot;[LAVC] pts: %&quot;LLU&quot;\n&quot;,src-&gt;pts);
-    out-&gt;Pts= (uint64_t)(src-&gt;reordered_opaque);
- 
-    return 1;
-}
-/**
-        \fn decoderMultiThread
-        \brief Enabled multitheaded decoder if possible
-*/
-void decoderFF::decoderMultiThread (void)
-{
-  uint32_t threads = 0;
-
- // prefs-&gt;get(FEATURE_THREADING_LAVC, &amp;threads);
-#warning Fixme
-    threads=1;
-  if (threads == 0)
-	  threads = ADM_cpu_num_processors();
-
-  if (threads == 1)
-	  threads = 0;
-
-  if (threads)
-  {
-      printf (&quot;[lavc] Enabling MT decoder with %u threads\n&quot;, threads);
-
-      if (avcodec_thread_init (_context, threads) == -1)
-	      printf (&quot;[lavc] Failed!!\n&quot;);
-	  else
-          _usingMT = 1;
-  }
-}
-uint8_t decoderFF::getPARWidth (void)
-{
-  if(!_context-&gt;sample_aspect_ratio.num) return 1;
-  return _context-&gt;sample_aspect_ratio.num;
-}
-uint8_t decoderFF::getPARHeight (void)
-{
-  if(!_context-&gt;sample_aspect_ratio.den) return 1;
-  return _context-&gt;sample_aspect_ratio.den;
-
-}
-
-//________________________________________________
-bool  decoderFF::setParam (void)
-{
-  DIA_lavDecoder (&amp;_swapUV, &amp;_showMv);
-  return true;			// no param for ffmpeg
-}
-
-//-------------------------------
-decoderFF::decoderFF (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
-            :decoders (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  codecId = 0;
-//                              memset(&amp;_context,0,sizeof(_context));
-  _allowNull = 0;
-  _gmc = 0;
-  _context = NULL;
-  _refCopy = 0;
-  _usingMT = 0;
-#if LIBAVCODEC_BUILD &gt;= 4624
-  _context = avcodec_alloc_context ();
-#else
-  _context = new AVCodecContext;
-  memset (_context, 0, sizeof (AVCodecContext));
-#endif
-  ADM_assert (_context);
-  memset (&amp;_frame, 0, sizeof (_frame));
-
-  _context-&gt;max_b_frames = 0;
-
-  _context-&gt;width = _w;
-  _context-&gt;height = _h;
-  _context-&gt;pix_fmt = PIX_FMT_YUV420P;	//PIX_FMT_RGBA32
-  //_context-&gt;debug=1;
-
-  _internalBuffer = new uint8_t[w * h * 3];
-
-  _swapUV = 0;
-  //_context-&gt;strict_std_compliance=-1;
-
-  _showMv = 0;
-#define FF_SHOW		(FF_DEBUG_VIS_MV_P_FOR+	FF_DEBUG_VIS_MV_B_FOR+FF_DEBUG_VIS_MV_B_BACK)
-//#define FF_SHOW               (FF_DEBUG_VIS_MV_P_FOR)
-  printf (&quot;[lavc] Build: %d\n&quot;, LIBAVCODEC_BUILD);
-  _context-&gt;debug_mv |= FF_SHOW;
-  _context-&gt;debug |= FF_DEBUG_VIS_MB_TYPE + FF_DEBUG_VIS_QP;
-  
-}
-
-//_____________________________________________________
-
-decoderFF::~decoderFF ()
-{
-  if (_usingMT)
-    {
-      printf (&quot;[lavc] Killing decoding threads\n&quot;);
-      avcodec_thread_free (_context);
-      _usingMT = 0;
-    }
-
-  avcodec_close (_context);
-  ADM_dealloc (_context);
-  delete[]_internalBuffer;
-  printf (&quot;[lavc] Destroyed\n&quot;);
-}
-
-/**
-    \fn frameType
-    \return frametype of the last decoded frame
-*/
-uint32_t decoderFF::frameType (void)
-{
-  uint32_t
-    flag = 0;
-
-  AVFrame *
-    target;
-#define SET(x) {flag=x;aprintf(&quot;Frame is %s\n&quot;,#x);}
-
-
-  target = &amp;_frame;
-  switch (target-&gt;pict_type)
-    {
-    case FF_B_TYPE:
-      SET (AVI_B_FRAME);
-      if (target-&gt;key_frame)
-	aprintf (&quot;\n But keyframe is set\n&quot;);
-      break;
-
-    case FF_I_TYPE:
-      SET (AVI_KEY_FRAME);
-      if (!target-&gt;key_frame)
-	{
-	  if (codecId == CODEC_ID_H264)
-	    {
-	      SET (AVI_P_FRAME);
-	    }
-	  else
-	    printf (&quot;\n But keyframe is not set\n&quot;);
-	}
-      break;
-    case FF_S_TYPE:
-      _gmc = 1;			// No break, just inform that gmc is there
-    case FF_P_TYPE:
-      SET (AVI_P_FRAME);
-      if (target-&gt;key_frame)
-	aprintf (&quot;\n But keyframe is set\n&quot;);
-      break;
-    default:
-//                              printf(&quot;\n OOops XXX frame ?\n&quot;);
-      break;
-    }
-    flag&amp;=~AVI_STRUCTURE_TYPE_MASK;
-    if(target-&gt;interlaced_frame)
-    {
-        flag|=AVI_FIELD_STRUCTURE;
-        if(target-&gt;top_field_first)
-            flag|=AVI_TOP_FIELD;
-        else
-            flag|=AVI_BOTTOM_FIELD;
-    }
-  return flag;
-}
-bool decoderFF::decodeHeaderOnly (void)
-{
-  if (codecId == CODEC_ID_H264)
-    _context-&gt;hurry_up = 4;
-  else
-    _context-&gt;hurry_up = 5;
-  printf (&quot;\n[lavc] Hurry up\n&quot;);
-  return 1;
-}
-bool decoderFF::decodeFull (void)
-{
-  _context-&gt;hurry_up = 0;
-  printf (&quot;\n[lavc] full decoding\n&quot;);
-  return 1;
-}
-
-/**
-    \fn flush
-    \brief empty internal buffer
-*/
-bool    decoderFF::flush(void)
-{
-    if(_context)
-        avcodec_flush_buffers(_context);
-    return true;
-}
-/**
-    \fn uncompress
-    \brief Actually decode an image
-*/
-bool   decoderFF::uncompress (ADMCompressedImage * in, ADMImage * out)
-{
-  int got_picture = 0;
-  uint8_t *oBuff[3];
-  int strideTab[3];
-  int strideTab2[3];
-  int ret = 0;
-  out-&gt;_noPicture = 0;
-  if (_showMv)
-    {
-      _context-&gt;debug_mv |= FF_SHOW;
-      _context-&gt;debug |= 0;	//FF_DEBUG_VIS_MB_TYPE;
-    }
-  else
-    {
-      _context-&gt;debug_mv &amp;= ~FF_SHOW;
-      _context-&gt;debug &amp;= ~(FF_DEBUG_VIS_MB_TYPE + FF_DEBUG_VIS_QP);
-    }
-
-   
-    
-  if (in-&gt;dataLength == 0 &amp;&amp; !_allowNull)	// Null frame, silently skipped
-    {
-      
-      printf (&quot;[Codec] null frame\n&quot;);
-        // search the last image
-        if (_context-&gt;coded_frame &amp;&amp; 
-            _context-&gt;coded_frame-&gt;data &amp;&amp;
-            _context-&gt;coded_frame-&gt;data[0]
-            )
-          {
-            printf(&quot;[Codec] Cloning older pic\n&quot;);
-            clonePic (_context-&gt;coded_frame, out);
-            out-&gt;Pts=ADM_COMPRESSED_NO_PTS;
-          }
-        else
-            {
-                out-&gt;_noPicture = 1;
-                out-&gt;Pts=ADM_COMPRESSED_NO_PTS;
-                printf(&quot;[Codec] No Picture\n&quot;);
-            }
-          return 1;
-    }
-   // Put a safe value....
-   out-&gt;Pts=in-&gt;demuxerPts;
-    _context-&gt;reordered_opaque=in-&gt;demuxerPts;
-  //_frame.opaque=(void *)out-&gt;Pts;
-  //printf(&quot;Incoming Pts :%&quot;LLD&quot;\n&quot;,out-&gt;Pts);
-  AVPacket pkt;
-  av_init_packet(&amp;pkt);
-  pkt.data=in-&gt;data;
-  pkt.size=in-&gt;dataLength;
-  if(in-&gt;flags&amp;AVI_KEY_FRAME)
-    pkt.flags=AV_PKT_FLAG_KEY;
-  else
-    pkt.flags=0;
-  
-  ret = avcodec_decode_video2 (_context, &amp;_frame, &amp;got_picture, &amp;pkt);
-  if(!bFramePossible())
-  {
-    // No delay, the value is sure, no need to hide it in opaque
-    _context-&gt;reordered_opaque=(int64_t)in-&gt;demuxerPts;
-  }
-  out-&gt;_qStride = 0;		//Default = no quant
-  if (0 &gt; ret &amp;&amp; !_context-&gt;hurry_up)
-    {
-      printf (&quot;\n[lavc] error in lavcodec decoder!\n&quot;);
-      printf (&quot;[lavc] Err: %d, size :%d\n&quot;, ret, in-&gt;dataLength);
-      return 0;
-    }
-  if (!got_picture &amp;&amp; !_context-&gt;hurry_up)
-    {
-      // Some encoder code a vop header with the 
-      // vop flag set to 0
-      // it is meant to mean frame skipped but very dubious
-      if (in-&gt;dataLength &lt;= 8 &amp;&amp; codecId == CODEC_ID_MPEG4)
-	{
-	  printf (&quot;[lavc] Probably pseudo black frame...\n&quot;);
-	  out-&gt;_Qp = 2;
-	  out-&gt;flags = 0;	// assume P ?
-
-	  clonePic (_context-&gt;coded_frame, out);
-	  return 1;
-	}
-      // allow null means we allow null frame in and so potentially
-      // have no frame out for a time
-      // in that case silently fill with black and returns it as KF
-      if (_allowNull)
-	{
-	  out-&gt;flags = AVI_KEY_FRAME;
-	  if (!_refCopy)
-	    {
-            out-&gt;blacken();
-	    }
-	  else
-	    {
-	      out-&gt;_noPicture = 1;
-	    }
-	  printf (&quot;\n[lavc] ignoring got pict ==0\n&quot;);
-	  return 1;
-
-	}
-#if 0
-      printf (&quot;[lavc] Err: %d, size: %d\n&quot;, ret, in-&gt;dataLength);
-      printf (&quot;\n[lavc] error in FFMP43/mpeg4!: got picture\n&quot;);
-#endif
-      //GUI_Alert(&quot;Please retry with misc-&gt;Turbo off&quot;);
-      //return 1;
-      return 0;
-    }
-  if (_context-&gt;hurry_up)
-    {
-      out-&gt;flags = frameType ();
-      return 1;
-    }
-  // We have an image....
-  switch (_context-&gt;pix_fmt)
-    {
-    case PIX_FMT_YUV411P:
-      out-&gt;_colorspace = ADM_COLOR_YUV411;
-      break;
-    case PIX_FMT_YUYV422:
-      out-&gt;_colorspace = ADM_COLOR_YUV422;
-      break;
-    case PIX_FMT_YUV422P:
-    case PIX_FMT_YUVJ422P:
-      out-&gt;_colorspace = ADM_COLOR_YUV422P;
-      break;
-
-    case PIX_FMT_YUV444P:
-    case PIX_FMT_YUVJ444P:
-      out-&gt;_colorspace = ADM_COLOR_YUV444;
-      break;
-    case PIX_FMT_YUV420P:
-    case PIX_FMT_YUVJ420P:
-    case PIX_FMT_YUVA420P:
-      // Default is YV12 or I420
-      // In that case depending on swap u/v
-      // we do it or not
-      out-&gt;_colorspace = ADM_COLOR_YV12;
-      break;
-
-    case PIX_FMT_RGBA: // ???PIX_FMT_RGBA32:
-      out-&gt;_colorspace = ADM_COLOR_RGB32A;
-      break;
-    case PIX_FMT_RGB555:
-      out-&gt;_colorspace = ADM_COLOR_RGB555;
-      break;
-    case PIX_FMT_VDPAU_MPEG1:
-    case PIX_FMT_VDPAU_MPEG2:
-    case PIX_FMT_VDPAU_WMV3:
-    case PIX_FMT_VDPAU_VC1:
-    case PIX_FMT_VDPAU_H264:
-        out-&gt;_colorspace=ADM_COLOR_VDPAU;
-        break;
-    default:
-      printf (&quot;[lavc] Unhandled colorspace: %d\n&quot;, _context-&gt;pix_fmt);
-      return 0;
-    }
-    clonePic (&amp;_frame, out);
-    //printf(&quot;[AvCodec] Pts : %llu Out Pts:%llu \n&quot;,_frame.pts,out-&gt;Pts);
-
-  return 1;
-}
-// *******************************************************************
-// *******************************************************************
-// *******************************************************************
-
-decoderFFDiv3::decoderFFDiv3 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
-decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  _refCopy = 1;			// YUV420 only
-  WRAP_Open (CODEC_ID_MSMPEG4V3);
-}
-
-decoderFFMpeg4::decoderFFMpeg4 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
-decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-// force low delay as avidemux don't handle B-frames
-  ADM_info (&quot;[lavc] Using %d bytes of extradata for MPEG4 decoder\n&quot;, (int)extraDataLen);
-  
-  _refCopy = 1;			// YUV420 only
-  _context-&gt;extradata = (uint8_t *) extraData;
-  _context-&gt;extradata_size = (int)extraDataLen  ;
-  _context-&gt;codec_tag=fcc;
-  _context-&gt;stream_codec_tag=fcc;
-  decoderMultiThread ();
-  //  _context-&gt;flags|=FF_DEBUG_VIS_MV;
-  WRAP_Open (CODEC_ID_MPEG4);
-}
-bool decoderFFMpeg4::uncompress (ADMCompressedImage * in, ADMImage * out)
-{
-    // For pseudo startcode
-    if(in-&gt;dataLength)
-    {
-        in-&gt;data[in-&gt;dataLength]=0;
-        in-&gt;data[in-&gt;dataLength+1]=0;
-    }
-    return decoderFF::uncompress(in,out);
-
-}
-//************************************
-decoderFFDV::decoderFFDV (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
-decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  _context-&gt;extradata = (uint8_t *) extraData;
-  _context-&gt;extradata_size = (int) extraDataLen;
-  WRAP_Open (CODEC_ID_DVVIDEO);
-
-}
-decoderFFMpeg12::decoderFFMpeg12 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
-                decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  _refCopy = 1;			// YUV420 only
-  decoderMultiThread ();
-  WRAP_Open (CODEC_ID_MPEG2VIDEO);
-}
-
-decoderFF_ffhuff::decoderFF_ffhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
-:decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  _context-&gt;extradata = (uint8_t *) extraData;
-  _context-&gt;extradata_size = (int) extraDataLen;
-  _context-&gt;bits_per_coded_sample=bpp;
-  ADM_info (&quot;[lavc] FFhuff: We have %d bytes of extra data\n&quot;, (int)extraDataLen);
-  WRAP_Open (CODEC_ID_FFVHUFF);
-
-}
-decoderFFH264::decoderFFH264 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
-        :decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-
-  _refCopy = 1;			// YUV420 only
-  _context-&gt;extradata = (uint8_t *) extraData;
-  _context-&gt;extradata_size = (int) extraDataLen;
-  decoderMultiThread ();
-  ADM_info (&quot;[lavc] Initializing H264 decoder with %d extradata\n&quot;, (int)extraDataLen);
-  WRAP_Open(CODEC_ID_H264);
-}
-//*********************
-extern &quot;C&quot; {int av_getAVCStreamInfo(AVCodecContext *avctx, uint32_t  *nalSize, uint32_t *isAvc);}
-/**
-    \fn uncompress
-*/
-bool   decoderFFH264::uncompress (ADMCompressedImage * in, ADMImage * out)
-{
-  if(!_context-&gt;hurry_up) return decoderFF::uncompress (in, out);
-    ADM_assert(0);
-#if 0  
-  uint32_t nalSize, isAvc;
-  av_getAVCStreamInfo(_context,&amp;nalSize,&amp;isAvc);
-  if(isAvc)
-  {
-      return extractH264FrameType(nalSize, in-&gt;data,in-&gt;dataLength,&amp;(out-&gt;flags));
-  }else
-  {
-    return extractH264FrameType_startCode(nalSize, in-&gt;data,in-&gt;dataLength,&amp;(out-&gt;flags));
-  }
-#endif
-}
-//*********************
-decoderFFhuff::decoderFFhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
-decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  _context-&gt;extradata = (uint8_t *) extraData;
-  _context-&gt;extradata_size = (int) extraDataLen;
-  _context-&gt;bits_per_coded_sample = bpp;
-  WRAP_Open (CODEC_ID_HUFFYUV);
-}
-
-//***************
-extern uint8_t  lavformat_init(void);
-extern void     avcodec_init(void );
-extern  void    avcodec_register_all(void );
-extern &quot;C&quot;
-{
-  void adm_lavLogCallback(void  *instance, int level, const char* fmt, va_list list);
-}
-/**
-    \fn ADM_lavInit
-    \brief Init both lavcodec and lavformat
-*/
-void ADM_lavInit(void)
-{
-    avcodec_init();
-    avcodec_register_all();
-//BAZOOKA    lavformat_init();
-    av_log_set_callback(adm_lavLogCallback);
-#ifdef ADM_DEBUG
-  //  av_log_set_level(AV_LOG_DEBUG);
-#endif
-
-}
-void adm_lavLogCallback(void  *instance, int level, const char* fmt, va_list list)
-{
-   // if(level&gt;1) return;
-    char buf[256];
-  
-    vsnprintf(buf, sizeof(buf), fmt, list);
-    printf(&quot;[lavc] %s&quot;,buf);
-}
-
-void ADM_lavDestroy(void)
-{
-	//av_free_static();
-}
-
-// EOF
+/***************************************************************************
+    \file ADM_ffmp43
+    \brief Decoders using lavcodec
+    \author mean &amp; all (c) 2002-2010
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+extern &quot;C&quot; {
+#include &quot;ADM_lavcodec.h&quot;
+}
+#include &quot;ADM_default.h&quot;
+
+#include &quot;ADM_codec.h&quot;
+#include &quot;ADM_ffmp43.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+//#include &quot;ADM_videoInfoExtractor.h&quot;
+
+extern int ADM_cpu_num_processors(void);
+extern &quot;C&quot;
+{
+    static void ADM_releaseBuffer(struct AVCodecContext *avctx, AVFrame *pic);
+    static int  ADM_getBuffer(AVCodecContext *avctx, AVFrame *pic);
+}
+
+#define aprintf(...) {}
+
+#define WRAP_Open_Template(funcz,argz,display,codecid) \
+{\
+AVCodec *codec=funcz(argz);\
+if(!codec) {GUI_Error_HIG(&quot;Codec&quot;,QT_TR_NOOP(&quot;Internal error finding codec&quot;display));ADM_assert(0);} \
+  codecId=codecid; \
+  _context-&gt;workaround_bugs=1*FF_BUG_AUTODETECT +0*FF_BUG_NO_PADDING; \
+  _context-&gt;error_concealment=3; \
+  if (avcodec_open(_context, codec) &lt; 0)  \
+                      { \
+                                        printf(&quot;[lavc] Decoder init: &quot;display&quot; video decoder failed!\n&quot;); \
+                                        GUI_Error_HIG(&quot;Codec&quot;,&quot;Internal error opening &quot;display); \
+                                        ADM_assert(0); \
+                                } \
+                                else \
+                                { \
+                                        printf(&quot;[lavc] Decoder init: &quot;display&quot; video decoder initialized! (%s)\n&quot;,codec-&gt;long_name); \
+                                } \
+}
+
+#define WRAP_Open(x)            {WRAP_Open_Template(avcodec_find_decoder,x,#x,x);}
+#define WRAP_OpenByName(x,y)    {WRAP_Open_Template(avcodec_find_decoder_by_name,#x,#x,y);}
+
+
+//****************************
+extern uint8_t DIA_lavDecoder (uint32_t * swapUv, uint32_t * showU);
+extern &quot;C&quot;
+{
+  int av_is_voppacked (AVCodecContext * avctx, int *vop_packed, int *gmc,
+		       int *qpel);
+};
+/**
+    \fn clonePic
+    \brief Convert AvFrame to ADMImage
+*/
+uint8_t decoderFF::clonePic (AVFrame * src, ADMImage * out)
+{
+  uint32_t    u,v;
+  ADM_assert(out-&gt;isRef());
+  ADMImageRef *ref=out-&gt;castToRef();
+  ref-&gt;_planes[0] = (uint8_t *) src-&gt;data[0];
+  ref-&gt;_planeStride[0] = src-&gt;linesize[0];
+  if (_swapUV)
+    {
+      u = 1;
+      v = 2;
+    }
+  else
+    {
+      u = 2;
+      v = 1;
+    }
+  ref-&gt;_planes[1] = (uint8_t *) src-&gt;data[u];
+  ref-&gt;_planeStride[1] = src-&gt;linesize[u];
+
+  ref-&gt;_planes[2] = (uint8_t *) src-&gt;data[v];
+  ref-&gt;_planeStride[2] = src-&gt;linesize[v];
+
+  _lastQ = 0;			//_context-&gt;quality;
+  out-&gt;_Qp = (src-&gt;quality * 32) / FF_LAMBDA_MAX;
+  out-&gt;flags = frameType ();
+
+  // Quant ?
+  if (src-&gt;qstride &amp;&amp; src-&gt;qscale_table &amp;&amp; codecId != CODEC_ID_H264)
+    {
+      out-&gt;quant = (uint8_t *) src-&gt;qscale_table;
+      out-&gt;_qStride = src-&gt;qstride;
+      out-&gt;_qSize = (_w + 15) &gt;&gt; 4;
+      out-&gt;_qSize *= (_h + 15) &gt;&gt; 4;	// FixME?
+    }
+  else
+    {
+      out-&gt;_qSize = out-&gt;_qStride = 0;
+      out-&gt;quant = NULL;
+    }
+    //printf(&quot;[LAVC] Old pts :%&quot;LLD&quot; new pts :%&quot;LLD&quot;\n&quot;,out-&gt;Pts, (uint64_t)(src-&gt;reordered_opaque));
+    //printf(&quot;[LAVC] pts: %&quot;LLU&quot;\n&quot;,src-&gt;pts);
+    out-&gt;Pts= (uint64_t)(src-&gt;reordered_opaque);
+ 
+    return 1;
+}
+/**
+        \fn decoderMultiThread
+        \brief Enabled multitheaded decoder if possible
+*/
+void decoderFF::decoderMultiThread (void)
+{
+  uint32_t threads = 0;
+
+ // prefs-&gt;get(FEATURE_THREADING_LAVC, &amp;threads);
+#warning Fixme
+    threads=1;
+  if (threads == 0)
+	  threads = ADM_cpu_num_processors();
+
+  if (threads == 1)
+	  threads = 0;
+
+  if (threads)
+  {
+      printf (&quot;[lavc] Enabling MT decoder with %u threads\n&quot;, threads);
+
+      if (avcodec_thread_init (_context, threads) == -1)
+	      printf (&quot;[lavc] Failed!!\n&quot;);
+	  else
+          _usingMT = 1;
+  }
+}
+uint8_t decoderFF::getPARWidth (void)
+{
+  if(!_context-&gt;sample_aspect_ratio.num) return 1;
+  return _context-&gt;sample_aspect_ratio.num;
+}
+uint8_t decoderFF::getPARHeight (void)
+{
+  if(!_context-&gt;sample_aspect_ratio.den) return 1;
+  return _context-&gt;sample_aspect_ratio.den;
+
+}
+
+//________________________________________________
+bool  decoderFF::setParam (void)
+{
+  DIA_lavDecoder (&amp;_swapUV, &amp;_showMv);
+  return true;			// no param for ffmpeg
+}
+
+//-------------------------------
+decoderFF::decoderFF (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
+            :decoders (w, h,fcc,extraDataLen,extraData,bpp)
+{
+  codecId = 0;
+//                              memset(&amp;_context,0,sizeof(_context));
+  _allowNull = 0;
+  _gmc = 0;
+  _context = NULL;
+  _refCopy = 0;
+  _usingMT = 0;
+#if LIBAVCODEC_BUILD &gt;= 4624
+  _context = avcodec_alloc_context ();
+#else
+  _context = new AVCodecContext;
+  memset (_context, 0, sizeof (AVCodecContext));
+#endif
+  ADM_assert (_context);
+  memset (&amp;_frame, 0, sizeof (_frame));
+
+  _context-&gt;max_b_frames = 0;
+
+  _context-&gt;width = _w;
+  _context-&gt;height = _h;
+  _context-&gt;pix_fmt = PIX_FMT_YUV420P;	//PIX_FMT_RGBA32
+  //_context-&gt;debug=1;
+
+  _internalBuffer = new uint8_t[w * h * 3];
+
+  _swapUV = 0;
+  //_context-&gt;strict_std_compliance=-1;
+
+  _showMv = 0;
+#define FF_SHOW		(FF_DEBUG_VIS_MV_P_FOR+	FF_DEBUG_VIS_MV_B_FOR+FF_DEBUG_VIS_MV_B_BACK)
+//#define FF_SHOW               (FF_DEBUG_VIS_MV_P_FOR)
+  printf (&quot;[lavc] Build: %d\n&quot;, LIBAVCODEC_BUILD);
+  _context-&gt;debug_mv |= FF_SHOW;
+  _context-&gt;debug |= FF_DEBUG_VIS_MB_TYPE + FF_DEBUG_VIS_QP;
+  
+}
+
+//_____________________________________________________
+
+decoderFF::~decoderFF ()
+{
+  if (_usingMT)
+    {
+      printf (&quot;[lavc] Killing decoding threads\n&quot;);
+      avcodec_thread_free (_context);
+      _usingMT = 0;
+    }
+
+  avcodec_close (_context);
+  ADM_dealloc (_context);
+  delete[]_internalBuffer;
+  printf (&quot;[lavc] Destroyed\n&quot;);
+}
+
+/**
+    \fn frameType
+    \return frametype of the last decoded frame
+*/
+uint32_t decoderFF::frameType (void)
+{
+  uint32_t
+    flag = 0;
+
+  AVFrame *
+    target;
+#define SET(x) {flag=x;aprintf(&quot;Frame is %s\n&quot;,#x);}
+
+
+  target = &amp;_frame;
+  switch (target-&gt;pict_type)
+    {
+    case FF_B_TYPE:
+      SET (AVI_B_FRAME);
+      if (target-&gt;key_frame)
+	aprintf (&quot;\n But keyframe is set\n&quot;);
+      break;
+
+    case FF_I_TYPE:
+      SET (AVI_KEY_FRAME);
+      if (!target-&gt;key_frame)
+	{
+	  if (codecId == CODEC_ID_H264)
+	    {
+	      SET (AVI_P_FRAME);
+	    }
+	  else
+	    printf (&quot;\n But keyframe is not set\n&quot;);
+	}
+      break;
+    case FF_S_TYPE:
+      _gmc = 1;			// No break, just inform that gmc is there
+    case FF_P_TYPE:
+      SET (AVI_P_FRAME);
+      if (target-&gt;key_frame)
+	aprintf (&quot;\n But keyframe is set\n&quot;);
+      break;
+    default:
+//                              printf(&quot;\n OOops XXX frame ?\n&quot;);
+      break;
+    }
+    flag&amp;=~AVI_STRUCTURE_TYPE_MASK;
+    if(target-&gt;interlaced_frame)
+    {
+        flag|=AVI_FIELD_STRUCTURE;
+        if(target-&gt;top_field_first)
+            flag|=AVI_TOP_FIELD;
+        else
+            flag|=AVI_BOTTOM_FIELD;
+    }
+  return flag;
+}
+bool decoderFF::decodeHeaderOnly (void)
+{
+  if (codecId == CODEC_ID_H264)
+    _context-&gt;hurry_up = 4;
+  else
+    _context-&gt;hurry_up = 5;
+  printf (&quot;\n[lavc] Hurry up\n&quot;);
+  return 1;
+}
+bool decoderFF::decodeFull (void)
+{
+  _context-&gt;hurry_up = 0;
+  printf (&quot;\n[lavc] full decoding\n&quot;);
+  return 1;
+}
+
+/**
+    \fn flush
+    \brief empty internal buffer
+*/
+bool    decoderFF::flush(void)
+{
+    if(_context)
+        avcodec_flush_buffers(_context);
+    return true;
+}
+/**
+    \fn uncompress
+    \brief Actually decode an image
+*/
+bool   decoderFF::uncompress (ADMCompressedImage * in, ADMImage * out)
+{
+  int got_picture = 0;
+  uint8_t *oBuff[3];
+  int strideTab[3];
+  int strideTab2[3];
+  int ret = 0;
+  out-&gt;_noPicture = 0;
+  if (_showMv)
+    {
+      _context-&gt;debug_mv |= FF_SHOW;
+      _context-&gt;debug |= 0;	//FF_DEBUG_VIS_MB_TYPE;
+    }
+  else
+    {
+      _context-&gt;debug_mv &amp;= ~FF_SHOW;
+      _context-&gt;debug &amp;= ~(FF_DEBUG_VIS_MB_TYPE + FF_DEBUG_VIS_QP);
+    }
+
+   
+    
+  if (in-&gt;dataLength == 0 &amp;&amp; !_allowNull)	// Null frame, silently skipped
+    {
+      
+      printf (&quot;[Codec] null frame\n&quot;);
+        // search the last image
+        if (_context-&gt;coded_frame &amp;&amp; 
+            _context-&gt;coded_frame-&gt;data &amp;&amp;
+            _context-&gt;coded_frame-&gt;data[0]
+            )
+          {
+            printf(&quot;[Codec] Cloning older pic\n&quot;);
+            clonePic (_context-&gt;coded_frame, out);
+            out-&gt;Pts=ADM_COMPRESSED_NO_PTS;
+          }
+        else
+            {
+                out-&gt;_noPicture = 1;
+                out-&gt;Pts=ADM_COMPRESSED_NO_PTS;
+                printf(&quot;[Codec] No Picture\n&quot;);
+            }
+          return 1;
+    }
+   // Put a safe value....
+   out-&gt;Pts=in-&gt;demuxerPts;
+    _context-&gt;reordered_opaque=in-&gt;demuxerPts;
+  //_frame.opaque=(void *)out-&gt;Pts;
+  //printf(&quot;Incoming Pts :%&quot;LLD&quot;\n&quot;,out-&gt;Pts);
+  AVPacket pkt;
+  av_init_packet(&amp;pkt);
+  pkt.data=in-&gt;data;
+  pkt.size=in-&gt;dataLength;
+  if(in-&gt;flags&amp;AVI_KEY_FRAME)
+    pkt.flags=AV_PKT_FLAG_KEY;
+  else
+    pkt.flags=0;
+  
+  ret = avcodec_decode_video2 (_context, &amp;_frame, &amp;got_picture, &amp;pkt);
+  if(!bFramePossible())
+  {
+    // No delay, the value is sure, no need to hide it in opaque
+    _context-&gt;reordered_opaque=(int64_t)in-&gt;demuxerPts;
+  }
+  out-&gt;_qStride = 0;		//Default = no quant
+  if (0 &gt; ret &amp;&amp; !_context-&gt;hurry_up)
+    {
+      printf (&quot;\n[lavc] error in lavcodec decoder!\n&quot;);
+      printf (&quot;[lavc] Err: %d, size :%d\n&quot;, ret, in-&gt;dataLength);
+      return 0;
+    }
+  if (!got_picture &amp;&amp; !_context-&gt;hurry_up)
+    {
+      // Some encoder code a vop header with the 
+      // vop flag set to 0
+      // it is meant to mean frame skipped but very dubious
+      if (in-&gt;dataLength &lt;= 8 &amp;&amp; codecId == CODEC_ID_MPEG4)
+	{
+	  printf (&quot;[lavc] Probably pseudo black frame...\n&quot;);
+	  out-&gt;_Qp = 2;
+	  out-&gt;flags = 0;	// assume P ?
+
+	  clonePic (_context-&gt;coded_frame, out);
+	  return 1;
+	}
+      // allow null means we allow null frame in and so potentially
+      // have no frame out for a time
+      // in that case silently fill with black and returns it as KF
+      if (_allowNull)
+	{
+	  out-&gt;flags = AVI_KEY_FRAME;
+	  if (!_refCopy)
+	    {
+            out-&gt;blacken();
+	    }
+	  else
+	    {
+	      out-&gt;_noPicture = 1;
+	    }
+	  printf (&quot;\n[lavc] ignoring got pict ==0\n&quot;);
+	  return 1;
+
+	}
+#if 0
+      printf (&quot;[lavc] Err: %d, size: %d\n&quot;, ret, in-&gt;dataLength);
+      printf (&quot;\n[lavc] error in FFMP43/mpeg4!: got picture\n&quot;);
+#endif
+      //GUI_Alert(&quot;Please retry with misc-&gt;Turbo off&quot;);
+      //return 1;
+      return 0;
+    }
+  if (_context-&gt;hurry_up)
+    {
+      out-&gt;flags = frameType ();
+      return 1;
+    }
+  // We have an image....
+  switch (_context-&gt;pix_fmt)
+    {
+    case PIX_FMT_YUV411P:
+      out-&gt;_colorspace = ADM_COLOR_YUV411;
+      break;
+    case PIX_FMT_YUYV422:
+      out-&gt;_colorspace = ADM_COLOR_YUV422;
+      break;
+    case PIX_FMT_YUV422P:
+    case PIX_FMT_YUVJ422P:
+      out-&gt;_colorspace = ADM_COLOR_YUV422P;
+      break;
+
+    case PIX_FMT_YUV444P:
+    case PIX_FMT_YUVJ444P:
+      out-&gt;_colorspace = ADM_COLOR_YUV444;
+      break;
+    case PIX_FMT_YUV420P:
+    case PIX_FMT_YUVJ420P:
+    case PIX_FMT_YUVA420P:
+      // Default is YV12 or I420
+      // In that case depending on swap u/v
+      // we do it or not
+      out-&gt;_colorspace = ADM_COLOR_YV12;
+      break;
+
+    case PIX_FMT_RGBA: // ???PIX_FMT_RGBA32:
+      out-&gt;_colorspace = ADM_COLOR_RGB32A;
+      break;
+    case PIX_FMT_RGB555:
+      out-&gt;_colorspace = ADM_COLOR_RGB555;
+      break;
+    case PIX_FMT_VDPAU_MPEG1:
+    case PIX_FMT_VDPAU_MPEG2:
+    case PIX_FMT_VDPAU_WMV3:
+    case PIX_FMT_VDPAU_VC1:
+    case PIX_FMT_VDPAU_H264:
+        out-&gt;_colorspace=ADM_COLOR_VDPAU;
+        break;
+    default:
+      printf (&quot;[lavc] Unhandled colorspace: %d\n&quot;, _context-&gt;pix_fmt);
+      return 0;
+    }
+    clonePic (&amp;_frame, out);
+    //printf(&quot;[AvCodec] Pts : %llu Out Pts:%llu \n&quot;,_frame.pts,out-&gt;Pts);
+
+  return 1;
+}
+// *******************************************************************
+// *******************************************************************
+// *******************************************************************
+
+decoderFFDiv3::decoderFFDiv3 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
+decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+  _refCopy = 1;			// YUV420 only
+  WRAP_Open (CODEC_ID_MSMPEG4V3);
+}
+
+decoderFFMpeg4::decoderFFMpeg4 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
+decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+// force low delay as avidemux don't handle B-frames
+  ADM_info (&quot;[lavc] Using %d bytes of extradata for MPEG4 decoder\n&quot;, (int)extraDataLen);
+  
+  _refCopy = 1;			// YUV420 only
+  _context-&gt;extradata = (uint8_t *) extraData;
+  _context-&gt;extradata_size = (int)extraDataLen  ;
+  _context-&gt;codec_tag=fcc;
+  _context-&gt;stream_codec_tag=fcc;
+  decoderMultiThread ();
+  //  _context-&gt;flags|=FF_DEBUG_VIS_MV;
+  WRAP_Open (CODEC_ID_MPEG4);
+}
+bool decoderFFMpeg4::uncompress (ADMCompressedImage * in, ADMImage * out)
+{
+    // For pseudo startcode
+    if(in-&gt;dataLength)
+    {
+        in-&gt;data[in-&gt;dataLength]=0;
+        in-&gt;data[in-&gt;dataLength+1]=0;
+    }
+    return decoderFF::uncompress(in,out);
+
+}
+//************************************
+decoderFFDV::decoderFFDV (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
+decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+  _context-&gt;extradata = (uint8_t *) extraData;
+  _context-&gt;extradata_size = (int) extraDataLen;
+  WRAP_Open (CODEC_ID_DVVIDEO);
+
+}
+decoderFFMpeg12::decoderFFMpeg12 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
+                decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+  _refCopy = 1;			// YUV420 only
+  decoderMultiThread ();
+  WRAP_Open (CODEC_ID_MPEG2VIDEO);
+}
+
+decoderFFPng::decoderFFPng(uint32_t w, uint32_t h, uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData, uint32_t bpp) : decoderFF(w, h, fcc, extraDataLen, extraData, bpp)
+{
+	WRAP_Open (CODEC_ID_PNG);
+}
+
+decoderFF_ffhuff::decoderFF_ffhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
+:decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+  _context-&gt;extradata = (uint8_t *) extraData;
+  _context-&gt;extradata_size = (int) extraDataLen;
+  _context-&gt;bits_per_coded_sample=bpp;
+  ADM_info (&quot;[lavc] FFhuff: We have %d bytes of extra data\n&quot;, (int)extraDataLen);
+  WRAP_Open (CODEC_ID_FFVHUFF);
+
+}
+decoderFFH264::decoderFFH264 (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp)
+        :decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+
+  _refCopy = 1;			// YUV420 only
+  _context-&gt;extradata = (uint8_t *) extraData;
+  _context-&gt;extradata_size = (int) extraDataLen;
+  decoderMultiThread ();
+  ADM_info (&quot;[lavc] Initializing H264 decoder with %d extradata\n&quot;, (int)extraDataLen);
+  WRAP_Open(CODEC_ID_H264);
+}
+//*********************
+extern &quot;C&quot; {int av_getAVCStreamInfo(AVCodecContext *avctx, uint32_t  *nalSize, uint32_t *isAvc);}
+/**
+    \fn uncompress
+*/
+bool   decoderFFH264::uncompress (ADMCompressedImage * in, ADMImage * out)
+{
+  if(!_context-&gt;hurry_up) return decoderFF::uncompress (in, out);
+    ADM_assert(0);
+#if 0  
+  uint32_t nalSize, isAvc;
+  av_getAVCStreamInfo(_context,&amp;nalSize,&amp;isAvc);
+  if(isAvc)
+  {
+      return extractH264FrameType(nalSize, in-&gt;data,in-&gt;dataLength,&amp;(out-&gt;flags));
+  }else
+  {
+    return extractH264FrameType_startCode(nalSize, in-&gt;data,in-&gt;dataLength,&amp;(out-&gt;flags));
+  }
+#endif
+}
+//*********************
+decoderFFhuff::decoderFFhuff (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
+decoderFF (w, h,fcc,extraDataLen,extraData,bpp)
+{
+  _context-&gt;extradata = (uint8_t *) extraData;
+  _context-&gt;extradata_size = (int) extraDataLen;
+  _context-&gt;bits_per_coded_sample = bpp;
+  WRAP_Open (CODEC_ID_HUFFYUV);
+}
+
+//***************
+extern uint8_t  lavformat_init(void);
+extern void     avcodec_init(void );
+extern  void    avcodec_register_all(void );
+extern &quot;C&quot;
+{
+  void adm_lavLogCallback(void  *instance, int level, const char* fmt, va_list list);
+}
+/**
+    \fn ADM_lavInit
+    \brief Init both lavcodec and lavformat
+*/
+void ADM_lavInit(void)
+{
+    avcodec_init();
+    avcodec_register_all();
+//BAZOOKA    lavformat_init();
+    av_log_set_callback(adm_lavLogCallback);
+#ifdef ADM_DEBUG
+  //  av_log_set_level(AV_LOG_DEBUG);
+#endif
+
+}
+void adm_lavLogCallback(void  *instance, int level, const char* fmt, va_list list)
+{
+   // if(level&gt;1) return;
+    char buf[256];
+  
+    vsnprintf(buf, sizeof(buf), fmt, list);
+    printf(&quot;[lavc] %s&quot;,buf);
+}
+
+void ADM_lavDestroy(void)
+{
+	//av_free_static();
+}
+
+// EOF

Deleted: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_png.cpp
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_png.cpp	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/ADM_png.cpp	2010-09-25 10:02:51 UTC (rev 6640)
@@ -1,184 +0,0 @@
-/***************************************************************************
-                          ADM_png.cpp  -  description
-                             -------------------
-    begin                : Sat Sep 28 2002
-    copyright            : (C) 2002 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &quot;ADM_default.h&quot;
-#include &lt;math.h&gt;
-#include &quot;ADM_codec.h&quot;
-#include &quot;ADM_png.h&quot;
-extern &quot;C&quot;
-{
-#include &quot;png.h&quot;
-}
-
-#define PNG_PTR ((png_structp)png_ptr)
-#define INFO_PTR ((png_infop)info_ptr)
-#define INFO_END ((png_infop)end_info)
-/*
-   	Initialize codec
-*/
-static void user_read_data (png_structp png_ptr, png_bytep data, png_size_t length);
-/**
-    \fn Recalc
-*/
-void decoderPng::recalc (void)
-{
-  int mul;
-  if (colorspace == ADM_COLOR_RGB24)
-    mul = 3;
-
-  else
-    mul = 4;
-  for (int i = 0; i &lt; _h; i++)
-    rows[i] = decoded + mul * _w * i;
-}
-
-/**
-    \fn decoderPng
-*/
-decoderPng::decoderPng (uint32_t w, uint32_t h,uint32_t fcc, uint32_t extraDataLen, uint8_t *extraData,uint32_t bpp):
-                    decoders (w, h,fcc,extraDataLen,extraData,bpp)
-{
-  rows = NULL;
-  decoded = NULL;
-  colorspace = ADM_COLOR_RGB24;
-
-  //****************************
-  // Prepare the decoded buffer*
-  //****************************
-  decoded = new uint8_t[4 * w * h];	// We take a bit more to be able to decode 32 bits png
-  // without causing a segfault
-  rows = new uint8_t *[h];
-  recalc ();
-}
-/**
-    \fn Init
-*/
- void decoderPng::Init (void)
-{
-  png_ptr =    (void *) png_create_read_struct (PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
-  ADM_assert (png_ptr);
-  info_ptr = (void *) png_create_info_struct (PNG_PTR);
-  ADM_assert (info_ptr);
-  end_info = (void *) png_create_info_struct (PNG_PTR);
-  ADM_assert (end_info);
-  memset (&amp;io, 0, sizeof (io));
-  png_set_read_fn (PNG_PTR, &amp;io, user_read_data);
-  png_set_rows (PNG_PTR, INFO_PTR, (png_byte **) rows);
-}
-/**
-    \fn Cleanup
-*/
-void decoderPng::Cleanup (void)
-{
-  png_destroy_read_struct ((png_structpp) &amp; png_ptr, (png_infopp) &amp; info_ptr,
-			   (png_infopp) &amp; end_info);
-}
-/**
-    \fn dtor
-*/
-decoderPng::~decoderPng ()
-{
-  delete[]rows;
-  delete[]decoded;
-}
-/**
-    \fn uncompress
-   	\brief Uncompress frame, set flags if needed
-*/
-bool decoderPng::uncompress(ADMCompressedImage * in, ADMImage * out)
-{
-  int bpp;
-  int colortype;
-
-  // Check if it is png, and fill it
-  if (!!png_sig_cmp (in-&gt;data, 0, 8))
-
-    {
-      ADM_warning (&quot;[PNG] wrong sig\n&quot;);
-      return false;
-    }
-
-  //
-  //
-gain2:
-  Init ();
-  io.data = in-&gt;data;
-  io.size = in-&gt;dataLength;
-  io.cur = 0;
-  png_read_png (PNG_PTR, INFO_PTR, PNG_TRANSFORM_IDENTITY, NULL);
-
-  // Check if it is 24 or 32 bits RGB 
-  bpp = png_get_bit_depth (PNG_PTR, INFO_PTR);
-//   printf(&quot;Bpp:%u\n&quot;,bpp);
-  // if needed we change colorspace 
-  colortype = png_get_color_type (PNG_PTR, INFO_PTR);
-  // 
-  if (colorspace == ADM_COLOR_RGB24 &amp;&amp; colortype == PNG_COLOR_TYPE_RGB_ALPHA)	// RGB32
-    {
-
-      // Switch to 32 bits
-      colorspace = ADM_COLOR_RGB32A;
-      recalc ();
-      goto gain2;
-    }
-
-  else if (colorspace == ADM_COLOR_RGB32A &amp;&amp; colortype == PNG_COLOR_TYPE_RGB)
-
-    {
-
-      // Switch to 24 bits
-      colorspace = ADM_COLOR_RGB24;
-      recalc ();
-      goto gain2;
-    }
-  ADM_assert (out-&gt;isRef());
-  ADMImageRef *ref=out-&gt;castToRef();
-  ref-&gt;_planes[0] = decoded;
-  ref-&gt;_planes[1] = NULL;
-  ref-&gt;_planes[2] = NULL;
-  if (colorspace == ADM_COLOR_RGB32A)
-    ref-&gt;_planeStride[0] = _w * 4;
-
-  else
-    ref-&gt;_planeStride[0] = _w * 3;
-  ref-&gt;_planeStride[1] = 0;
-  ref-&gt;_planeStride[2] = 0;
-  ref-&gt;_colorspace = colorspace;
-  Cleanup ();
-  return true;
-}
-
-// ******************************************************
-//    Memory based IO
-// ******************************************************
-void user_read_data (png_structp png_ptr, png_bytep data, png_size_t length)
-{
-  memAccess *ac;
-  ac = (memAccess *) png_get_io_ptr (png_ptr);
-  ADM_assert (length + ac-&gt;cur &lt;= ac-&gt;size);	// or &lt; ?
-  memcpy (data, ac-&gt;data + ac-&gt;cur, length);
-  ac-&gt;cur += length;
-} 
-
-void user_write_data (png_structp png_ptr, png_bytep data, png_size_t length)
-{
-} 
-
-void user_flush_data (png_structp png_ptr)
-{
-}
-//EOF

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreVideoCodec/src/CMakeLists.txt	2010-09-25 10:02:51 UTC (rev 6640)
@@ -1,17 +1,14 @@
 SET(ADM_codecs_SRCS 
 ADM_codecs.cpp
-ADM_png.cpp
 ADM_ffmp43.cpp
 ADM_codecFFsimple.cpp
 ADM_rgb16.cpp
 ADM_uyvy.cpp
-ADM_png.cpp
 ADM_codecSearch.cpp
 DIA_lavDecoder.cpp
 )
 
 ADD_LIBRARY(ADM_coreVideoCodec6 SHARED ${ADM_codecs_SRCS})
-ADD_SOURCE_CFLAGS(ADM_png.cpp ${PNG_CFLAGS})
 TARGET_LINK_LIBRARIES(ADM_coreVideoCodec6 
                                           ADM_core6
                                           ADM_coreImage6 
@@ -20,7 +17,6 @@
                                           ADM_libavcodec6
                                           ADM_libavformat6
                                           ADM_libavutil6)
-TARGET_LINK_LIBRARIES(ADM_coreVideoCodec6 ${PNG_LIBRARIES})
 ADM_INSTALL_LIB(ADM_coreVideoCodec6)
 
 REMOVE_DEFINITIONS(-DHAVE_CONFIG_H)

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/config.h	2010-09-25 10:02:51 UTC (rev 6640)
@@ -1,599 +1,599 @@
-#include &quot;ADM_coreConfig.h&quot;
-#define CONFIG_H263_VAAPI_HWACCEL 0
-#define CONFIG_MPEG2_VAAPI_HWACCEL 0
-#define CONFIG_MPEG4_VAAPI_HWACCEL 0
-#define CONFIG_VC1_VAAPI_HWACCEL 0
-#define CONFIG_WMV3_VAAPI_HWACCEL 0
-#define CONFIG_H264_DXVA2_HWACCEL 0
-#define CONFIG_H264_VAAPI_HWACCEL 0
-#define CONFIG_VC1_DXVA2_HWACCEL 0
-#define CONFIG_VC1_DXVA2_HWACCEL 0
-#define CONFIG_WMV3_DXVA2_HWACCEL 0
-#define CONFIG_MPEG2_DXVA2_HWACCEL 0
-#ifdef USE_VDPAU
-#define CONFIG_H264_VDPAU_DECODER 1
-#define CONFIG_MPEG_VDPAU_DECODER 1
-#define CONFIG_MPEG1_VDPAU_DECODER 1
-#define CONFIG_VC1_VDPAU_DECODER 1
-#define CONFIG_WMV3_VDPAU_DECODER 1
-#else // USE_VDPAU
-#define CONFIG_H264_VDPAU_DECODER 0
-#define CONFIG_MPEG_VDPAU_DECODER 0
-#define CONFIG_MPEG1_VDPAU_DECODER 0
-#define CONFIG_VC1_VDPAU_DECODER 0
-#define CONFIG_WMV3_VDPAU_DECODER 0
-#endif // 
-#define CONFIG_MPEG4_VDPAU_DECODER 0
-#ifdef HAVE_MALLOC_H
-#undef HAVE_MALLOC_H 
-#define HAVE_MALLOC_H 1
-#else // HAVE_MALLOC_H
-#define HAVE_MALLOC_H 0
-#endif// HAVE_MALLOC_H
-#define CONFIG_SVQ1_DECODER 1
-#define CONFIG_AAC_DECODER 1
-#define CONFIG_MPEG4AAC_DECODER 1
-#define CONFIG_DCA_DECODER 1
-#define CONFIG_MP3_DECODER 1
-#define CONFIG_MP2_DECODER 1
-#define CONFIG_AC3_DECODER 1
-#define CONFIG_EAC3_DECODER 1
-#define CONFIG_NELLYMOSER_DECODER 1
-#define CONFIG_ADPCM_IMA_AMV_DECODER 1
-#define CONFIG_CINEPAK_DECODER 1
-#define CONFIG_DNXHD_DECODER 1
-#define CONFIG_FOURXM_DECODER 1
-#define CONFIG_FRAPS_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_H264_DECODER 1
-#define CONFIG_INDEO2_DECODER 1
-#define CONFIG_INDEO3_DECODER 1
-#define CONFIG_INTERPLAY_VIDEO_DECODER 1
-#define CONFIG_MPEGVIDEO_DECODER 1
-#define CONFIG_MSVIDEO1_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_VCR1_DECODER 1
-#define CONFIG_VP5_DECODER 1
-#define CONFIG_VP6_DECODER 1
-#define CONFIG_VP6A_DECODER 1
-#define CONFIG_VP6F_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_WMV1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_VP3_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_MSMPEG4V1_DECODER 1
-#define CONFIG_MSMPEG4V2_DECODER 1
-#define CONFIG_MSMPEG4V3_DECODER 1
-#define CONFIG_MJPEGB_DECODER 1
-#define CONFIG_MJPEG_DECODER 1
-#define CONFIG_WMAV2_DECODER 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_HUFFYUV_DECODER 1
-#define CONFIG_FFVHUFF_DECODER 1
-#define CONFIG_SVQ3_DECODER 1
-#define CONFIG_TSCC_DECODER 1
-#define CONFIG_QDM2_DECODER 1
-#define CONFIG_FFV1_DECODER 1
-#define CONFIG_MPEG1VIDEO_DECODER 1
-#define CONFIG_MPEG2VIDEO_DECODER 1
-#define CONFIG_RV10_DECODER 1
-#define CONFIG_RV20_DECODER 1
-#define CONFIG_DVBSUB_DECODER 1
-#define CONFIG_FLV_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_AMV_DECODER 1
-#define CONFIG_INDEO5_DECODER 1
-#define CONFIG_MP1FLOAT_DECODER 1
-#define CONFIG_MP2FLOAT_DECODER 1
-#define CONFIG_MP3FLOAT_DECODER 1
-#define CONFIG_INDEO5_DECODER 1
-#define CONFIG_INDEO5_DECODER 1
-#define CONFIG_VP8_DECODER 1
-#define CONFIG_LIBVPX_DECODER 0
-#define CONFIG_GSM_MS_DECODER 0
-#define CONFIG_GSM_DECODER 0
-#define CONFIG_ANSI_DECODER 0
-#define CONFIG_PICTOR_DECODER 0
-#define CONFIG_MP3ADUFLOAT_DECODER 0
-#define CONFIG_MP3ON4FLOAT_DECODER 0
-#define CONFIG_CDGRAPHICS_DECODER 0
-#define CONFIG_ANM_DECODER 0
-#define CONFIG_AURA_DECODER 0
-#define CONFIG_AURA2_DECODER 0
-#define CONFIG_BINK_DECODER 0
-#define CONFIG_FRWU_DECODER 0
-#define CONFIG_IFF_BYTERUN1_DECODER 0
-#define CONFIG_IFF_ILBM_DECODER 0
-#define CONFIG_KGV1_DECODER 0
-#define CONFIG_R210_DECODER 0
-#define CONFIG_YOP_DECODER 0
-#define CONFIG_KGV1_DECODER 0
-#define CONFIG_ALS_DECODER 0
-#define CONFIG_AMRNB_DECODER 0
-#define CONFIG_ATRAC1_DECODER 0
-#define CONFIG_BINKAUDIO_DCT_DECODER 0
-#define CONFIG_BINKAUDIO_RDFT_DECODER 0
-#define CONFIG_ATRAC1_DECODER 0
-#define CONFIG_SIPR_DECODER 0
-#define CONFIG_TWINVQ_DECODER 0
-#define CONFIG_WMAPRO_DECODER 0
-#define CONFIG_WMAVOICE_DECODER 0
-#define CONFIG_PCM_BLURAY_DECODER 0
-#define CONFIG_PGSSUB_DECODER 0
-#define CONFIG_DPX_DECODER 0
-#define CONFIG_EAMAD_DECODER 0
-#define CONFIG_TMV_DECODER 0
-#define CONFIG_V210_DECODER 0
-#define CONFIG_LIBOPENCORE_AMRNB_DECODER 0
-#define CONFIG_LIBOPENCORE_AMRWB_DECODER 0
-#define CONFIG_LIBSPEEX_DECODER 0
-#define CONFIG_LIBSCHROEDINGER_DECODER 0
-#define CONFIG_LIBOPENJPEG_DECODER 0
-#define CONFIG_LIBDIRAC_DECODER 0
-#define CONFIG_ADPCM_IMA_ISS_DECODER 0
-#define CONFIG_ADPCM_EA_MAXIS_XA_DECODER 0
-#define CONFIG_PCM_F64LE_DECODER 0
-#define CONFIG_PCM_F64BE_DECODER 0
-#define CONFIG_PCM_F32LE_DECODER 0
-#define CONFIG_PCM_F32BE_DECODER 0
-#define CONFIG_PCM_DVD_DECODER 0
-#define CONFIG_TRUEHD_DECODER 0
-#define CONFIG_QCELP_DECODER 0
-#define CONFIG_MP1_DECODER 0
-#define CONFIG_MLP_DECODER 0
-#define CONFIG_ALAC_DECODER 0
-#define CONFIG_PGMYUV_DECODER 0
-#define CONFIG_PPM_DECODER 0
-#define CONFIG_EATGV_DECODER 0
-#define CONFIG_EATQI_DECODER 0
-#define CONFIG_EIGHTSVX_EXP_DECODER 0
-#define CONFIG_EIGHTSVX_FIB_DECODER 0
-#define CONFIG_ESCAPE124_DECODER 0
-#define CONFIG_MIMIC_DECODER 0
-#define CONFIG_MOTIONPIXELS_DECODER 0
-#define CONFIG_PAM_DECODER 0
-#define CONFIG_PBM_DECODER 0
-#define CONFIG_PGM_DECODER 0
-#define CONFIG_RL2_DECODER 0
-#define CONFIG_RV30_DECODER 0
-#define CONFIG_RV40_DECODER 0
-#define CONFIG_V210X_DECODER 0
-#define CONFIG_BFI_DECODER 0
-#define CONFIG_EACMV_DECODER 0
-#define CONFIG_EATGQ_DECODER 0
-#define CONFIG_PCX_DECODER 0
-#define CONFIG_SUNRAST_DECODER 0
-#define CONFIG_VB_DECODER 0
-#define CONFIG_XSUB_DECODER 0
-#define CONFIG_APE_DECODER 0
-#define CONFIG_MPC8_DECODER 0
-#define CONFIG_PCM_S16LE_PLANAR_DECODER 0
-#define CONFIG_PCM_ZORK_DECODER 0
-#define CONFIG_ADPCM_EA_R1_DECODER 0
-#define CONFIG_ADPCM_EA_R2_DECODER 0
-#define CONFIG_ADPCM_EA_R3_DECODER 0
-#define CONFIG_ADPCM_EA_XAS_DECODER 0
-#define CONFIG_ADPCM_IMA_EA_EACS_DECODER 0
-#define CONFIG_ADPCM_IMA_EA_SEAD_DECODER 0
-#define CONFIG_AASC_DECODER 0
-#define CONFIG_AVS_DECODER 0
-#define CONFIG_BETHSOFTVID_DECODER 0
-#define CONFIG_C93_DECODER 0
-#define CONFIG_CAVS_DECODER 0
-#define CONFIG_CLJR_DECODER 0
-#define CONFIG_CSCD_DECODER 0
-#define CONFIG_CYUV_DECODER 0
-#define CONFIG_DSICINVIDEO_DECODER 0
-#define CONFIG_DXA_DECODER 0
-#define CONFIG_EIGHTBPS_DECODER 0
-#define CONFIG_FLIC_DECODER 0
-#define CONFIG_IDCIN_DECODER 0
-#define CONFIG_KMVC_DECODER 0
-#define CONFIG_LOCO_DECODER 0
-#define CONFIG_MDEC_DECODER 0
-#define CONFIG_MMVIDEO_DECODER 0
-#define CONFIG_MPEG_XVMC_DECODER 0
-#define CONFIG_MSRLE_DECODER 0
-#define CONFIG_MSZH_DECODER 0
-#define CONFIG_NUV_DECODER 0
-#define CONFIG_PTX_DECODER 0
-#define CONFIG_QDRAW_DECODER 0
-#define CONFIG_QPEG_DECODER 0
-#define CONFIG_RPZA_DECODER 0
-#define CONFIG_SMACKER_DECODER 0
-#define CONFIG_SMC_DECODER 0
-#define CONFIG_SP5X_DECODER 0
-#define CONFIG_THEORA_DECODER 0
-#define CONFIG_THP_DECODER 0
-#define CONFIG_TIERTEXSEQVIDEO_DECODER 0
-#define CONFIG_TRUEMOTION1_DECODER 0
-#define CONFIG_TRUEMOTION2_DECODER 0
-#define CONFIG_TXD_DECODER 0
-#define CONFIG_ULTI_DECODER 0
-#define CONFIG_VMDVIDEO_DECODER 0
-#define CONFIG_VMNC_DECODER 0
-#define CONFIG_VQA_DECODER 0
-#define CONFIG_WNV1_DECODER 0
-#define CONFIG_XAN_WC3_DECODER 0
-#define CONFIG_XL_DECODER 0
-#define CONFIG_ALAC_DECODER 0
-#define CONFIG_ATRAC3_DECODER 0
-#define CONFIG_COOK_DECODER 0
-#define CONFIG_DSICINAUDIO_DECODER 0
-#define CONFIG_IMC_DECODER 0
-#define CONFIG_LIBA52_DECODER 0
-#define CONFIG_LIBFAAD_DECODER 0
-#define CONFIG_MACE3_DECODER 0
-#define CONFIG_MACE6_DECODER 0
-#define CONFIG_MP3ADU_DECODER 0
-#define CONFIG_MP3ON4_DECODER 0
-#define CONFIG_MPC7_DECODER 0
-#define CONFIG_RA_144_DECODER 0
-#define CONFIG_RA_288_DECODER 0
-#define CONFIG_SHORTEN_DECODER 0
-#define CONFIG_SMACKAUD_DECODER 0
-#define CONFIG_TRUESPEECH_DECODER 0
-#define CONFIG_TTA_DECODER 0
-#define CONFIG_VMDAUDIO_DECODER 0
-#define CONFIG_WAVPACK_DECODER 0
-#define CONFIG_WS_SND1_DECODER 0
-#define CONFIG_INTERPLAY_DPCM_DECODER 0
-#define CONFIG_SOL_DPCM_DECODER 0
-#define CONFIG_XAN_DPCM_DECODER 0
-#define CONFIG_ADPCM_THP_DECODER 0
-#define CONFIG_ASV1_DECODER 0
-#define CONFIG_ASV2_DECODER 0
-#define CONFIG_BMP_DECODER 0
-#define CONFIG_FLASHSV_DECODER 0
-#define CONFIG_GIF_DECODER 0
-#define CONFIG_H261_DECODER 0
-#define CONFIG_H263I_DECODER 0
-#define CONFIG_JPEGLS_DECODER 0
-#define CONFIG_PNG_DECODER 0
-#define CONFIG_QTRLE_DECODER 0
-#define CONFIG_RAWVIDEO_DECODER 0
-#define CONFIG_ROQ_DECODER 0
-#define CONFIG_SGI_DECODER 0
-#define CONFIG_TARGA_DECODER 0
-#define CONFIG_TIFF_DECODER 0
-#define CONFIG_ZLIB_DECODER 0
-#define CONFIG_ZMBV_DECODER 0
-#define CONFIG_FLAC_DECODER 0
-#define CONFIG_LIBAMR_NB_DECODER 0
-#define CONFIG_LIBAMR_WB_DECODER 0
-#define CONFIG_LIBGSM_DECODER 0
-#define CONFIG_LIBGSM_MS_DECODER 0
-#define CONFIG_SONIC_DECODER 0
-#define CONFIG_VORBIS_DECODER 0
-#define CONFIG_WMAV1_DECODER 0
-#define CONFIG_PCM_ALAW_DECODER 0
-#define CONFIG_PCM_MULAW_DECODER 0
-#define CONFIG_PCM_S8_DECODER 0
-#define CONFIG_PCM_S16BE_DECODER 0
-#define CONFIG_PCM_S16LE_DECODER 0
-#define CONFIG_PCM_S24BE_DECODER 0
-#define CONFIG_PCM_S24DAUD_DECODER 0
-#define CONFIG_PCM_S24LE_DECODER 0
-#define CONFIG_PCM_S32BE_DECODER 0
-#define CONFIG_PCM_S32LE_DECODER 0
-#define CONFIG_PCM_U8_DECODER 0
-#define CONFIG_PCM_U16BE_DECODER 0
-#define CONFIG_PCM_U16LE_DECODER 0
-#define CONFIG_PCM_U24BE_DECODER 0
-#define CONFIG_PCM_U24LE_DECODER 0
-#define CONFIG_PCM_U32BE_DECODER 0
-#define CONFIG_PCM_U32LE_DECODER 0
-#define CONFIG_ROQ_DPCM_DECODER 0
-#define CONFIG_ADPCM_4XM_DECODER 0
-#define CONFIG_ADPCM_ADX_DECODER 0
-#define CONFIG_ADPCM_CT_DECODER 0
-#define CONFIG_ADPCM_EA_DECODER 0
-#define CONFIG_ADPCM_G726_DECODER 0
-#define CONFIG_ADPCM_IMA_DK3_DECODER 0
-#define CONFIG_ADPCM_IMA_DK4_DECODER 0
-#define CONFIG_ADPCM_IMA_QT_DECODER 0
-#define CONFIG_ADPCM_IMA_SMJPEG_DECODER 0
-#define CONFIG_ADPCM_IMA_WAV_DECODER 0
-#define CONFIG_ADPCM_IMA_WS_DECODER 0
-#define CONFIG_ADPCM_MS_DECODER 0
-#define CONFIG_ADPCM_SBPRO_2_DECODER 0
-#define CONFIG_ADPCM_SBPRO_3_DECODER 0
-#define CONFIG_ADPCM_SBPRO_4_DECODER 0
-#define CONFIG_ADPCM_SWF_DECODER 0
-#define CONFIG_ADPCM_XA_DECODER 0
-#define CONFIG_ADPCM_YAMAHA_DECODER 0
-#define CONFIG_DVDSUB_DECODER 0
-#define CONFIG_LIBVORBIS_DECODER 0
-#define CONFIG_VP8_PARSER 1
-#define CONFIG_AAC_PARSER 1
-#define CONFIG_H263_PARSER 1
-#define CONFIG_H264_PARSER 1
-#define CONFIG_MPEG4VIDEO_PARSER 1
-#define CONFIG_AC3_PARSER 0
-#define CONFIG_CAVSVIDEO_PARSER 0
-#define CONFIG_DCA_PARSER 0
-#define CONFIG_DVBSUB_PARSER 0
-#define CONFIG_DVDSUB_PARSER 0
-#define CONFIG_H261_PARSER 0
-#define CONFIG_MJPEG_PARSER 0
-#define CONFIG_MPEGAUDIO_PARSER 0
-#define CONFIG_MPEGVIDEO_PARSER 0
-#define CONFIG_PNM_PARSER 0
-#define CONFIG_VC1_PARSER 0
-#define CONFIG_VP3_PARSER 0
-#define CONFIG_DNXHD_PARSER 0
-#define CONFIG_DIRAC_PARSER 0
-#define CONFIG_AAC_ENCODER 1
-#define CONFIG_MJPEG_ENCODER 1
-#define CONFIG_MSMPEG4V3_ENCODER 1
-#define CONFIG_H263P_ENCODER 1
-#define CONFIG_AC3_ENCODER 1
-#define CONFIG_FFV1_ENCODER 1
-#define CONFIG_FLV1_ENCODER 1
-#define CONFIG_FFVHUFF_ENCODER 1
-#define CONFIG_H263_ENCODER 1
-#define CONFIG_MPEG1VIDEO_ENCODER 1
-#define CONFIG_MPEG2VIDEO_ENCODER 1
-#define CONFIG_MPEG4_ENCODER 1
-#define CONFIG_FLV_ENCODER 1
-#define CONFIG_MP2_ENCODER 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_HUFFYUV_ENCODER 1
-#define CONFIG_DVBSUB_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_LIBVPX_ENCODER 0
-#define CONFIG_RA_144_ENCODER 0
-#define CONFIG_XSUB_ENCODER 0
-#define CONFIG_V210_ENCODER 0
-#define CONFIG_LIBOPENCORE_AMRNB_ENCODER 0
-#define CONFIG_LIBSCHROEDINGER_ENCODER 0
-#define CONFIG_LIBDIRAC_ENCODER 0
-#define CONFIG_PCM_F64LE_ENCODER 0
-#define CONFIG_PCM_F64BE_ENCODER 0
-#define CONFIG_PCM_F32BE_ENCODER 0
-#define CONFIG_PCM_F32LE_ENCODER 0
-#define CONFIG_NELLYMOSER_ENCODER 0
-#define CONFIG_ALAC_ENCODER 0
-#define CONFIG_PCX_ENCODER 0
-#define CONFIG_DNXHD_ENCODER 0
-#define CONFIG_PCM_ZORK_ENCODER 0
-#define CONFIG_ADPCM_IMA_AMV_ENCODER 0
-#define CONFIG_LIBX264_ENCODER 0
-#define CONFIG_LIBXVID_ENCODER 0
-#define CONFIG_LJPEG_ENCODER 0
-#define CONFIG_PAM_ENCODER 0
-#define CONFIG_PBM_ENCODER 0
-#define CONFIG_PGM_ENCODER 0
-#define CONFIG_PGMYUV_ENCODER 0
-#define CONFIG_PPM_ENCODER 0
-#define CONFIG_LIBFAAC_ENCODER 0
-#define CONFIG_LIBMP3LAME_ENCODER 0
-#define CONFIG_LIBTHEORA_ENCODER 0
-#define CONFIG_SONIC_LS_ENCODER 0
-#define CONFIG_ASV1_ENCODER 0
-#define CONFIG_ASV2_ENCODER 0
-#define CONFIG_BMP_ENCODER 0
-#define CONFIG_FLASHSV_ENCODER 0
-#define CONFIG_GIF_ENCODER 0
-#define CONFIG_H261_ENCODER 0
-#define CONFIG_JPEGLS_ENCODER 0
-#define CONFIG_MSMPEG4V1_ENCODER 0
-#define CONFIG_MSMPEG4V2_ENCODER 0
-#define CONFIG_PNG_ENCODER 0
-#define CONFIG_QTRLE_ENCODER 0
-#define CONFIG_RAWVIDEO_ENCODER 0
-#define CONFIG_ROQ_ENCODER 0
-#define CONFIG_RV10_ENCODER 0
-#define CONFIG_RV20_ENCODER 0
-#define CONFIG_SGI_ENCODER 0
-#define CONFIG_SVQ1_ENCODER 0
-#define CONFIG_TARGA_ENCODER 0
-#define CONFIG_TIFF_ENCODER 0
-#define CONFIG_WMV1_ENCODER 0
-#define CONFIG_WMV2_ENCODER 0
-#define CONFIG_ZLIB_ENCODER 0
-#define CONFIG_ZMBV_ENCODER 0
-#define CONFIG_FLAC_ENCODER 0
-#define CONFIG_LIBAMR_NB_ENCODER 0
-#define CONFIG_LIBAMR_WB_ENCODER 0
-#define CONFIG_LIBGSM_ENCODER 0
-#define CONFIG_LIBGSM_MS_ENCODER 0
-#define CONFIG_SONIC_ENCODER 0
-#define CONFIG_VORBIS_ENCODER 0
-#define CONFIG_WMAV1_ENCODER 0
-#define CONFIG_WMAV2_ENCODER 0
-#define CONFIG_PCM_ALAW_ENCODER 0
-#define CONFIG_PCM_MULAW_ENCODER 0
-#define CONFIG_PCM_S8_ENCODER 0
-#define CONFIG_PCM_S16BE_ENCODER 0
-#define CONFIG_PCM_S16LE_ENCODER 0
-#define CONFIG_PCM_S24BE_ENCODER 0
-#define CONFIG_PCM_S24DAUD_ENCODER 0
-#define CONFIG_PCM_S24LE_ENCODER 0
-#define CONFIG_PCM_S32BE_ENCODER 0
-#define CONFIG_PCM_S32LE_ENCODER 0
-#define CONFIG_PCM_U8_ENCODER 0
-#define CONFIG_PCM_U16BE_ENCODER 0
-#define CONFIG_PCM_U16LE_ENCODER 0
-#define CONFIG_PCM_U24BE_ENCODER 0
-#define CONFIG_PCM_U24LE_ENCODER 0
-#define CONFIG_PCM_U32BE_ENCODER 0
-#define CONFIG_PCM_U32LE_ENCODER 0
-#define CONFIG_ROQ_DPCM_ENCODER 0
-#define CONFIG_ADPCM_4XM_ENCODER 0
-#define CONFIG_ADPCM_ADX_ENCODER 0
-#define CONFIG_ADPCM_CT_ENCODER 0
-#define CONFIG_ADPCM_EA_ENCODER 0
-#define CONFIG_ADPCM_G726_ENCODER 0
-#define CONFIG_ADPCM_IMA_DK3_ENCODER 0
-#define CONFIG_ADPCM_IMA_DK4_ENCODER 0
-#define CONFIG_ADPCM_IMA_QT_ENCODER 0
-#define CONFIG_ADPCM_IMA_SMJPEG_ENCODER 0
-#define CONFIG_ADPCM_IMA_WAV_ENCODER 0
-#define CONFIG_ADPCM_IMA_WS_ENCODER 0
-#define CONFIG_ADPCM_MS_ENCODER 0
-#define CONFIG_ADPCM_SBPRO_2_ENCODER 0
-#define CONFIG_ADPCM_SBPRO_3_ENCODER 0
-#define CONFIG_ADPCM_SBPRO_4_ENCODER 0
-#define CONFIG_ADPCM_SWF_ENCODER 0
-#define CONFIG_ADPCM_XA_ENCODER 0
-#define CONFIG_ADPCM_YAMAHA_ENCODER 0
-#define CONFIG_DVDSUB_ENCODER 0
-#define CONFIG_LIBVORBIS_ENCODER 0
-#define CONFIG_CHOMP_BSF 0
-#define CONFIG_AAC_ADTSTOASC_BSF 0
-#define CONFIG_MP3_HEADER_COMPRESS_BSF 0
-#define CONFIG_IMX_DUMP_HEADER_BSF 0
-#define CONFIG_DUMP_EXTRADATA_BSF 0
-#define CONFIG_REMOVE_EXTRADATA_BSF 0
-#define CONFIG_NOISE_BSF 0
-#define CONFIG_MP3_HEADER_DECOMPRESS_BSF 0
-#define CONFIG_MJPEGA_DUMP_HEADER_BSF 0
-#define CONFIG_H264_MP4TOANNEXB_BSF 0
-#define CONFIG_MOV2TEXTSUB_BSF 0
-#define CONFIG_TEXT2MOVSUB_BSF 0
-#define CONFIG_MUXERS 1
-#define CONFIG_MATROSKA_MUXER 1
-#define CONFIG_WEBM_MUXER 1
-#define CONFIG_MOV_MUXER 1
-#define CONFIG_IPOD_MUXER 1
-#define CONFIG_MP4_MUXER 1
-#define CONFIG_PSP_MUXER 1
-#define CONFIG_TG2_MUXER 1
-#define CONFIG_TGP_MUXER 1
-#define CONFIG_MPEG1VCD_MUXER 1
-#define CONFIG_MPEG2SVCD_MUXER 1
-#define CONFIG_MPEG2DVD_MUXER 1
-#define CONFIG_MPEG2VOB_MUXER 1
-#define CONFIG_W64_DEMUXER 0
-#define CONFIG_ENCODERS 1
-#define CONFIG_DVVIDEO_ENCODER 1
-#define CONFIG_SNOW_ENCODER 1
-#define CONFIG_DECODERS 1
-#define CONFIG_DVVIDEO_DECODER 1
-#define CONFIG_H263_DECODER 1
-#define CONFIG_MPEG4_DECODER 1
-#define CONFIG_SNOW_DECODER 1
-#define CONFIG_VC1_DECODER 1
-#define CONFIG_WMV2_DECODER 1
-#define CONFIG_WMV3_DECODER 1
-#define CONFIG_SWSCALE_ALPHA 0
-#define CONFIG_MPEGAUDIO_HP 1
-#define CONFIG_ZLIB 1
-#define CONFIG_GPL 1
-#define CONFIG_ARMV4L 0
-#define CONFIG_MLIB 0
-#define CONFIG_SPARC 0
-#define CONFIG_ALPHA 0
-#define CONFIG_MMI 0
-#define CONFIG_SH4 0
-#define CONFIG_BFIN 0
-#define CONFIG_SMALL 0
-#define CONFIG_MLP_PARSER 0
-//****************** SYSTEM *******************
-#	define ARCH_ARM 0
-#	define ARCH_ALPHA 0
-#	define ARCH_PPC 0
-#	define ARCH_SH4 0
-#	define ARCH_BFIN 0
-#	define HAVE_MMI 0
-#	define HAVE_VIS 0
-#	define CONFIG_GRAY 0
-#	define HAVE_TRUNCF 1
-#ifdef __APPLE__
-#	define CONFIG_DARWIN 1
-#endif
-#if defined(ADM_CPU_X86_32)
-#	define ARCH_X86 1
-#	define ARCH_X86_32 1
-#	define ARCH_X86_64 0
-#	define HAVE_ALTIVEC 0
-#elif defined(ADM_CPU_X86_64)
-#	define ARCH_X86 1
-#	define ARCH_X86_64 1
-#	define HAVE_ALTIVEC 0
-#elif defined(ADM_CPU_PPC)
-#	define ARCH_POWERPC 1
-#ifdef ADM_CPU_ALTIVEC
-#	define HAVE_ALTIVEC 1
-#ifndef __APPLE__
-#	define HAVE_ALTIVEC_H 1
-#endif	// __APPLE__
-#endif	// ADM_CPU_ALTIVEC
-#ifdef ADM_CPU_DCBZL
-#	define HAVE_DCBZL 1
-#endif	// ADM_CPU_DCBZL
-#endif	// ADM_CPU_X86_32
-#ifndef ADM_MINIMAL_INCLUDE
-#if defined(ADM_CPU_X86_32) &amp;&amp; defined(ADM_CPU_MMX2)
-#	define HAVE_MMX2 1
-#endif
-#ifdef ADM_CPU_SSSE3
-#	define HAVE_SSSE3 1
-#endif
-#endif //ADM_MINIMAL_INCLUDE
-#ifdef ARCH_POWERPC
-#	define ENABLE_POWERPC 1
-#else
-#	define ENABLE_POWERPC 0
-#endif
-#ifdef ARCH_X86
-#	define ENABLE_BSWAP 1
-#ifndef ADM_MINIMAL_INCLUDE
-#	define HAVE_MMX 1
-#	define HAVE_SSE 1
-#	define HAVE_AMD3DNOW 1
-#	define HAVE_AMD3DNOWEXT 1
-#	define ENABLE_MMX 1
-#endif //ADM_MINIMAL_INCLUDE
-#	define HAVE_FAST_UNALIGNED 1
-#	define HAVE_EBP_AVAILABLE 1
-#	define HAVE_EBX_AVAILABLE 1
-#else
-#	define ENABLE_MMX 0
-#	define HAVE_SSE 0
-#	define HAVE_AMD3DNOW 0
-#	define HAVE_AMD3DNOWEXT 0
-#endif
-#ifdef ARCH_X86_64
-#	define HAVE_FAST_64BIT 1
-#endif
-#ifdef ADM_BIG_ENDIAN
-#	define WORDS_BIGENDIAN 1
-#endif
-#ifdef USE_YASM
-#define ENABLE_YASM      1
-#define HAVE_YASM        1
-#else // USE_YASM
-#define ENABLE_YASM      0
-#define HAVE_YASM        0
-#endif // USE_YASM
-#define CONFIG_FILE_PROTOCOL  1
-#define CONFIG_MDCT     1
-#define CONFIG_DCT      1
-#define CONFIG_LPC      1
-#define CONFIG_H264DSP  1
-#define ENABLE_ARM      0
-#define ENABLE_PPC      0
-#define ENABLE_THREADS 1
-#define ENABLE_ENCODERS 1
-#define CONFIG_MUXERS 1
-#define CONFIG_DEMUXERS 1
-#define ENABLE_VIS 0
-#define ENABLE_GRAY 0
-#define HAVE_LRINTF 1
-#define HAVE_LLRINT 1
-#define HAVE_LRINT 1
-#define HAVE_LOG2 1
-#define HAVE_ROUND 1
-#define HAVE_ROUNDF 1
-#define HAVE_THREADS 1
-#define RUNTIME_CPUDETECT 1
-#define CONFIG_RUNTIME_CPUDETECT 1
-#if defined( __MINGW32__) || defined(__APPLE__)
-#define EXTERN_PREFIX &quot;_&quot;
-#else // __MINGW32__
-#define EXTERN_PREFIX
-#endif // __MINGW32__
-#define restrict __restrict__
+#include &quot;ADM_coreConfig.h&quot;
+#define CONFIG_H263_VAAPI_HWACCEL 0
+#define CONFIG_MPEG2_VAAPI_HWACCEL 0
+#define CONFIG_MPEG4_VAAPI_HWACCEL 0
+#define CONFIG_VC1_VAAPI_HWACCEL 0
+#define CONFIG_WMV3_VAAPI_HWACCEL 0
+#define CONFIG_H264_DXVA2_HWACCEL 0
+#define CONFIG_H264_VAAPI_HWACCEL 0
+#define CONFIG_VC1_DXVA2_HWACCEL 0
+#define CONFIG_VC1_DXVA2_HWACCEL 0
+#define CONFIG_WMV3_DXVA2_HWACCEL 0
+#define CONFIG_MPEG2_DXVA2_HWACCEL 0
+#ifdef USE_VDPAU
+#define CONFIG_H264_VDPAU_DECODER 1
+#define CONFIG_MPEG_VDPAU_DECODER 1
+#define CONFIG_MPEG1_VDPAU_DECODER 1
+#define CONFIG_VC1_VDPAU_DECODER 1
+#define CONFIG_WMV3_VDPAU_DECODER 1
+#else // USE_VDPAU
+#define CONFIG_H264_VDPAU_DECODER 0
+#define CONFIG_MPEG_VDPAU_DECODER 0
+#define CONFIG_MPEG1_VDPAU_DECODER 0
+#define CONFIG_VC1_VDPAU_DECODER 0
+#define CONFIG_WMV3_VDPAU_DECODER 0
+#endif // 
+#define CONFIG_MPEG4_VDPAU_DECODER 0
+#ifdef HAVE_MALLOC_H
+#undef HAVE_MALLOC_H 
+#define HAVE_MALLOC_H 1
+#else // HAVE_MALLOC_H
+#define HAVE_MALLOC_H 0
+#endif// HAVE_MALLOC_H
+#define CONFIG_SVQ1_DECODER 1
+#define CONFIG_AAC_DECODER 1
+#define CONFIG_MPEG4AAC_DECODER 1
+#define CONFIG_DCA_DECODER 1
+#define CONFIG_MP3_DECODER 1
+#define CONFIG_MP2_DECODER 1
+#define CONFIG_AC3_DECODER 1
+#define CONFIG_EAC3_DECODER 1
+#define CONFIG_NELLYMOSER_DECODER 1
+#define CONFIG_ADPCM_IMA_AMV_DECODER 1
+#define CONFIG_CINEPAK_DECODER 1
+#define CONFIG_DNXHD_DECODER 1
+#define CONFIG_FOURXM_DECODER 1
+#define CONFIG_FRAPS_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_H264_DECODER 1
+#define CONFIG_INDEO2_DECODER 1
+#define CONFIG_INDEO3_DECODER 1
+#define CONFIG_INTERPLAY_VIDEO_DECODER 1
+#define CONFIG_MPEGVIDEO_DECODER 1
+#define CONFIG_MSVIDEO1_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_VCR1_DECODER 1
+#define CONFIG_VP5_DECODER 1
+#define CONFIG_VP6_DECODER 1
+#define CONFIG_VP6A_DECODER 1
+#define CONFIG_VP6F_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_WMV1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_VP3_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_MSMPEG4V1_DECODER 1
+#define CONFIG_MSMPEG4V2_DECODER 1
+#define CONFIG_MSMPEG4V3_DECODER 1
+#define CONFIG_MJPEGB_DECODER 1
+#define CONFIG_MJPEG_DECODER 1
+#define CONFIG_WMAV2_DECODER 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_HUFFYUV_DECODER 1
+#define CONFIG_FFVHUFF_DECODER 1
+#define CONFIG_SVQ3_DECODER 1
+#define CONFIG_TSCC_DECODER 1
+#define CONFIG_QDM2_DECODER 1
+#define CONFIG_FFV1_DECODER 1
+#define CONFIG_MPEG1VIDEO_DECODER 1
+#define CONFIG_MPEG2VIDEO_DECODER 1
+#define CONFIG_RV10_DECODER 1
+#define CONFIG_RV20_DECODER 1
+#define CONFIG_DVBSUB_DECODER 1
+#define CONFIG_FLV_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_AMV_DECODER 1
+#define CONFIG_INDEO5_DECODER 1
+#define CONFIG_MP1FLOAT_DECODER 1
+#define CONFIG_MP2FLOAT_DECODER 1
+#define CONFIG_MP3FLOAT_DECODER 1
+#define CONFIG_INDEO5_DECODER 1
+#define CONFIG_INDEO5_DECODER 1
+#define CONFIG_VP8_DECODER 1
+#define CONFIG_PNG_DECODER 1
+#define CONFIG_LIBVPX_DECODER 0
+#define CONFIG_GSM_MS_DECODER 0
+#define CONFIG_GSM_DECODER 0
+#define CONFIG_ANSI_DECODER 0
+#define CONFIG_PICTOR_DECODER 0
+#define CONFIG_MP3ADUFLOAT_DECODER 0
+#define CONFIG_MP3ON4FLOAT_DECODER 0
+#define CONFIG_CDGRAPHICS_DECODER 0
+#define CONFIG_ANM_DECODER 0
+#define CONFIG_AURA_DECODER 0
+#define CONFIG_AURA2_DECODER 0
+#define CONFIG_BINK_DECODER 0
+#define CONFIG_FRWU_DECODER 0
+#define CONFIG_IFF_BYTERUN1_DECODER 0
+#define CONFIG_IFF_ILBM_DECODER 0
+#define CONFIG_KGV1_DECODER 0
+#define CONFIG_R210_DECODER 0
+#define CONFIG_YOP_DECODER 0
+#define CONFIG_KGV1_DECODER 0
+#define CONFIG_ALS_DECODER 0
+#define CONFIG_AMRNB_DECODER 0
+#define CONFIG_ATRAC1_DECODER 0
+#define CONFIG_BINKAUDIO_DCT_DECODER 0
+#define CONFIG_BINKAUDIO_RDFT_DECODER 0
+#define CONFIG_ATRAC1_DECODER 0
+#define CONFIG_SIPR_DECODER 0
+#define CONFIG_TWINVQ_DECODER 0
+#define CONFIG_WMAPRO_DECODER 0
+#define CONFIG_WMAVOICE_DECODER 0
+#define CONFIG_PCM_BLURAY_DECODER 0
+#define CONFIG_PGSSUB_DECODER 0
+#define CONFIG_DPX_DECODER 0
+#define CONFIG_EAMAD_DECODER 0
+#define CONFIG_TMV_DECODER 0
+#define CONFIG_V210_DECODER 0
+#define CONFIG_LIBOPENCORE_AMRNB_DECODER 0
+#define CONFIG_LIBOPENCORE_AMRWB_DECODER 0
+#define CONFIG_LIBSPEEX_DECODER 0
+#define CONFIG_LIBSCHROEDINGER_DECODER 0
+#define CONFIG_LIBOPENJPEG_DECODER 0
+#define CONFIG_LIBDIRAC_DECODER 0
+#define CONFIG_ADPCM_IMA_ISS_DECODER 0
+#define CONFIG_ADPCM_EA_MAXIS_XA_DECODER 0
+#define CONFIG_PCM_F64LE_DECODER 0
+#define CONFIG_PCM_F64BE_DECODER 0
+#define CONFIG_PCM_F32LE_DECODER 0
+#define CONFIG_PCM_F32BE_DECODER 0
+#define CONFIG_PCM_DVD_DECODER 0
+#define CONFIG_TRUEHD_DECODER 0
+#define CONFIG_QCELP_DECODER 0
+#define CONFIG_MP1_DECODER 0
+#define CONFIG_MLP_DECODER 0
+#define CONFIG_ALAC_DECODER 0
+#define CONFIG_PGMYUV_DECODER 0
+#define CONFIG_PPM_DECODER 0
+#define CONFIG_EATGV_DECODER 0
+#define CONFIG_EATQI_DECODER 0
+#define CONFIG_EIGHTSVX_EXP_DECODER 0
+#define CONFIG_EIGHTSVX_FIB_DECODER 0
+#define CONFIG_ESCAPE124_DECODER 0
+#define CONFIG_MIMIC_DECODER 0
+#define CONFIG_MOTIONPIXELS_DECODER 0
+#define CONFIG_PAM_DECODER 0
+#define CONFIG_PBM_DECODER 0
+#define CONFIG_PGM_DECODER 0
+#define CONFIG_RL2_DECODER 0
+#define CONFIG_RV30_DECODER 0
+#define CONFIG_RV40_DECODER 0
+#define CONFIG_V210X_DECODER 0
+#define CONFIG_BFI_DECODER 0
+#define CONFIG_EACMV_DECODER 0
+#define CONFIG_EATGQ_DECODER 0
+#define CONFIG_PCX_DECODER 0
+#define CONFIG_SUNRAST_DECODER 0
+#define CONFIG_VB_DECODER 0
+#define CONFIG_XSUB_DECODER 0
+#define CONFIG_APE_DECODER 0
+#define CONFIG_MPC8_DECODER 0
+#define CONFIG_PCM_S16LE_PLANAR_DECODER 0
+#define CONFIG_PCM_ZORK_DECODER 0
+#define CONFIG_ADPCM_EA_R1_DECODER 0
+#define CONFIG_ADPCM_EA_R2_DECODER 0
+#define CONFIG_ADPCM_EA_R3_DECODER 0
+#define CONFIG_ADPCM_EA_XAS_DECODER 0
+#define CONFIG_ADPCM_IMA_EA_EACS_DECODER 0
+#define CONFIG_ADPCM_IMA_EA_SEAD_DECODER 0
+#define CONFIG_AASC_DECODER 0
+#define CONFIG_AVS_DECODER 0
+#define CONFIG_BETHSOFTVID_DECODER 0
+#define CONFIG_C93_DECODER 0
+#define CONFIG_CAVS_DECODER 0
+#define CONFIG_CLJR_DECODER 0
+#define CONFIG_CSCD_DECODER 0
+#define CONFIG_CYUV_DECODER 0
+#define CONFIG_DSICINVIDEO_DECODER 0
+#define CONFIG_DXA_DECODER 0
+#define CONFIG_EIGHTBPS_DECODER 0
+#define CONFIG_FLIC_DECODER 0
+#define CONFIG_IDCIN_DECODER 0
+#define CONFIG_KMVC_DECODER 0
+#define CONFIG_LOCO_DECODER 0
+#define CONFIG_MDEC_DECODER 0
+#define CONFIG_MMVIDEO_DECODER 0
+#define CONFIG_MPEG_XVMC_DECODER 0
+#define CONFIG_MSRLE_DECODER 0
+#define CONFIG_MSZH_DECODER 0
+#define CONFIG_NUV_DECODER 0
+#define CONFIG_PTX_DECODER 0
+#define CONFIG_QDRAW_DECODER 0
+#define CONFIG_QPEG_DECODER 0
+#define CONFIG_RPZA_DECODER 0
+#define CONFIG_SMACKER_DECODER 0
+#define CONFIG_SMC_DECODER 0
+#define CONFIG_SP5X_DECODER 0
+#define CONFIG_THEORA_DECODER 0
+#define CONFIG_THP_DECODER 0
+#define CONFIG_TIERTEXSEQVIDEO_DECODER 0
+#define CONFIG_TRUEMOTION1_DECODER 0
+#define CONFIG_TRUEMOTION2_DECODER 0
+#define CONFIG_TXD_DECODER 0
+#define CONFIG_ULTI_DECODER 0
+#define CONFIG_VMDVIDEO_DECODER 0
+#define CONFIG_VMNC_DECODER 0
+#define CONFIG_VQA_DECODER 0
+#define CONFIG_WNV1_DECODER 0
+#define CONFIG_XAN_WC3_DECODER 0
+#define CONFIG_XL_DECODER 0
+#define CONFIG_ALAC_DECODER 0
+#define CONFIG_ATRAC3_DECODER 0
+#define CONFIG_COOK_DECODER 0
+#define CONFIG_DSICINAUDIO_DECODER 0
+#define CONFIG_IMC_DECODER 0
+#define CONFIG_LIBA52_DECODER 0
+#define CONFIG_LIBFAAD_DECODER 0
+#define CONFIG_MACE3_DECODER 0
+#define CONFIG_MACE6_DECODER 0
+#define CONFIG_MP3ADU_DECODER 0
+#define CONFIG_MP3ON4_DECODER 0
+#define CONFIG_MPC7_DECODER 0
+#define CONFIG_RA_144_DECODER 0
+#define CONFIG_RA_288_DECODER 0
+#define CONFIG_SHORTEN_DECODER 0
+#define CONFIG_SMACKAUD_DECODER 0
+#define CONFIG_TRUESPEECH_DECODER 0
+#define CONFIG_TTA_DECODER 0
+#define CONFIG_VMDAUDIO_DECODER 0
+#define CONFIG_WAVPACK_DECODER 0
+#define CONFIG_WS_SND1_DECODER 0
+#define CONFIG_INTERPLAY_DPCM_DECODER 0
+#define CONFIG_SOL_DPCM_DECODER 0
+#define CONFIG_XAN_DPCM_DECODER 0
+#define CONFIG_ADPCM_THP_DECODER 0
+#define CONFIG_ASV1_DECODER 0
+#define CONFIG_ASV2_DECODER 0
+#define CONFIG_BMP_DECODER 0
+#define CONFIG_FLASHSV_DECODER 0
+#define CONFIG_GIF_DECODER 0
+#define CONFIG_H261_DECODER 0
+#define CONFIG_H263I_DECODER 0
+#define CONFIG_JPEGLS_DECODER 0
+#define CONFIG_QTRLE_DECODER 0
+#define CONFIG_RAWVIDEO_DECODER 0
+#define CONFIG_ROQ_DECODER 0
+#define CONFIG_SGI_DECODER 0
+#define CONFIG_TARGA_DECODER 0
+#define CONFIG_TIFF_DECODER 0
+#define CONFIG_ZLIB_DECODER 0
+#define CONFIG_ZMBV_DECODER 0
+#define CONFIG_FLAC_DECODER 0
+#define CONFIG_LIBAMR_NB_DECODER 0
+#define CONFIG_LIBAMR_WB_DECODER 0
+#define CONFIG_LIBGSM_DECODER 0
+#define CONFIG_LIBGSM_MS_DECODER 0
+#define CONFIG_SONIC_DECODER 0
+#define CONFIG_VORBIS_DECODER 0
+#define CONFIG_WMAV1_DECODER 0
+#define CONFIG_PCM_ALAW_DECODER 0
+#define CONFIG_PCM_MULAW_DECODER 0
+#define CONFIG_PCM_S8_DECODER 0
+#define CONFIG_PCM_S16BE_DECODER 0
+#define CONFIG_PCM_S16LE_DECODER 0
+#define CONFIG_PCM_S24BE_DECODER 0
+#define CONFIG_PCM_S24DAUD_DECODER 0
+#define CONFIG_PCM_S24LE_DECODER 0
+#define CONFIG_PCM_S32BE_DECODER 0
+#define CONFIG_PCM_S32LE_DECODER 0
+#define CONFIG_PCM_U8_DECODER 0
+#define CONFIG_PCM_U16BE_DECODER 0
+#define CONFIG_PCM_U16LE_DECODER 0
+#define CONFIG_PCM_U24BE_DECODER 0
+#define CONFIG_PCM_U24LE_DECODER 0
+#define CONFIG_PCM_U32BE_DECODER 0
+#define CONFIG_PCM_U32LE_DECODER 0
+#define CONFIG_ROQ_DPCM_DECODER 0
+#define CONFIG_ADPCM_4XM_DECODER 0
+#define CONFIG_ADPCM_ADX_DECODER 0
+#define CONFIG_ADPCM_CT_DECODER 0
+#define CONFIG_ADPCM_EA_DECODER 0
+#define CONFIG_ADPCM_G726_DECODER 0
+#define CONFIG_ADPCM_IMA_DK3_DECODER 0
+#define CONFIG_ADPCM_IMA_DK4_DECODER 0
+#define CONFIG_ADPCM_IMA_QT_DECODER 0
+#define CONFIG_ADPCM_IMA_SMJPEG_DECODER 0
+#define CONFIG_ADPCM_IMA_WAV_DECODER 0
+#define CONFIG_ADPCM_IMA_WS_DECODER 0
+#define CONFIG_ADPCM_MS_DECODER 0
+#define CONFIG_ADPCM_SBPRO_2_DECODER 0
+#define CONFIG_ADPCM_SBPRO_3_DECODER 0
+#define CONFIG_ADPCM_SBPRO_4_DECODER 0
+#define CONFIG_ADPCM_SWF_DECODER 0
+#define CONFIG_ADPCM_XA_DECODER 0
+#define CONFIG_ADPCM_YAMAHA_DECODER 0
+#define CONFIG_DVDSUB_DECODER 0
+#define CONFIG_LIBVORBIS_DECODER 0
+#define CONFIG_VP8_PARSER 1
+#define CONFIG_AAC_PARSER 1
+#define CONFIG_H263_PARSER 1
+#define CONFIG_H264_PARSER 1
+#define CONFIG_MPEG4VIDEO_PARSER 1
+#define CONFIG_AC3_PARSER 0
+#define CONFIG_CAVSVIDEO_PARSER 0
+#define CONFIG_DCA_PARSER 0
+#define CONFIG_DVBSUB_PARSER 0
+#define CONFIG_DVDSUB_PARSER 0
+#define CONFIG_H261_PARSER 0
+#define CONFIG_MJPEG_PARSER 0
+#define CONFIG_MPEGAUDIO_PARSER 0
+#define CONFIG_MPEGVIDEO_PARSER 0
+#define CONFIG_PNM_PARSER 0
+#define CONFIG_VC1_PARSER 0
+#define CONFIG_VP3_PARSER 0
+#define CONFIG_DNXHD_PARSER 0
+#define CONFIG_DIRAC_PARSER 0
+#define CONFIG_AAC_ENCODER 1
+#define CONFIG_MJPEG_ENCODER 1
+#define CONFIG_MSMPEG4V3_ENCODER 1
+#define CONFIG_H263P_ENCODER 1
+#define CONFIG_AC3_ENCODER 1
+#define CONFIG_FFV1_ENCODER 1
+#define CONFIG_FLV1_ENCODER 1
+#define CONFIG_FFVHUFF_ENCODER 1
+#define CONFIG_H263_ENCODER 1
+#define CONFIG_MPEG1VIDEO_ENCODER 1
+#define CONFIG_MPEG2VIDEO_ENCODER 1
+#define CONFIG_MPEG4_ENCODER 1
+#define CONFIG_FLV_ENCODER 1
+#define CONFIG_MP2_ENCODER 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_HUFFYUV_ENCODER 1
+#define CONFIG_DVBSUB_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_LIBVPX_ENCODER 0
+#define CONFIG_RA_144_ENCODER 0
+#define CONFIG_XSUB_ENCODER 0
+#define CONFIG_V210_ENCODER 0
+#define CONFIG_LIBOPENCORE_AMRNB_ENCODER 0
+#define CONFIG_LIBSCHROEDINGER_ENCODER 0
+#define CONFIG_LIBDIRAC_ENCODER 0
+#define CONFIG_PCM_F64LE_ENCODER 0
+#define CONFIG_PCM_F64BE_ENCODER 0
+#define CONFIG_PCM_F32BE_ENCODER 0
+#define CONFIG_PCM_F32LE_ENCODER 0
+#define CONFIG_NELLYMOSER_ENCODER 0
+#define CONFIG_ALAC_ENCODER 0
+#define CONFIG_PCX_ENCODER 0
+#define CONFIG_DNXHD_ENCODER 0
+#define CONFIG_PCM_ZORK_ENCODER 0
+#define CONFIG_ADPCM_IMA_AMV_ENCODER 0
+#define CONFIG_LIBX264_ENCODER 0
+#define CONFIG_LIBXVID_ENCODER 0
+#define CONFIG_LJPEG_ENCODER 0
+#define CONFIG_PAM_ENCODER 0
+#define CONFIG_PBM_ENCODER 0
+#define CONFIG_PGM_ENCODER 0
+#define CONFIG_PGMYUV_ENCODER 0
+#define CONFIG_PPM_ENCODER 0
+#define CONFIG_LIBFAAC_ENCODER 0
+#define CONFIG_LIBMP3LAME_ENCODER 0
+#define CONFIG_LIBTHEORA_ENCODER 0
+#define CONFIG_SONIC_LS_ENCODER 0
+#define CONFIG_ASV1_ENCODER 0
+#define CONFIG_ASV2_ENCODER 0
+#define CONFIG_BMP_ENCODER 0
+#define CONFIG_FLASHSV_ENCODER 0
+#define CONFIG_GIF_ENCODER 0
+#define CONFIG_H261_ENCODER 0
+#define CONFIG_JPEGLS_ENCODER 0
+#define CONFIG_MSMPEG4V1_ENCODER 0
+#define CONFIG_MSMPEG4V2_ENCODER 0
+#define CONFIG_PNG_ENCODER 0
+#define CONFIG_QTRLE_ENCODER 0
+#define CONFIG_RAWVIDEO_ENCODER 0
+#define CONFIG_ROQ_ENCODER 0
+#define CONFIG_RV10_ENCODER 0
+#define CONFIG_RV20_ENCODER 0
+#define CONFIG_SGI_ENCODER 0
+#define CONFIG_SVQ1_ENCODER 0
+#define CONFIG_TARGA_ENCODER 0
+#define CONFIG_TIFF_ENCODER 0
+#define CONFIG_WMV1_ENCODER 0
+#define CONFIG_WMV2_ENCODER 0
+#define CONFIG_ZLIB_ENCODER 0
+#define CONFIG_ZMBV_ENCODER 0
+#define CONFIG_FLAC_ENCODER 0
+#define CONFIG_LIBAMR_NB_ENCODER 0
+#define CONFIG_LIBAMR_WB_ENCODER 0
+#define CONFIG_LIBGSM_ENCODER 0
+#define CONFIG_LIBGSM_MS_ENCODER 0
+#define CONFIG_SONIC_ENCODER 0
+#define CONFIG_VORBIS_ENCODER 0
+#define CONFIG_WMAV1_ENCODER 0
+#define CONFIG_WMAV2_ENCODER 0
+#define CONFIG_PCM_ALAW_ENCODER 0
+#define CONFIG_PCM_MULAW_ENCODER 0
+#define CONFIG_PCM_S8_ENCODER 0
+#define CONFIG_PCM_S16BE_ENCODER 0
+#define CONFIG_PCM_S16LE_ENCODER 0
+#define CONFIG_PCM_S24BE_ENCODER 0
+#define CONFIG_PCM_S24DAUD_ENCODER 0
+#define CONFIG_PCM_S24LE_ENCODER 0
+#define CONFIG_PCM_S32BE_ENCODER 0
+#define CONFIG_PCM_S32LE_ENCODER 0
+#define CONFIG_PCM_U8_ENCODER 0
+#define CONFIG_PCM_U16BE_ENCODER 0
+#define CONFIG_PCM_U16LE_ENCODER 0
+#define CONFIG_PCM_U24BE_ENCODER 0
+#define CONFIG_PCM_U24LE_ENCODER 0
+#define CONFIG_PCM_U32BE_ENCODER 0
+#define CONFIG_PCM_U32LE_ENCODER 0
+#define CONFIG_ROQ_DPCM_ENCODER 0
+#define CONFIG_ADPCM_4XM_ENCODER 0
+#define CONFIG_ADPCM_ADX_ENCODER 0
+#define CONFIG_ADPCM_CT_ENCODER 0
+#define CONFIG_ADPCM_EA_ENCODER 0
+#define CONFIG_ADPCM_G726_ENCODER 0
+#define CONFIG_ADPCM_IMA_DK3_ENCODER 0
+#define CONFIG_ADPCM_IMA_DK4_ENCODER 0
+#define CONFIG_ADPCM_IMA_QT_ENCODER 0
+#define CONFIG_ADPCM_IMA_SMJPEG_ENCODER 0
+#define CONFIG_ADPCM_IMA_WAV_ENCODER 0
+#define CONFIG_ADPCM_IMA_WS_ENCODER 0
+#define CONFIG_ADPCM_MS_ENCODER 0
+#define CONFIG_ADPCM_SBPRO_2_ENCODER 0
+#define CONFIG_ADPCM_SBPRO_3_ENCODER 0
+#define CONFIG_ADPCM_SBPRO_4_ENCODER 0
+#define CONFIG_ADPCM_SWF_ENCODER 0
+#define CONFIG_ADPCM_XA_ENCODER 0
+#define CONFIG_ADPCM_YAMAHA_ENCODER 0
+#define CONFIG_DVDSUB_ENCODER 0
+#define CONFIG_LIBVORBIS_ENCODER 0
+#define CONFIG_CHOMP_BSF 0
+#define CONFIG_AAC_ADTSTOASC_BSF 0
+#define CONFIG_MP3_HEADER_COMPRESS_BSF 0
+#define CONFIG_IMX_DUMP_HEADER_BSF 0
+#define CONFIG_DUMP_EXTRADATA_BSF 0
+#define CONFIG_REMOVE_EXTRADATA_BSF 0
+#define CONFIG_NOISE_BSF 0
+#define CONFIG_MP3_HEADER_DECOMPRESS_BSF 0
+#define CONFIG_MJPEGA_DUMP_HEADER_BSF 0
+#define CONFIG_H264_MP4TOANNEXB_BSF 0
+#define CONFIG_MOV2TEXTSUB_BSF 0
+#define CONFIG_TEXT2MOVSUB_BSF 0
+#define CONFIG_MUXERS 1
+#define CONFIG_MATROSKA_MUXER 1
+#define CONFIG_WEBM_MUXER 1
+#define CONFIG_MOV_MUXER 1
+#define CONFIG_IPOD_MUXER 1
+#define CONFIG_MP4_MUXER 1
+#define CONFIG_PSP_MUXER 1
+#define CONFIG_TG2_MUXER 1
+#define CONFIG_TGP_MUXER 1
+#define CONFIG_MPEG1VCD_MUXER 1
+#define CONFIG_MPEG2SVCD_MUXER 1
+#define CONFIG_MPEG2DVD_MUXER 1
+#define CONFIG_MPEG2VOB_MUXER 1
+#define CONFIG_W64_DEMUXER 0
+#define CONFIG_ENCODERS 1
+#define CONFIG_DVVIDEO_ENCODER 1
+#define CONFIG_SNOW_ENCODER 1
+#define CONFIG_DECODERS 1
+#define CONFIG_DVVIDEO_DECODER 1
+#define CONFIG_H263_DECODER 1
+#define CONFIG_MPEG4_DECODER 1
+#define CONFIG_SNOW_DECODER 1
+#define CONFIG_VC1_DECODER 1
+#define CONFIG_WMV2_DECODER 1
+#define CONFIG_WMV3_DECODER 1
+#define CONFIG_SWSCALE_ALPHA 0
+#define CONFIG_MPEGAUDIO_HP 1
+#define CONFIG_ZLIB 1
+#define CONFIG_GPL 1
+#define CONFIG_ARMV4L 0
+#define CONFIG_MLIB 0
+#define CONFIG_SPARC 0
+#define CONFIG_ALPHA 0
+#define CONFIG_MMI 0
+#define CONFIG_SH4 0
+#define CONFIG_BFIN 0
+#define CONFIG_SMALL 0
+#define CONFIG_MLP_PARSER 0
+//****************** SYSTEM *******************
+#	define ARCH_ARM 0
+#	define ARCH_ALPHA 0
+#	define ARCH_PPC 0
+#	define ARCH_SH4 0
+#	define ARCH_BFIN 0
+#	define HAVE_MMI 0
+#	define HAVE_VIS 0
+#	define CONFIG_GRAY 0
+#	define HAVE_TRUNCF 1
+#ifdef __APPLE__
+#	define CONFIG_DARWIN 1
+#endif
+#if defined(ADM_CPU_X86_32)
+#	define ARCH_X86 1
+#	define ARCH_X86_32 1
+#	define ARCH_X86_64 0
+#	define HAVE_ALTIVEC 0
+#elif defined(ADM_CPU_X86_64)
+#	define ARCH_X86 1
+#	define ARCH_X86_64 1
+#	define HAVE_ALTIVEC 0
+#elif defined(ADM_CPU_PPC)
+#	define ARCH_POWERPC 1
+#ifdef ADM_CPU_ALTIVEC
+#	define HAVE_ALTIVEC 1
+#ifndef __APPLE__
+#	define HAVE_ALTIVEC_H 1
+#endif	// __APPLE__
+#endif	// ADM_CPU_ALTIVEC
+#ifdef ADM_CPU_DCBZL
+#	define HAVE_DCBZL 1
+#endif	// ADM_CPU_DCBZL
+#endif	// ADM_CPU_X86_32
+#ifndef ADM_MINIMAL_INCLUDE
+#if defined(ADM_CPU_X86_32) &amp;&amp; defined(ADM_CPU_MMX2)
+#	define HAVE_MMX2 1
+#endif
+#ifdef ADM_CPU_SSSE3
+#	define HAVE_SSSE3 1
+#endif
+#endif //ADM_MINIMAL_INCLUDE
+#ifdef ARCH_POWERPC
+#	define ENABLE_POWERPC 1
+#else
+#	define ENABLE_POWERPC 0
+#endif
+#ifdef ARCH_X86
+#	define ENABLE_BSWAP 1
+#ifndef ADM_MINIMAL_INCLUDE
+#	define HAVE_MMX 1
+#	define HAVE_SSE 1
+#	define HAVE_AMD3DNOW 1
+#	define HAVE_AMD3DNOWEXT 1
+#	define ENABLE_MMX 1
+#endif //ADM_MINIMAL_INCLUDE
+#	define HAVE_FAST_UNALIGNED 1
+#	define HAVE_EBP_AVAILABLE 1
+#	define HAVE_EBX_AVAILABLE 1
+#else
+#	define ENABLE_MMX 0
+#	define HAVE_SSE 0
+#	define HAVE_AMD3DNOW 0
+#	define HAVE_AMD3DNOWEXT 0
+#endif
+#ifdef ARCH_X86_64
+#	define HAVE_FAST_64BIT 1
+#endif
+#ifdef ADM_BIG_ENDIAN
+#	define WORDS_BIGENDIAN 1
+#endif
+#ifdef USE_YASM
+#define ENABLE_YASM      1
+#define HAVE_YASM        1
+#else // USE_YASM
+#define ENABLE_YASM      0
+#define HAVE_YASM        0
+#endif // USE_YASM
+#define CONFIG_FILE_PROTOCOL  1
+#define CONFIG_MDCT     1
+#define CONFIG_DCT      1
+#define CONFIG_LPC      1
+#define CONFIG_H264DSP  1
+#define ENABLE_ARM      0
+#define ENABLE_PPC      0
+#define ENABLE_THREADS 1
+#define ENABLE_ENCODERS 1
+#define CONFIG_MUXERS 1
+#define CONFIG_DEMUXERS 1
+#define ENABLE_VIS 0
+#define ENABLE_GRAY 0
+#define HAVE_LRINTF 1
+#define HAVE_LLRINT 1
+#define HAVE_LRINT 1
+#define HAVE_LOG2 1
+#define HAVE_ROUND 1
+#define HAVE_ROUNDF 1
+#define HAVE_THREADS 1
+#define RUNTIME_CPUDETECT 1
+#define CONFIG_RUNTIME_CPUDETECT 1
+#if defined( __MINGW32__) || defined(__APPLE__)
+#define EXTERN_PREFIX &quot;_&quot;
+#else // __MINGW32__
+#define EXTERN_PREFIX
+#endif // __MINGW32__
+#define restrict __restrict__

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/ffmpeg_config/ffconf.c	2010-09-25 10:02:51 UTC (rev 6640)
@@ -8,49 +8,49 @@
 {
 	printf(&quot;#include \&quot;ADM_coreConfig.h\&quot;\n&quot;);
 
-
-// VDPAU
+
+// VDPAU
 #define DECLARE_HW(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_HWACCEL 0\n&quot;);
     DECLARE_HW(H263_VAAPI,nellymoser);
     DECLARE_HW(MPEG2_VAAPI,nellymoser);
     DECLARE_HW(MPEG4_VAAPI,nellymoser);
     DECLARE_HW(VC1_VAAPI,nellymoser);
     DECLARE_HW(WMV3_VAAPI,nellymoser);
-//
+//
     DECLARE_HW(H264_DXVA2,nellymoser);
     DECLARE_HW(H264_VAAPI,nellymoser);
     DECLARE_HW(VC1_DXVA2,nellymoser);
     DECLARE_HW(VC1_DXVA2,nellymoser);
     DECLARE_HW(WMV3_DXVA2,nellymoser);
-    DECLARE_HW(MPEG2_DXVA2,nellymoser);
-
+    DECLARE_HW(MPEG2_DXVA2,nellymoser);
+
 #define DECLARE_VDPAU(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_VDPAU_DECODER 1\n&quot;);
-        printf(&quot;#ifdef USE_VDPAU\n&quot;);
-        printf(&quot;#define CONFIG_H264_VDPAU_DECODER 1\n&quot;);
-        printf(&quot;#define CONFIG_MPEG_VDPAU_DECODER 1\n&quot;);
-        printf(&quot;#define CONFIG_MPEG1_VDPAU_DECODER 1\n&quot;);
-        printf(&quot;#define CONFIG_VC1_VDPAU_DECODER 1\n&quot;);
-        printf(&quot;#define CONFIG_WMV3_VDPAU_DECODER 1\n&quot;);
-        printf(&quot;#else // USE_VDPAU\n&quot;);
-        printf(&quot;#define CONFIG_H264_VDPAU_DECODER 0\n&quot;);
-        printf(&quot;#define CONFIG_MPEG_VDPAU_DECODER 0\n&quot;);
-        printf(&quot;#define CONFIG_MPEG1_VDPAU_DECODER 0\n&quot;);
-        printf(&quot;#define CONFIG_VC1_VDPAU_DECODER 0\n&quot;);
-        printf(&quot;#define CONFIG_WMV3_VDPAU_DECODER 0\n&quot;);
-        printf(&quot;#endif // \n&quot;);
-        printf(&quot;#define CONFIG_MPEG4_VDPAU_DECODER 0\n&quot;);
-        
-        printf(&quot;#ifdef HAVE_MALLOC_H\n&quot;);
-        printf(&quot;#undef HAVE_MALLOC_H \n&quot;);
-        printf(&quot;#define HAVE_MALLOC_H 1\n&quot;);
-        printf(&quot;#else // HAVE_MALLOC_H\n&quot;);
-        printf(&quot;#define HAVE_MALLOC_H 0\n&quot;);
-        printf(&quot;#endif// HAVE_MALLOC_H\n&quot;);
-
-#undef DECLARE_VDPAU
+        printf(&quot;#ifdef USE_VDPAU\n&quot;);
+        printf(&quot;#define CONFIG_H264_VDPAU_DECODER 1\n&quot;);
+        printf(&quot;#define CONFIG_MPEG_VDPAU_DECODER 1\n&quot;);
+        printf(&quot;#define CONFIG_MPEG1_VDPAU_DECODER 1\n&quot;);
+        printf(&quot;#define CONFIG_VC1_VDPAU_DECODER 1\n&quot;);
+        printf(&quot;#define CONFIG_WMV3_VDPAU_DECODER 1\n&quot;);
+        printf(&quot;#else // USE_VDPAU\n&quot;);
+        printf(&quot;#define CONFIG_H264_VDPAU_DECODER 0\n&quot;);
+        printf(&quot;#define CONFIG_MPEG_VDPAU_DECODER 0\n&quot;);
+        printf(&quot;#define CONFIG_MPEG1_VDPAU_DECODER 0\n&quot;);
+        printf(&quot;#define CONFIG_VC1_VDPAU_DECODER 0\n&quot;);
+        printf(&quot;#define CONFIG_WMV3_VDPAU_DECODER 0\n&quot;);
+        printf(&quot;#endif // \n&quot;);
+        printf(&quot;#define CONFIG_MPEG4_VDPAU_DECODER 0\n&quot;);
+        
+        printf(&quot;#ifdef HAVE_MALLOC_H\n&quot;);
+        printf(&quot;#undef HAVE_MALLOC_H \n&quot;);
+        printf(&quot;#define HAVE_MALLOC_H 1\n&quot;);
+        printf(&quot;#else // HAVE_MALLOC_H\n&quot;);
+        printf(&quot;#define HAVE_MALLOC_H 0\n&quot;);
+        printf(&quot;#endif// HAVE_MALLOC_H\n&quot;);
+
+#undef DECLARE_VDPAU
 #define DECLARE_VDPAU(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_VDPAU_DECODER 0\n&quot;);
-
-
+
+
 #define DECLARE_DECODER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_DECODER 1\n&quot;);
   
     DECLARE_DECODER (SVQ1, svq1);
@@ -113,6 +113,8 @@
     DECLARE_DECODER (INDEO5, indeo5);
     DECLARE_DECODER (INDEO5, indeo5);
     DECLARE_DECODER (VP8, indeo5);
+	DECLARE_DECODER (PNG, png);
+
 #undef DECLARE_DECODER
 #define DECLARE_DECODER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_DECODER 0\n&quot;); 
 
@@ -147,22 +149,22 @@
     DECLARE_DECODER(WMAVOICE, eatgq);
     DECLARE_DECODER(PCM_BLURAY, eatgq);
     DECLARE_DECODER(PGSSUB, eatgq);
-//
+//
     DECLARE_DECODER(DPX, eatgq);
     DECLARE_DECODER(EAMAD, eatgq);
     DECLARE_DECODER(TMV, eatgq);
     DECLARE_DECODER(V210, eatgq);
     DECLARE_DECODER(LIBOPENCORE_AMRNB, eatgq);
     DECLARE_DECODER(LIBOPENCORE_AMRWB, eatgq);
-
-
+
+
     DECLARE_DECODER(LIBSPEEX, eatgq);
     DECLARE_DECODER(LIBSCHROEDINGER, eatgq);
     DECLARE_DECODER(LIBOPENJPEG, eatgq);
     DECLARE_DECODER(LIBDIRAC, eatgq);
     DECLARE_DECODER(ADPCM_IMA_ISS, eatgq);
     DECLARE_DECODER(ADPCM_EA_MAXIS_XA, eatgq);
-
+
     DECLARE_DECODER(PCM_F64LE, eatgq);
     DECLARE_DECODER(PCM_F64BE, eatgq);
     DECLARE_DECODER(PCM_F32LE, eatgq);
@@ -175,8 +177,8 @@
     DECLARE_DECODER(ALAC, eatgq);
     DECLARE_DECODER(PGMYUV, eatgq);
     DECLARE_DECODER(PPM, eatgq);
-
-
+
+
     DECLARE_DECODER(EATGV, eatgq);
     DECLARE_DECODER(EATQI, eatgq);
     DECLARE_DECODER(EIGHTSVX_EXP, eatgq);
@@ -191,7 +193,7 @@
     DECLARE_DECODER(RV30, eatgq);
     DECLARE_DECODER(RV40, eatgq);
     DECLARE_DECODER(V210X, eatgq);
-
+
     DECLARE_DECODER(BFI, eatgq);
     DECLARE_DECODER(EACMV, eatgq);
     DECLARE_DECODER(EATGQ, eatgq);
@@ -286,7 +288,6 @@
     DECLARE_DECODER (H261, h261);
 	DECLARE_DECODER (H263I, h263i);
     DECLARE_DECODER (JPEGLS, jpegls);
-    DECLARE_DECODER (PNG, png);
     DECLARE_DECODER (QTRLE, qtrle);
     DECLARE_DECODER (RAWVIDEO, rawvideo);
     DECLARE_DECODER (ROQ, roq);
@@ -396,14 +397,14 @@
     DECLARE_ENCODER(LIBOPENCORE_AMRNB, amv);
     DECLARE_ENCODER(LIBSCHROEDINGER, amv);
     DECLARE_ENCODER(LIBDIRAC, amv);
-
+
     DECLARE_ENCODER(PCM_F64LE, amv);
     DECLARE_ENCODER(PCM_F64BE, amv);
     DECLARE_ENCODER(PCM_F32BE, amv);
     DECLARE_ENCODER(PCM_F32LE, amv);
     DECLARE_ENCODER(NELLYMOSER, amv);
     DECLARE_ENCODER(ALAC, amv);
-
+
     DECLARE_ENCODER(PCX, amv);
     DECLARE_ENCODER(DNXHD, amv);
     DECLARE_ENCODER(PCM_ZORK, amv);
@@ -523,7 +524,7 @@
 	DECLARE_MUXER(MPEG2DVD, tgp)
 	DECLARE_MUXER(MPEG2VOB, tgp)
 #define DECLARE_DEMUXER(a,b); printf(&quot;#define CONFIG_&quot;#a&quot;_DEMUXER 0\n&quot;);
-        DECLARE_DEMUXER(W64,w64)
+        DECLARE_DEMUXER(W64,w64)
 
 	printf(&quot;#define CONFIG_ENCODERS 1\n&quot;);
 	printf(&quot;#define CONFIG_DVVIDEO_ENCODER 1\n&quot;);
@@ -539,9 +540,9 @@
 	DECLARE_CONFIG_DECODER(VC1, vc1);
 	DECLARE_CONFIG_DECODER(WMV2, wmv2);
 	DECLARE_CONFIG_DECODER(WMV3, wmv3);
-
-	printf(&quot;#define CONFIG_SWSCALE_ALPHA 0\n&quot;);
 
+	printf(&quot;#define CONFIG_SWSCALE_ALPHA 0\n&quot;);
+
 	printf(&quot;#define CONFIG_MPEGAUDIO_HP 1\n&quot;);
 	printf(&quot;#define CONFIG_ZLIB 1\n&quot;);
 	printf(&quot;#define CONFIG_GPL 1\n&quot;);
@@ -568,8 +569,8 @@
 	printf(&quot;#	define HAVE_VIS 0\n&quot;);
 	printf(&quot;#	define CONFIG_GRAY 0\n&quot;);
 	printf(&quot;#	define HAVE_TRUNCF 1\n&quot;);
-
-
+
+
 	printf(&quot;#ifdef __APPLE__\n&quot;);
 	printf(&quot;#	define CONFIG_DARWIN 1\n&quot;);
 	printf(&quot;#endif\n&quot;);
@@ -639,14 +640,14 @@
 	printf(&quot;#	define WORDS_BIGENDIAN 1\n&quot;);
 	printf(&quot;#endif\n&quot;);
 
-        printf(&quot;#ifdef USE_YASM\n&quot;);
+        printf(&quot;#ifdef USE_YASM\n&quot;);
         printf(&quot;#define ENABLE_YASM      1\n&quot;);
         printf(&quot;#define HAVE_YASM        1\n&quot;);
-        printf(&quot;#else // USE_YASM\n&quot;);
+        printf(&quot;#else // USE_YASM\n&quot;);
         printf(&quot;#define ENABLE_YASM      0\n&quot;);
         printf(&quot;#define HAVE_YASM        0\n&quot;);
-        printf(&quot;#endif // USE_YASM\n&quot;);
-
+        printf(&quot;#endif // USE_YASM\n&quot;);
+
 	printf(&quot;#define CONFIG_FILE_PROTOCOL  1\n&quot;);
 	printf(&quot;#define CONFIG_MDCT     1\n&quot;);
 	printf(&quot;#define CONFIG_DCT      1\n&quot;);
@@ -667,12 +668,12 @@
 	printf(&quot;#define HAVE_ROUND 1\n&quot;);
 	printf(&quot;#define HAVE_ROUNDF 1\n&quot;);
 	printf(&quot;#define HAVE_THREADS 1\n&quot;);
-	printf(&quot;#define RUNTIME_CPUDETECT 1\n&quot;);
-	printf(&quot;#define CONFIG_RUNTIME_CPUDETECT 1\n&quot;);
-    printf(&quot;#if defined( __MINGW32__) || defined(__APPLE__)\n&quot;);
-        printf(&quot;#define EXTERN_PREFIX \&quot;_\&quot;\n&quot;);
-    printf(&quot;#else // __MINGW32__\n&quot;);
-        printf(&quot;#define EXTERN_PREFIX\n&quot;);
+	printf(&quot;#define RUNTIME_CPUDETECT 1\n&quot;);
+	printf(&quot;#define CONFIG_RUNTIME_CPUDETECT 1\n&quot;);
+    printf(&quot;#if defined( __MINGW32__) || defined(__APPLE__)\n&quot;);
+        printf(&quot;#define EXTERN_PREFIX \&quot;_\&quot;\n&quot;);
+    printf(&quot;#else // __MINGW32__\n&quot;);
+        printf(&quot;#define EXTERN_PREFIX\n&quot;);
     printf(&quot;#endif // __MINGW32__\n&quot;);
 	printf(&quot;#define restrict __restrict__\n&quot;);
 }

Modified: branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt
===================================================================
--- branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec/CMakeLists.txt	2010-09-25 10:02:51 UTC (rev 6640)
@@ -36,7 +36,7 @@
         flvenc.c indeo5.c mpegaudiodec_float.c mpeg4video.c mpeg4videoenc.c dwt.c  h264_refs.c
         ivi_common.c dcadsp.c h264_direct.c ivi_dsp.c ituh263dec.c dvdata.c ituh263enc.c aacsbr.c
         synth_filter.c    mpeg4videodec.c h264_cabac.c h264_cavlc.c vp56dsp.c h264_loopfilter.c
-        h264_sei.c h264_ps.c svq3.c h264dsp.c flvdec.c
+        h264_sei.c h264_ps.c svq3.c h264dsp.c flvdec.c pngdec.c png.c
         aacps.c  aacpsy.c aacadtsdec.c lpc.c vp8_parser.c vp8.c vp8dsp.c inverse.c dct.c aacdec.c
         )
 

Modified: branches/avidemux_2.6_branch_mean/cmake/admCheckRequiredLibs.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/admCheckRequiredLibs.cmake	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/cmake/admCheckRequiredLibs.cmake	2010-09-25 10:02:51 UTC (rev 6640)
@@ -32,29 +32,6 @@
 ENDIF (LIBXML2_FOUND)
 
 ########################################
-# libpng
-########################################
-MESSAGE(STATUS &quot;Checking for libpng&quot;)
-MESSAGE(STATUS &quot;*******************&quot;)
-
-FIND_PACKAGE(PNG)
-if(CROSS)
-                        MESSAGE(STATUS &quot;Cross compile override&quot;)
-                          SET(ZLIB_LIBRARY &quot;-lz -L${CROSS}/lib&quot;)
-                          SET(PNG_LIBRARIES &quot; ${ZLIB_LIBRARY} -lpng12 -L${CROSS}/lib&quot;)
-endif(CROSS)
-
-PRINT_LIBRARY_INFO(&quot;libpng&quot; PNG_FOUND &quot;${PNG_INCLUDE_DIR} ${PNG_DEFINITIONS}&quot; &quot;${PNG_LIBRARIES}&quot; FATAL_ERROR)
-
-FOREACH(_flag ${PNG_INCLUDE_DIR})
-	SET(PNG_CFLAGS ${PNG_CFLAGS} -I${_flag})
-ENDFOREACH(_flag)
-
-SET(PNG_CFLAGS ${PNG_CFLAGS} ${PNG_DEFINITIONS})
-SET(USE_PNG 1)
-MESSAGE(&quot;&quot;)
-
-########################################
 # pthreads
 ########################################
 MESSAGE(STATUS &quot;Checking for pthreads&quot;)
@@ -69,3 +46,14 @@
 PRINT_LIBRARY_INFO(&quot;pthreads&quot; PTHREAD_FOUND &quot;${PTHREAD_INCLUDE_DIR}&quot; &quot;${PTHREAD_LIBRARIES}&quot; FATAL_ERROR)
 
 MESSAGE(&quot;&quot;)
+
+########################################
+# zlib
+########################################
+MESSAGE(STATUS &quot;Checking for zlib&quot;)
+MESSAGE(STATUS &quot;*****************&quot;)
+
+FIND_PACKAGE(ZLIB)
+PRINT_LIBRARY_INFO(&quot;zlib&quot; ZLIB_FOUND &quot;${ZLIB_INCLUDE_DIR}&quot; &quot;${ZLIB_LIBRARY}&quot; FATAL_ERROR)
+
+MESSAGE(&quot;&quot;)
\ No newline at end of file

Modified: branches/avidemux_2.6_branch_mean/cmake/config.h.cmake
===================================================================
--- branches/avidemux_2.6_branch_mean/cmake/config.h.cmake	2010-09-25 09:44:46 UTC (rev 6639)
+++ branches/avidemux_2.6_branch_mean/cmake/config.h.cmake	2010-09-25 10:02:51 UTC (rev 6640)
@@ -34,9 +34,6 @@
 /* Libxml2 is available */
 #cmakedefine USE_LIBXML2
 
-/* libpng is available */
-#cmakedefine USE_PNG
-
 /* libvpx is available */
 #cmakedefine USE_VPX
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003823.html">[Avidemux-svn-commit] r6639 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_ffmpeg/libavcodec
</A></li>
	<LI>Next message: <A HREF="003825.html">[Avidemux-svn-commit] r6641 - in	branches/avidemux_2.6_branch_mean/avidemux_core:	ADM_coreImage/src ADM_coreVideoCodec/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3824">[ date ]</a>
              <a href="thread.html#3824">[ thread ]</a>
              <a href="subject.html#3824">[ subject ]</a>
              <a href="author.html#3824">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
