<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6677 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6677%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264%3A%0A%09.%20qt4&In-Reply-To=%3C20100928204351.94B68480FD0%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003860.html">
   <LINK REL="Next"  HREF="003862.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6677 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6677%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264%3A%0A%09.%20qt4&In-Reply-To=%3C20100928204351.94B68480FD0%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6677 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4">gruntster at mail.berlios.de
       </A><BR>
    <I>Tue Sep 28 22:43:51 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003860.html">[Avidemux-svn-commit] r6676 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
</A></li>
        <LI>Next message: <A HREF="003862.html">[Avidemux-svn-commit] r6678 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3861">[ date ]</a>
              <a href="thread.html#3861">[ thread ]</a>
              <a href="subject.html#3861">[ subject ]</a>
              <a href="author.html#3861">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-09-28 22:43:51 +0200 (Tue, 28 Sep 2010)
New Revision: 6677

Modified:
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
   branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
Log:
[x264] max crf support

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-09-28 20:43:51 UTC (rev 6677)
@@ -472,6 +472,9 @@
 	printf(&quot;[x264] rc.i_rc_method = %d\n&quot;, x264Param-&gt;rc.i_rc_method);
 	printf(&quot;[x264] rc.i_bitrate = %d\n&quot;, x264Param-&gt;rc.i_bitrate);
 	printf(&quot;[x264] rc.f_rf_constant = %f\n&quot;, x264Param-&gt;rc.f_rf_constant);
+#if X264_BUILD &gt; 89
+	printf(&quot;[x264] rc.f_rf_constant_max = %f\n&quot;, x264Param-&gt;rc.f_rf_constant_max);
+#endif
 	printf(&quot;[x264] rc.i_qp_constant = %d\n&quot;, x264Param-&gt;rc.i_qp_constant);	
 	printf(&quot;[x264] analyse.i_subpel_refine = %d\n&quot;, x264Param-&gt;analyse.i_subpel_refine);
 	printf(&quot;[x264] analyse.i_me_method = %d\n&quot;, x264Param-&gt;analyse.i_me_method);

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.cpp	2010-09-28 20:43:51 UTC (rev 6677)
@@ -69,8 +69,19 @@
 	connect(ui.quantiserSlider, SIGNAL(valueChanged(int)), this, SLOT(quantiserSlider_valueChanged(int)));
 	connect(ui.quantiserSpinBox, SIGNAL(valueChanged(int)), this, SLOT(quantiserSpinBox_valueChanged(int)));
 	connect(ui.targetRateControlSpinBox, SIGNAL(valueChanged(int)), this, SLOT(targetRateControlSpinBox_valueChanged(int)));
+	connect(ui.maxCrfSlider, SIGNAL(valueChanged(int)), this, SLOT(maxCrfSlider_valueChanged(int)));
+	connect(ui.maxCrfSpinBox, SIGNAL(valueChanged(int)), this, SLOT(maxCrfSpinBox_valueChanged(int)));
 	connect(ui.mbTreeCheckBox, SIGNAL(toggled(bool)), this, SLOT(mbTreeCheckBox_toggled(bool)));
 
+#if X264_BUILD &lt; 90
+	ui.maxCrfCheckBox-&gt;setVisible(false);
+	ui.quantiserLabel1_2-&gt;setVisible(false);
+	ui.quantiserLabel2_2-&gt;setVisible(false);
+	ui.quantiserLabel3_2-&gt;setVisible(false);
+	ui.maxCrfSlider-&gt;setVisible(false);
+	ui.maxCrfSpinBox-&gt;setVisible(false);
+#endif
+
 #if X264_BUILD &lt; 86
 	ui.fastFirstPassCheckBox-&gt;setVisible(false);
 #endif
@@ -353,7 +364,7 @@
 // General tab
 void x264ConfigDialog::encodingModeComboBox_currentIndexChanged(int index)
 {
-	bool enable = false;
+	bool enableQp = false, enableMaxCrf = false;
 
 	switch (index)
 	{
@@ -364,11 +375,12 @@
 			break;
 		case 1: // Constant Quality - 1 pass
 			ui.quantiserLabel2-&gt;setText(tr(&quot;Quantiser:&quot;));
-			enable = true;
+			enableQp = true;
 			break;
 		case 2: // Average Quantiser - 1 pass
 			ui.quantiserLabel2-&gt;setText(tr(&quot;Quality:&quot;));
-			enable = true;
+			enableQp = true;
+			enableMaxCrf = true;
 			break;
 		case 3: // Video Size - 2 pass
 			ui.targetRateControlLabel1-&gt;setText(tr(&quot;Target Video Size:&quot;));
@@ -382,15 +394,20 @@
 			break;
 	}
 
-	ui.quantiserLabel1-&gt;setEnabled(enable);
-	ui.quantiserLabel2-&gt;setEnabled(enable);
-	ui.quantiserLabel3-&gt;setEnabled(enable);
-	ui.quantiserSlider-&gt;setEnabled(enable);
-	ui.quantiserSpinBox-&gt;setEnabled(enable);
+	ui.quantiserLabel1-&gt;setEnabled(enableQp);
+	ui.quantiserLabel2-&gt;setEnabled(enableQp);
+	ui.quantiserLabel3-&gt;setEnabled(enableQp);
+	ui.quantiserSlider-&gt;setEnabled(enableQp);
+	ui.quantiserSpinBox-&gt;setEnabled(enableQp);
 
-	ui.targetRateControlLabel1-&gt;setEnabled(!enable);
-	ui.targetRateControlLabel2-&gt;setEnabled(!enable);
-	ui.targetRateControlSpinBox-&gt;setEnabled(!enable);
+	ui.targetRateControlLabel1-&gt;setEnabled(!enableQp);
+	ui.targetRateControlLabel2-&gt;setEnabled(!enableQp);
+	ui.targetRateControlSpinBox-&gt;setEnabled(!enableQp);
+
+	if (!enableMaxCrf)
+		ui.maxCrfCheckBox-&gt;setChecked(false);
+
+	ui.maxCrfCheckBox-&gt;setEnabled(enableMaxCrf);
 }
 
 void x264ConfigDialog::quantiserSlider_valueChanged(int value)
@@ -411,6 +428,16 @@
 		lastBitrate = value;
 }
 
+void x264ConfigDialog::maxCrfSlider_valueChanged(int value)
+{
+	ui.maxCrfSpinBox-&gt;setValue(value);
+}
+
+void x264ConfigDialog::maxCrfSpinBox_valueChanged(int value)
+{
+	ui.maxCrfSlider-&gt;setValue(value);
+}
+
 void x264ConfigDialog::mbTreeCheckBox_toggled(bool checked)
 {
 	if (!disableGenericSlots &amp;&amp; checked &amp;&amp; !ui.aqVarianceCheckBox-&gt;isChecked())
@@ -585,6 +612,9 @@
 void x264ConfigDialog::loadSettings(vidEncOptions *encodeOptions, x264Options *options)
 {
 	bool origDisableGenericSlots = disableGenericSlots;
+#if X264_BUILD &gt; 89
+	unsigned int maxCrf = options-&gt;getMaximumConstantRateFactor();
+#endif
 
 	disableGenericSlots = true;
 
@@ -602,6 +632,17 @@
 		case ADM_VIDENC_MODE_AQP:	// Average Quantizer (Single Pass)
 			ui.encodingModeComboBox-&gt;setCurrentIndex(2);
 			ui.quantiserSpinBox-&gt;setValue(encodeOptions-&gt;encodeModeParameter);
+
+#if X264_BUILD &gt; 89
+			if (maxCrf == 0)
+				ui.maxCrfCheckBox-&gt;setChecked(false);
+			else
+			{
+				ui.maxCrfCheckBox-&gt;setChecked(true);
+				ui.maxCrfSlider-&gt;setValue(maxCrf);
+			}
+#endif
+
 			break;
 		case ADM_VIDENC_MODE_2PASS_SIZE:	// Video Size (Two Pass)
 			ui.encodingModeComboBox-&gt;setCurrentIndex(3);
@@ -862,6 +903,13 @@
 
 	options-&gt;setPresetConfiguration(ui.configurationComboBox-&gt;currentText().toUtf8().constData(), configurationType);
 
+#if X264_BUILD &gt; 89
+	if (ui.encodingModeComboBox-&gt;currentIndex() == 2 &amp;&amp; ui.maxCrfCheckBox-&gt;isChecked())
+		options-&gt;setMaximumConstantRateFactor(ui.maxCrfSlider-&gt;value());
+	else
+		options-&gt;setMaximumConstantRateFactor(0);
+#endif
+
 	options-&gt;setMbTree(ui.mbTreeCheckBox-&gt;isChecked());
 #if X264_BUILD &gt; 85
 	options-&gt;setFastFirstPass(ui.fastFirstPassCheckBox-&gt;isChecked());

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.h	2010-09-28 20:43:51 UTC (rev 6677)
@@ -72,6 +72,8 @@
 	void quantiserSlider_valueChanged(int value);
 	void quantiserSpinBox_valueChanged(int value);
 	void targetRateControlSpinBox_valueChanged(int value);
+	void maxCrfSlider_valueChanged(int value);
+	void maxCrfSpinBox_valueChanged(int value);
 	void mbTreeCheckBox_toggled(bool checked);
 
 	// Motion Estimation tab

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4/x264ConfigDialog.ui	2010-09-28 20:43:51 UTC (rev 6677)
@@ -7,8 +7,8 @@
    &lt;rect&gt;
     &lt;x&gt;0&lt;/x&gt;
     &lt;y&gt;0&lt;/y&gt;
-    &lt;width&gt;503&lt;/width&gt;
-    &lt;height&gt;598&lt;/height&gt;
+    &lt;width&gt;529&lt;/width&gt;
+    &lt;height&gt;592&lt;/height&gt;
    &lt;/rect&gt;
   &lt;/property&gt;
   &lt;property name=&quot;windowTitle&quot;&gt;
@@ -122,13 +122,7 @@
          &lt;property name=&quot;title&quot;&gt;
           &lt;string&gt;Rate Control&lt;/string&gt;
          &lt;/property&gt;
-         &lt;layout class=&quot;QVBoxLayout&quot;&gt;
-          &lt;property name=&quot;spacing&quot;&gt;
-           &lt;number&gt;6&lt;/number&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;margin&quot;&gt;
-           &lt;number&gt;9&lt;/number&gt;
-          &lt;/property&gt;
+         &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_5&quot;&gt;
           &lt;item&gt;
            &lt;layout class=&quot;QGridLayout&quot;&gt;
             &lt;property name=&quot;margin&quot;&gt;
@@ -276,6 +270,22 @@
              &lt;number&gt;0&lt;/number&gt;
             &lt;/property&gt;
             &lt;item&gt;
+             &lt;spacer name=&quot;horizontalSpacer_3&quot;&gt;
+              &lt;property name=&quot;orientation&quot;&gt;
+               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;sizeType&quot;&gt;
+               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;20&lt;/width&gt;
+                &lt;height&gt;0&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
+             &lt;/spacer&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
              &lt;layout class=&quot;QHBoxLayout&quot;&gt;
               &lt;property name=&quot;spacing&quot;&gt;
                &lt;number&gt;12&lt;/number&gt;
@@ -418,21 +428,14 @@
            &lt;/layout&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QCheckBox&quot; name=&quot;fastFirstPassCheckBox&quot;&gt;
+           &lt;widget class=&quot;QCheckBox&quot; name=&quot;maxCrfCheckBox&quot;&gt;
             &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Fast First Pass&lt;/string&gt;
+             &lt;string&gt;Maximum Constant Rate Factor&lt;/string&gt;
             &lt;/property&gt;
            &lt;/widget&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QCheckBox&quot; name=&quot;mbTreeCheckBox&quot;&gt;
-            &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Macroblock-tree Rate Control&lt;/string&gt;
-            &lt;/property&gt;
-           &lt;/widget&gt;
-          &lt;/item&gt;
-          &lt;item&gt;
-           &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;_16&quot;&gt;
             &lt;property name=&quot;spacing&quot;&gt;
              &lt;number&gt;6&lt;/number&gt;
             &lt;/property&gt;
@@ -440,137 +443,190 @@
              &lt;number&gt;0&lt;/number&gt;
             &lt;/property&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;lblLookahead&quot;&gt;
-              &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Frametype Lookahead:&lt;/string&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;widget class=&quot;QSpinBox&quot; name=&quot;lookaheadSpinBox&quot;&gt;
-              &lt;property name=&quot;maximum&quot;&gt;
-               &lt;number&gt;250&lt;/number&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;lblLookaheadFrames&quot;&gt;
-              &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;frames&lt;/string&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;spacer name=&quot;spacer_3&quot;&gt;
+             &lt;spacer name=&quot;horizontalSpacer_4&quot;&gt;
               &lt;property name=&quot;orientation&quot;&gt;
                &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
               &lt;/property&gt;
+              &lt;property name=&quot;sizeType&quot;&gt;
+               &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+              &lt;/property&gt;
               &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
                &lt;size&gt;
-                &lt;width&gt;0&lt;/width&gt;
+                &lt;width&gt;20&lt;/width&gt;
                 &lt;height&gt;0&lt;/height&gt;
                &lt;/size&gt;
               &lt;/property&gt;
              &lt;/spacer&gt;
             &lt;/item&gt;
-           &lt;/layout&gt;
-          &lt;/item&gt;
-         &lt;/layout&gt;
-        &lt;/widget&gt;
-       &lt;/item&gt;
-       &lt;item&gt;
-        &lt;widget class=&quot;QGroupBox&quot; name=&quot;groupBox_17&quot;&gt;
-         &lt;property name=&quot;title&quot;&gt;
-          &lt;string&gt;Multithreading&lt;/string&gt;
-         &lt;/property&gt;
-         &lt;layout class=&quot;QVBoxLayout&quot;&gt;
-          &lt;property name=&quot;spacing&quot;&gt;
-           &lt;number&gt;6&lt;/number&gt;
-          &lt;/property&gt;
-          &lt;property name=&quot;margin&quot;&gt;
-           &lt;number&gt;9&lt;/number&gt;
-          &lt;/property&gt;
-          &lt;item&gt;
-           &lt;layout class=&quot;QVBoxLayout&quot;&gt;
-            &lt;property name=&quot;spacing&quot;&gt;
-             &lt;number&gt;6&lt;/number&gt;
-            &lt;/property&gt;
-            &lt;property name=&quot;margin&quot;&gt;
-             &lt;number&gt;0&lt;/number&gt;
-            &lt;/property&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QRadioButton&quot; name=&quot;threadDisableRadioButton&quot;&gt;
-              &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Disable&lt;/string&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;widget class=&quot;QRadioButton&quot; name=&quot;threadAutoDetectRadioButton&quot;&gt;
-              &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Auto-detect&lt;/string&gt;
-              &lt;/property&gt;
-              &lt;property name=&quot;checked&quot;&gt;
-               &lt;bool&gt;true&lt;/bool&gt;
-              &lt;/property&gt;
-             &lt;/widget&gt;
-            &lt;/item&gt;
-            &lt;item&gt;
-             &lt;layout class=&quot;QHBoxLayout&quot;&gt;
+             &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;_17&quot;&gt;
               &lt;property name=&quot;spacing&quot;&gt;
-               &lt;number&gt;6&lt;/number&gt;
+               &lt;number&gt;12&lt;/number&gt;
               &lt;/property&gt;
               &lt;property name=&quot;margin&quot;&gt;
                &lt;number&gt;0&lt;/number&gt;
               &lt;/property&gt;
               &lt;item&gt;
-               &lt;widget class=&quot;QRadioButton&quot; name=&quot;threadCustomRadioButton&quot;&gt;
-                &lt;property name=&quot;text&quot;&gt;
-                 &lt;string comment=&quot;multithreading&quot;&gt;Custom:&lt;/string&gt;
+               &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;_18&quot;&gt;
+                &lt;property name=&quot;spacing&quot;&gt;
+                 &lt;number&gt;0&lt;/number&gt;
                 &lt;/property&gt;
-               &lt;/widget&gt;
+                &lt;property name=&quot;margin&quot;&gt;
+                 &lt;number&gt;0&lt;/number&gt;
+                &lt;/property&gt;
+                &lt;item&gt;
+                 &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;_19&quot;&gt;
+                  &lt;property name=&quot;spacing&quot;&gt;
+                   &lt;number&gt;0&lt;/number&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;margin&quot;&gt;
+                   &lt;number&gt;0&lt;/number&gt;
+                  &lt;/property&gt;
+                  &lt;item&gt;
+                   &lt;widget class=&quot;QLabel&quot; name=&quot;quantiserLabel1_2&quot;&gt;
+                    &lt;property name=&quot;enabled&quot;&gt;
+                     &lt;bool&gt;false&lt;/bool&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                     &lt;string&gt;0 (High Quality)&lt;/string&gt;
+                    &lt;/property&gt;
+                   &lt;/widget&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;spacer&gt;
+                    &lt;property name=&quot;orientation&quot;&gt;
+                     &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+                     &lt;size&gt;
+                      &lt;width&gt;40&lt;/width&gt;
+                      &lt;height&gt;20&lt;/height&gt;
+                     &lt;/size&gt;
+                    &lt;/property&gt;
+                   &lt;/spacer&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;widget class=&quot;QLabel&quot; name=&quot;quantiserLabel2_2&quot;&gt;
+                    &lt;property name=&quot;enabled&quot;&gt;
+                     &lt;bool&gt;false&lt;/bool&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                     &lt;string&gt;Quantiser&lt;/string&gt;
+                    &lt;/property&gt;
+                   &lt;/widget&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;spacer&gt;
+                    &lt;property name=&quot;orientation&quot;&gt;
+                     &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+                     &lt;size&gt;
+                      &lt;width&gt;40&lt;/width&gt;
+                      &lt;height&gt;20&lt;/height&gt;
+                     &lt;/size&gt;
+                    &lt;/property&gt;
+                   &lt;/spacer&gt;
+                  &lt;/item&gt;
+                  &lt;item&gt;
+                   &lt;widget class=&quot;QLabel&quot; name=&quot;quantiserLabel3_2&quot;&gt;
+                    &lt;property name=&quot;enabled&quot;&gt;
+                     &lt;bool&gt;false&lt;/bool&gt;
+                    &lt;/property&gt;
+                    &lt;property name=&quot;text&quot;&gt;
+                     &lt;string&gt;51 (Low Quality)&lt;/string&gt;
+                    &lt;/property&gt;
+                   &lt;/widget&gt;
+                  &lt;/item&gt;
+                 &lt;/layout&gt;
+                &lt;/item&gt;
+                &lt;item&gt;
+                 &lt;widget class=&quot;QSlider&quot; name=&quot;maxCrfSlider&quot;&gt;
+                  &lt;property name=&quot;enabled&quot;&gt;
+                   &lt;bool&gt;false&lt;/bool&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;minimumSize&quot;&gt;
+                   &lt;size&gt;
+                    &lt;width&gt;375&lt;/width&gt;
+                    &lt;height&gt;0&lt;/height&gt;
+                   &lt;/size&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;maximum&quot;&gt;
+                   &lt;number&gt;51&lt;/number&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;pageStep&quot;&gt;
+                   &lt;number&gt;5&lt;/number&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;value&quot;&gt;
+                   &lt;number&gt;26&lt;/number&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;orientation&quot;&gt;
+                   &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+                  &lt;/property&gt;
+                  &lt;property name=&quot;tickPosition&quot;&gt;
+                   &lt;enum&gt;QSlider::TicksBelow&lt;/enum&gt;
+                  &lt;/property&gt;
+                 &lt;/widget&gt;
+                &lt;/item&gt;
+               &lt;/layout&gt;
               &lt;/item&gt;
               &lt;item&gt;
-               &lt;widget class=&quot;QSpinBox&quot; name=&quot;threadCustomSpinBox&quot;&gt;
+               &lt;widget class=&quot;QSpinBox&quot; name=&quot;maxCrfSpinBox&quot;&gt;
                 &lt;property name=&quot;enabled&quot;&gt;
                  &lt;bool&gt;false&lt;/bool&gt;
                 &lt;/property&gt;
-                &lt;property name=&quot;minimum&quot;&gt;
-                 &lt;number&gt;2&lt;/number&gt;
-                &lt;/property&gt;
                 &lt;property name=&quot;maximum&quot;&gt;
-                 &lt;number&gt;32&lt;/number&gt;
+                 &lt;number&gt;51&lt;/number&gt;
                 &lt;/property&gt;
+                &lt;property name=&quot;value&quot;&gt;
+                 &lt;number&gt;26&lt;/number&gt;
+                &lt;/property&gt;
                &lt;/widget&gt;
               &lt;/item&gt;
-              &lt;item&gt;
-               &lt;spacer name=&quot;spacer_2&quot;&gt;
-                &lt;property name=&quot;orientation&quot;&gt;
-                 &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
-                &lt;/property&gt;
-                &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
-                 &lt;size&gt;
-                  &lt;width&gt;0&lt;/width&gt;
-                  &lt;height&gt;0&lt;/height&gt;
-                 &lt;/size&gt;
-                &lt;/property&gt;
-               &lt;/spacer&gt;
-              &lt;/item&gt;
              &lt;/layout&gt;
             &lt;/item&gt;
+            &lt;item&gt;
+             &lt;spacer name=&quot;spacer_22&quot;&gt;
+              &lt;property name=&quot;orientation&quot;&gt;
+               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;0&lt;/width&gt;
+                &lt;height&gt;0&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
+             &lt;/spacer&gt;
+            &lt;/item&gt;
            &lt;/layout&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QCheckBox&quot; name=&quot;repeatabilityCheckBox&quot;&gt;
+           &lt;spacer name=&quot;verticalSpacer_2&quot;&gt;
+            &lt;property name=&quot;orientation&quot;&gt;
+             &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeType&quot;&gt;
+             &lt;enum&gt;QSizePolicy::Fixed&lt;/enum&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+             &lt;size&gt;
+              &lt;width&gt;20&lt;/width&gt;
+              &lt;height&gt;4&lt;/height&gt;
+             &lt;/size&gt;
+            &lt;/property&gt;
+           &lt;/spacer&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QCheckBox&quot; name=&quot;fastFirstPassCheckBox&quot;&gt;
             &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Enforce Repeatability&lt;/string&gt;
+             &lt;string&gt;Fast First Pass&lt;/string&gt;
             &lt;/property&gt;
            &lt;/widget&gt;
           &lt;/item&gt;
           &lt;item&gt;
-           &lt;widget class=&quot;QCheckBox&quot; name=&quot;sliceThreadingCheckBox&quot;&gt;
+           &lt;widget class=&quot;QCheckBox&quot; name=&quot;mbTreeCheckBox&quot;&gt;
             &lt;property name=&quot;text&quot;&gt;
-             &lt;string&gt;Slice-based Threading&lt;/string&gt;
+             &lt;string&gt;Macroblock-tree Rate Control&lt;/string&gt;
             &lt;/property&gt;
            &lt;/widget&gt;
           &lt;/item&gt;
@@ -583,34 +639,28 @@
              &lt;number&gt;0&lt;/number&gt;
             &lt;/property&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QCheckBox&quot; name=&quot;threadedLookaheadCheckBox&quot;&gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;lblLookahead&quot;&gt;
               &lt;property name=&quot;text&quot;&gt;
-               &lt;string&gt;Custom Threaded Lookahead Buffer:&lt;/string&gt;
+               &lt;string&gt;Frametype Lookahead:&lt;/string&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QSpinBox&quot; name=&quot;threadedLookaheadSpinBox&quot;&gt;
-              &lt;property name=&quot;enabled&quot;&gt;
-               &lt;bool&gt;false&lt;/bool&gt;
-              &lt;/property&gt;
+             &lt;widget class=&quot;QSpinBox&quot; name=&quot;lookaheadSpinBox&quot;&gt;
               &lt;property name=&quot;maximum&quot;&gt;
                &lt;number&gt;250&lt;/number&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;widget class=&quot;QLabel&quot; name=&quot;lblThreadedFrames&quot;&gt;
-              &lt;property name=&quot;enabled&quot;&gt;
-               &lt;bool&gt;false&lt;/bool&gt;
-              &lt;/property&gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;lblLookaheadFrames&quot;&gt;
               &lt;property name=&quot;text&quot;&gt;
                &lt;string&gt;frames&lt;/string&gt;
               &lt;/property&gt;
              &lt;/widget&gt;
             &lt;/item&gt;
             &lt;item&gt;
-             &lt;spacer name=&quot;spacer&quot;&gt;
+             &lt;spacer name=&quot;spacer_3&quot;&gt;
               &lt;property name=&quot;orientation&quot;&gt;
                &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
               &lt;/property&gt;
@@ -2899,7 +2949,7 @@
      &lt;/widget&gt;
      &lt;widget class=&quot;QWidget&quot; name=&quot;tab_7&quot;&gt;
       &lt;attribute name=&quot;title&quot;&gt;
-       &lt;string&gt;Advanced&lt;/string&gt;
+       &lt;string&gt;Advanced 1&lt;/string&gt;
       &lt;/attribute&gt;
       &lt;layout class=&quot;QVBoxLayout&quot;&gt;
        &lt;property name=&quot;spacing&quot;&gt;
@@ -3276,6 +3326,175 @@
        &lt;/item&gt;
       &lt;/layout&gt;
      &lt;/widget&gt;
+     &lt;widget class=&quot;QWidget&quot; name=&quot;tab_9&quot;&gt;
+      &lt;attribute name=&quot;title&quot;&gt;
+       &lt;string&gt;Advanced 2&lt;/string&gt;
+      &lt;/attribute&gt;
+      &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;verticalLayout_4&quot;&gt;
+       &lt;item&gt;
+        &lt;widget class=&quot;QGroupBox&quot; name=&quot;groupBox_17&quot;&gt;
+         &lt;property name=&quot;title&quot;&gt;
+          &lt;string&gt;Multithreading&lt;/string&gt;
+         &lt;/property&gt;
+         &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;_2&quot;&gt;
+          &lt;property name=&quot;spacing&quot;&gt;
+           &lt;number&gt;6&lt;/number&gt;
+          &lt;/property&gt;
+          &lt;property name=&quot;margin&quot;&gt;
+           &lt;number&gt;9&lt;/number&gt;
+          &lt;/property&gt;
+          &lt;item&gt;
+           &lt;layout class=&quot;QVBoxLayout&quot; name=&quot;_4&quot;&gt;
+            &lt;property name=&quot;spacing&quot;&gt;
+             &lt;number&gt;6&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;margin&quot;&gt;
+             &lt;number&gt;0&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QRadioButton&quot; name=&quot;threadDisableRadioButton&quot;&gt;
+              &lt;property name=&quot;text&quot;&gt;
+               &lt;string&gt;Disable&lt;/string&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QRadioButton&quot; name=&quot;threadAutoDetectRadioButton&quot;&gt;
+              &lt;property name=&quot;text&quot;&gt;
+               &lt;string&gt;Auto-detect&lt;/string&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;checked&quot;&gt;
+               &lt;bool&gt;true&lt;/bool&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;_14&quot;&gt;
+              &lt;property name=&quot;spacing&quot;&gt;
+               &lt;number&gt;6&lt;/number&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;margin&quot;&gt;
+               &lt;number&gt;0&lt;/number&gt;
+              &lt;/property&gt;
+              &lt;item&gt;
+               &lt;widget class=&quot;QRadioButton&quot; name=&quot;threadCustomRadioButton&quot;&gt;
+                &lt;property name=&quot;text&quot;&gt;
+                 &lt;string comment=&quot;multithreading&quot;&gt;Custom:&lt;/string&gt;
+                &lt;/property&gt;
+               &lt;/widget&gt;
+              &lt;/item&gt;
+              &lt;item&gt;
+               &lt;widget class=&quot;QSpinBox&quot; name=&quot;threadCustomSpinBox&quot;&gt;
+                &lt;property name=&quot;enabled&quot;&gt;
+                 &lt;bool&gt;false&lt;/bool&gt;
+                &lt;/property&gt;
+                &lt;property name=&quot;minimum&quot;&gt;
+                 &lt;number&gt;2&lt;/number&gt;
+                &lt;/property&gt;
+                &lt;property name=&quot;maximum&quot;&gt;
+                 &lt;number&gt;32&lt;/number&gt;
+                &lt;/property&gt;
+               &lt;/widget&gt;
+              &lt;/item&gt;
+              &lt;item&gt;
+               &lt;spacer name=&quot;spacer_2&quot;&gt;
+                &lt;property name=&quot;orientation&quot;&gt;
+                 &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+                &lt;/property&gt;
+                &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+                 &lt;size&gt;
+                  &lt;width&gt;0&lt;/width&gt;
+                  &lt;height&gt;0&lt;/height&gt;
+                 &lt;/size&gt;
+                &lt;/property&gt;
+               &lt;/spacer&gt;
+              &lt;/item&gt;
+             &lt;/layout&gt;
+            &lt;/item&gt;
+           &lt;/layout&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QCheckBox&quot; name=&quot;repeatabilityCheckBox&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;Enforce Repeatability&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;widget class=&quot;QCheckBox&quot; name=&quot;sliceThreadingCheckBox&quot;&gt;
+            &lt;property name=&quot;text&quot;&gt;
+             &lt;string&gt;Slice-based Threading&lt;/string&gt;
+            &lt;/property&gt;
+           &lt;/widget&gt;
+          &lt;/item&gt;
+          &lt;item&gt;
+           &lt;layout class=&quot;QHBoxLayout&quot; name=&quot;_15&quot;&gt;
+            &lt;property name=&quot;spacing&quot;&gt;
+             &lt;number&gt;6&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;property name=&quot;margin&quot;&gt;
+             &lt;number&gt;0&lt;/number&gt;
+            &lt;/property&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QCheckBox&quot; name=&quot;threadedLookaheadCheckBox&quot;&gt;
+              &lt;property name=&quot;text&quot;&gt;
+               &lt;string&gt;Custom Threaded Lookahead Buffer:&lt;/string&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QSpinBox&quot; name=&quot;threadedLookaheadSpinBox&quot;&gt;
+              &lt;property name=&quot;enabled&quot;&gt;
+               &lt;bool&gt;false&lt;/bool&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;maximum&quot;&gt;
+               &lt;number&gt;250&lt;/number&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;widget class=&quot;QLabel&quot; name=&quot;lblThreadedFrames&quot;&gt;
+              &lt;property name=&quot;enabled&quot;&gt;
+               &lt;bool&gt;false&lt;/bool&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;text&quot;&gt;
+               &lt;string&gt;frames&lt;/string&gt;
+              &lt;/property&gt;
+             &lt;/widget&gt;
+            &lt;/item&gt;
+            &lt;item&gt;
+             &lt;spacer name=&quot;spacer&quot;&gt;
+              &lt;property name=&quot;orientation&quot;&gt;
+               &lt;enum&gt;Qt::Horizontal&lt;/enum&gt;
+              &lt;/property&gt;
+              &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+               &lt;size&gt;
+                &lt;width&gt;0&lt;/width&gt;
+                &lt;height&gt;0&lt;/height&gt;
+               &lt;/size&gt;
+              &lt;/property&gt;
+             &lt;/spacer&gt;
+            &lt;/item&gt;
+           &lt;/layout&gt;
+          &lt;/item&gt;
+         &lt;/layout&gt;
+        &lt;/widget&gt;
+       &lt;/item&gt;
+       &lt;item&gt;
+        &lt;spacer name=&quot;verticalSpacer&quot;&gt;
+         &lt;property name=&quot;orientation&quot;&gt;
+          &lt;enum&gt;Qt::Vertical&lt;/enum&gt;
+         &lt;/property&gt;
+         &lt;property name=&quot;sizeHint&quot; stdset=&quot;0&quot;&gt;
+          &lt;size&gt;
+           &lt;width&gt;20&lt;/width&gt;
+           &lt;height&gt;256&lt;/height&gt;
+          &lt;/size&gt;
+         &lt;/property&gt;
+        &lt;/spacer&gt;
+       &lt;/item&gt;
+      &lt;/layout&gt;
+     &lt;/widget&gt;
      &lt;widget class=&quot;QWidget&quot; name=&quot;tab_8&quot;&gt;
       &lt;attribute name=&quot;title&quot;&gt;
        &lt;string&gt;Output 1&lt;/string&gt;
@@ -4223,14 +4442,6 @@
   &lt;tabstop&gt;fastFirstPassCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;mbTreeCheckBox&lt;/tabstop&gt;
   &lt;tabstop&gt;lookaheadSpinBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;threadDisableRadioButton&lt;/tabstop&gt;
-  &lt;tabstop&gt;threadAutoDetectRadioButton&lt;/tabstop&gt;
-  &lt;tabstop&gt;threadCustomRadioButton&lt;/tabstop&gt;
-  &lt;tabstop&gt;threadCustomSpinBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;repeatabilityCheckBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;sliceThreadingCheckBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;threadedLookaheadCheckBox&lt;/tabstop&gt;
-  &lt;tabstop&gt;threadedLookaheadSpinBox&lt;/tabstop&gt;
   &lt;tabstop&gt;meMethodComboBox&lt;/tabstop&gt;
   &lt;tabstop&gt;meSlider&lt;/tabstop&gt;
   &lt;tabstop&gt;meSpinBox&lt;/tabstop&gt;
@@ -4300,6 +4511,14 @@
   &lt;tabstop&gt;zoneAddButton&lt;/tabstop&gt;
   &lt;tabstop&gt;zoneEditButton&lt;/tabstop&gt;
   &lt;tabstop&gt;zoneDeleteButton&lt;/tabstop&gt;
+  &lt;tabstop&gt;threadDisableRadioButton&lt;/tabstop&gt;
+  &lt;tabstop&gt;threadAutoDetectRadioButton&lt;/tabstop&gt;
+  &lt;tabstop&gt;threadCustomRadioButton&lt;/tabstop&gt;
+  &lt;tabstop&gt;threadCustomSpinBox&lt;/tabstop&gt;
+  &lt;tabstop&gt;repeatabilityCheckBox&lt;/tabstop&gt;
+  &lt;tabstop&gt;sliceThreadingCheckBox&lt;/tabstop&gt;
+  &lt;tabstop&gt;threadedLookaheadCheckBox&lt;/tabstop&gt;
+  &lt;tabstop&gt;threadedLookaheadSpinBox&lt;/tabstop&gt;
   &lt;tabstop&gt;idcLevelComboBox&lt;/tabstop&gt;
   &lt;tabstop&gt;spsiComboBox&lt;/tabstop&gt;
   &lt;tabstop&gt;accessUnitCheckBox&lt;/tabstop&gt;
@@ -4562,22 +4781,6 @@
    &lt;/hints&gt;
   &lt;/connection&gt;
   &lt;connection&gt;
-   &lt;sender&gt;threadCustomRadioButton&lt;/sender&gt;
-   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
-   &lt;receiver&gt;threadCustomSpinBox&lt;/receiver&gt;
-   &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
-   &lt;hints&gt;
-    &lt;hint type=&quot;sourcelabel&quot;&gt;
-     &lt;x&gt;32&lt;/x&gt;
-     &lt;y&gt;418&lt;/y&gt;
-    &lt;/hint&gt;
-    &lt;hint type=&quot;destinationlabel&quot;&gt;
-     &lt;x&gt;117&lt;/x&gt;
-     &lt;y&gt;419&lt;/y&gt;
-    &lt;/hint&gt;
-   &lt;/hints&gt;
-  &lt;/connection&gt;
-  &lt;connection&gt;
    &lt;sender&gt;aqVarianceCheckBox&lt;/sender&gt;
    &lt;signal&gt;toggled(bool)&lt;/signal&gt;
    &lt;receiver&gt;aqStrengthLabel&lt;/receiver&gt;
@@ -4642,52 +4845,100 @@
    &lt;/hints&gt;
   &lt;/connection&gt;
   &lt;connection&gt;
-   &lt;sender&gt;threadedLookaheadCheckBox&lt;/sender&gt;
+   &lt;sender&gt;interlacedCheckBox&lt;/sender&gt;
    &lt;signal&gt;toggled(bool)&lt;/signal&gt;
-   &lt;receiver&gt;threadedLookaheadSpinBox&lt;/receiver&gt;
+   &lt;receiver&gt;interlacedComboBox&lt;/receiver&gt;
    &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
    &lt;hints&gt;
     &lt;hint type=&quot;sourcelabel&quot;&gt;
-     &lt;x&gt;56&lt;/x&gt;
-     &lt;y&gt;495&lt;/y&gt;
+     &lt;x&gt;70&lt;/x&gt;
+     &lt;y&gt;149&lt;/y&gt;
     &lt;/hint&gt;
     &lt;hint type=&quot;destinationlabel&quot;&gt;
-     &lt;x&gt;280&lt;/x&gt;
-     &lt;y&gt;496&lt;/y&gt;
+     &lt;x&gt;151&lt;/x&gt;
+     &lt;y&gt;149&lt;/y&gt;
     &lt;/hint&gt;
    &lt;/hints&gt;
   &lt;/connection&gt;
   &lt;connection&gt;
-   &lt;sender&gt;threadedLookaheadCheckBox&lt;/sender&gt;
+   &lt;sender&gt;maxCrfCheckBox&lt;/sender&gt;
    &lt;signal&gt;toggled(bool)&lt;/signal&gt;
-   &lt;receiver&gt;lblThreadedFrames&lt;/receiver&gt;
+   &lt;receiver&gt;quantiserLabel1_2&lt;/receiver&gt;
    &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
    &lt;hints&gt;
     &lt;hint type=&quot;sourcelabel&quot;&gt;
-     &lt;x&gt;56&lt;/x&gt;
-     &lt;y&gt;495&lt;/y&gt;
+     &lt;x&gt;263&lt;/x&gt;
+     &lt;y&gt;248&lt;/y&gt;
     &lt;/hint&gt;
     &lt;hint type=&quot;destinationlabel&quot;&gt;
-     &lt;x&gt;319&lt;/x&gt;
-     &lt;y&gt;496&lt;/y&gt;
+     &lt;x&gt;97&lt;/x&gt;
+     &lt;y&gt;277&lt;/y&gt;
     &lt;/hint&gt;
    &lt;/hints&gt;
   &lt;/connection&gt;
   &lt;connection&gt;
-   &lt;sender&gt;interlacedCheckBox&lt;/sender&gt;
+   &lt;sender&gt;maxCrfCheckBox&lt;/sender&gt;
    &lt;signal&gt;toggled(bool)&lt;/signal&gt;
-   &lt;receiver&gt;interlacedComboBox&lt;/receiver&gt;
+   &lt;receiver&gt;quantiserLabel2_2&lt;/receiver&gt;
    &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
    &lt;hints&gt;
     &lt;hint type=&quot;sourcelabel&quot;&gt;
-     &lt;x&gt;70&lt;/x&gt;
-     &lt;y&gt;149&lt;/y&gt;
+     &lt;x&gt;263&lt;/x&gt;
+     &lt;y&gt;248&lt;/y&gt;
     &lt;/hint&gt;
     &lt;hint type=&quot;destinationlabel&quot;&gt;
-     &lt;x&gt;151&lt;/x&gt;
-     &lt;y&gt;149&lt;/y&gt;
+     &lt;x&gt;244&lt;/x&gt;
+     &lt;y&gt;277&lt;/y&gt;
     &lt;/hint&gt;
    &lt;/hints&gt;
   &lt;/connection&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;maxCrfCheckBox&lt;/sender&gt;
+   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+   &lt;receiver&gt;quantiserLabel3_2&lt;/receiver&gt;
+   &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot;&gt;
+     &lt;x&gt;263&lt;/x&gt;
+     &lt;y&gt;248&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot;&gt;
+     &lt;x&gt;393&lt;/x&gt;
+     &lt;y&gt;277&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;maxCrfCheckBox&lt;/sender&gt;
+   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+   &lt;receiver&gt;maxCrfSlider&lt;/receiver&gt;
+   &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot;&gt;
+     &lt;x&gt;263&lt;/x&gt;
+     &lt;y&gt;248&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot;&gt;
+     &lt;x&gt;246&lt;/x&gt;
+     &lt;y&gt;300&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
+  &lt;connection&gt;
+   &lt;sender&gt;maxCrfCheckBox&lt;/sender&gt;
+   &lt;signal&gt;toggled(bool)&lt;/signal&gt;
+   &lt;receiver&gt;maxCrfSpinBox&lt;/receiver&gt;
+   &lt;slot&gt;setEnabled(bool)&lt;/slot&gt;
+   &lt;hints&gt;
+    &lt;hint type=&quot;sourcelabel&quot;&gt;
+     &lt;x&gt;263&lt;/x&gt;
+     &lt;y&gt;248&lt;/y&gt;
+    &lt;/hint&gt;
+    &lt;hint type=&quot;destinationlabel&quot;&gt;
+     &lt;x&gt;467&lt;/x&gt;
+     &lt;y&gt;289&lt;/y&gt;
+    &lt;/hint&gt;
+   &lt;/hints&gt;
+  &lt;/connection&gt;
  &lt;/connections&gt;
 &lt;/ui&gt;

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2010-09-28 20:43:51 UTC (rev 6677)
@@ -813,6 +813,19 @@
 		_param.rc.i_qp_step = quantiserStep;
 }
 
+#if X264_BUILD &gt; 89
+unsigned int x264Options::getMaximumConstantRateFactor(void)
+{
+	return (unsigned int)_param.rc.f_rf_constant_max;
+}
+
+void x264Options::setMaximumConstantRateFactor(unsigned int maxCrf)
+{
+	if (maxCrf &lt;= 51)
+		_param.rc.f_rf_constant_max = maxCrf;
+}
+#endif
+
 float x264Options::getAverageBitrateTolerance(void)
 {
 	return _param.rc.f_rate_tolerance;
@@ -1400,6 +1413,9 @@
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;quantiserMinimum&quot;, number2String(xmlBuffer, bufferSize, getQuantiserMinimum()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;quantiserMaximum&quot;, number2String(xmlBuffer, bufferSize, getQuantiserMaximum()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;quantiserStep&quot;, number2String(xmlBuffer, bufferSize, getQuantiserStep()));
+#if X264_BUILD &gt; 89
+	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;maximumConstantRateFactor&quot;, number2String(xmlBuffer, bufferSize, getMaximumConstantRateFactor()));
+#endif
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;averageBitrateTolerance&quot;, number2String(xmlBuffer, bufferSize, getAverageBitrateTolerance()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;vbvMaximumBitrate&quot;, number2String(xmlBuffer, bufferSize, getVbvMaximumBitrate()));
 	xmlNewChild(xmlNodeChild, NULL, (xmlChar*)&quot;vbvBufferSize&quot;, number2String(xmlBuffer, bufferSize, getVbvBufferSize()));
@@ -1910,6 +1926,10 @@
 				setQuantiserMaximum(atoi(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;quantiserStep&quot;) == 0)
 				setQuantiserStep(atoi(content));
+#if X264_BUILD &gt; 89
+			else if (strcmp((char*)xmlChild-&gt;name, &quot;maximumConstantRateFactor&quot;) == 0)
+				setMaximumConstantRateFactor(atoi(content));
+#endif
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;averageBitrateTolerance&quot;) == 0)
 				setAverageBitrateTolerance(string2Float(content));
 			else if (strcmp((char*)xmlChild-&gt;name, &quot;vbvMaximumBitrate&quot;) == 0)

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.h	2010-09-28 20:43:51 UTC (rev 6677)
@@ -42,7 +42,6 @@
 #if X264_BUILD &gt; 85
 	bool _fastFirstPast;
 #endif
-
 	void cleanUp(void);
 
 	void addOptionsToXml(xmlNodePtr xmlNodeRoot);
@@ -264,6 +263,11 @@
 	unsigned int getQuantiserStep(void);
 	void setQuantiserStep(unsigned int quantiserStep);
 
+#if X264_BUILD &gt; 89
+	unsigned int getMaximumConstantRateFactor(void);
+	void setMaximumConstantRateFactor(unsigned int maxCrf);
+#endif
+
 	float getAverageBitrateTolerance(void);
 	void setAverageBitrateTolerance(float averageBitrateTolerance);
 

Modified: branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd
===================================================================
--- branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2010-09-28 05:31:17 UTC (rev 6676)
+++ branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Param.xsd	2010-09-28 20:43:51 UTC (rev 6677)
@@ -474,6 +474,14 @@
                         &lt;/xs:restriction&gt;
                       &lt;/xs:simpleType&gt;
                     &lt;/xs:element&gt;
+					&lt;xs:element name=&quot;maximumConstantRateFactor&quot; minOccurs=&quot;0&quot;&gt;
+					  &lt;xs:simpleType&gt;
+						&lt;xs:restriction base=&quot;xs:integer&quot;&gt;
+						  &lt;xs:minInclusive value=&quot;0&quot;/&gt;
+						  &lt;xs:maxInclusive value=&quot;51&quot;/&gt;
+						&lt;/xs:restriction&gt;
+					  &lt;/xs:simpleType&gt;
+					&lt;/xs:element&gt;
                     &lt;xs:element name=&quot;averageBitrateTolerance&quot; minOccurs=&quot;0&quot;&gt;
                       &lt;xs:simpleType&gt;
                         &lt;xs:restriction base=&quot;xs:float&quot;&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003860.html">[Avidemux-svn-commit] r6676 -	branches/avidemux_2.6_branch_mean/avidemux_core/ADM_coreUtils/src
</A></li>
	<LI>Next message: <A HREF="003862.html">[Avidemux-svn-commit] r6678 - in	branches/avidemux_2.5_branch_gruntster/plugins/ADM_videoEncoder/ADM_vidEnc_x264:	. qt4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3861">[ date ]</a>
              <a href="thread.html#3861">[ thread ]</a>
              <a href="subject.html#3861">[ subject ]</a>
              <a href="author.html#3861">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
