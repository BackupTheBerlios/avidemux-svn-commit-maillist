<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6299 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6299%20-%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog&In-Reply-To=%3C201006032106.o53L604o013901%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003491.html">
   <LINK REL="Next"  HREF="003493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6299 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6299%20-%0A%09branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog&In-Reply-To=%3C201006032106.o53L604o013901%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6299 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog">gruntster at mail.berlios.de
       </A><BR>
    <I>Thu Jun  3 23:06:00 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003491.html">[Avidemux-svn-commit] r6298 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
</A></li>
        <LI>Next message: <A HREF="003493.html">[Avidemux-svn-commit] r6300 -	branches/avidemux_2.5_branch_gruntster/po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3492">[ date ]</a>
              <a href="thread.html#3492">[ thread ]</a>
              <a href="subject.html#3492">[ subject ]</a>
              <a href="author.html#3492">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-06-03 23:05:53 +0200 (Thu, 03 Jun 2010)
New Revision: 6299

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
Log:
[i18n] enable translations for various Qt dialogs

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_encoding.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -24,6 +24,10 @@
 #include &quot;../ADM_gui/ADM_qtray.h&quot;
 #include &quot;ADM_toolkitQt.h&quot;
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
 extern void UI_iconify(void);
 extern void UI_deiconify(void);
 extern void UI_purge(void);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_jobs.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -1,205 +1,209 @@
-/**
-    Jobs dialog
-    (c) Mean 2007
-*/
-
-#include &quot;Q_jobs.h&quot;
-#include &quot;DIA_coreToolkit.h&quot;
-#include &quot;ADM_toolkitQt.h&quot;
-
-static void updateStatus(void);
-extern bool parseECMAScript(const char *name);
-static const char *StringStatus[]={QT_TR_NOOP(&quot;Ready&quot;),QT_TR_NOOP(&quot;Succeeded&quot;),QT_TR_NOOP(&quot;Failed&quot;),QT_TR_NOOP(&quot;Deleted&quot;),QT_TR_NOOP(&quot;Running&quot;)};
-
-ADM_Job_Descriptor::ADM_Job_Descriptor(void) 
-{
-	status = STATUS_READY;
-	memset(&amp;startDate, 0, sizeof(startDate));
-	memset(&amp;endDate, 0, sizeof(startDate));
-}
-
- /**
-          \fn jobsWindow
- */
-jobsWindow::jobsWindow(QWidget *parent, uint32_t n,char **j)     : QDialog(parent)
- {
-     ui.setupUi(this);
-     _nbJobs=n;
-     _jobsName=j;
-     desc=new ADM_Job_Descriptor[n];
-     // Setup display
-	 ui.tableWidget-&gt;setRowCount(_nbJobs);
-     ui.tableWidget-&gt;setColumnCount(4);
-
-     // Set headers
-      QStringList headers;
-     headers &lt;&lt; QT_TR_NOOP(&quot;Job Name&quot;) &lt;&lt; QT_TR_NOOP(&quot;Status&quot;) &lt;&lt; QT_TR_NOOP(&quot;Start Time&quot;) &lt;&lt; QT_TR_NOOP(&quot;End Time&quot;); 
-     
-     ui.tableWidget-&gt;setVerticalHeaderLabels(headers);
-     updateRows();
-    
-#define CNX(x) connect( ui.pushButton##x,SIGNAL(clicked(bool)),this,SLOT(x(bool)))
-           //connect( ui.pushButtonRunOne,SIGNAL(buttonPressed(const char *)),this,SLOT(runOne(const char *)));
-      CNX(RunOne);
-      CNX(RunAll);
-      CNX(DeleteAll);
-      CNX(DeleteOne);
- }
- /**
-    \fn ~jobsWindow
- */
-jobsWindow::~jobsWindow()
-{
-	delete [] desc;
-}
- /*
-    There is maybe a huge mem leak here
- */
-static void ADM_setText(const char *txt,uint32_t col, uint32_t row,QTableWidget *w)
-{
-	QString str = QString::fromUtf8(txt);
-        QTableWidgetItem *newItem = new QTableWidgetItem(str);//GetFileName(_jobsName[i]));
-        w-&gt;setItem(row, col, newItem);
-  
-}
- /**
-      \fn updateRaw
-      \brief update display for raw x
- */
-void jobsWindow::updateRows(void)
-{
-   ui.tableWidget-&gt;clear();
-   ADM_Job_Descriptor *j;
-   char str[20];
-   for(int i=0;i&lt;_nbJobs;i++)
-   {
-      j=&amp;(desc[i]);
-      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,ui.tableWidget);
-      ADM_setText(StringStatus[j-&gt;status],1,i,ui.tableWidget);
-      
-      sprintf(str,&quot;%02u:%02u:%02u&quot;,j-&gt;startDate.hours,j-&gt;startDate.minutes,j-&gt;startDate.seconds);
-      ADM_setText(str,2,i,ui.tableWidget);
-      
-      sprintf(str,&quot;%02u:%02u:%02u&quot;,j-&gt;endDate.hours,j-&gt;endDate.minutes,j-&gt;endDate.seconds);
-      ADM_setText(str,3,i,ui.tableWidget);
-   }
-}
-
-                                                                 
-                                                                 
-/**
-      \fn deleteOne
-      \brief delete one job
-*/
-void jobsWindow::DeleteOne(bool b)
-{
-	int sel = ui.tableWidget-&gt;currentRow();
-
-	if (sel &gt;= 0 &amp;&amp; sel &lt; _nbJobs)
-	{
-		if (GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;), QT_TR_NOOP(&quot;Delete job&quot;), QT_TR_NOOP(&quot;Are you sure you want to delete %s job?&quot;), ADM_GetFileName(_jobsName[sel])))
-		{
-			desc[sel].status = STATUS_DELETED;
-			unlink(_jobsName[sel]);
-			updateRows();
-		}
-	}
-}
-/**
-      \fn deleteAll
-      \brief delete all job
-*/
-void jobsWindow::DeleteAll(bool b)
-{
-	if (GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;), QT_TR_NOOP(&quot;Delete *all* job&quot;), QT_TR_NOOP(&quot;Are you sure you want to delete ALL jobs?&quot;)))
-	{
-		for(int sel = 0; sel &lt; _nbJobs; sel++)
-		{
-			desc[sel].status = STATUS_DELETED;
-			unlink(_jobsName[sel]);
-		}
-
-		updateRows();
-	}
-}
-                                                        
-/**
-      \fn runOne
-      \brief Run one job
-*/
-void jobsWindow::RunOne(bool b)
-{
-	int sel = ui.tableWidget-&gt;currentRow();
-	printf(&quot;Selected %d\n&quot;, sel);
-
-	if(sel &gt;= 0 &amp;&amp; sel &lt; _nbJobs)
-	{
-		if(desc[sel].status == STATUS_SUCCEED)
-			GUI_Info_HIG(ADM_LOG_INFO,QT_TR_NOOP(&quot;Already done&quot;),QT_TR_NOOP(&quot;This script has already been successfully executed.&quot;));
-		else
-		{
-			desc[sel].status=STATUS_RUNNING;
-			updateRows();
-			GUI_Quiet();
-			TLK_getDate(&amp;(desc[sel].startDate));
-
-			if(parseECMAScript(_jobsName[sel]))
-				desc[sel].status=STATUS_SUCCEED;
-			else
-				desc[sel].status=STATUS_FAILED;
-
-			TLK_getDate(&amp;(desc[sel].endDate));
-			updateRows();
-			GUI_Verbose();
-		}
-	}
-}
-/**
-      \fn RunAll
-      \brief Run all jobs
-*/
-void jobsWindow::RunAll(bool b)
-{
-	for(int sel=0;sel&lt;_nbJobs;sel++)
-	{
-		if(desc[sel].status == STATUS_SUCCEED || desc[sel].status == STATUS_DELETED)
-			continue;
-
-		desc[sel].status=STATUS_RUNNING;
-		updateRows();
-		GUI_Quiet();
-		TLK_getDate(&amp;(desc[sel].startDate));
-
-		if(parseECMAScript(_jobsName[sel]))
-			desc[sel].status=STATUS_SUCCEED;
-		else
-			desc[sel].status=STATUS_FAILED;
-
-		TLK_getDate(&amp;(desc[sel].endDate));
-		updateRows();
-		GUI_Verbose();
-	}
-}
-
-/**
-    \fn     DIA_job
-    \brief  
-*/
-uint8_t  DIA_job(uint32_t nb, char **name)
-{
-  uint8_t r=0;
-  jobsWindow jobswindow(qtLastRegisteredDialog(), nb,name);
-
-  qtRegisterDialog(&amp;jobswindow);
-     
-     if(jobswindow.exec()==QDialog::Accepted)
-     {
-       r=1;
-     }
-
-	 qtUnregisterDialog(&amp;jobswindow);
-
-     return r;
-}
-
-//EOF
+/**
+    Jobs dialog
+    (c) Mean 2007
+*/
+
+#include &quot;Q_jobs.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;ADM_toolkitQt.h&quot;
+
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
+static void updateStatus(void);
+extern bool parseECMAScript(const char *name);
+static const char *StringStatus[]={QT_TR_NOOP(&quot;Ready&quot;),QT_TR_NOOP(&quot;Succeeded&quot;),QT_TR_NOOP(&quot;Failed&quot;),QT_TR_NOOP(&quot;Deleted&quot;),QT_TR_NOOP(&quot;Running&quot;)};
+
+ADM_Job_Descriptor::ADM_Job_Descriptor(void) 
+{
+	status = STATUS_READY;
+	memset(&amp;startDate, 0, sizeof(startDate));
+	memset(&amp;endDate, 0, sizeof(startDate));
+}
+
+ /**
+          \fn jobsWindow
+ */
+jobsWindow::jobsWindow(QWidget *parent, uint32_t n,char **j) : QDialog(parent)
+{
+	ui.setupUi(this);
+	_nbJobs=n;
+	_jobsName=j;
+	desc=new ADM_Job_Descriptor[n];
+	// Setup display
+	ui.tableWidget-&gt;setRowCount(_nbJobs);
+	ui.tableWidget-&gt;setColumnCount(4);
+
+	// Set headers
+	QStringList headers;
+	headers &lt;&lt; QT_TR_NOOP(&quot;Job Name&quot;) &lt;&lt; QT_TR_NOOP(&quot;Status&quot;) &lt;&lt; QT_TR_NOOP(&quot;Start Time&quot;) &lt;&lt; QT_TR_NOOP(&quot;End Time&quot;); 
+
+	ui.tableWidget-&gt;setVerticalHeaderLabels(headers);
+	updateRows();
+
+#define CNX(x) connect( ui.pushButton##x,SIGNAL(clicked(bool)),this,SLOT(x(bool)))
+	//connect( ui.pushButtonRunOne,SIGNAL(buttonPressed(const char *)),this,SLOT(runOne(const char *)));
+	CNX(RunOne);
+	CNX(RunAll);
+	CNX(DeleteAll);
+	CNX(DeleteOne);
+}
+ /**
+    \fn ~jobsWindow
+ */
+jobsWindow::~jobsWindow()
+{
+	delete [] desc;
+}
+ /*
+    There is maybe a huge mem leak here
+ */
+static void ADM_setText(const char *txt,uint32_t col, uint32_t row,QTableWidget *w)
+{
+	QString str = QString::fromUtf8(txt);
+        QTableWidgetItem *newItem = new QTableWidgetItem(str);//GetFileName(_jobsName[i]));
+        w-&gt;setItem(row, col, newItem);
+  
+}
+ /**
+      \fn updateRaw
+      \brief update display for raw x
+ */
+void jobsWindow::updateRows(void)
+{
+   ui.tableWidget-&gt;clear();
+   ADM_Job_Descriptor *j;
+   char str[20];
+   for(int i=0;i&lt;_nbJobs;i++)
+   {
+      j=&amp;(desc[i]);
+      ADM_setText(ADM_GetFileName(_jobsName[i]),0,i,ui.tableWidget);
+      ADM_setText(StringStatus[j-&gt;status],1,i,ui.tableWidget);
+      
+      sprintf(str,&quot;%02u:%02u:%02u&quot;,j-&gt;startDate.hours,j-&gt;startDate.minutes,j-&gt;startDate.seconds);
+      ADM_setText(str,2,i,ui.tableWidget);
+      
+      sprintf(str,&quot;%02u:%02u:%02u&quot;,j-&gt;endDate.hours,j-&gt;endDate.minutes,j-&gt;endDate.seconds);
+      ADM_setText(str,3,i,ui.tableWidget);
+   }
+}
+
+                                                                 
+                                                                 
+/**
+      \fn deleteOne
+      \brief delete one job
+*/
+void jobsWindow::DeleteOne(bool b)
+{
+	int sel = ui.tableWidget-&gt;currentRow();
+
+	if (sel &gt;= 0 &amp;&amp; sel &lt; _nbJobs)
+	{
+		if (GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;), QT_TR_NOOP(&quot;Delete job&quot;), QT_TR_NOOP(&quot;Are you sure you want to delete %s job?&quot;), ADM_GetFileName(_jobsName[sel])))
+		{
+			desc[sel].status = STATUS_DELETED;
+			unlink(_jobsName[sel]);
+			updateRows();
+		}
+	}
+}
+/**
+      \fn deleteAll
+      \brief delete all job
+*/
+void jobsWindow::DeleteAll(bool b)
+{
+	if (GUI_Confirmation_HIG(QT_TR_NOOP(&quot;Sure!&quot;), QT_TR_NOOP(&quot;Delete *all* job&quot;), QT_TR_NOOP(&quot;Are you sure you want to delete ALL jobs?&quot;)))
+	{
+		for(int sel = 0; sel &lt; _nbJobs; sel++)
+		{
+			desc[sel].status = STATUS_DELETED;
+			unlink(_jobsName[sel]);
+		}
+
+		updateRows();
+	}
+}
+                                                        
+/**
+      \fn runOne
+      \brief Run one job
+*/
+void jobsWindow::RunOne(bool b)
+{
+	int sel = ui.tableWidget-&gt;currentRow();
+	printf(&quot;Selected %d\n&quot;, sel);
+
+	if(sel &gt;= 0 &amp;&amp; sel &lt; _nbJobs)
+	{
+		if(desc[sel].status == STATUS_SUCCEED)
+			GUI_Info_HIG(ADM_LOG_INFO,QT_TR_NOOP(&quot;Already done&quot;),QT_TR_NOOP(&quot;This script has already been successfully executed.&quot;));
+		else
+		{
+			desc[sel].status=STATUS_RUNNING;
+			updateRows();
+			GUI_Quiet();
+			TLK_getDate(&amp;(desc[sel].startDate));
+
+			if(parseECMAScript(_jobsName[sel]))
+				desc[sel].status=STATUS_SUCCEED;
+			else
+				desc[sel].status=STATUS_FAILED;
+
+			TLK_getDate(&amp;(desc[sel].endDate));
+			updateRows();
+			GUI_Verbose();
+		}
+	}
+}
+/**
+      \fn RunAll
+      \brief Run all jobs
+*/
+void jobsWindow::RunAll(bool b)
+{
+	for(int sel=0;sel&lt;_nbJobs;sel++)
+	{
+		if(desc[sel].status == STATUS_SUCCEED || desc[sel].status == STATUS_DELETED)
+			continue;
+
+		desc[sel].status=STATUS_RUNNING;
+		updateRows();
+		GUI_Quiet();
+		TLK_getDate(&amp;(desc[sel].startDate));
+
+		if(parseECMAScript(_jobsName[sel]))
+			desc[sel].status=STATUS_SUCCEED;
+		else
+			desc[sel].status=STATUS_FAILED;
+
+		TLK_getDate(&amp;(desc[sel].endDate));
+		updateRows();
+		GUI_Verbose();
+	}
+}
+
+/**
+    \fn     DIA_job
+    \brief  
+*/
+uint8_t  DIA_job(uint32_t nb, char **name)
+{
+  uint8_t r=0;
+  jobsWindow jobswindow(qtLastRegisteredDialog(), nb,name);
+
+  qtRegisterDialog(&amp;jobswindow);
+     
+     if(jobswindow.exec()==QDialog::Accepted)
+     {
+       r=1;
+     }
+
+	 qtUnregisterDialog(&amp;jobswindow);
+
+     return r;
+}
+
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_license.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -19,6 +19,10 @@
 #include &quot;ADM_default.h&quot;
 #include &quot;ADM_toolkitQt.h&quot;
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
 Ui_licenseWindow::Ui_licenseWindow(QWidget *parent) : QDialog(parent)
 {
 	ui.setupUi(this);

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_props.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -1,137 +1,141 @@
-/***************************************************************************
-    copyright            : (C) 2001 by mean
-    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;math.h&gt;
-
-#include &quot;Q_props.h&quot;
-#include &quot;avi_vars.h&quot;
-#include &quot;avidemutils.h&quot;
-#include &quot;ADM_video/ADM_vidMisc.h&quot;
-#include &quot;ADM_toolkitQt.h&quot;
-
-static const char *yesno[2]={QT_TR_NOOP(&quot;No&quot;),QT_TR_NOOP(&quot;Yes&quot;)};
-extern const char *getStrFromAudioCodec( uint32_t codec);
-
-propWindow::propWindow(QWidget *parent) : QDialog(parent)
- {
-     ui.setupUi(this);
-     uint8_t gmc, qpel,vop;
- uint32_t info=0;
- uint32_t war,har;
- uint16_t hh, mm, ss, ms;
- char text[80];
- const char *s;
-  
-    text[0] = 0;
-    if (!avifileinfo)
-        return;
-  
-        // Fetch info
-        info=video_body-&gt;getSpecificMpeg4Info();
-        vop=!!(info &amp; ADM_VOP_ON);
-        qpel=!!(info &amp; ADM_QPEL_ON);
-        gmc=!!(info &amp; ADM_GMC_ON);
-
-#define FILLTEXT(a,b,c) {snprintf(text,79,b,c);ui.a-&gt;setText(QString::fromUtf8(text));}
-#define FILLTEXT4(a,b,c,d) {snprintf(text,79,b,c,d);ui.a-&gt;setText(QString::fromUtf8(text));}
-#define FILLTEXT5(a,b,c,d,e) {snprintf(text,79,b,c,d,e);ui.a-&gt;setText(QString::fromUtf8(text));}
-        
-        FILLTEXT4(labeImageSize,QT_TR_NOOP(&quot;%lu x %lu&quot;), avifileinfo-&gt;width,avifileinfo-&gt;height);
-        FILLTEXT(labelFrameRate, QT_TR_NOOP(&quot;%2.3f fps&quot;), (float) avifileinfo-&gt;fps1000 / 1000.F);
-        FILLTEXT(labelNbOfFrames,QT_TR_NOOP(&quot;%ld frames&quot;), avifileinfo-&gt;nb_frames);
-        FILLTEXT(label4CC, &quot;%s&quot;,      fourCC::tostring(avifileinfo-&gt;fcc));
-        if (avifileinfo-&gt;nb_frames)
-          {
-                frame2time(avifileinfo-&gt;nb_frames, avifileinfo-&gt;fps1000,
-                          &amp;hh, &amp;mm, &amp;ss, &amp;ms);
-                snprintf(text,79, QT_TR_NOOP(&quot;%02d:%02d:%02d.%03d&quot;), hh, mm, ss, ms);
-                ui.labelVideoDuration-&gt;setText(QString::fromUtf8(text));
-          }
-        war=video_body-&gt;getPARWidth();
-        har=video_body-&gt;getPARHeight();
-        getAspectRatioFromAR(war,har, &amp;s);
-		FILLTEXT5(LabelAspectRatio,QT_TR_NOOP(&quot;%s (%u:%u)&quot;), s,war,har);
-#define SET_YES(a,b) ui.a-&gt;setText(QString::fromUtf8(yesno[b]))
-#define FILLQT_TR_NOOP(q) ui.q-&gt;setText(QString::fromUtf8(text));
-        SET_YES(LabelPackedBitstream,vop);
-        SET_YES(LabelQuarterPixel,qpel);
-        SET_YES(LabelGMC,gmc);
-        
-         WAVHeader *wavinfo=NULL;
-        if (currentaudiostream) wavinfo=currentaudiostream-&gt;getInfo();
-          if(wavinfo)
-          {
-              
-              switch (wavinfo-&gt;channels)
-                {
-                case 1:
-		  sprintf(text, &quot;%s&quot;, QT_TR_NOOP(&quot;Mono&quot;));
-                    break;
-                case 2:
-                    sprintf(text, &quot;%s&quot;, QT_TR_NOOP(&quot;Stereo&quot;));
-                    break;
-                default:
-                    sprintf(text, &quot;%d&quot;,wavinfo-&gt;channels);
-                    break;
-                }
-
-                FILLQT_TR_NOOP(labelChannels);
-                FILLTEXT(labelFrequency, QT_TR_NOOP(&quot;%lu Hz&quot;), wavinfo-&gt;frequency);
-                FILLTEXT4(labelBitrate, QT_TR_NOOP(&quot;%lu Bps / %lu kbps&quot;), wavinfo-&gt;byterate,wavinfo-&gt;byterate * 8 / 1000);
-                
-                sprintf(text, &quot;%s&quot;, getStrFromAudioCodec(wavinfo-&gt;encoding));
-                FILLQT_TR_NOOP(labelACodec);
-
-                // Duration in seconds too
-                if(currentaudiostream &amp;&amp; wavinfo-&gt;byterate&gt;1)
-                {
-                        uint32_t l=currentaudiostream-&gt;getLength();
-                        double du;
-                        du=l;
-                        du*=1000;
-                        du/=wavinfo-&gt;byterate;
-                        ms2time((uint32_t)floor(du), &amp;hh, &amp;mm, &amp;ss, &amp;ms);
-
-						sprintf(text, QT_TR_NOOP(&quot;%02d:%02d:%02d.%03d&quot;), hh, mm, ss, ms);
-						FILLQT_TR_NOOP(labelAudioDuration);
-
-						sprintf(text, QT_TR_NOOP(&quot;%.2f MB&quot;), l / 1048576.F);
-						FILLQT_TR_NOOP(labelFileSize);
-                }
-
-                SET_YES(labelVBR,currentaudiostream-&gt;isVBR());
-        } else
-          {
-			  ui.groupBoxAudio-&gt;setEnabled(false);
-          }
- }
-/**
-    \fn DIA_properties
-    \brief Display dialog with file information (size, codec, duration etc....)
-*/
-void DIA_properties( void )
-{
-
-      if (playing)
-        return;
-      if (!avifileinfo)
-        return;
-     // Fetch info
-     propWindow propwindow(qtLastRegisteredDialog());
-	 qtRegisterDialog(&amp;propwindow);
-     propwindow.exec();
-	 qtUnregisterDialog(&amp;propwindow);
-}  
-//********************************************
-//EOF
+/***************************************************************************
+    copyright            : (C) 2001 by mean
+    email                : <A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;math.h&gt;
+
+#include &quot;Q_props.h&quot;
+#include &quot;avi_vars.h&quot;
+#include &quot;avidemutils.h&quot;
+#include &quot;ADM_video/ADM_vidMisc.h&quot;
+#include &quot;ADM_toolkitQt.h&quot;
+
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
+static const char *yesno[2]={QT_TR_NOOP(&quot;No&quot;),QT_TR_NOOP(&quot;Yes&quot;)};
+extern const char *getStrFromAudioCodec( uint32_t codec);
+
+propWindow::propWindow(QWidget *parent) : QDialog(parent)
+ {
+     ui.setupUi(this);
+     uint8_t gmc, qpel,vop;
+ uint32_t info=0;
+ uint32_t war,har;
+ uint16_t hh, mm, ss, ms;
+ char text[80];
+ const char *s;
+  
+    text[0] = 0;
+    if (!avifileinfo)
+        return;
+  
+        // Fetch info
+        info=video_body-&gt;getSpecificMpeg4Info();
+        vop=!!(info &amp; ADM_VOP_ON);
+        qpel=!!(info &amp; ADM_QPEL_ON);
+        gmc=!!(info &amp; ADM_GMC_ON);
+
+#define FILLTEXT(a,b,c) {snprintf(text,79,b,c);ui.a-&gt;setText(QString::fromUtf8(text));}
+#define FILLTEXT4(a,b,c,d) {snprintf(text,79,b,c,d);ui.a-&gt;setText(QString::fromUtf8(text));}
+#define FILLTEXT5(a,b,c,d,e) {snprintf(text,79,b,c,d,e);ui.a-&gt;setText(QString::fromUtf8(text));}
+        
+        FILLTEXT4(labeImageSize,QT_TR_NOOP(&quot;%lu x %lu&quot;), avifileinfo-&gt;width,avifileinfo-&gt;height);
+        FILLTEXT(labelFrameRate, QT_TR_NOOP(&quot;%2.3f fps&quot;), (float) avifileinfo-&gt;fps1000 / 1000.F);
+        FILLTEXT(labelNbOfFrames,QT_TR_NOOP(&quot;%ld frames&quot;), avifileinfo-&gt;nb_frames);
+        FILLTEXT(label4CC, &quot;%s&quot;,      fourCC::tostring(avifileinfo-&gt;fcc));
+        if (avifileinfo-&gt;nb_frames)
+          {
+                frame2time(avifileinfo-&gt;nb_frames, avifileinfo-&gt;fps1000,
+                          &amp;hh, &amp;mm, &amp;ss, &amp;ms);
+                snprintf(text,79, QT_TR_NOOP(&quot;%02d:%02d:%02d.%03d&quot;), hh, mm, ss, ms);
+                ui.labelVideoDuration-&gt;setText(QString::fromUtf8(text));
+          }
+        war=video_body-&gt;getPARWidth();
+        har=video_body-&gt;getPARHeight();
+        getAspectRatioFromAR(war,har, &amp;s);
+		FILLTEXT5(LabelAspectRatio,QT_TR_NOOP(&quot;%s (%u:%u)&quot;), s,war,har);
+#define SET_YES(a,b) ui.a-&gt;setText(QString::fromUtf8(yesno[b]))
+#define FILLQT_TR_NOOP(q) ui.q-&gt;setText(QString::fromUtf8(text));
+        SET_YES(LabelPackedBitstream,vop);
+        SET_YES(LabelQuarterPixel,qpel);
+        SET_YES(LabelGMC,gmc);
+        
+         WAVHeader *wavinfo=NULL;
+        if (currentaudiostream) wavinfo=currentaudiostream-&gt;getInfo();
+          if(wavinfo)
+          {
+              
+              switch (wavinfo-&gt;channels)
+                {
+                case 1:
+		  sprintf(text, &quot;%s&quot;, QT_TR_NOOP(&quot;Mono&quot;));
+                    break;
+                case 2:
+                    sprintf(text, &quot;%s&quot;, QT_TR_NOOP(&quot;Stereo&quot;));
+                    break;
+                default:
+                    sprintf(text, &quot;%d&quot;,wavinfo-&gt;channels);
+                    break;
+                }
+
+                FILLQT_TR_NOOP(labelChannels);
+                FILLTEXT(labelFrequency, QT_TR_NOOP(&quot;%lu Hz&quot;), wavinfo-&gt;frequency);
+                FILLTEXT4(labelBitrate, QT_TR_NOOP(&quot;%lu Bps / %lu kbps&quot;), wavinfo-&gt;byterate,wavinfo-&gt;byterate * 8 / 1000);
+                
+                sprintf(text, &quot;%s&quot;, getStrFromAudioCodec(wavinfo-&gt;encoding));
+                FILLQT_TR_NOOP(labelACodec);
+
+                // Duration in seconds too
+                if(currentaudiostream &amp;&amp; wavinfo-&gt;byterate&gt;1)
+                {
+                        uint32_t l=currentaudiostream-&gt;getLength();
+                        double du;
+                        du=l;
+                        du*=1000;
+                        du/=wavinfo-&gt;byterate;
+                        ms2time((uint32_t)floor(du), &amp;hh, &amp;mm, &amp;ss, &amp;ms);
+
+						sprintf(text, QT_TR_NOOP(&quot;%02d:%02d:%02d.%03d&quot;), hh, mm, ss, ms);
+						FILLQT_TR_NOOP(labelAudioDuration);
+
+						sprintf(text, QT_TR_NOOP(&quot;%.2f MB&quot;), l / 1048576.F);
+						FILLQT_TR_NOOP(labelFileSize);
+                }
+
+                SET_YES(labelVBR,currentaudiostream-&gt;isVBR());
+        } else
+          {
+			  ui.groupBoxAudio-&gt;setEnabled(false);
+          }
+ }
+/**
+    \fn DIA_properties
+    \brief Display dialog with file information (size, codec, duration etc....)
+*/
+void DIA_properties( void )
+{
+
+      if (playing)
+        return;
+      if (!avifileinfo)
+        return;
+     // Fetch info
+     propWindow propwindow(qtLastRegisteredDialog());
+	 qtRegisterDialog(&amp;propwindow);
+     propwindow.exec();
+	 qtUnregisterDialog(&amp;propwindow);
+}  
+//********************************************
+//EOF

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_vobsub.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -20,6 +20,10 @@
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;ADM_toolkitQt.h&quot;
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
 //
 //	Video is in YV12 Colorspace
 //

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/T_index_pg.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -28,6 +28,10 @@
 #include &quot;ADM_video/ADM_vidMisc.h&quot;
 #include &quot;ADM_toolkitQt.h&quot;
 
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
 extern void UI_purge( void );
 
 void Ui_iDialog::setupUi(QDialog *Dialog)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2010-06-03 18:10:11 UTC (rev 6298)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/alert_qt4.cpp	2010-06-03 21:05:53 UTC (rev 6299)
@@ -1,247 +1,251 @@
-/**
-    \file alert_qt4
-   copyright            : (C) 2007 by mean
-    email                : Mean/<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
- ***************************************************************************/
-
-/***************************************************************************
- *                                                                         *
- *   This program is free software; you can redistribute it and/or modify  *
- *   it under the terms of the GNU General Public License as published by  *
- *   the Free Software Foundation; either version 2 of the License, or     *
- *   (at your option) any later version.                                   *
- *                                                                         *
- ***************************************************************************/
-
-#include &lt;QtGui/QDialog&gt;
-#include &lt;QtGui/QMessageBox&gt;
-#include &quot;ADM_default.h&quot;
-#include &quot;DIA_coreToolkit.h&quot;
-#include &quot;DIA_coreUI_internal.h&quot;
-#include &quot;prefs.h&quot;
-#include &quot;ADM_toolkitQt.h&quot;
-
-static int beQuiet=0;
-extern QWidget *QuiMainWindows;
-namespace ADM_Qt4CoreUIToolkit
-{
-//****************************************************************************************************
-void            GUI_Alert(const char *alertstring)
-{
-    QMessageBox::StandardButton reply;
-              reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Alert&quot;)),
-                                        QString::fromUtf8(alertstring),
-                                        QMessageBox::Ok );
-}
-//****************************************************************************************************
-void            GUI_Info(const char *alertstring)
-{
-    QMessageBox::StandardButton reply;
-              reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
-                                        QString::fromUtf8(alertstring),
-                                        QMessageBox::Ok );
-}
-
-//****************************************************************************************************
-void GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
-{
-	uint32_t msglvl = 2;
-	QString alertString;
-
-	prefs-&gt;get(MESSAGE_LEVEL, &amp;msglvl);
-
-	if (msglvl&lt;level)
-	{
-		printf(&quot;Info: %s\n&quot;,primary);
-		return;
-	}
-
-	if (!secondary_format)
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
-	else
-	{
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
-		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
-		alertString, QMessageBox::Ok);
-}
-//****************************************************************************************************
-void GUI_Error_HIG(const char *primary, const char *secondary_format)
-{
-	uint32_t msglvl = 2;
-	QString alertString;
-
-	prefs-&gt;get(MESSAGE_LEVEL, &amp;msglvl);
-
-	if (msglvl == ADM_LOG_NONE)
-	{
-		printf(&quot;Error: %s\n&quot;, primary);
-		return;
-	}
-
-	if (!secondary_format)
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
-	else
-	{
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
-		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
-		alertString, QMessageBox::Ok);
-}
-//****************************************************************************************************
-int GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format)
-{
-	QString alertString;
-
-	if (beQuiet)
-	{
-		printf(&quot;Info: %s\n&quot;, primary);
-		return 0;
-	}
-
-	if (!secondary_format)
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
-	else
-	{
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
-		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Confirmation&quot;)),
-		alertString, QMessageBox::Yes | QMessageBox::No);
-
-	if (reply == QMessageBox::Yes)
-		return 1;
-
-	return 0;
-}
-//****************************************************************************************************
-int GUI_YesNo(const char *primary, const char *secondary_format)
-{
-	uint32_t msglvl = 2;
-	QString alertString;
-
-	if (beQuiet)
-	{
-		printf(&quot;Info: %s\n&quot;, primary);
-		return 0;
-	}
-
-	if (!secondary_format)
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
-	else
-	{
-		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
-		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
-	}
-
-	QMessageBox::StandardButton reply;
-
-	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Confirmation&quot;)),
-		alertString, QMessageBox::Yes | QMessageBox::No);
-
-	if (reply == QMessageBox::Yes)
-		return 1;
-
-	return 0; 
-}
-//****************************************************************************************************
-int             GUI_Question(const char *alertstring)
-{
- QMessageBox::StandardButton reply;
-          if (beQuiet)
-              {
-                      printf(&quot;Question: %s\n&quot;, alertstring);
-                      return 0;
-              }
-          reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Question&quot;)),
-                                    QString::fromUtf8(alertstring),
-                                    QMessageBox::Yes | QMessageBox::No );
-          if(reply==QMessageBox::Yes) return 1;
-          return 0;
-}
-/**
-    \fn GUI_Alternate(char *title,char *choice1,char *choice2)
-    \brief Popup a dialog box name title with 2 buttons (choice1/choice2)
-    \return 0 if first is selected, 1 if second
-*/
-int      GUI_Alternate(char *title,char *choice1,char *choice2)
-{
-	if (beQuiet)
-	{
-		printf(&quot;Alternate&lt;%s&gt;: %s or %s\n&quot;, title,choice1,choice2);
-		return 0;
-	}
-
-	QMessageBox box(qtLastRegisteredDialog());
-
-	box.setWindowTitle(QString::fromUtf8(QT_TR_NOOP(&quot;Question ?&quot;)));
-	box.addButton(QString::fromUtf8(choice1),QMessageBox::YesRole);
-	box.addButton(QString::fromUtf8(choice2),QMessageBox::NoRole);
-
-	if (title)
-		box.setText(QString::fromUtf8(title));
-	else
-		box.setText(QString::fromUtf8(QT_TR_NOOP(&quot;Question&quot;)));
-
-	box.setIcon(QMessageBox::Question);
-
-	if (box.exec() == 0)
-		return 1;
-	else
-		return 0;
-}
-//****************************************************************************************************
-uint8_t  GUI_getDoubleValue(double *valye, float min, float max, const char *title)
-{
-  
-  
-  return 0; 
-}
-//****************************************************************************************************
-uint8_t		GUI_isQuiet(void)
-{
-    return beQuiet;
-}
-//****************************************************************************************************
-void            GUI_Verbose(void)
-{
-    beQuiet=0;
-}
-//****************************************************************************************************
-void            GUI_Quiet(void)
-{
-  beQuiet=1;
-}
-//****************************************************************************************************
-}
-
-static CoreToolkitDescriptor Qt4CoreToolkitDescriptor=
-{
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Info_HIG,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Error_HIG,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Confirmation_HIG,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_YesNo,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Question,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Alternate,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Verbose,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_Quiet,
-		&amp;ADM_Qt4CoreUIToolkit::GUI_isQuiet
-};
-
-void InitCoreToolkit(void )
-{
-	DIA_toolkitInit(&amp;Qt4CoreToolkitDescriptor);
-	
-}
-//EOF
+/**
+    \file alert_qt4
+   copyright            : (C) 2007 by mean
+    email                : Mean/<A HREF="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">fixounet at free.fr</A>
+ ***************************************************************************/
+
+/***************************************************************************
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ ***************************************************************************/
+
+#include &lt;QtGui/QDialog&gt;
+#include &lt;QtGui/QMessageBox&gt;
+#include &quot;ADM_default.h&quot;
+#include &quot;DIA_coreToolkit.h&quot;
+#include &quot;DIA_coreUI_internal.h&quot;
+#include &quot;prefs.h&quot;
+#include &quot;ADM_toolkitQt.h&quot;
+
+#undef QT_TR_NOOP
+extern const char* translate(const char *__domainname, const char *__msgid);
+#define QT_TR_NOOP(x) translate(&quot;&quot;, x)
+
+static int beQuiet=0;
+extern QWidget *QuiMainWindows;
+namespace ADM_Qt4CoreUIToolkit
+{
+//****************************************************************************************************
+void            GUI_Alert(const char *alertstring)
+{
+    QMessageBox::StandardButton reply;
+              reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Alert&quot;)),
+                                        QString::fromUtf8(alertstring),
+                                        QMessageBox::Ok );
+}
+//****************************************************************************************************
+void            GUI_Info(const char *alertstring)
+{
+    QMessageBox::StandardButton reply;
+              reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
+                                        QString::fromUtf8(alertstring),
+                                        QMessageBox::Ok );
+}
+
+//****************************************************************************************************
+void GUI_Info_HIG(const ADM_LOG_LEVEL level,const char *primary, const char *secondary_format)
+{
+	uint32_t msglvl = 2;
+	QString alertString;
+
+	prefs-&gt;get(MESSAGE_LEVEL, &amp;msglvl);
+
+	if (msglvl&lt;level)
+	{
+		printf(&quot;Info: %s\n&quot;,primary);
+		return;
+	}
+
+	if (!secondary_format)
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
+	else
+	{
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
+		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::information(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
+		alertString, QMessageBox::Ok);
+}
+//****************************************************************************************************
+void GUI_Error_HIG(const char *primary, const char *secondary_format)
+{
+	uint32_t msglvl = 2;
+	QString alertString;
+
+	prefs-&gt;get(MESSAGE_LEVEL, &amp;msglvl);
+
+	if (msglvl == ADM_LOG_NONE)
+	{
+		printf(&quot;Error: %s\n&quot;, primary);
+		return;
+	}
+
+	if (!secondary_format)
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
+	else
+	{
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
+		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::critical(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Info&quot;)),
+		alertString, QMessageBox::Ok);
+}
+//****************************************************************************************************
+int GUI_Confirmation_HIG(const char *button_confirm, const char *primary, const char *secondary_format)
+{
+	QString alertString;
+
+	if (beQuiet)
+	{
+		printf(&quot;Info: %s\n&quot;, primary);
+		return 0;
+	}
+
+	if (!secondary_format)
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
+	else
+	{
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
+		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Confirmation&quot;)),
+		alertString, QMessageBox::Yes | QMessageBox::No);
+
+	if (reply == QMessageBox::Yes)
+		return 1;
+
+	return 0;
+}
+//****************************************************************************************************
+int GUI_YesNo(const char *primary, const char *secondary_format)
+{
+	uint32_t msglvl = 2;
+	QString alertString;
+
+	if (beQuiet)
+	{
+		printf(&quot;Info: %s\n&quot;, primary);
+		return 0;
+	}
+
+	if (!secondary_format)
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&quot;;
+	else
+	{
+		alertString = &quot;&lt;big&gt;&lt;b&gt;&quot; + QString::fromUtf8(primary) + &quot;&lt;/b&gt;&lt;/big&gt;&lt;br&gt;&lt;br&gt;&quot; + QString::fromUtf8(secondary_format);
+		alertString.replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;);
+	}
+
+	QMessageBox::StandardButton reply;
+
+	reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Confirmation&quot;)),
+		alertString, QMessageBox::Yes | QMessageBox::No);
+
+	if (reply == QMessageBox::Yes)
+		return 1;
+
+	return 0; 
+}
+//****************************************************************************************************
+int             GUI_Question(const char *alertstring)
+{
+ QMessageBox::StandardButton reply;
+          if (beQuiet)
+              {
+                      printf(&quot;Question: %s\n&quot;, alertstring);
+                      return 0;
+              }
+          reply = QMessageBox::question(qtLastRegisteredDialog(), QString::fromUtf8(QT_TR_NOOP(&quot;Question&quot;)),
+                                    QString::fromUtf8(alertstring),
+                                    QMessageBox::Yes | QMessageBox::No );
+          if(reply==QMessageBox::Yes) return 1;
+          return 0;
+}
+/**
+    \fn GUI_Alternate(char *title,char *choice1,char *choice2)
+    \brief Popup a dialog box name title with 2 buttons (choice1/choice2)
+    \return 0 if first is selected, 1 if second
+*/
+int      GUI_Alternate(char *title,char *choice1,char *choice2)
+{
+	if (beQuiet)
+	{
+		printf(&quot;Alternate&lt;%s&gt;: %s or %s\n&quot;, title,choice1,choice2);
+		return 0;
+	}
+
+	QMessageBox box(qtLastRegisteredDialog());
+
+	box.setWindowTitle(QString::fromUtf8(QT_TR_NOOP(&quot;Question ?&quot;)));
+	box.addButton(QString::fromUtf8(choice1),QMessageBox::YesRole);
+	box.addButton(QString::fromUtf8(choice2),QMessageBox::NoRole);
+
+	if (title)
+		box.setText(QString::fromUtf8(title));
+	else
+		box.setText(QString::fromUtf8(QT_TR_NOOP(&quot;Question&quot;)));
+
+	box.setIcon(QMessageBox::Question);
+
+	if (box.exec() == 0)
+		return 1;
+	else
+		return 0;
+}
+//****************************************************************************************************
+uint8_t  GUI_getDoubleValue(double *valye, float min, float max, const char *title)
+{
+  
+  
+  return 0; 
+}
+//****************************************************************************************************
+uint8_t		GUI_isQuiet(void)
+{
+    return beQuiet;
+}
+//****************************************************************************************************
+void            GUI_Verbose(void)
+{
+    beQuiet=0;
+}
+//****************************************************************************************************
+void            GUI_Quiet(void)
+{
+  beQuiet=1;
+}
+//****************************************************************************************************
+}
+
+static CoreToolkitDescriptor Qt4CoreToolkitDescriptor=
+{
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Info_HIG,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Error_HIG,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Confirmation_HIG,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_YesNo,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Question,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Alternate,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Verbose,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_Quiet,
+		&amp;ADM_Qt4CoreUIToolkit::GUI_isQuiet
+};
+
+void InitCoreToolkit(void )
+{
+	DIA_toolkitInit(&amp;Qt4CoreToolkitDescriptor);
+	
+}
+//EOF


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003491.html">[Avidemux-svn-commit] r6298 -	branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_filters
</A></li>
	<LI>Next message: <A HREF="003493.html">[Avidemux-svn-commit] r6300 -	branches/avidemux_2.5_branch_gruntster/po
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3492">[ date ]</a>
              <a href="thread.html#3492">[ thread ]</a>
              <a href="subject.html#3492">[ subject ]</a>
              <a href="author.html#3492">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
