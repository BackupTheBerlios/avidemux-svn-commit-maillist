<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Avidemux-svn-commit] r6339 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_core/include	avidemux/ADM_coreImage/src avidemux/ADM_encoder	avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_videoFilter cmake cmake/patches
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/avidemux-svn-commit/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6339%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_codecs%20avidemux/ADM_core/include%0A%09avidemux/ADM_coreImage/src%20avidemux/ADM_encoder%0A%09avidemux/ADM_outputs%20avidemux/ADM_outputs/oplug_avi%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09avidemux/ADM_videoFilter%20cmake%20cmake/patches&In-Reply-To=%3C201006071936.o57JaIhZ027618%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003531.html">
   <LINK REL="Next"  HREF="003533.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Avidemux-svn-commit] r6339 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_core/include	avidemux/ADM_coreImage/src avidemux/ADM_encoder	avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_videoFilter cmake cmake/patches</H1>
    <B>gruntster at mail.berlios.de</B> 
    <A HREF="mailto:avidemux-svn-commit%40lists.berlios.de?Subject=Re%3A%20%5BAvidemux-svn-commit%5D%20r6339%20-%20in%0A%09branches/avidemux_2.5_branch_gruntster%3A%20avidemux%0A%09avidemux/ADM_codecs%20avidemux/ADM_core/include%0A%09avidemux/ADM_coreImage/src%20avidemux/ADM_encoder%0A%09avidemux/ADM_outputs%20avidemux/ADM_outputs/oplug_avi%0A%09avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog%0A%09avidemux/ADM_userInterfaces/ADM_commonUI%0A%09avidemux/ADM_videoFilter%20cmake%20cmake/patches&In-Reply-To=%3C201006071936.o57JaIhZ027618%40sheep.berlios.de%3E"
       TITLE="[Avidemux-svn-commit] r6339 - in	branches/avidemux_2.5_branch_gruntster: avidemux	avidemux/ADM_codecs avidemux/ADM_core/include	avidemux/ADM_coreImage/src avidemux/ADM_encoder	avidemux/ADM_outputs avidemux/ADM_outputs/oplug_avi	avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog	avidemux/ADM_userInterfaces/ADM_commonUI	avidemux/ADM_videoFilter cmake cmake/patches">gruntster at mail.berlios.de
       </A><BR>
    <I>Mon Jun  7 21:36:18 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003531.html">[Avidemux-svn-commit] r6338 - in	branches/avidemux_2.5_branch_gruntster/scripts: auto	auto/Apple auto/Optical Disc video
</A></li>
        <LI>Next message: <A HREF="003533.html">[Avidemux-svn-commit] r6340 -	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3532">[ date ]</a>
              <a href="thread.html#3532">[ thread ]</a>
              <a href="subject.html#3532">[ subject ]</a>
              <a href="author.html#3532">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: gruntster
Date: 2010-06-07 21:36:07 +0200 (Mon, 07 Jun 2010)
New Revision: 6339

Modified:
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
   branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
   branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
   branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
Log:
[ffmpeg] update FFmpeg to r23514 &amp; libswscale to r31344

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_codecs/ADM_codecs.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -18,15 +18,15 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;config.h&quot;
+#include &quot;ADM_default.h&quot;
 
-
 #ifdef USE_FFMPEG
 extern &quot;C&quot;
 {
 #include &quot;ADM_lavcodec.h&quot;
 };
 #endif
-#include &quot;ADM_default.h&quot;
+
 #ifdef BIG_ENDIAN
 #undef BIG_ENDIAN
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_default.h	2010-06-07 19:36:07 UTC (rev 6339)
@@ -19,11 +19,6 @@
 #ifndef ADM_DEFAULT_H
 #define ADM_DEFAULT_H
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-
-#include &quot;ADM_coreConfig.h&quot;
 #include &quot;ADM_inttype.h&quot;
 #include &quot;ADM_assert.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_core/include/ADM_inttype.h	2010-06-07 19:36:07 UTC (rev 6339)
@@ -11,11 +11,6 @@
 
 #include &quot;ADM_coreConfig.h&quot;
 
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &lt;unistd.h&gt;
-
 /*
    	The maximum width/height is MAXIMUM_SIZE 768*768 for now
 */
@@ -24,6 +19,8 @@
 typedef unsigned char ADM_filename;
 
 #ifdef HAVE_STDINT_H
+#define __STDC_LIMIT_MACROS
+#define __STDC_CONSTANT_MACROS
 #include &lt;stdint.h&gt;
 #define GOT_TYPES
 #endif
@@ -67,4 +64,8 @@
 #define ADM_OK 	1
 #define ADM_IGN 2
 
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;string.h&gt;
+#include &lt;unistd.h&gt;
 #endif

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_coreImage/src/ADM_pp.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -17,11 +17,10 @@
 // strength between 0 and 5
 
 
-#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_default.h&quot;
+#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_pp.h&quot;
 
-
 #define aprintf printf
 
 void deletePostProc(ADM_PP *pp)

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_encoder/adm_encConfig.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -16,9 +16,9 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 
+#include &quot;ADM_assert.h&quot;
 #include &quot;ADM_lavcodec.h&quot;
 
-#include &quot;ADM_assert.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;ADM_osSupport/ADM_quota.h&quot;
 #include &quot;ADM_editor/ADM_edit.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/ADM_lavformat.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -21,10 +21,7 @@
 #define __STDC_LIMIT_MACROS
 
 #include &quot;config.h&quot;
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;math.h&gt;
-#include &lt;string.h&gt;
+#include &quot;ADM_default.h&quot;
 
 extern &quot;C&quot;
 {
@@ -35,7 +32,6 @@
 #undef realloc
 #undef free
 
-#include &quot;ADM_default.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;
 
 #include &quot;ADM_audiofilter/audioprocess.hxx&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_outputs/oplug_avi/op_avisavecopy_pack.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -17,6 +17,7 @@
  *                                                                         *
  ***************************************************************************/
 #include &quot;config.h&quot;
+#include &quot;ADM_default.h&quot;
 
 extern &quot;C&quot;
 {
@@ -28,7 +29,7 @@
 #undef printf
 }
 
-#include &quot;ADM_default.h&quot;
+
 #include &quot;ADM_threads.h&quot;
 
 #include &quot;fourcc.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_QT4/ADM_dialog/Q_about.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -16,6 +16,8 @@
  ***************************************************************************/
 
 #include &quot;config.h&quot;
+#undef QT_TR_NOOP
+
 #include &quot;Q_about.h&quot;
 #include &quot;ADM_inttype.h&quot;
 #include &quot;ADM_toolkitQt.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_requant.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -5,15 +5,10 @@
 */
 #include &quot;config.h&quot;
 
-
-#include &quot;ADM_lavcodec.h&quot;
-
 #include &quot;ADM_default.h&quot;
-
+#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;
 #include &quot;ADM_encoder/ADM_vidEncode.hxx&quot;
-
-  
 #include &quot;DIA_factory.h&quot;
 
 /**

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_userInterfaces/ADM_commonUI/DIA_tsSub.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -16,17 +16,14 @@
  ***************************************************************************/
 #include &quot;config.h&quot;
 
-#include &lt;math.h&gt;
-
-#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_default.h&quot;
+#include &quot;ADM_lavcodec.h&quot;
 
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;DIA_factory.h&quot;
 #include &quot;ADM_inputs/ADM_mpegdemuxer/dmx_mpegstartcode.h&quot;
 #include &quot;ADM_inputs/ADM_mpegdemuxer/dmx_demuxerTS.h&quot;
 
-
 #include &quot;ADM_codecs/ADM_codec.h&quot;
 #include &quot;ADM_codecs/ADM_ffmp43.h&quot;
 

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/ADM_videoFilter/ADM_vidDvbSub.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -21,17 +21,11 @@
 
 
 #include &quot;config.h&quot;
-
-#include &lt;stdio.h&gt;
-#include &lt;stdlib.h&gt;
-#include &lt;string.h&gt;
-#include &quot;ADM_lavcodec.h&quot;
-#include &quot;ADM_assert.h&quot;
 #include &quot;ADM_default.h&quot;
+#include &quot;ADM_lavcodec.h&quot;
 #include &quot;ADM_videoFilterDynamic.h&quot;
 #include &quot;fourcc.h&quot;
 
-
 #include &quot;ADM_videoFilter.h&quot;
 #include &quot;ADM_colorspace.h&quot;
 #include &quot;ADM_codecs/ADM_codec.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp
===================================================================
--- branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/avidemux/gtk_gui.cpp	2010-06-07 19:36:07 UTC (rev 6339)
@@ -24,10 +24,10 @@
 #include &lt;sys/time.h&gt;
 #include &lt;errno.h&gt;
 
+#include &quot;ADM_assert.h&quot;
 #include &quot;ADM_lavcodec.h&quot;
 #include &quot;fourcc.h&quot;
 #include &quot;avi_vars.h&quot;
-#include &quot;ADM_assert.h&quot;
 #include &quot;DIA_fileSel.h&quot;
 #include &quot;prototype.h&quot;
 #include &quot;DIA_coreToolkit.h&quot;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/admFFmpegBuild.cmake	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,7 +1,7 @@
 include(admFFmpegUtil)
 
-set(FFMPEG_VERSION 22831)	# <A HREF="http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=887b9ab184ed849001bbf9c5bad60d52d92e688c;sf=tgz">http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=887b9ab184ed849001bbf9c5bad60d52d92e688c;sf=tgz</A>
-set(SWSCALE_VERSION 31028)	# <A HREF="http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=a9639b0b6c96c6b0c30ec1ef6f737f1204a2697a;sf=tgz">http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=a9639b0b6c96c6b0c30ec1ef6f737f1204a2697a;sf=tgz</A>
+set(FFMPEG_VERSION 23514)	# <A HREF="http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=e98e85c1eb2e0b00e95714d98c61ffa55be349d4;sf=tgz">http://git.ffmpeg.org/?p=ffmpeg;a=snapshot;h=e98e85c1eb2e0b00e95714d98c61ffa55be349d4;sf=tgz</A>
+set(SWSCALE_VERSION 31344)	# <A HREF="http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=0eac904069b4398edd7d57784eb56883b26ee380;sf=tgz">http://git.ffmpeg.org/?p=libswscale;a=snapshot;h=0eac904069b4398edd7d57784eb56883b26ee380;sf=tgz</A>
 
 set(LIBRARY_SOURCE_DIR &quot;${CMAKE_SOURCE_DIR}/avidemux/ADM_libraries&quot;)
 set(FFMPEG_SOURCE_DIR &quot;${LIBRARY_SOURCE_DIR}/ffmpeg&quot;)

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_avcodec.h.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,19 +1,19 @@
-*** libavcodec/avcodec.h.old	Sun Apr 11 11:34:06 2010
---- libavcodec/avcodec.h	Sun Apr 11 11:34:06 2010
+*** libavcodec/avcodec.h.old	Mon Jun  7 19:34:55 2010
+--- libavcodec/avcodec.h	Mon Jun  7 19:34:55 2010
 ***************
-*** 597,602 ****
---- 597,604 ----
-  #define CODEC_FLAG2_MBTREE        0x00040000 ///&lt; Use macroblock tree ratecontrol (x264 only)
+*** 599,604 ****
+--- 599,606 ----
   #define CODEC_FLAG2_PSY           0x00080000 ///&lt; Use psycho visual optimizations.
   #define CODEC_FLAG2_SSIM          0x00100000 ///&lt; Compute SSIM during encoding, error[] values are undefined.
+  #define CODEC_FLAG2_INTRA_REFRESH 0x00200000 ///&lt; Use periodic insertion of intra blocks instead of keyframes.
 + //MEANX: NEVER EVER USE CLOSED GOP ?
 + #define CODEC_FLAG2_32_PULLDOWN   0x80000000
   
   /* Unsupported options :
    *              Syntax Arithmetic coding (SAC)
 ***************
-*** 1467,1472 ****
---- 1469,1475 ----
+*** 1474,1479 ****
+--- 1476,1482 ----
        * - decoding: unused
        */
       int rc_max_rate;
@@ -22,8 +22,8 @@
       /**
        * minimum bitrate
 ***************
-*** 1481,1486 ****
---- 1484,1491 ----
+*** 1488,1493 ****
+--- 1491,1498 ----
        * - decoding: unused
        */
       int rc_buffer_size;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h263dec.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,5 +1,5 @@
-*** libavcodec/h263dec.c.old	Sat Mar 27 20:05:34 2010
---- libavcodec/h263dec.c	Sat Mar 27 20:05:34 2010
+*** libavcodec/h263dec.c.old	Mon Jun  7 19:34:58 2010
+--- libavcodec/h263dec.c	Mon Jun  7 19:34:58 2010
 ***************
 *** 119,124 ****
 --- 119,143 ----
@@ -44,8 +44,8 @@
       if(ret==FRAME_SKIPPED) return get_consumed_bytes(s, buf_size);
   
 ***************
-*** 707,712 ****
---- 732,745 ----
+*** 709,714 ****
+--- 734,747 ----
   
   assert(s-&gt;current_picture.pict_type == s-&gt;current_picture_ptr-&gt;pict_type);
   assert(s-&gt;current_picture.pict_type == s-&gt;pict_type);

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_h264.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,8 +1,8 @@
-*** libavcodec/h264.c.old	Sun Apr 11 11:34:08 2010
---- libavcodec/h264.c	Sun Apr 11 11:34:08 2010
+*** libavcodec/h264.c.old	Mon Jun  7 19:34:59 2010
+--- libavcodec/h264.c	Mon Jun  7 19:34:59 2010
 ***************
-*** 3146,3151 ****
---- 3146,3164 ----
+*** 3381,3386 ****
+--- 3381,3399 ----
       return 0;
   }
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_mpegvideo.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,7 +1,7 @@
-*** libavcodec/mpegvideo.c.old	Sat Mar 27 20:05:38 2010
---- libavcodec/mpegvideo.c	Sat Mar 27 20:05:39 2010
+*** libavcodec/mpegvideo.c.old	Mon Jun  7 19:35:02 2010
+--- libavcodec/mpegvideo.c	Mon Jun  7 19:35:02 2010
 ***************
-*** 646,652 ****
+*** 641,647 ****
       FF_ALLOCZ_OR_GOTO(s-&gt;avctx, s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
   
       s-&gt;parse_context.state= -1;
@@ -9,7 +9,7 @@
          s-&gt;visualization_buffer[0] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
          s-&gt;visualization_buffer[1] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
          s-&gt;visualization_buffer[2] = av_malloc((s-&gt;mb_width*16 + 2*EDGE_WIDTH) * s-&gt;mb_height*16 + 2*EDGE_WIDTH);
---- 646,656 ----
+--- 641,651 ----
       FF_ALLOCZ_OR_GOTO(s-&gt;avctx, s-&gt;prev_pict_types, PREV_PICT_TYPES_BUFFER_SIZE, fail);
   
       s-&gt;parse_context.state= -1;

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavcodec_utils.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,5 +1,5 @@
-*** libavcodec/utils.c.old	Sun Apr 11 11:34:10 2010
---- libavcodec/utils.c	Sun Apr 11 11:34:10 2010
+*** libavcodec/utils.c.old	Mon Jun  7 19:35:04 2010
+--- libavcodec/utils.c	Mon Jun  7 19:35:04 2010
 ***************
 *** 643,652 ****
 --- 643,654 ----
@@ -16,7 +16,7 @@
           *frame_size_ptr &lt; avctx-&gt;channels * avctx-&gt;frame_size * sizeof(int16_t)){
               av_log(avctx, AV_LOG_ERROR, &quot;buffer %d too small\n&quot;, *frame_size_ptr);
 ***************
-*** 1085,1091 ****
+*** 1091,1097 ****
           return -1;
       }
   #if !HAVE_MKSTEMP
@@ -24,7 +24,7 @@
   #else
       snprintf(*filename, len, &quot;/tmp/%sXXXXXX&quot;, prefix);
       fd = mkstemp(*filename);
---- 1087,1093 ----
+--- 1093,1099 ----
           return -1;
       }
   #if !HAVE_MKSTEMP

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_isom.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,7 +1,7 @@
-*** libavformat/isom.c.old	Sun Jan 17 19:05:32 2010
---- libavformat/isom.c	Sun Jan 17 19:05:32 2010
+*** libavformat/isom.c.old	Mon Jun  7 19:35:06 2010
+--- libavformat/isom.c	Mon Jun  7 19:35:06 2010
 ***************
-*** 205,211 ****
+*** 213,219 ****
       { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
       { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   
@@ -9,7 +9,7 @@
       { CODEC_ID_MP3, 0x6D730055 }, /* MPEG layer 3 */
   
   /*  { CODEC_ID_OGG_VORBIS, MKTAG('O', 'g', 'g', 'S') }, *//* sample files at <A HREF="http://heroinewarrior.com/xmovie.php3">http://heroinewarrior.com/xmovie.php3</A> use this tag */
---- 205,214 ----
+--- 213,222 ----
       { CODEC_ID_MP1, MKTAG('.', 'm', 'p', '1') }, /* MPEG layer 1 */
       { CODEC_ID_MP2, MKTAG('.', 'm', 'p', '2') }, /* MPEG layer 2 */
   

Modified: branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch
===================================================================
--- branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2010-06-07 18:42:29 UTC (rev 6338)
+++ branches/avidemux_2.5_branch_gruntster/cmake/patches/libavformat_matroskaenc.c.patch	2010-06-07 19:36:07 UTC (rev 6339)
@@ -1,8 +1,8 @@
-*** libavformat/matroskaenc.c.old	Sat Mar 27 20:05:45 2010
---- libavformat/matroskaenc.c	Sat Mar 27 20:05:45 2010
+*** libavformat/matroskaenc.c.old	Mon Jun  7 19:35:07 2010
+--- libavformat/matroskaenc.c	Mon Jun  7 19:35:07 2010
 ***************
-*** 403,408 ****
---- 403,409 ----
+*** 408,413 ****
+--- 408,414 ----
   
   static int put_xiph_codecpriv(AVFormatContext *s, ByteIOContext *pb, AVCodecContext *codec)
   {
@@ -11,8 +11,8 @@
       int header_len[3];
       int first_header_size;
 ***************
-*** 427,432 ****
---- 428,455 ----
+*** 432,437 ****
+--- 433,460 ----
           put_buffer(pb, header_start[j], header_len[j]);
   
       return 0;
@@ -42,10 +42,10 @@
   
   static void get_aac_sample_rates(AVFormatContext *s, AVCodecContext *codec, int *sample_rate, int *output_sample_rate)
 ***************
-*** 546,551 ****
---- 569,592 ----
+*** 550,555 ****
+--- 573,596 ----
+          put_ebml_uint (pb, MATROSKA_ID_TRACKUID        , i + 1);
           put_ebml_uint (pb, MATROSKA_ID_TRACKFLAGLACING , 0);    // no lacing (yet)
-          put_ebml_float(pb, MATROSKA_ID_TRACKTIMECODESCALE, 1.0);
   
 +  		/**  MEANX : Add a default duration for video **/
 +  		if(codec-&gt;codec_type==CODEC_TYPE_VIDEO)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003531.html">[Avidemux-svn-commit] r6338 - in	branches/avidemux_2.5_branch_gruntster/scripts: auto	auto/Apple auto/Optical Disc video
</A></li>
	<LI>Next message: <A HREF="003533.html">[Avidemux-svn-commit] r6340 -	branches/avidemux_2.5_branch_gruntster/platforms/windows/build_scripts/avidemux
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3532">[ date ]</a>
              <a href="thread.html#3532">[ thread ]</a>
              <a href="subject.html#3532">[ subject ]</a>
              <a href="author.html#3532">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/avidemux-svn-commit">More information about the Avidemux-svn-commit
mailing list</a><br>
</body></html>
